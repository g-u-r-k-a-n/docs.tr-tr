---
title: Yönetilen İş Parçacıklarında Özel Durumlar
ms.date: 03/30/2017
ms.technology: dotnet-standard
helpviewer_keywords:
- unhandled exceptions,in managed threads
- threading [.NET Framework],unhandled exceptions
- threading [.NET Framework],exceptions in managed threads
- managed threading
ms.assetid: 11294769-2e89-43cb-890e-ad4ad79cfbee
ms.openlocfilehash: 6c14c60b30f8f70aa5e888ed45d6f867154e18d8
ms.sourcegitcommit: 00aa62e2f469c2272a457b04e66b4cc3c97a800b
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 02/28/2020
ms.locfileid: "78159656"
---
# <a name="exceptions-in-managed-threads"></a><span data-ttu-id="1eba1-102">Yönetilen İş Parçacıklarında Özel Durumlar</span><span class="sxs-lookup"><span data-stu-id="1eba1-102">Exceptions in Managed Threads</span></span>
<span data-ttu-id="1eba1-103">.NET Framework sürüm 2,0 ' den başlayarak, ortak dil çalışma zamanı, iş parçacıklarında birçok işlenmemiş özel durumun doğal olarak devam etmesine izin verir.</span><span class="sxs-lookup"><span data-stu-id="1eba1-103">Starting with the .NET Framework version 2.0, the common language runtime allows most unhandled exceptions in threads to proceed naturally.</span></span> <span data-ttu-id="1eba1-104">Çoğu durumda bu, işlenmeyen özel durumun uygulamanın sonlandırılmasına neden olduğu anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="1eba1-104">In most cases this means that the unhandled exception causes the application to terminate.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="1eba1-105">Bu, çok sayıda işlenmemiş özel durum için geri durağı sağlayan 1,0 ve 1,1 .NET Framework sürümlerinden önemli bir değişiklikten (örneğin, iş parçacığı havuzu iş parçacıklarında işlenmemiş özel durumlar).</span><span class="sxs-lookup"><span data-stu-id="1eba1-105">This is a significant change from the .NET Framework versions 1.0 and 1.1, which provide a backstop for many unhandled exceptions — for example, unhandled exceptions in thread pool threads.</span></span> <span data-ttu-id="1eba1-106">Bu konunun ilerleyen kısımlarında bulunan [önceki sürümlerden değişiklik](#ChangeFromPreviousVersions) bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="1eba1-106">See [Change from Previous Versions](#ChangeFromPreviousVersions) later in this topic.</span></span>  
  
 <span data-ttu-id="1eba1-107">Ortak dil çalışma zamanı, program akışını denetlemek için kullanılan, işlenmemiş özel durumlar için bir geri durağı sağlar:</span><span class="sxs-lookup"><span data-stu-id="1eba1-107">The common language runtime provides a backstop for certain unhandled exceptions that are used for controlling program flow:</span></span>  
  
- <span data-ttu-id="1eba1-108"><xref:System.Threading.Thread.Abort%2A> çağrıldığı için bir iş parçacığında <xref:System.Threading.ThreadAbortException> oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="1eba1-108">A <xref:System.Threading.ThreadAbortException> is thrown in a thread because <xref:System.Threading.Thread.Abort%2A> was called.</span></span>  
  
- <span data-ttu-id="1eba1-109">İş parçacığının yürütüldüğü uygulama etki alanı kaldırıldığından bir iş parçacığında <xref:System.AppDomainUnloadedException> oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="1eba1-109">An <xref:System.AppDomainUnloadedException> is thrown in a thread because the application domain in which the thread is executing is being unloaded.</span></span>  
  
- <span data-ttu-id="1eba1-110">Ortak dil çalışma zamanı veya bir konak işlemi, bir iç özel durum oluşturarak iş parçacığını sonlandırır.</span><span class="sxs-lookup"><span data-stu-id="1eba1-110">The common language runtime or a host process terminates the thread by throwing an internal exception.</span></span>  
  
 <span data-ttu-id="1eba1-111">Bu özel durumların herhangi biri ortak dil çalışma zamanı tarafından oluşturulan iş parçacıklarında yakalanmadıysa, özel durum iş parçacığını sonlandırır, ancak ortak dil çalışma zamanı özel durumun daha fazla devam edeceğine izin vermez.</span><span class="sxs-lookup"><span data-stu-id="1eba1-111">If any of these exceptions are unhandled in threads created by the common language runtime, the exception terminates the thread, but the common language runtime does not allow the exception to proceed further.</span></span>  
  
 <span data-ttu-id="1eba1-112">Bu özel durumlar ana iş parçacığında işlenmemiş veya yönetilmeyen koddan çalışma zamanına giren iş parçacıklarında, normalde devam ederler ve uygulamanın sonlandırmasına yol açar.</span><span class="sxs-lookup"><span data-stu-id="1eba1-112">If these exceptions are unhandled in the main thread, or in threads that entered the runtime from unmanaged code, they proceed normally, resulting in termination of the application.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="1eba1-113">Yönetilen herhangi bir kodun özel durum işleyicisi yüklemesi şansı olmadan önce, çalışma zamanının işlenmeyen bir özel durum oluşturması mümkündür.</span><span class="sxs-lookup"><span data-stu-id="1eba1-113">It is possible for the runtime to throw an unhandled exception before any managed code has had a chance to install an exception handler.</span></span> <span data-ttu-id="1eba1-114">Yönetilen kodun böyle bir özel durumu işleme şansı olmasa da, özel durumun doğal olarak devam etmesi için izin verilir.</span><span class="sxs-lookup"><span data-stu-id="1eba1-114">Even though managed code had no chance to handle such an exception, the exception is allowed to proceed naturally.</span></span>  
  
## <a name="exposing-threading-problems-during-development"></a><span data-ttu-id="1eba1-115">Geliştirme sırasında Iş parçacığı sorunlarını gösterme</span><span class="sxs-lookup"><span data-stu-id="1eba1-115">Exposing Threading Problems During Development</span></span>  
 <span data-ttu-id="1eba1-116">İş parçacıklarının sessizce başarısız olmasına izin verildiğinde, uygulamayı sonlandırmadan ciddi programlama sorunları saptanmayabilir.</span><span class="sxs-lookup"><span data-stu-id="1eba1-116">When threads are allowed to fail silently, without terminating the application, serious programming problems can go undetected.</span></span> <span data-ttu-id="1eba1-117">Bu, geliştirilmiş dönemler için çalışan hizmetler ve diğer uygulamalar için özel bir sorundur.</span><span class="sxs-lookup"><span data-stu-id="1eba1-117">This is a particular problem for services and other applications which run for extended periods.</span></span> <span data-ttu-id="1eba1-118">İş parçacıkları başarısız olduğu sürece program durumu yavaş yavaş bozulur.</span><span class="sxs-lookup"><span data-stu-id="1eba1-118">As threads fail, program state gradually becomes corrupted.</span></span> <span data-ttu-id="1eba1-119">Uygulama performansı düşebilir veya uygulama yanıt vermiyor olabilir.</span><span class="sxs-lookup"><span data-stu-id="1eba1-119">Application performance may degrade, or the application might become unresponsive.</span></span>  
  
 <span data-ttu-id="1eba1-120">İşletim sistemi programı sonlandırana kadar, iş parçacıklarında işlenmeyen özel durumların doğal olarak devam etmesini sağlamak, geliştirme ve test sırasında böyle sorunlar ortaya çıkarır.</span><span class="sxs-lookup"><span data-stu-id="1eba1-120">Allowing unhandled exceptions in threads to proceed naturally, until the operating system terminates the program, exposes such problems during development and testing.</span></span> <span data-ttu-id="1eba1-121">Program sonlandırışları üzerindeki hata raporları hata ayıklamayı destekler.</span><span class="sxs-lookup"><span data-stu-id="1eba1-121">Error reports on program terminations support debugging.</span></span>  
  
<a name="ChangeFromPreviousVersions"></a>
## <a name="change-from-previous-versions"></a><span data-ttu-id="1eba1-122">Önceki sürümlerden Değiştir</span><span class="sxs-lookup"><span data-stu-id="1eba1-122">Change from Previous Versions</span></span>  
 <span data-ttu-id="1eba1-123">En önemli değişiklik, yönetilen iş parçacıkları ile ilgilidir.</span><span class="sxs-lookup"><span data-stu-id="1eba1-123">The most significant change pertains to managed threads.</span></span> <span data-ttu-id="1eba1-124">.NET Framework sürüm 1,0 ve 1,1 ' de, ortak dil çalışma zamanı, işlenmemiş özel durumlar için aşağıdaki durumlarda bir geri durağı sağlar:</span><span class="sxs-lookup"><span data-stu-id="1eba1-124">In the .NET Framework versions 1.0 and 1.1, the common language runtime provides a backstop for unhandled exceptions in the following situations:</span></span>  
  
- <span data-ttu-id="1eba1-125">İş parçacığı havuzu iş parçacığında işlenmemiş özel durum gibi bir şey yoktur.</span><span class="sxs-lookup"><span data-stu-id="1eba1-125">There is no such thing as an unhandled exception on a thread pool thread.</span></span> <span data-ttu-id="1eba1-126">Bir görev, işlenmeyen bir özel durum oluşturduğunda, çalışma zamanı özel durum yığın izlemesini konsola yazdırır ve iş parçacığını iş parçacığı havuzuna döndürür.</span><span class="sxs-lookup"><span data-stu-id="1eba1-126">When a task throws an exception that it does not handle, the runtime prints the exception stack trace to the console and then returns the thread to the thread pool.</span></span>  
  
- <span data-ttu-id="1eba1-127"><xref:System.Threading.Thread> sınıfının <xref:System.Threading.Thread.Start%2A> yöntemiyle oluşturulan bir iş parçacığında işlenmeyen bir özel durum yoktur.</span><span class="sxs-lookup"><span data-stu-id="1eba1-127">There is no such thing as an unhandled exception on a thread created with the <xref:System.Threading.Thread.Start%2A> method of the <xref:System.Threading.Thread> class.</span></span> <span data-ttu-id="1eba1-128">Böyle bir iş parçacığı üzerinde çalışan kod, işlenmeyen bir özel durum oluşturduğunda, çalışma zamanı özel durum yığın izlemesini konsola yazdırır ve sonra iş parçacığını normal şekilde sonlandırır.</span><span class="sxs-lookup"><span data-stu-id="1eba1-128">When code running on such a thread throws an exception that it does not handle, the runtime prints the exception stack trace to the console and then gracefully terminates the thread.</span></span>  
  
- <span data-ttu-id="1eba1-129">Sonlandırıcı iş parçacığında işlenmeyen bir özel durum yok.</span><span class="sxs-lookup"><span data-stu-id="1eba1-129">There is no such thing as an unhandled exception on the finalizer thread.</span></span> <span data-ttu-id="1eba1-130">Bir Sonlandırıcı, işlenmeyen bir özel durum oluşturduğunda, çalışma zamanı özel durum yığın izlemesini konsola yazdırır ve sonra Sonlandırıcı iş parçacığının sonlandırıcıları çalıştırmaya sürdürmesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="1eba1-130">When a finalizer throws an exception that it does not handle, the runtime prints the exception stack trace to the console and then allows the finalizer thread to resume running finalizers.</span></span>  
  
 <span data-ttu-id="1eba1-131">Yönetilen bir iş parçacığının ön plan veya arka plan durumu bu davranışı etkilemez.</span><span class="sxs-lookup"><span data-stu-id="1eba1-131">The foreground or background status of a managed thread does not affect this behavior.</span></span>  
  
 <span data-ttu-id="1eba1-132">Yönetilmeyen kodda oluşan iş parçacıklarında işlenmeyen özel durumlar için, fark daha hafif olur.</span><span class="sxs-lookup"><span data-stu-id="1eba1-132">For unhandled exceptions on threads originating in unmanaged code, the difference is more subtle.</span></span> <span data-ttu-id="1eba1-133">Çalışma zamanı JıT-iliştirme iletişim kutusu, yönetilen özel durumlar veya yerel kod üzerinden geçen iş parçacıklarında yerel özel durumlar için işletim sistemi iletişim kutusunu preempts.</span><span class="sxs-lookup"><span data-stu-id="1eba1-133">The runtime JIT-attach dialog preempts the operating system dialog for managed exceptions or native exceptions on threads that have passed through native code.</span></span> <span data-ttu-id="1eba1-134">İşlem her durumda sonlandırılır.</span><span class="sxs-lookup"><span data-stu-id="1eba1-134">The process terminates in all cases.</span></span>  
  
### <a name="migrating-code"></a><span data-ttu-id="1eba1-135">Kodu geçirme</span><span class="sxs-lookup"><span data-stu-id="1eba1-135">Migrating Code</span></span>  
 <span data-ttu-id="1eba1-136">Genellikle, değişiklik, daha önce tanınmayan programlama sorunlarını düzeltilmek üzere kullanıma sunacaktır.</span><span class="sxs-lookup"><span data-stu-id="1eba1-136">In general, the change will expose previously unrecognized programming problems so that they can be fixed.</span></span> <span data-ttu-id="1eba1-137">Ancak, bazı durumlarda programcılar çalışma zamanı geri 'den faydalanabilir, örneğin iş parçacıklarını sonlandırmak için.</span><span class="sxs-lookup"><span data-stu-id="1eba1-137">In some cases, however, programmers might have taken advantage of the runtime backstop, for example to terminate threads.</span></span> <span data-ttu-id="1eba1-138">Duruma bağlı olarak, aşağıdaki geçiş stratejilerinden birini göz önünde bulundurmalıdır:</span><span class="sxs-lookup"><span data-stu-id="1eba1-138">Depending on the situation, they should consider one of the following migration strategies:</span></span>  
  
- <span data-ttu-id="1eba1-139">Bir sinyal alındığında iş parçacığının düzgün bir şekilde çıkış yapabilmesi için kodu yeniden yapılandır.</span><span class="sxs-lookup"><span data-stu-id="1eba1-139">Restructure the code so the thread exits gracefully when a signal is received.</span></span>  
  
- <span data-ttu-id="1eba1-140">İş parçacığını durdurmak için <xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType> yöntemini kullanın.</span><span class="sxs-lookup"><span data-stu-id="1eba1-140">Use the <xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType> method to abort the thread.</span></span>  
  
- <span data-ttu-id="1eba1-141">İşlem sonlandırmasının devam edebilmesi için bir iş parçacığının durdurulması gerekiyorsa, işlem çıkışında otomatik olarak sonlandırılmak için iş parçacığını bir arka plan iş parçacığı yapın.</span><span class="sxs-lookup"><span data-stu-id="1eba1-141">If a thread must be stopped so that process termination can proceed, make the thread a background thread so that it is automatically terminated on process exit.</span></span>  
  
 <span data-ttu-id="1eba1-142">Her durumda, strateji özel durumlar için tasarım kılavuzunu izlemelidir.</span><span class="sxs-lookup"><span data-stu-id="1eba1-142">In all cases, the strategy should follow the design guidelines for exceptions.</span></span> <span data-ttu-id="1eba1-143">[Özel durumlar Için tasarım yönergelerine](../../../docs/standard/design-guidelines/exceptions.md)bakın.</span><span class="sxs-lookup"><span data-stu-id="1eba1-143">See [Design Guidelines for Exceptions](../../../docs/standard/design-guidelines/exceptions.md).</span></span>  
  
### <a name="application-compatibility-flag"></a><span data-ttu-id="1eba1-144">Uygulama uyumluluğu bayrağı</span><span class="sxs-lookup"><span data-stu-id="1eba1-144">Application Compatibility Flag</span></span>  
 <span data-ttu-id="1eba1-145">Geçici bir uyumluluk ölçüsü olarak Yöneticiler, uygulama yapılandırma dosyasının `<runtime>` bölümüne bir uyumluluk bayrağı yerleştirebilir.</span><span class="sxs-lookup"><span data-stu-id="1eba1-145">As a temporary compatibility measure, administrators can place a compatibility flag in the `<runtime>` section of the application configuration file.</span></span> <span data-ttu-id="1eba1-146">Bu, ortak dil çalışma zamanının 1,0 ve 1,1 sürümlerinin davranışına dönüşmesine neden olur.</span><span class="sxs-lookup"><span data-stu-id="1eba1-146">This causes the common language runtime to revert to the behavior of versions 1.0 and 1.1.</span></span>  
  
```xml  
<legacyUnhandledExceptionPolicy enabled="1"/>  
```  
  
## <a name="host-override"></a><span data-ttu-id="1eba1-147">Konak geçersiz kılma</span><span class="sxs-lookup"><span data-stu-id="1eba1-147">Host Override</span></span>  
 <span data-ttu-id="1eba1-148">.NET Framework sürüm 2,0 ' de, yönetilmeyen bir konak, ortak dil çalışma zamanının varsayılan işlenmemiş özel durum ilkesini geçersiz kılmak için barındırma API 'sindeki [ICLRPolicyManager](../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-interface.md) arabirimini kullanabilir.</span><span class="sxs-lookup"><span data-stu-id="1eba1-148">In the .NET Framework version 2.0, an unmanaged host can use the [ICLRPolicyManager](../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-interface.md) interface in the Hosting API to override the default unhandled exception policy of the common language runtime.</span></span> <span data-ttu-id="1eba1-149">[ICLRPolicyManager:: SetUnhandledExceptionPolicy](../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-setunhandledexceptionpolicy-method.md) işlevi, işlenmemiş özel durumlar için ilkeyi ayarlamak üzere kullanılır.</span><span class="sxs-lookup"><span data-stu-id="1eba1-149">The [ICLRPolicyManager::SetUnhandledExceptionPolicy](../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-setunhandledexceptionpolicy-method.md) function is used to set the policy for unhandled exceptions.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1eba1-150">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="1eba1-150">See also</span></span>

- [<span data-ttu-id="1eba1-151">Yönetilen İş Parçacığı Oluşturma Temelleri</span><span class="sxs-lookup"><span data-stu-id="1eba1-151">Managed Threading Basics</span></span>](../../../docs/standard/threading/managed-threading-basics.md)
