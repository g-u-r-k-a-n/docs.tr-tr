---
title: Zaman uyumsuz dönüş türleri (C#)
description: Zaman uyumsuz yöntemlerin C# ' de sahip olduğu dönüş türleri hakkında bilgi edinmek için her tür ve ek kaynaklar için kod örneklerine sahip olabilir.
ms.date: 08/19/2020
ms.assetid: ddb2539c-c898-48c1-ad92-245e4a996df8
ms.openlocfilehash: 53eb3bedebb99cd829101eee4c2e190c0fb952bf
ms.sourcegitcommit: 1dbe25ff484a02025d5c34146e517c236f7161fb
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/19/2021
ms.locfileid: "104653458"
---
# <a name="async-return-types-c"></a><span data-ttu-id="4665b-103">Zaman uyumsuz dönüş türleri (C#)</span><span class="sxs-lookup"><span data-stu-id="4665b-103">Async return types (C#)</span></span>

<span data-ttu-id="4665b-104">Zaman uyumsuz metotlar aşağıdaki dönüş türlerine sahip olabilir:</span><span class="sxs-lookup"><span data-stu-id="4665b-104">Async methods can have the following return types:</span></span>

- <span data-ttu-id="4665b-105"><xref:System.Threading.Tasks.Task>, bir işlem gerçekleştiren ancak değer döndüren zaman uyumsuz bir yöntem için.</span><span class="sxs-lookup"><span data-stu-id="4665b-105"><xref:System.Threading.Tasks.Task>, for an async method that performs an operation but returns no value.</span></span>
- <span data-ttu-id="4665b-106"><xref:System.Threading.Tasks.Task%601>, bir değer döndüren zaman uyumsuz bir yöntem için.</span><span class="sxs-lookup"><span data-stu-id="4665b-106"><xref:System.Threading.Tasks.Task%601>, for an async method that returns a value.</span></span>
- <span data-ttu-id="4665b-107">`void`, bir olay işleyicisi için.</span><span class="sxs-lookup"><span data-stu-id="4665b-107">`void`, for an event handler.</span></span>
- <span data-ttu-id="4665b-108">C# 7,0 ile başlayarak, erişilebilir bir yöntemi olan herhangi bir tür `GetAwaiter` .</span><span class="sxs-lookup"><span data-stu-id="4665b-108">Starting with C# 7.0, any type that has an accessible `GetAwaiter` method.</span></span> <span data-ttu-id="4665b-109">Yöntemi tarafından döndürülen nesne `GetAwaiter` <xref:System.Runtime.CompilerServices.ICriticalNotifyCompletion?displayProperty=nameWithType> arabirimini uygulamalıdır.</span><span class="sxs-lookup"><span data-stu-id="4665b-109">The object returned by the `GetAwaiter` method must implement the <xref:System.Runtime.CompilerServices.ICriticalNotifyCompletion?displayProperty=nameWithType> interface.</span></span>
- <span data-ttu-id="4665b-110">C# 8,0 ile başlayarak, <xref:System.Collections.Generic.IAsyncEnumerable%601> *zaman uyumsuz bir akış* döndüren zaman uyumsuz bir yöntem için.</span><span class="sxs-lookup"><span data-stu-id="4665b-110">Starting with C# 8.0, <xref:System.Collections.Generic.IAsyncEnumerable%601>, for an async method that returns an *async stream*.</span></span>

<span data-ttu-id="4665b-111">Zaman uyumsuz yöntemler hakkında daha fazla bilgi için bkz. [Async ve await Ile zaman uyumsuz programlama (C#)](./index.md).</span><span class="sxs-lookup"><span data-stu-id="4665b-111">For more information about async methods, see [Asynchronous programming with async and await (C#)](./index.md).</span></span>

<span data-ttu-id="4665b-112">Windows iş yüklerine özgü diğer birçok tür de mevcuttur:</span><span class="sxs-lookup"><span data-stu-id="4665b-112">Several other types also exist that are specific to Windows workloads:</span></span>

- <span data-ttu-id="4665b-113"><xref:System.Windows.Threading.DispatcherOperation>, Windows ile sınırlı zaman uyumsuz işlemler için.</span><span class="sxs-lookup"><span data-stu-id="4665b-113"><xref:System.Windows.Threading.DispatcherOperation>, for async operations limited to Windows.</span></span>
- <span data-ttu-id="4665b-114"><xref:Windows.Foundation.IAsyncAction>, UWP 'de bir değer döndürmeyen zaman uyumsuz eylemler için.</span><span class="sxs-lookup"><span data-stu-id="4665b-114"><xref:Windows.Foundation.IAsyncAction>, for async actions in UWP that do not return a value.</span></span>
- <span data-ttu-id="4665b-115"><xref:Windows.Foundation.IAsyncActionWithProgress%601>, UWP 'de ilerlemeyi raporlamak ancak bir değer döndürmeyen zaman uyumsuz eylemler için.</span><span class="sxs-lookup"><span data-stu-id="4665b-115"><xref:Windows.Foundation.IAsyncActionWithProgress%601>, for async actions in UWP that report progress but do not return a value.</span></span>
- <span data-ttu-id="4665b-116"><xref:Windows.Foundation.IAsyncOperation%601>, UWP 'de bir değer döndüren zaman uyumsuz işlemler için.</span><span class="sxs-lookup"><span data-stu-id="4665b-116"><xref:Windows.Foundation.IAsyncOperation%601>, for async operations in UWP that return a value.</span></span>
- <span data-ttu-id="4665b-117"><xref:Windows.Foundation.IAsyncOperationWithProgress%602>, UWP 'de ilerlemeyi rapor eden ve bir değer döndüren zaman uyumsuz işlemler için.</span><span class="sxs-lookup"><span data-stu-id="4665b-117"><xref:Windows.Foundation.IAsyncOperationWithProgress%602>, for async operations in UWP that report progress and return a value.</span></span>

## <a name="task-return-type"></a><span data-ttu-id="4665b-118">Görev dönüş türü</span><span class="sxs-lookup"><span data-stu-id="4665b-118">Task return type</span></span>

<span data-ttu-id="4665b-119">Bir `return` ifade içermeyen veya bir işleneni döndürmeyen bir ifade içeren zaman uyumsuz yöntemler `return` genellikle dönüş türüne sahiptir <xref:System.Threading.Tasks.Task> .</span><span class="sxs-lookup"><span data-stu-id="4665b-119">Async methods that don't contain a `return` statement or that contain a `return` statement that doesn't return an operand usually have a return type of <xref:System.Threading.Tasks.Task>.</span></span> <span data-ttu-id="4665b-120">Bu tür yöntemler `void` zaman uyumlu olarak çalıştırıldıklarında döndürülür.</span><span class="sxs-lookup"><span data-stu-id="4665b-120">Such methods return `void` if they run synchronously.</span></span> <span data-ttu-id="4665b-121"><xref:System.Threading.Tasks.Task>Zaman uyumsuz bir yöntem için dönüş türü kullanırsanız, çağıran `await` zaman uyumsuz yöntem bitene kadar çağıranın tamamlanmasını askıya almak için bir operatör kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4665b-121">If you use a <xref:System.Threading.Tasks.Task> return type for an async method, a calling method can use an `await` operator to suspend the caller's completion until the called async method has finished.</span></span>

<span data-ttu-id="4665b-122">Aşağıdaki örnekte, `WaitAndApologizeAsync` yöntemi bir `return` ifade içermez, bu nedenle Yöntem bir <xref:System.Threading.Tasks.Task> nesne döndürür.</span><span class="sxs-lookup"><span data-stu-id="4665b-122">In the following example, the `WaitAndApologizeAsync` method doesn't contain a `return` statement, so the method returns a <xref:System.Threading.Tasks.Task> object.</span></span> <span data-ttu-id="4665b-123">Döndürmek, `Task` `WaitAndApologizeAsync` beklemenize olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="4665b-123">Returning a `Task` enables `WaitAndApologizeAsync` to be awaited.</span></span> <span data-ttu-id="4665b-124"><xref:System.Threading.Tasks.Task>Dönüş değeri olmadığından tür bir `Result` özellik içermiyor.</span><span class="sxs-lookup"><span data-stu-id="4665b-124">The <xref:System.Threading.Tasks.Task> type doesn't include a `Result` property because it has no return value.</span></span>

:::code language="csharp" source="snippets/async-return-types/async-returns2.cs" id="TaskReturn":::

<span data-ttu-id="4665b-125">`WaitAndApologizeAsync` , zaman uyumlu void döndüren bir yöntem için çağırma deyimine benzer bir await ifadesi yerine await deyimi kullanılarak bekletildi.</span><span class="sxs-lookup"><span data-stu-id="4665b-125">`WaitAndApologizeAsync` is awaited by using an await statement instead of an await expression, similar to the calling statement for a synchronous void-returning method.</span></span> <span data-ttu-id="4665b-126">Bu durumda await işlecinin uygulaması bir değer üretmez.</span><span class="sxs-lookup"><span data-stu-id="4665b-126">The application of an await operator in this case doesn't produce a value.</span></span> <span data-ttu-id="4665b-127">Öğesinin sağ işleneni `await` bir olduğunda <xref:System.Threading.Tasks.Task%601> , `await` ifadesi sonucunu üretir `T` .</span><span class="sxs-lookup"><span data-stu-id="4665b-127">When the right operand of an `await` is a <xref:System.Threading.Tasks.Task%601>, the `await` expression produces a result of `T`.</span></span> <span data-ttu-id="4665b-128">Öğesinin sağ işleneni `await` bir ise <xref:System.Threading.Tasks.Task> , `await` ve işleneni bir deyimidir.</span><span class="sxs-lookup"><span data-stu-id="4665b-128">When the right operand of an `await` is a <xref:System.Threading.Tasks.Task>, the `await` and its operand are a statement.</span></span>

<span data-ttu-id="4665b-129">`WaitAndApologizeAsync`Aşağıdaki kodda gösterildiği gibi, çağrısını await işlecinin uygulamasından ayırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4665b-129">You can separate the call to `WaitAndApologizeAsync` from the application of an await operator, as the following code shows.</span></span> <span data-ttu-id="4665b-130">Ancak, bir `Task` özelliğine sahip olmadığını `Result` ve bir Await işleci uygulandığında hiçbir değer üretilmediğini unutmayın `Task` .</span><span class="sxs-lookup"><span data-stu-id="4665b-130">However, remember that a `Task` doesn't have a `Result` property, and that no value is produced when an await operator is applied to a `Task`.</span></span>

<span data-ttu-id="4665b-131">Aşağıdaki kod, yöntemi çağıran `WaitAndApologizeAsync` görevin döndürdüğü görevi bekleten ayırır.</span><span class="sxs-lookup"><span data-stu-id="4665b-131">The following code separates calling the `WaitAndApologizeAsync` method from awaiting the task that the method returns.</span></span>

:::code language="csharp" source="snippets/async-return-types/async-returns2a.cs" id="AwaitTask":::

## <a name="tasktresult-return-type"></a><span data-ttu-id="4665b-132">Görev \<TResult\> dönüş türü</span><span class="sxs-lookup"><span data-stu-id="4665b-132">Task\<TResult\> return type</span></span>

<span data-ttu-id="4665b-133"><xref:System.Threading.Tasks.Task%601>Dönüş türü, işlenenin olduğu bir [dönüş](../../../language-reference/keywords/return.md) ifadesini içeren zaman uyumsuz bir yöntem için kullanılır `TResult` .</span><span class="sxs-lookup"><span data-stu-id="4665b-133">The <xref:System.Threading.Tasks.Task%601> return type is used for an async method that contains a [return](../../../language-reference/keywords/return.md) statement in which the operand is `TResult`.</span></span>

<span data-ttu-id="4665b-134">Aşağıdaki örnekte, `GetLeisureHoursAsync` yöntemi `return` bir tamsayı döndüren bir ifade içerir.</span><span class="sxs-lookup"><span data-stu-id="4665b-134">In the following example, the `GetLeisureHoursAsync` method contains a `return` statement that returns an integer.</span></span> <span data-ttu-id="4665b-135">Bu nedenle, metot bildiriminin bir dönüş türü belirtmesi gerekir `Task<int>` .</span><span class="sxs-lookup"><span data-stu-id="4665b-135">Therefore, the method declaration must specify a return type of `Task<int>`.</span></span> <span data-ttu-id="4665b-136"><xref:System.Threading.Tasks.Task.FromResult%2A>Async yöntemi, döndüren bir işlem için yer tutucudur <xref:System.DateTime.DayOfWeek> .</span><span class="sxs-lookup"><span data-stu-id="4665b-136">The <xref:System.Threading.Tasks.Task.FromResult%2A> async method is a placeholder for an operation that returns a <xref:System.DateTime.DayOfWeek>.</span></span>

:::code language="csharp" source="snippets/async-return-types/async-returns1.cs" id="LeisureHours":::

<span data-ttu-id="4665b-137">`GetLeisureHoursAsync`Yöntemi içindeki bir await ifadesi içinden çağrıldığında `ShowTodaysInfo` , await ifadesi `leisureHours` yöntemi tarafından döndürülen görevde depolanan tamsayı değerini (değeri) alır `GetLeisureHours` .</span><span class="sxs-lookup"><span data-stu-id="4665b-137">When `GetLeisureHoursAsync` is called from within an await expression in the `ShowTodaysInfo` method, the await expression retrieves the integer value (the value of `leisureHours`) that's stored in the task returned by the `GetLeisureHours` method.</span></span> <span data-ttu-id="4665b-138">Await ifadeleri hakkında daha fazla bilgi için bkz. [await](../../../language-reference/operators/await.md).</span><span class="sxs-lookup"><span data-stu-id="4665b-138">For more information about await expressions, see [await](../../../language-reference/operators/await.md).</span></span>

<span data-ttu-id="4665b-139">`await` `Task<T>` `GetLeisureHoursAsync` `await` Aşağıdaki kodun gösterdiği gibi, çağrısını uygulamasından ayırarak sonucu bir öğesinden nasıl alacağını daha iyi anlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4665b-139">You can better understand how `await` retrieves the result from a `Task<T>` by separating the call to `GetLeisureHoursAsync` from the application of `await`, as the following code shows.</span></span> <span data-ttu-id="4665b-140">`GetLeisureHoursAsync`Yönteminin bildiriminden bekleyebileceğiniz için hemen beklenen bir yönteme çağrı bir döndürür `Task<int>` .</span><span class="sxs-lookup"><span data-stu-id="4665b-140">A call to method `GetLeisureHoursAsync` that isn't immediately awaited returns a `Task<int>`, as you would expect from the declaration of the method.</span></span> <span data-ttu-id="4665b-141">Görev `getLeisureHoursTask` örnekteki değişkenine atanır.</span><span class="sxs-lookup"><span data-stu-id="4665b-141">The task is assigned to the `getLeisureHoursTask` variable in the example.</span></span> <span data-ttu-id="4665b-142">`getLeisureHoursTask`Bir olduğundan <xref:System.Threading.Tasks.Task%601> , türünde bir özelliği içerir <xref:System.Threading.Tasks.Task%601.Result> `TResult` .</span><span class="sxs-lookup"><span data-stu-id="4665b-142">Because `getLeisureHoursTask` is a <xref:System.Threading.Tasks.Task%601>, it contains a <xref:System.Threading.Tasks.Task%601.Result> property of type `TResult`.</span></span> <span data-ttu-id="4665b-143">Bu durumda, `TResult` bir tamsayı türünü temsil eder.</span><span class="sxs-lookup"><span data-stu-id="4665b-143">In this case, `TResult` represents an integer type.</span></span> <span data-ttu-id="4665b-144">`await`Öğesine uygulandığında `getLeisureHoursTask` , await ifadesi <xref:System.Threading.Tasks.Task%601.Result%2A> öğesinin özelliğinin içeriğini değerlendirir `getLeisureHoursTask` .</span><span class="sxs-lookup"><span data-stu-id="4665b-144">When `await` is applied to `getLeisureHoursTask`, the await expression evaluates to the contents of the <xref:System.Threading.Tasks.Task%601.Result%2A> property of `getLeisureHoursTask`.</span></span> <span data-ttu-id="4665b-145">Değer `ret` değişkenine atanır.</span><span class="sxs-lookup"><span data-stu-id="4665b-145">The value is assigned to the `ret` variable.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="4665b-146"><xref:System.Threading.Tasks.Task%601.Result%2A>Özelliği engelleyici bir özelliktir.</span><span class="sxs-lookup"><span data-stu-id="4665b-146">The <xref:System.Threading.Tasks.Task%601.Result%2A> property is a blocking property.</span></span> <span data-ttu-id="4665b-147">Görevi tamamlanmadan önce ona erişmeye çalışırsanız, etkin olan iş parçacığı, görev tamamlanana ve değer kullanılabilir olana kadar engellenir.</span><span class="sxs-lookup"><span data-stu-id="4665b-147">If you try to access it before its task is finished, the thread that's currently active is blocked until the task completes and the value is available.</span></span> <span data-ttu-id="4665b-148">Çoğu durumda, `await` özelliğine doğrudan erişmek yerine kullanarak değere erişmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="4665b-148">In most cases, you should access the value by using `await` instead of accessing the property directly.</span></span>
>
> <span data-ttu-id="4665b-149">Önceki örnek, <xref:System.Threading.Tasks.Task%601.Result%2A> `Main` uygulamanın sonlandırılmadan önce yöntemi konsola yazdırabilmesi için ana iş parçacığını engellemek üzere özelliğinin değerini almıştır `message` .</span><span class="sxs-lookup"><span data-stu-id="4665b-149">The previous example retrieved the value of the <xref:System.Threading.Tasks.Task%601.Result%2A> property to block the main thread so that the `Main` method could print the `message` to the console before the application ended.</span></span>

:::code language="csharp" source="snippets/async-return-types/async-returns1a.cs" id="StoreTask":::

## <a name="void-return-type"></a><span data-ttu-id="4665b-150">Void dönüş türü</span><span class="sxs-lookup"><span data-stu-id="4665b-150">Void return type</span></span>

<span data-ttu-id="4665b-151">Dönüş türünü `void` , dönüş türü gerektiren zaman uyumsuz olay işleyicilerde kullanırsınız `void` .</span><span class="sxs-lookup"><span data-stu-id="4665b-151">You use the `void` return type in asynchronous event handlers, which require a `void` return type.</span></span> <span data-ttu-id="4665b-152">Değer döndürmeyen olay işleyicileri dışındaki yöntemler için, döndüren zaman uyumsuz bir yöntem beklenmediği için bir <xref:System.Threading.Tasks.Task> yerine döndürmelidir `void` .</span><span class="sxs-lookup"><span data-stu-id="4665b-152">For methods other than event handlers that don't return a value, you should return a <xref:System.Threading.Tasks.Task> instead, because an async method that returns `void` can't be awaited.</span></span> <span data-ttu-id="4665b-153">Bu tür bir yöntemin her çağıranı, çağrılan zaman uyumsuz yöntemin bitmesini beklemeden tamamlamaya devam etmelidir.</span><span class="sxs-lookup"><span data-stu-id="4665b-153">Any caller of such a method must continue to completion without waiting for the called async method to finish.</span></span> <span data-ttu-id="4665b-154">Çağıran, zaman uyumsuz yöntemin ürettiği herhangi bir değerden veya özel durumlardan bağımsız olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="4665b-154">The caller must be independent of any values or exceptions that the async method generates.</span></span>

<span data-ttu-id="4665b-155">Void döndüren zaman uyumsuz bir yöntemi çağıran, yöntemden oluşturulan özel durumları yakalayabilir ve bu tür işlenmemiş özel durumlar uygulamanızın başarısız olmasına neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="4665b-155">The caller of a void-returning async method can't catch exceptions thrown from the method, and such unhandled exceptions are likely to cause your application to fail.</span></span> <span data-ttu-id="4665b-156">Veya döndüren bir yöntem <xref:System.Threading.Tasks.Task> <xref:System.Threading.Tasks.Task%601> özel durum oluşturursa, özel durum döndürülen görevde depolanır.</span><span class="sxs-lookup"><span data-stu-id="4665b-156">If a method that returns a <xref:System.Threading.Tasks.Task> or <xref:System.Threading.Tasks.Task%601> throws an exception, the exception is stored in the returned task.</span></span> <span data-ttu-id="4665b-157">Görev beklediğinde özel durum yeniden oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="4665b-157">The exception is rethrown when the task is awaited.</span></span> <span data-ttu-id="4665b-158">Bu nedenle, bir özel durum üretemeyen herhangi bir zaman uyumsuz metodun, veya dönüş türüne sahip olduğundan ve metoda yapılan çağrıların beklenmediğinden emin olun <xref:System.Threading.Tasks.Task> <xref:System.Threading.Tasks.Task%601> .</span><span class="sxs-lookup"><span data-stu-id="4665b-158">Therefore, make sure that any async method that can produce an exception has a return type of <xref:System.Threading.Tasks.Task> or <xref:System.Threading.Tasks.Task%601> and that calls to the method are awaited.</span></span>

<span data-ttu-id="4665b-159">Zaman uyumsuz yöntemlerde özel durumları yakalama hakkında daha fazla bilgi için, [try-catch](../../../language-reference/keywords/try-catch.md) makalesinin [zaman uyumsuz metotlar bölümünde özel durumlar](../../../language-reference/keywords/try-catch.md#exceptions-in-async-methods) bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="4665b-159">For more information about how to catch exceptions in async methods, see the [Exceptions in async methods](../../../language-reference/keywords/try-catch.md#exceptions-in-async-methods) section of the [try-catch](../../../language-reference/keywords/try-catch.md) article.</span></span>

<span data-ttu-id="4665b-160">Aşağıdaki örnek, zaman uyumsuz bir olay işleyicisinin davranışını gösterir.</span><span class="sxs-lookup"><span data-stu-id="4665b-160">The following example shows the behavior of an async event handler.</span></span> <span data-ttu-id="4665b-161">Örnek kodda, zaman uyumsuz bir olay işleyicisi ana iş parçacığının bittiğinde bunu bilmesini sağlamalıdır.</span><span class="sxs-lookup"><span data-stu-id="4665b-161">In the example code, an async event handler must let the main thread know when it finishes.</span></span> <span data-ttu-id="4665b-162">Ardından, ana iş parçacığı programdan çıkmadan zaman uyumsuz bir olay işleyicisinin tamamlanmasını bekleyebilir.</span><span class="sxs-lookup"><span data-stu-id="4665b-162">Then the main thread can wait for an async event handler to complete before exiting the program.</span></span>

:::code language="csharp" source="snippets/async-return-types/async-returns3.cs":::

## <a name="generalized-async-return-types-and-valuetasktresult"></a><span data-ttu-id="4665b-163">Genelleştirilmiş zaman uyumsuz dönüş türleri ve ValueTask\<TResult\></span><span class="sxs-lookup"><span data-stu-id="4665b-163">Generalized async return types and ValueTask\<TResult\></span></span>

<span data-ttu-id="4665b-164">C# 7,0 ile başlayarak, zaman uyumsuz bir yöntem, `GetAwaiter` bir *awaiter türünün* örneğini döndüren erişilebilir bir yöntemi olan herhangi bir tür döndürebilir.</span><span class="sxs-lookup"><span data-stu-id="4665b-164">Starting with C# 7.0, an async method can return any type that has an accessible `GetAwaiter` method that returns an instance of an *awaiter type*.</span></span> <span data-ttu-id="4665b-165">Ayrıca, yönteminden döndürülen türün `GetAwaiter` <xref:System.Runtime.CompilerServices.AsyncMethodBuilderAttribute?displayProperty=nameWithType> özniteliği olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="4665b-165">In addition, the type returned from the `GetAwaiter` method must have the <xref:System.Runtime.CompilerServices.AsyncMethodBuilderAttribute?displayProperty=nameWithType> attribute.</span></span> <span data-ttu-id="4665b-166">[Dönüş türleri gibi görev](../../../../../_csharplang/proposals/csharp-7.0/task-types.md)için özellik belirtiminde daha fazla bilgi edinebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4665b-166">You can learn more in the feature spec for [Task like return types](../../../../../_csharplang/proposals/csharp-7.0/task-types.md).</span></span>

<span data-ttu-id="4665b-167">Bu özellik, işleneni için gereksinimleri açıklayan, [awalansever ifadelerine](../../../../../_csharplang/spec/expressions.md#awaitable-expressions)yönelik tamamlayıcı bir ifadedir `await` .</span><span class="sxs-lookup"><span data-stu-id="4665b-167">This feature is the complement to [awaitable expressions](../../../../../_csharplang/spec/expressions.md#awaitable-expressions), which describes the requirements for the operand of `await`.</span></span> <span data-ttu-id="4665b-168">Genelleştirilmiş zaman uyumsuz dönüş türleri derleyicinin `async` farklı türleri döndüren yöntemler oluşturmasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="4665b-168">Generalized async return types enable the compiler to generate `async` methods that return different types.</span></span> <span data-ttu-id="4665b-169">.NET kitaplıklarında Genelleştirilmiş zaman uyumsuz dönüş türleri etkinleştirilmiş performans geliştirmeleri.</span><span class="sxs-lookup"><span data-stu-id="4665b-169">Generalized async return types enabled performance improvements in the .NET libraries.</span></span> <span data-ttu-id="4665b-170"><xref:System.Threading.Tasks.Task>Ve <xref:System.Threading.Tasks.Task%601> başvuru türleri olduğundan, performans açısından kritik yollarda bellek ayırma, özellikle de ayırmalar sıkı Döngülerde gerçekleşiyorsa performansı olumsuz etkileyebilir.</span><span class="sxs-lookup"><span data-stu-id="4665b-170">Because <xref:System.Threading.Tasks.Task> and <xref:System.Threading.Tasks.Task%601> are reference types, memory allocation in performance-critical paths, particularly when allocations occur in tight loops, can adversely affect performance.</span></span> <span data-ttu-id="4665b-171">Genelleştirilmiş dönüş türleri için destek, ek bellek ayırmalarını önlemek için bir başvuru türü yerine hafif değer türü döndürebilmeniz anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="4665b-171">Support for generalized return types means that you can return a lightweight value type instead of a reference type to avoid additional memory allocations.</span></span>

<span data-ttu-id="4665b-172">.NET, <xref:System.Threading.Tasks.ValueTask%601?displayProperty=nameWithType> genelleştirilmiş bir görev döndüren değerin hafif bir uygulama olarak yapısını sağlar.</span><span class="sxs-lookup"><span data-stu-id="4665b-172">.NET provides the <xref:System.Threading.Tasks.ValueTask%601?displayProperty=nameWithType> structure as a lightweight implementation of a generalized task-returning value.</span></span> <span data-ttu-id="4665b-173">Türünü kullanmak için <xref:System.Threading.Tasks.ValueTask%601?displayProperty=nameWithType> , `System.Threading.Tasks.Extensions` NuGet paketini projenize eklemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="4665b-173">To use the <xref:System.Threading.Tasks.ValueTask%601?displayProperty=nameWithType> type, you must add the `System.Threading.Tasks.Extensions` NuGet package to your project.</span></span> <span data-ttu-id="4665b-174">Aşağıdaki örnek, <xref:System.Threading.Tasks.ValueTask%601> iki zarın değerini almak için yapısını kullanır.</span><span class="sxs-lookup"><span data-stu-id="4665b-174">The following example uses the <xref:System.Threading.Tasks.ValueTask%601> structure to retrieve the value of two dice rolls.</span></span>

:::code language="csharp" source="snippets/async-return-types/async-valuetask.cs":::

<span data-ttu-id="4665b-175">Genelleştirilmiş bir zaman uyumsuz dönüş türü yazmak, gelişmiş bir senaryodur ve çok özel ortamlarda kullanılmak üzere hedeflenmiştir.</span><span class="sxs-lookup"><span data-stu-id="4665b-175">Writing a generalized async return type is an advanced scenario, and is targeted for use in very specific environments.</span></span> <span data-ttu-id="4665b-176">`Task` `Task<T>` `ValueTask<T>` Bunun yerine, zaman uyumsuz kod için birçok senaryoyu kapsayan, ve türlerini kullanmayı düşünün.</span><span class="sxs-lookup"><span data-stu-id="4665b-176">Consider using the `Task`, `Task<T>` and `ValueTask<T>` types instead, which cover most scenarios for asynchronous code.</span></span>

## <a name="async-streams-with-iasyncenumerablet"></a><span data-ttu-id="4665b-177">Iasyncenumerable ile zaman uyumsuz akışlar\<T\></span><span class="sxs-lookup"><span data-stu-id="4665b-177">Async streams with IAsyncEnumerable\<T\></span></span>

<span data-ttu-id="4665b-178">C# 8,0 ile başlayarak, zaman uyumsuz bir yöntem tarafından temsil edilen *zaman uyumsuz bir akış* döndürebilir <xref:System.Collections.Generic.IAsyncEnumerable%601> .</span><span class="sxs-lookup"><span data-stu-id="4665b-178">Starting with C# 8.0, an async method may return an *async stream*, represented by <xref:System.Collections.Generic.IAsyncEnumerable%601>.</span></span> <span data-ttu-id="4665b-179">Zaman uyumsuz akış yinelenen zaman uyumsuz çağrılarla parçalar halinde oluşturulduğunda akıştan okunan öğeleri numaralandırmak için bir yol sağlar.</span><span class="sxs-lookup"><span data-stu-id="4665b-179">An async stream provides a way to enumerate items read from a stream when elements are generated in chunks with repeated asynchronous calls.</span></span> <span data-ttu-id="4665b-180">Aşağıdaki örnek, zaman uyumsuz akış üreten zaman uyumsuz bir yöntemi gösterir:</span><span class="sxs-lookup"><span data-stu-id="4665b-180">The following example shows an async method that generates an async stream:</span></span>

:::code language="csharp" source="snippets/async-return-types/AsyncStreams.cs" id="GenerateAsyncStream":::

<span data-ttu-id="4665b-181">Yukarıdaki örnek, zaman uyumsuz olarak bir dizeden satırları okur.</span><span class="sxs-lookup"><span data-stu-id="4665b-181">The preceding example reads lines from a string asynchronously.</span></span> <span data-ttu-id="4665b-182">Her satır okunduktan sonra kod dizedeki her bir sözcüğü numaralandırır.</span><span class="sxs-lookup"><span data-stu-id="4665b-182">Once each line is read, the code enumerates each word in the string.</span></span> <span data-ttu-id="4665b-183">Çağıranlar, her bir sözcüğü, `await foreach` ifadesini kullanarak numaralandırır.</span><span class="sxs-lookup"><span data-stu-id="4665b-183">Callers would enumerate each word using the `await foreach` statement.</span></span> <span data-ttu-id="4665b-184">Yöntemi, kaynak dizeden sonraki satırı zaman uyumsuz olarak okuması gerektiğinde bekler.</span><span class="sxs-lookup"><span data-stu-id="4665b-184">The method awaits when it needs to asynchronously read the next line from the source string.</span></span>

## <a name="see-also"></a><span data-ttu-id="4665b-185">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="4665b-185">See also</span></span>

- <xref:System.Threading.Tasks.Task.FromResult%2A>
- [<span data-ttu-id="4665b-186">Zaman uyumsuz görevleri tamamlandıkları anda işleme</span><span class="sxs-lookup"><span data-stu-id="4665b-186">Process asynchronous tasks as they complete</span></span>](start-multiple-async-tasks-and-process-them-as-they-complete.md)
- [<span data-ttu-id="4665b-187">Async ve await ile zaman uyumsuz programlama (C#)</span><span class="sxs-lookup"><span data-stu-id="4665b-187">Asynchronous programming with async and await (C#)</span></span>](index.md)
- [<span data-ttu-id="4665b-188">async</span><span class="sxs-lookup"><span data-stu-id="4665b-188">async</span></span>](../../../language-reference/keywords/async.md)
- [<span data-ttu-id="4665b-189">await</span><span class="sxs-lookup"><span data-stu-id="4665b-189">await</span></span>](../../../language-reference/operators/await.md)
