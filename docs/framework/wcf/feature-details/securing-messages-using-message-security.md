---
title: İleti Güveliği Kullanarak İletileri Güvenli Hale Getirme
ms.date: 03/30/2017
ms.assetid: a17ebe67-836b-4c52-9a81-2c3d58e225ee
ms.openlocfilehash: 70c645101033c31da01d79f624ab03ce328dd3a6
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 06/09/2020
ms.locfileid: "84589987"
---
# <a name="securing-messages-using-message-security"></a><span data-ttu-id="9992a-102">İleti Güveliği Kullanarak İletileri Güvenli Hale Getirme</span><span class="sxs-lookup"><span data-stu-id="9992a-102">Securing Messages Using Message Security</span></span>
<span data-ttu-id="9992a-103">Bu bölümde kullanırken WCF ileti güvenliği ele alınmaktadır <xref:System.ServiceModel.NetMsmqBinding> .</span><span class="sxs-lookup"><span data-stu-id="9992a-103">This section discusses WCF message security when using <xref:System.ServiceModel.NetMsmqBinding>.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="9992a-104">Bu konuyu okumadan önce [güvenlik kavramlarını](security-concepts.md)okumanız önerilir.</span><span class="sxs-lookup"><span data-stu-id="9992a-104">Before reading through this topic, it is recommended that you read [Security Concepts](security-concepts.md).</span></span>  
  
 <span data-ttu-id="9992a-105">Aşağıdaki çizimde, WCF kullanılarak sıraya alınmış iletişimin kavramsal bir modeli verilmiştir.</span><span class="sxs-lookup"><span data-stu-id="9992a-105">The following illustration provides a conceptual model of queued communication using WCF.</span></span> <span data-ttu-id="9992a-106">Bu çizim ve terminoloji açıklamak için kullanılır</span><span class="sxs-lookup"><span data-stu-id="9992a-106">This illustration and terminology are used to explain</span></span>  
  
 <span data-ttu-id="9992a-107">taşıma güvenlik kavramları.</span><span class="sxs-lookup"><span data-stu-id="9992a-107">transport security concepts.</span></span>  
  
 <span data-ttu-id="9992a-108">![Kuyruğa alınmış uygulama diyagramı](media/distributed-queue-figure.jpg "Dağıtılmış kuyruk-şekil")</span><span class="sxs-lookup"><span data-stu-id="9992a-108">![Queued Application Diagram](media/distributed-queue-figure.jpg "Distributed-Queue-Figure")</span></span>  
  
 <span data-ttu-id="9992a-109">WCF kullanarak sıraya alınan iletileri gönderirken WCF iletisi Message Queuing (MSMQ) iletisinin bir gövdesi olarak eklenir.</span><span class="sxs-lookup"><span data-stu-id="9992a-109">When sending queued messages using WCF, the WCF message is attached as a body of the Message Queuing (MSMQ) message.</span></span> <span data-ttu-id="9992a-110">Taşıma güvenliği tüm MSMQ iletisinin güvenliğini sağlarken, ileti (veya SOAP) güvenliği yalnızca MSMQ iletisinin gövdesine güvenlik sağlar.</span><span class="sxs-lookup"><span data-stu-id="9992a-110">While transport security secures the entire MSMQ message, message (or SOAP) security only secures the body of the MSMQ message.</span></span>  
  
 <span data-ttu-id="9992a-111">İleti güvenliği kavramı, istemcinin hedef sıranın iletisini güvenlik altına aldığı aktarım güvenliği aksine, istemci alıcı uygulama (hizmet) için iletiyi güvenlik altına almadır.</span><span class="sxs-lookup"><span data-stu-id="9992a-111">The key concept of message security is that the client secures the message for the receiving application (service), unlike transport security where the client secures the message for the Target Queue.</span></span> <span data-ttu-id="9992a-112">Bu nedenle, MSMQ ileti güvenliği kullanılarak WCF iletisini güvenli hale getirirken hiçbir bölüm vermez.</span><span class="sxs-lookup"><span data-stu-id="9992a-112">As such, MSMQ plays no part when securing the WCF message using message security.</span></span>  
  
 <span data-ttu-id="9992a-113">WCF ileti güvenliği, bir sertifika veya Kerberos protokolü gibi mevcut güvenlik altyapılarıyla tümleştirilen WCF iletisine güvenlik üstbilgileri ekler.</span><span class="sxs-lookup"><span data-stu-id="9992a-113">WCF message security adds security headers to the WCF message that integrate with existing security infrastructures, such as a certificate or the Kerberos protocol.</span></span>  
  
## <a name="message-credential-type"></a><span data-ttu-id="9992a-114">İleti kimlik bilgisi türü</span><span class="sxs-lookup"><span data-stu-id="9992a-114">Message Credential Type</span></span>  
 <span data-ttu-id="9992a-115">Hizmet ve istemci, ileti güvenliğini kullanarak birbirlerinin kimliğini doğrulamak için kimlik bilgilerini sunabilir.</span><span class="sxs-lookup"><span data-stu-id="9992a-115">Using message security, the service and client can present credentials to authenticate each another.</span></span> <span data-ttu-id="9992a-116">Modu veya olarak ayarlayarak ileti güvenliği seçebilirsiniz <xref:System.ServiceModel.NetMsmqBinding.Security%2A> `Message` `Both` (yani, hem aktarım güvenliği hem de ileti güvenliği kullanın).</span><span class="sxs-lookup"><span data-stu-id="9992a-116">You can select message security by setting the <xref:System.ServiceModel.NetMsmqBinding.Security%2A> mode to `Message` or `Both` (that is, use both transport security and message security).</span></span>  
  
 <span data-ttu-id="9992a-117">Hizmet, <xref:System.ServiceModel.ServiceSecurityContext.Current%2A> istemcinin kimliğini doğrulamak için kullanılan kimlik bilgilerini incelemek için özelliğini kullanabilir.</span><span class="sxs-lookup"><span data-stu-id="9992a-117">The service can use the <xref:System.ServiceModel.ServiceSecurityContext.Current%2A> property to inspect the credential used to authenticate the client.</span></span> <span data-ttu-id="9992a-118">Bu, hizmetin uygulamayı seçtiği daha fazla yetkilendirme denetimi için de kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="9992a-118">This can also be used for further authorization checks that the service chooses to implement.</span></span>  
  
 <span data-ttu-id="9992a-119">Bu bölümde farklı kimlik bilgisi türleri ve kuyrukların nasıl kullanılacağı açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="9992a-119">This section explains the different credential types and how to use them with queues.</span></span>  
  
### <a name="certificate"></a><span data-ttu-id="9992a-120">Sertifika</span><span class="sxs-lookup"><span data-stu-id="9992a-120">Certificate</span></span>  
 <span data-ttu-id="9992a-121">Sertifika kimlik bilgileri türü bir X. 509.440 sertifikası kullanarak hizmeti ve istemciyi belirler.</span><span class="sxs-lookup"><span data-stu-id="9992a-121">The certificate credential type uses an X.509 certificate to identify the service and the client.</span></span>  
  
 <span data-ttu-id="9992a-122">Tipik bir senaryoda, istemci ve hizmet güvenilen bir sertifika yetkilisi tarafından geçerli bir sertifika verilir.</span><span class="sxs-lookup"><span data-stu-id="9992a-122">In a typical scenario, the client and the service are issued a valid certificate by a trusted certification authority.</span></span> <span data-ttu-id="9992a-123">Sonra bağlantı oluşturulur, istemci hizmete güvenip güvenmeyeceğine karar vermek için hizmetin sertifikasını kullanarak hizmetin geçerliliğini doğrular.</span><span class="sxs-lookup"><span data-stu-id="9992a-123">Then the connection is established, the client authenticates the validity of the service using the service's certificate to decide whether it can trust the service.</span></span> <span data-ttu-id="9992a-124">Benzer şekilde, hizmet istemci güvenini doğrulamak için istemcinin sertifikasını kullanır.</span><span class="sxs-lookup"><span data-stu-id="9992a-124">Similarly, the service uses the client's certificate to validate the client trust.</span></span>  
  
 <span data-ttu-id="9992a-125">Kuyrukların bağlantısı kesilen doğası gereği, istemci ve hizmet aynı anda çevrimiçi olmayabilir.</span><span class="sxs-lookup"><span data-stu-id="9992a-125">Given the disconnected nature of queues, the client and the service may not be online at the same time.</span></span> <span data-ttu-id="9992a-126">Bu nedenle, istemci ve hizmetin sertifikaları bant dışı olarak alışverişi gerekir.</span><span class="sxs-lookup"><span data-stu-id="9992a-126">As such, the client and service have to exchange certificates out-of-band.</span></span> <span data-ttu-id="9992a-127">Özellikle, güvenilen depodaki hizmetin sertifikasını (bir sertifika yetkilisine zincirlenebilir) tutan istemci sanallaştırılan istemci, doğru hizmetle iletişim kurduğu güvenmelidir.</span><span class="sxs-lookup"><span data-stu-id="9992a-127">In particular, the client, by virtue of holding the service's certificate (which can be chained to a certification authority) in its trusted store, must trust that it is communicating with the correct service.</span></span> <span data-ttu-id="9992a-128">İstemcinin kimliğini doğrulamak için hizmet, istemciyle birlikte gelen X. 509.440 sertifikasını kullanarak istemcinin orijinalliğini doğrular.</span><span class="sxs-lookup"><span data-stu-id="9992a-128">For authenticating the client, the service uses the X.509 certificate attached with the message to matches it with the certificate in its store to verify the authenticity of the client.</span></span> <span data-ttu-id="9992a-129">Yeniden, sertifikanın bir sertifika yetkilisine zincirleme olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="9992a-129">Again, the certificate must be chained to a certification authority.</span></span>  
  
 <span data-ttu-id="9992a-130">Windows çalıştıran bir bilgisayarda, sertifikalar çeşitli türlerde depolarda tutulur.</span><span class="sxs-lookup"><span data-stu-id="9992a-130">On a computer running Windows, certificates are held in several kinds of stores.</span></span> <span data-ttu-id="9992a-131">Farklı mağazalar hakkında daha fazla bilgi için bkz. [sertifika depoları](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc757138(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="9992a-131">For more information about the different stores, see [Certificate stores](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc757138(v=ws.10)).</span></span>  
  
### <a name="windows"></a><span data-ttu-id="9992a-132">Windows</span><span class="sxs-lookup"><span data-stu-id="9992a-132">Windows</span></span>  
 <span data-ttu-id="9992a-133">Windows ileti kimlik bilgisi türü Kerberos protokolünü kullanır.</span><span class="sxs-lookup"><span data-stu-id="9992a-133">Windows message credential type uses the Kerberos protocol.</span></span>  
  
 <span data-ttu-id="9992a-134">Kerberos protokolü, bir etki alanındaki kullanıcıların kimliğini doğrulayan ve kimliği doğrulanmış kullanıcıların bir etki alanındaki diğer varlıklarla güvenli bağlamlar kurmasını sağlayan bir güvenlik mekanizmasıdır.</span><span class="sxs-lookup"><span data-stu-id="9992a-134">The Kerberos protocol is a security mechanism that authenticates users on a domain and allows the authenticated users to establish secure contexts with other entities on a domain.</span></span>  
  
 <span data-ttu-id="9992a-135">Sıraya alınan iletişim için Kerberos protokolünü kullanmayla ilgili sorun, Anahtar Dağıtım Merkezi (KDC) tarafından dağıtılan istemci kimliğini içeren anahtarların görece kısa ömürlü olduğundan emin olur.</span><span class="sxs-lookup"><span data-stu-id="9992a-135">The problem with using the Kerberos protocol for queued communication is that the tickets that contain client identity that the Key Distribution Center (KDC) distributes are relatively short-lived.</span></span> <span data-ttu-id="9992a-136">Bir *yaşam süresi* , Bilet geçerliliğini gösteren Kerberos bileti ile ilişkilendirilir.</span><span class="sxs-lookup"><span data-stu-id="9992a-136">A *lifetime* is associated with the Kerberos ticket that indicates the validity of the ticket.</span></span> <span data-ttu-id="9992a-137">Bu nedenle, yüksek gecikme süresi verilen, belirtecin istemcinin kimliğini doğrulayan hizmet için hala geçerli olduğundan emin olabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="9992a-137">As such, given high latency, you cannot be sure that the token is still valid for the service that authenticates the client.</span></span>  
  
 <span data-ttu-id="9992a-138">Bu kimlik bilgisi türü kullanılırken hizmetin HIZMET hesabı altında çalışıyor olması gerektiğini unutmayın.</span><span class="sxs-lookup"><span data-stu-id="9992a-138">Note that when using this credential type, the service must be running under the SERVICE account.</span></span>  
  
 <span data-ttu-id="9992a-139">İleti kimlik bilgisi seçerken Kerberos protokolü varsayılan olarak kullanılır.</span><span class="sxs-lookup"><span data-stu-id="9992a-139">The Kerberos protocol is used by default when choosing message credential.</span></span>
  
### <a name="username-password"></a><span data-ttu-id="9992a-140">Kullanıcı adı parolası</span><span class="sxs-lookup"><span data-stu-id="9992a-140">Username Password</span></span>  
 <span data-ttu-id="9992a-141">Bu özelliği kullanarak istemci, iletinin güvenlik üstbilgisinde bir Kullanıcı adı parolası kullanarak sunucuda kimlik doğrulaması yapabilir.</span><span class="sxs-lookup"><span data-stu-id="9992a-141">Using this property, the client can authenticate to the server using a username password in the security header of the message.</span></span>  
  
### <a name="issuedtoken"></a><span data-ttu-id="9992a-142">IssuedToken</span><span class="sxs-lookup"><span data-stu-id="9992a-142">IssuedToken</span></span>  
 <span data-ttu-id="9992a-143">İstemci, istemcinin kimliğini doğrulamak üzere hizmetin iletisine iliştirilebilecek bir belirteç vermek için güvenlik belirteci hizmetini kullanabilir.</span><span class="sxs-lookup"><span data-stu-id="9992a-143">The client can use the security token service to issue a token that can then be attached to the message for the service to authenticate the client.</span></span>  
  
## <a name="using-transport-and-message-security"></a><span data-ttu-id="9992a-144">Aktarım ve Ileti güvenliğini kullanma</span><span class="sxs-lookup"><span data-stu-id="9992a-144">Using Transport and Message Security</span></span>  
 <span data-ttu-id="9992a-145">Hem aktarım güvenliği hem de ileti güvenliği kullanılırken, iletiyi hem aktarımda hem de SOAP ileti düzeyinde güvenli hale getirmek için kullanılan sertifikanın aynı olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="9992a-145">When using both transport security and message security, the certificate used to secure the message both at the transport and the SOAP message level must be the same.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="9992a-146">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="9992a-146">See also</span></span>

- [<span data-ttu-id="9992a-147">Taşıma Güveliği Kullanarak İletileri Güvenli Hale Getirme</span><span class="sxs-lookup"><span data-stu-id="9992a-147">Securing Messages Using Transport Security</span></span>](securing-messages-using-transport-security.md)
- [<span data-ttu-id="9992a-148">İleti Kuyruğa Alma ile İleti Güvenliği</span><span class="sxs-lookup"><span data-stu-id="9992a-148">Message Security over Message Queuing</span></span>](../samples/message-security-over-message-queuing.md)
- [<span data-ttu-id="9992a-149">Güvenlik kavramları</span><span class="sxs-lookup"><span data-stu-id="9992a-149">Security Concepts</span></span>](security-concepts.md)
- [<span data-ttu-id="9992a-150">Hizmet ve İstemcileri Güvenli Hale Getirme</span><span class="sxs-lookup"><span data-stu-id="9992a-150">Securing Services and Clients</span></span>](securing-services-and-clients.md)
