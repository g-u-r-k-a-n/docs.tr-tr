---
title: 'Nasıl yapılır: Özel İlke Onaylamalarını İçeri Aktarma'
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
ms.assetid: 1f41d787-accb-4a10-bfc6-a807671d1581
ms.openlocfilehash: fb5e3ba5faca1b32eef63ac174bcd7731ee50771
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 11/26/2020
ms.locfileid: "96249156"
---
# <a name="how-to-import-custom-policy-assertions"></a><span data-ttu-id="51ba1-102">Nasıl yapılır: Özel İlke Onaylamalarını İçeri Aktarma</span><span class="sxs-lookup"><span data-stu-id="51ba1-102">How to: Import Custom Policy Assertions</span></span>

<span data-ttu-id="51ba1-103">İlke onayları bir hizmet uç noktasının yeteneklerini ve gereksinimlerini anlatmaktadır.</span><span class="sxs-lookup"><span data-stu-id="51ba1-103">Policy assertions describe the capabilities and requirements of a service endpoint.</span></span>  <span data-ttu-id="51ba1-104">İstemci uygulamaları, hizmet meta verilerinde ilke onayları kullanarak istemci bağlamasını yapılandırabilir veya bir hizmet uç noktası için hizmet sözleşmesini özelleştirebilir.</span><span class="sxs-lookup"><span data-stu-id="51ba1-104">Client applications can use policy assertions in service metadata to configure the client binding or to customize the service contract for a service endpoint.</span></span>  
  
 <span data-ttu-id="51ba1-105">Özel ilke onayları, arabirimini uygulayarak içeri aktarılır <xref:System.ServiceModel.Description.IPolicyImportExtension?displayProperty=nameWithType> ve bu nesne meta veri sistemine geçirerek ya da uygulama yapılandırma dosyanıza uygulama türünü kaydederek içeri aktarılır.</span><span class="sxs-lookup"><span data-stu-id="51ba1-105">Custom policy assertions are imported by implementing the <xref:System.ServiceModel.Description.IPolicyImportExtension?displayProperty=nameWithType> interface and passing that object to the metadata system or by registering the implementation type in your application configuration file.</span></span>  <span data-ttu-id="51ba1-106"><xref:System.ServiceModel.Description.IPolicyImportExtension>Arabirim uygulamalarının parametresiz bir Oluşturucu sağlaması gerekir.</span><span class="sxs-lookup"><span data-stu-id="51ba1-106">Implementations of the <xref:System.ServiceModel.Description.IPolicyImportExtension> interface must provide a parameterless constructor.</span></span>  
  
### <a name="to-import-custom-policy-assertions"></a><span data-ttu-id="51ba1-107">Özel ilke onaylamalarını içeri aktarmak için</span><span class="sxs-lookup"><span data-stu-id="51ba1-107">To import custom policy assertions</span></span>  
  
1. <span data-ttu-id="51ba1-108"><xref:System.ServiceModel.Description.IPolicyImportExtension?displayProperty=nameWithType>Arabirimini bir sınıfa uygulayın.</span><span class="sxs-lookup"><span data-stu-id="51ba1-108">Implement the <xref:System.ServiceModel.Description.IPolicyImportExtension?displayProperty=nameWithType> interface on a class.</span></span> <span data-ttu-id="51ba1-109">Aşağıdaki yordamlara bakın.</span><span class="sxs-lookup"><span data-stu-id="51ba1-109">See the following procedures.</span></span>  
  
2. <span data-ttu-id="51ba1-110">Özel ilke içe aktarıcı şu şekilde ekleyin:</span><span class="sxs-lookup"><span data-stu-id="51ba1-110">Insert the custom policy importer either by:</span></span>  
  
3. <span data-ttu-id="51ba1-111">Yapılandırma dosyası kullanma.</span><span class="sxs-lookup"><span data-stu-id="51ba1-111">Using a configuration file.</span></span> <span data-ttu-id="51ba1-112">Aşağıdaki yordamlara bakın.</span><span class="sxs-lookup"><span data-stu-id="51ba1-112">See the following procedures.</span></span>  
  
4. <span data-ttu-id="51ba1-113">[ServiceModel meta veri yardımcı programı aracıyla](../servicemodel-metadata-utility-tool-svcutil-exe.md)bir yapılandırma dosyası kullanma (Svcutil.exe).</span><span class="sxs-lookup"><span data-stu-id="51ba1-113">Using a configuration file with [ServiceModel Metadata Utility Tool (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md).</span></span> <span data-ttu-id="51ba1-114">Aşağıdaki yordamlara bakın.</span><span class="sxs-lookup"><span data-stu-id="51ba1-114">See the following procedures.</span></span>  
  
5. <span data-ttu-id="51ba1-115">İlke İçeri Aktarıcı programlı bir şekilde ekleniyor.</span><span class="sxs-lookup"><span data-stu-id="51ba1-115">Programmatically inserting the policy importer.</span></span> <span data-ttu-id="51ba1-116">Aşağıdaki yordamlara bakın.</span><span class="sxs-lookup"><span data-stu-id="51ba1-116">See the following procedures.</span></span>  
  
### <a name="to-implement-the-systemservicemodeldescriptionipolicyimportextension-interface-on-any-class"></a><span data-ttu-id="51ba1-117">Herhangi bir sınıfta System. ServiceModel. Description. IPolicyImportExtension arabirimini uygulamak için</span><span class="sxs-lookup"><span data-stu-id="51ba1-117">To implement the System.ServiceModel.Description.IPolicyImportExtension interface on any class</span></span>  
  
1. <span data-ttu-id="51ba1-118"><xref:System.ServiceModel.Description.IPolicyImportExtension.ImportPolicy%2A?displayProperty=nameWithType>Yönteminde, ilgilendiğiniz her ilke konusu için, yöntemine geçirilen nesne üzerinde uygun yöntemi (istediğiniz onaylama kapsamına bağlı olarak) çağırarak içeri aktarmak istediğiniz ilke onaylamalarını bulun <xref:System.ServiceModel.Description.PolicyConversionContext?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="51ba1-118">In the <xref:System.ServiceModel.Description.IPolicyImportExtension.ImportPolicy%2A?displayProperty=nameWithType> method, for each policy subject that you are interested in, find the policy assertions that you want to import by calling the appropriate method (depending upon the scope of the assertion that you want) on the <xref:System.ServiceModel.Description.PolicyConversionContext?displayProperty=nameWithType> object passed to the method.</span></span> <span data-ttu-id="51ba1-119">Aşağıdaki kod örneği, <xref:System.ServiceModel.Description.PolicyAssertionCollection.Remove%2A?displayProperty=nameWithType> özel ilke onayını bulmak ve tek bir adımda koleksiyondan kaldırmak için yönteminin nasıl kullanılacağını gösterir.</span><span class="sxs-lookup"><span data-stu-id="51ba1-119">The following code example shows how to use the <xref:System.ServiceModel.Description.PolicyAssertionCollection.Remove%2A?displayProperty=nameWithType> method to locate the custom policy assertion and remove it from the collection in one step.</span></span> <span data-ttu-id="51ba1-120">Onaylama işlemini bulmak ve kaldırmak için Remove yöntemini kullanırsanız, 4. adımı gerçekleştirmeniz gerekmez.</span><span class="sxs-lookup"><span data-stu-id="51ba1-120">If you use the remove method to locate and remove the assertion, you do not have to perform step 4.</span></span>  
  
     [!code-csharp[CustomPolicySample#9](../../../../samples/snippets/csharp/VS_Snippets_CFX/custompolicysample/cs/policyimporter.cs#9)]
     [!code-vb[CustomPolicySample#9](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/custompolicysample/vb/policyimporter.vb#9)]  
  
2. <span data-ttu-id="51ba1-121">İlke onaylamalarını işleyin.</span><span class="sxs-lookup"><span data-stu-id="51ba1-121">Process the policy assertions.</span></span> <span data-ttu-id="51ba1-122">İlke sisteminin iç içe geçmiş ilkeleri ve ile normalleştirmediğini unutmayın `wsp:optional` .</span><span class="sxs-lookup"><span data-stu-id="51ba1-122">Note that the policy system does not normalize nested policies and `wsp:optional`.</span></span> <span data-ttu-id="51ba1-123">Bu yapıları ilke içeri aktarma uzantı uygulamanızda işlemelidir.</span><span class="sxs-lookup"><span data-stu-id="51ba1-123">You must process these constructs in your policy import extension implementation.</span></span>  
  
3. <span data-ttu-id="51ba1-124">İlke onaylama işlemi tarafından belirtilen yeteneği veya gereksinimi destekleyen bağlama veya sözleşmede özelleştirmeyi gerçekleştirin.</span><span class="sxs-lookup"><span data-stu-id="51ba1-124">Perform the customization to the binding or contract that supports the capability or requirement specified by the policy assertion.</span></span> <span data-ttu-id="51ba1-125">Genellikle Onaylamalar, bir bağlamanın belirli bir yapılandırma veya belirli bir bağlama öğesi gerektirdiğini gösterir.</span><span class="sxs-lookup"><span data-stu-id="51ba1-125">Typically assertions indicate that a binding requires a particular configuration or a specific binding element.</span></span> <span data-ttu-id="51ba1-126">Bu değişiklikleri özelliğe erişerek yapın <xref:System.ServiceModel.Description.PolicyConversionContext.BindingElements%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="51ba1-126">Make these modifications by accessing the <xref:System.ServiceModel.Description.PolicyConversionContext.BindingElements%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="51ba1-127">Diğer Onaylamalar, sözleşmeyi değiştirmenizi gerektirir.</span><span class="sxs-lookup"><span data-stu-id="51ba1-127">Other assertions require that you modify the contract.</span></span>  <span data-ttu-id="51ba1-128">Özelliği kullanarak sözleşmeye erişebilir ve bunları değiştirebilirsiniz <xref:System.ServiceModel.Description.PolicyConversionContext.Contract%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="51ba1-128">You can access and modify the contract using the <xref:System.ServiceModel.Description.PolicyConversionContext.Contract%2A?displayProperty=nameWithType> property.</span></span>  <span data-ttu-id="51ba1-129">İlke içeri aktarmalarınızın aynı bağlama ve anlaşma için birden çok kez çağrılabilecek olduğunu, ancak bir ilkeyi içeri aktarma işlemi başarısız olursa farklı ilke alternatiflerine sahip olabileceğini unutmayın.</span><span class="sxs-lookup"><span data-stu-id="51ba1-129">Note that your policy importer may get called multiple times for the same binding and contract, but different policy alternatives if importing a policy alternative fails.</span></span> <span data-ttu-id="51ba1-130">Kodunuzun bu davranışa dayanıklı olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="51ba1-130">Your code should be resilient to this behavior.</span></span>  
  
4. <span data-ttu-id="51ba1-131">Özel ilke onayını onaylama koleksiyonundan kaldırın.</span><span class="sxs-lookup"><span data-stu-id="51ba1-131">Remove the custom policy assertion from the assertion collection.</span></span> <span data-ttu-id="51ba1-132">Onaylama kaldırma Windows Communication Foundation (WCF), ilke içeri aktarmanın başarısız olduğunu varsayar ve ilişkili bağlamayı içeri aktarmaz.</span><span class="sxs-lookup"><span data-stu-id="51ba1-132">If you do not remove the assertion Windows Communication Foundation (WCF) assumes that the policy import was unsuccessful and does not import the associated binding.</span></span> <span data-ttu-id="51ba1-133"><xref:System.ServiceModel.Description.PolicyAssertionCollection.Remove%2A?displayProperty=nameWithType>Özel ilke onaylama işlemini bulmak ve tek bir adımda koleksiyondan kaldırmak için yöntemini kullandıysanız, bu adımı gerçekleştirmeniz gerekmez.</span><span class="sxs-lookup"><span data-stu-id="51ba1-133">If you used the <xref:System.ServiceModel.Description.PolicyAssertionCollection.Remove%2A?displayProperty=nameWithType> method to locate the custom policy assertion and remove it from the collection in one step you do not have to perform this step.</span></span>  
  
### <a name="to-insert-the-custom-policy-importer-into-the-metadata-system-using-a-configuration-file"></a><span data-ttu-id="51ba1-134">Özel ilke alma aracını bir yapılandırma dosyası kullanarak meta veri sistemine eklemek için</span><span class="sxs-lookup"><span data-stu-id="51ba1-134">To insert the custom policy importer into the metadata System using a configuration file</span></span>  
  
1. <span data-ttu-id="51ba1-135">İçeri aktarma türünü, `<extensions>` [\<policyImporters>](../../configure-apps/file-schema/wcf/policyimporters.md) istemci yapılandırma dosyasındaki öğesinin içindeki öğesine ekleyin.</span><span class="sxs-lookup"><span data-stu-id="51ba1-135">Add the importer type to the `<extensions>` element inside the [\<policyImporters>](../../configure-apps/file-schema/wcf/policyimporters.md) element in the client configuration file.</span></span>  
  
     [!code-xml[CustomPolicySample#7](../../../../samples/snippets/csharp/VS_Snippets_CFX/custompolicysample/cs/client.exe.config#7)]
  
2. <span data-ttu-id="51ba1-136">İstemci uygulamasında, <xref:System.ServiceModel.Description.MetadataResolver?displayProperty=nameWithType> <xref:System.ServiceModel.Description.WsdlImporter?displayProperty=nameWithType> meta verileri çözümlemek için veya kullanın ve içeri aktarma otomatik olarak çağrılır.</span><span class="sxs-lookup"><span data-stu-id="51ba1-136">In the client application, use the <xref:System.ServiceModel.Description.MetadataResolver?displayProperty=nameWithType> or <xref:System.ServiceModel.Description.WsdlImporter?displayProperty=nameWithType> to resolve the metadata and the importer is invoked automatically.</span></span>  
  
     [!code-csharp[CustomPolicySample#10](../../../../samples/snippets/csharp/VS_Snippets_CFX/custompolicysample/cs/client.cs#10)]
     [!code-vb[CustomPolicySample#10](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/custompolicysample/vb/client.vb#10)]  
  
### <a name="to-insert-the-custom-policy-importer-into-the-metadata-system-using-svcutilexe"></a><span data-ttu-id="51ba1-137">Özel ilke içe aktarıcı Svcutil.exe kullanarak meta veri sistemine eklemek için</span><span class="sxs-lookup"><span data-stu-id="51ba1-137">To insert the custom policy importer into the metadata system using Svcutil.exe</span></span>  
  
1. <span data-ttu-id="51ba1-138">İçeri aktarma türünü `<extensions>` [\<policyImporters>](../../configure-apps/file-schema/wcf/policyimporters.md) Svcutil.exe.config yapılandırma dosyasındaki öğesinin içindeki öğesine ekleyin.</span><span class="sxs-lookup"><span data-stu-id="51ba1-138">Add the importer type to the `<extensions>` element inside the [\<policyImporters>](../../configure-apps/file-schema/wcf/policyimporters.md) element in the Svcutil.exe.config configuration file.</span></span> <span data-ttu-id="51ba1-139">Ayrıca, seçeneği kullanılarak farklı bir yapılandırma dosyasına kayıtlı ilke İçeri Aktarıcı türlerini yüklemek için Svcutil.exe ' ı işaret edebilirsiniz `/svcutilConfig` .</span><span class="sxs-lookup"><span data-stu-id="51ba1-139">You can also point Svcutil.exe to load policy importer types registered in a different configuration file by using the `/svcutilConfig` option.</span></span>  
  
2. <span data-ttu-id="51ba1-140">Meta verileri içeri aktarmak için [ServiceModel meta veri yardımcı programı aracını (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md) kullanın ve içeri aktarma otomatik olarak çağrılır.</span><span class="sxs-lookup"><span data-stu-id="51ba1-140">Use [ServiceModel Metadata Utility Tool (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md) to import the metadata and the importer is invoked automatically.</span></span>  
  
### <a name="to-insert-the-custom-policy-importer-into-the-metadata-system-programmatically"></a><span data-ttu-id="51ba1-141">Özel ilke içe aktarıcı 'nın meta veri sistemine programlı bir şekilde eklenmesini sağlamak için</span><span class="sxs-lookup"><span data-stu-id="51ba1-141">To insert the custom policy importer into the metadata system programmatically</span></span>  
  
1. <span data-ttu-id="51ba1-142"><xref:System.ServiceModel.Description.MetadataImporter.PolicyImportExtensions%2A?displayProperty=nameWithType>Meta verileri içeri aktarmadan önce özelliğine içeri aktarma özelliğini ekleyin (örneğin, kullanıyorsanız <xref:System.ServiceModel.Description.WsdlImporter?displayProperty=nameWithType> ).</span><span class="sxs-lookup"><span data-stu-id="51ba1-142">Add the importer to the <xref:System.ServiceModel.Description.MetadataImporter.PolicyImportExtensions%2A?displayProperty=nameWithType> property (for example, if you are using the <xref:System.ServiceModel.Description.WsdlImporter?displayProperty=nameWithType>) prior to importing the metadata.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="51ba1-143">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="51ba1-143">See also</span></span>

- <xref:System.ServiceModel.Description.MetadataResolver?displayProperty=nameWithType>
- <xref:System.ServiceModel.Description.WsdlImporter?displayProperty=nameWithType>
- <xref:System.ServiceModel.Description.MetadataResolver?displayProperty=nameWithType>
- [<span data-ttu-id="51ba1-144">Meta Veri Sistemini Genişletme</span><span class="sxs-lookup"><span data-stu-id="51ba1-144">Extending the Metadata System</span></span>](extending-the-metadata-system.md)
