---
description: 'Daha fazla bilgi edinin: Windows Communication Foundation hata işleme (WCF)'
title: Hata işleme
ms.date: 03/30/2017
ms.assetid: c948841a-7db9-40ae-9b78-587d216cbcaf
ms.openlocfilehash: e09c07037e2b3398e2f82307242032a29c356ce5
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 02/06/2021
ms.locfileid: "99704777"
---
# <a name="error-handling-in-windows-communication-foundation-wcf"></a><span data-ttu-id="247d7-103">Windows Communication Foundation hata işleme (WCF)</span><span class="sxs-lookup"><span data-stu-id="247d7-103">Error handling in Windows Communication Foundation (WCF)</span></span>

<span data-ttu-id="247d7-104">Bir hizmet beklenmeyen bir özel durumla veya hatayla karşılaştığında, özel durum işleme çözümünü tasarlamak için birden çok yol vardır.</span><span class="sxs-lookup"><span data-stu-id="247d7-104">When a service encounters an unexpected exception or error, there are multiple ways to design an exception-handling solution.</span></span> <span data-ttu-id="247d7-105">Tek bir "doğru" veya "en iyi uygulama" hata işleme çözümü olmasa da, bir tane göz önünde bulundurmanız için birden çok geçerli yol vardır.</span><span class="sxs-lookup"><span data-stu-id="247d7-105">While there is no single "correct" or "best practice" error-handling solution, there are multiple valid paths for one to consider.</span></span> <span data-ttu-id="247d7-106">Genellikle, WCF uygulamasının karmaşıklığına, özel durumların tür ve sıklığının yanı sıra özel durumların işlenme ve işlenmemiş doğası ile ilişkili izleme, günlüğe kaydetme veya ilke gereksinimlerinin ne olduğuna bağlı olarak, aşağıdaki listeden birden çok yaklaşımı birleştiren bir karma çözüm uygulamanız önerilir.</span><span class="sxs-lookup"><span data-stu-id="247d7-106">It is normally recommended that one implement a hybrid solution that combines multiple approaches from the list below, depending on the complexity of the WCF implementation, the type and frequency of the exceptions, the handled vs. unhandled nature of the exceptions, and any associated tracing, logging, or policy requirements.</span></span>

<span data-ttu-id="247d7-107">Bu çözümler, bu bölümün geri kalanında daha derin açıklanmıştır.</span><span class="sxs-lookup"><span data-stu-id="247d7-107">These solutions are explained more deeply in the rest of this section.</span></span>

## <a name="the-microsoft-enterprise-library"></a><span data-ttu-id="247d7-108">Microsoft Kurumsal kitaplığı</span><span class="sxs-lookup"><span data-stu-id="247d7-108">The Microsoft Enterprise Library</span></span>

<span data-ttu-id="247d7-109">Microsoft Kurumsal kitaplık özel durum Işleme uygulaması bloğunda ortak tasarım desenleri uygulamaya ve bir kurumsal uygulamanın tüm mimari katmanlarında gerçekleşen özel durumları işlemeye yönelik tutarlı bir strateji oluşturulmasına yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="247d7-109">The Microsoft Enterprise Library Exception Handling Application Block helps implement common design patterns and create a consistent strategy for processing exceptions that occur in all architectural layers of an enterprise application.</span></span> <span data-ttu-id="247d7-110">Uygulama bileşenlerinde bulunan catch deyimlerine dahil edilen tipik kodu desteklemek için tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="247d7-110">It is designed to support the typical code contained in catch statements in application components.</span></span> <span data-ttu-id="247d7-111">Bu kodu (özel durum bilgilerini kaydeden kod gibi) bir uygulama genelinde özdeş catch bloklarına yinelemek yerine, özel durum Işleme uygulama bloğu, geliştiricilerin bu mantığı yeniden kullanılabilir özel durum işleyicileri olarak kapsüllemelerini sağlar.</span><span class="sxs-lookup"><span data-stu-id="247d7-111">Instead of repeating this code (such as code that logs exception information) in identical catch blocks throughout an application, the Exception Handling Application Block allows developers to encapsulate this logic as reusable exception handlers.</span></span>

<span data-ttu-id="247d7-112">Bu kitaplık, kullanıma hazır bir hata sözleşmesi özel durum Işleyicisi içerir.</span><span class="sxs-lookup"><span data-stu-id="247d7-112">This Library includes out-of-the-box a Fault Contract Exception Handler.</span></span> <span data-ttu-id="247d7-113">Bu özel durum işleyicisi, WCF hizmet sınırları 'nda kullanılmak üzere tasarlanmıştır ve özel durumdan yeni bir hata sözleşmesi oluşturur.</span><span class="sxs-lookup"><span data-stu-id="247d7-113">This exception handler is designed for use at WCF service boundaries, and generates a new Fault Contract from the exception.</span></span>

<span data-ttu-id="247d7-114">Uygulama blokları, yaygın olarak kullanılan en iyi uygulamaları dahil etmek ve uygulamanızın tamamında özel durum işleme için ortak bir yaklaşım sağlamak üzere hedeflenir.</span><span class="sxs-lookup"><span data-stu-id="247d7-114">Application blocks aim to incorporate commonly used best practices and provide a common approach for exception handling throughout your application.</span></span> <span data-ttu-id="247d7-115">Diğer taraftan, özel hata işleyicileri ve tek başına geliştirilen hata sözleşmeleri de çok yararlı olabilir.</span><span class="sxs-lookup"><span data-stu-id="247d7-115">On the other hand, custom error handlers and fault contracts developed on one’s own can also be very useful.</span></span> <span data-ttu-id="247d7-116">Örneğin, özel hata işleyicileri, tüm özel durumları FaultExceptions ' a otomatik olarak yükseltmek ve ayrıca uygulamanıza günlük özellikleri eklemek için harika bir fırsat sağlar.</span><span class="sxs-lookup"><span data-stu-id="247d7-116">For instance, custom error handlers provide an excellent opportunity to automatically promote all exceptions to FaultExceptions and also to add logging capabilities to your application.</span></span>

<span data-ttu-id="247d7-117">Daha fazla bilgi için lütfen bkz. [Microsoft Kurumsal kitaplığı](/previous-versions/msp-n-p/ff632023(v=pandp.10)).</span><span class="sxs-lookup"><span data-stu-id="247d7-117">For more information, please see [Microsoft Enterprise Library](/previous-versions/msp-n-p/ff632023(v=pandp.10)).</span></span>

## <a name="dealing-with-expected-exceptions"></a><span data-ttu-id="247d7-118">Beklenen özel durumlarla ilgilenme</span><span class="sxs-lookup"><span data-stu-id="247d7-118">Dealing with expected exceptions</span></span>

<span data-ttu-id="247d7-119">Doğru eylem kursu, her işlem veya ilgili genişletilebilirlik noktasındaki beklenen özel durumları yakalamak, ' den kurtarılıp kurtarılamayacağına karar vermek ve bir FaultException içinde uygun özel hatayı geri döndürmaktır \<T> .</span><span class="sxs-lookup"><span data-stu-id="247d7-119">The proper course of action is to catch expected exceptions in every operation or relevant extensibility point, decide whether they can be recovered from, and return the proper custom fault in a FaultException\<T>.</span></span>
  
## <a name="dealing-with-unexpected-exceptions-using-an-ierrorhandler"></a><span data-ttu-id="247d7-120">IErrorHandler kullanarak beklenmeyen özel durumlarla ilgilenme</span><span class="sxs-lookup"><span data-stu-id="247d7-120">Dealing with unexpected exceptions using an IErrorHandler</span></span>

<span data-ttu-id="247d7-121">Beklenmeyen özel durumlarla başa çıkmak için, önerilen eylem "kanca" bir IErrorHandler ' dir.</span><span class="sxs-lookup"><span data-stu-id="247d7-121">To deal with unexpected exceptions, the recommended course of action is to "hook" an IErrorHandler.</span></span> <span data-ttu-id="247d7-122">Hata işleyicileri yalnızca WCF çalışma zamanı düzeyinde ("hizmet modeli" katmanı) özel durumları yakalar, bu da kanal katmanında değil.</span><span class="sxs-lookup"><span data-stu-id="247d7-122">Error handlers only catch exceptions at the WCF runtime level (the "service model" layer), not at the channel layer.</span></span> <span data-ttu-id="247d7-123">Kanal düzeyinde bir IErrorHandler 'i bağlamak için tek yol, Çoğu senaryoda önerilmeyen özel bir kanal oluşturmaktır.</span><span class="sxs-lookup"><span data-stu-id="247d7-123">The only way to hook an IErrorHandler at the channel level is to create a custom channel, which is not recommended in most scenarios.</span></span>

<span data-ttu-id="247d7-124">"Beklenmeyen özel durum" genellikle kurtarılamaz bir özel durum ya da bir işleme özel durumu değildir; Bunun yerine, beklenmeyen bir kullanıcı özel durumu.</span><span class="sxs-lookup"><span data-stu-id="247d7-124">An "unexpected exception" is generally neither an irrecoverable exception nor a processing exception; it is, instead, an unexpected user exception.</span></span> <span data-ttu-id="247d7-125">Kurtarılamaz bir özel durum (örneğin, bellek dışı özel durum) – genel olarak [hizmet modeli özel durum işleyicisi](xref:System.ServiceModel.Dispatcher.ExceptionHandler) tarafından genel olarak ele alınamaz. genellikle düzgün bir şekilde işlenemeyebilir ve bu tür bir özel durumu işlemenin tek nedeni ek günlüğe kaydetme veya istemciye standart özel durum döndürme olabilir.</span><span class="sxs-lookup"><span data-stu-id="247d7-125">An irrecoverable exception (such as an out-of-memory exception) – one generally handled by the [Service Model Exception Handler](xref:System.ServiceModel.Dispatcher.ExceptionHandler) automatically – cannot generally be handled gracefully, and the only reason to handle such an exception at all may be do additional logging or to return a standard exception to the client.</span></span> <span data-ttu-id="247d7-126">İleti işlenirken bir işleme özel durumu oluşur. Örneğin, serileştirme, kodlayıcı veya biçimlendirici düzeyinde genellikle, bu özel durumlar meydana geldiğinde hata işleyicisine müdahale etmek için genellikle çok erken veya çok geç olduğundan, genellikle bir IErrorHandler üzerinden işlenemez.</span><span class="sxs-lookup"><span data-stu-id="247d7-126">A processing exception occurs in the processing of the message – for example, at the serialization, encoder, or formatter level – generally cannot be handled at an IErrorHandler, because it is generally either too early or too late for the error handler to intervene by the time these exceptions occur.</span></span> <span data-ttu-id="247d7-127">Benzer şekilde, taşıma özel durumları bir IErrorHandler üzerinde işlenemez.</span><span class="sxs-lookup"><span data-stu-id="247d7-127">Similarly, transport exceptions cannot be handled at an IErrorHandler.</span></span>

<span data-ttu-id="247d7-128">Bir IErrorHandler ile, bir özel durum oluştuğunda uygulamanızın davranışını açık bir şekilde denetleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="247d7-128">With an IErrorHandler, you can explicitly control the behavior of your application when an exception is thrown.</span></span> <span data-ttu-id="247d7-129">Şunları yapabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="247d7-129">You may:</span></span>  

1. <span data-ttu-id="247d7-130">İstemciye bir hata gönderilmesi gerekip gerekmediğine karar verin.</span><span class="sxs-lookup"><span data-stu-id="247d7-130">Decide whether or not to send a fault to the client.</span></span>

2. <span data-ttu-id="247d7-131">Özel durumu bir hata ile değiştirin.</span><span class="sxs-lookup"><span data-stu-id="247d7-131">Replace an exception with a fault.</span></span>

3. <span data-ttu-id="247d7-132">Hatayı başka bir hata ile değiştirin.</span><span class="sxs-lookup"><span data-stu-id="247d7-132">Replace a fault with another fault.</span></span>

4. <span data-ttu-id="247d7-133">Günlüğe kaydetmeyi veya izlemeyi gerçekleştirin.</span><span class="sxs-lookup"><span data-stu-id="247d7-133">Perform logging or tracing.</span></span>

5. <span data-ttu-id="247d7-134">Diğer özel etkinlikleri gerçekleştirin.</span><span class="sxs-lookup"><span data-stu-id="247d7-134">Perform other custom activities.</span></span>

<span data-ttu-id="247d7-135">Bunlardan biri, hizmetinize ait kanal dağıtıcılarının ErrorHandlers özelliğine ekleyerek özel bir hata işleyicisi yükleyebilir.</span><span class="sxs-lookup"><span data-stu-id="247d7-135">One can install a custom error handler by adding it to the ErrorHandlers property of the channel dispatchers for your service.</span></span>  <span data-ttu-id="247d7-136">Birden fazla hata işleyicisi olması mümkündür ve bu koleksiyona eklendikleri sırada çağırılır.</span><span class="sxs-lookup"><span data-stu-id="247d7-136">It is possible to have more than one error handler and they are called in the order they are added to this collection.</span></span>

<span data-ttu-id="247d7-137">IErrorHandler. ProvideFault istemciye gönderilen hata iletisini denetler.</span><span class="sxs-lookup"><span data-stu-id="247d7-137">IErrorHandler.ProvideFault controls the fault message that is sent to the client.</span></span> <span data-ttu-id="247d7-138">Bu yöntem, hizmetinize bir işlem tarafından oluşturulan özel durumun türünden bağımsız olarak çağrılır.</span><span class="sxs-lookup"><span data-stu-id="247d7-138">This method is called regardless of the type of the exception thrown by an operation in your service.</span></span> <span data-ttu-id="247d7-139">Burada hiçbir işlem gerçekleştirildiyse, WCF varsayılan davranışını varsayar ve yerinde özel hata işleyicileri olmadığı gibi devam eder.</span><span class="sxs-lookup"><span data-stu-id="247d7-139">If no operation is performed here, WCF assumes its default behavior and continues as if there were no custom error handlers in place.</span></span>

<span data-ttu-id="247d7-140">Bu yaklaşımı belki kullanabileceğiniz bir alan, istemciye gönderilmeden önce özel durumları hatalara dönüştürmek için merkezi bir yer oluşturmak istediğinizde (örneğin atılmadığından ve kanalın hatalı duruma taşınmadığından emin olmak).</span><span class="sxs-lookup"><span data-stu-id="247d7-140">One area that you could perhaps use this approach is when you want to create a central place for converting exceptions to faults before they are sent to the client (ensuring that the instance is not disposed and the channel is not moved to the Faulted state).</span></span>

<span data-ttu-id="247d7-141">IErrorHandler. HandleError yöntemi genellikle hata günlüğü, sistem bildirimleri, uygulama kapatma vb. gibi hata ile ilgili davranışları uygulamak için kullanılır. IErrorHandler. HandleError, hizmetin içindeki birden fazla yerde çağrılabilir ve hatanın nerede oluşturulduğuna bağlı olarak, HandleError yöntemi işlemle aynı iş parçacığı tarafından çağrılabilir veya çağrılamaz; Bu şekilde hiçbir garanti yapılmaz.</span><span class="sxs-lookup"><span data-stu-id="247d7-141">The IErrorHandler.HandleError method is usually used to implement error-related behaviors such as error logging, system notifications, shutting down the application, etc. IErrorHandler.HandleError can be called at multiple places inside the service, and depending on where the error is thrown, the HandleError method may or may not be called by the same thread as the operation; no guarantees are made in this regard.</span></span>

## <a name="dealing-with-exceptions-outside-wcf"></a><span data-ttu-id="247d7-142">WCF dışındaki özel durumlarla ilgilenme</span><span class="sxs-lookup"><span data-stu-id="247d7-142">Dealing with exceptions outside WCF</span></span>

<span data-ttu-id="247d7-143">Genellikle, yapılandırma özel durumları, veritabanı bağlantı dizesi özel durumları ve diğer benzer özel durumlar bir WCF uygulaması bağlamında gerçekleşebilir, ancak bunlar hizmet modeli veya Web hizmeti 'nin kendisinden kaynaklanan özel durum değildir.</span><span class="sxs-lookup"><span data-stu-id="247d7-143">Often, configuration exceptions, database connection string exceptions, and other similar exceptions may occur within the context of a WCF application, but are themselves are not exceptions caused by the service model or the web service itself.</span></span> <span data-ttu-id="247d7-144">Bu özel durumlar, Web hizmeti dışında "normal" özel durumlardır ve ortamdaki diğer dış özel durumlar işlenebilmelidir.</span><span class="sxs-lookup"><span data-stu-id="247d7-144">These exceptions are "regular" exceptions external to the web service, and should be handled just as other external exceptions in the environment are to be handled.</span></span>

## <a name="tracing-exceptions"></a><span data-ttu-id="247d7-145">Özel durumları izleme</span><span class="sxs-lookup"><span data-stu-id="247d7-145">Tracing exceptions</span></span>

<span data-ttu-id="247d7-146">Yalnızca birinin tüm özel durumları görebileceği tek "catch-all" konumu izleniyor.</span><span class="sxs-lookup"><span data-stu-id="247d7-146">Tracing is the only "catch-all" place where one can potentially see all exceptions.</span></span> <span data-ttu-id="247d7-147">İzleme ve günlüğe kaydetme özel durumları hakkında daha fazla bilgi için bkz. Izleme ve günlüğe kaydetme.</span><span class="sxs-lookup"><span data-stu-id="247d7-147">For more information on tracing and logging exceptions, see Tracing and Logging.</span></span>

## <a name="uri-template-errors-when-using-webgetattribute-and-webinvokeattribute"></a><span data-ttu-id="247d7-148">WebGetAttribute ve Webvokeattribute kullanılırken URI şablonu hataları</span><span class="sxs-lookup"><span data-stu-id="247d7-148">URI template errors when using WebGetAttribute and WebInvokeAttribute</span></span>

<span data-ttu-id="247d7-149">WebGet ve Webvoke öznitelikleri, istek adresi bileşenlerini işlem parametrelerine eşleyen bir URI şablonu belirtmenize olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="247d7-149">The WebGet and WebInvoke attributes allow you to specify a URI template that maps components of the request address to operation parameters.</span></span> <span data-ttu-id="247d7-150">Örneğin, "Hava durumu/{State}/{City}" URI şablonu, istek adresini değişmez belirteçlere, durum adlı bir parametreye ve City adlı bir parametreye eşler.</span><span class="sxs-lookup"><span data-stu-id="247d7-150">For example, the URI template "weather/{state}/{city}" maps the request address into literal tokens, a parameter named state, and a parameter named city.</span></span> <span data-ttu-id="247d7-151">Bu parametreler daha sonra, işlemin bazı biçimsel parametrelerine ad ile bağlanabilir.</span><span class="sxs-lookup"><span data-stu-id="247d7-151">These parameters might then be bound by name to some of the formal parameters of the operation.</span></span>

<span data-ttu-id="247d7-152">Türü belirlenmiş bir sözleşmenin biçimsel parametreleri dize olmayan türlerde olabilir, şablon parametreleri URI içindeki dizeler biçiminde görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="247d7-152">The template parameters appear in the form of strings within the URI while the formal parameters of a typed contract might be of non-string types.</span></span> <span data-ttu-id="247d7-153">Bu nedenle, işlem çağrılmadan önce dönüştürmenin gerçekleşmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="247d7-153">Therefore, a conversion needs to take place before the operation can be invoked.</span></span> <span data-ttu-id="247d7-154">[Dönüştürme biçimleri tablosu](wcf-web-http-programming-model-overview.md) kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="247d7-154">A [table of conversion formats](wcf-web-http-programming-model-overview.md) is available.</span></span>

<span data-ttu-id="247d7-155">Ancak, dönüştürme başarısız olursa, işlemin yanlış bir şekilde geçmiş olduğunu bilmesini sağlamak için bir yol yoktur.</span><span class="sxs-lookup"><span data-stu-id="247d7-155">However, if the conversion fails, then there's no way to let the operation know that something has gone wrong.</span></span> <span data-ttu-id="247d7-156">Bir dağıtım hatası biçiminde yüzey yerine tür dönüştürme.</span><span class="sxs-lookup"><span data-stu-id="247d7-156">The type conversion instead surfaces in the form of a dispatch failure.</span></span>

<span data-ttu-id="247d7-157">Bir tür dönüştürme gönderimi hatası, hata işleyicisi yükleyerek diğer birçok dağıtım hatası türüyle aynı şekilde incelenebilir.</span><span class="sxs-lookup"><span data-stu-id="247d7-157">A type conversion dispatch failure can be inspected the same as with many other types of dispatch failures by installing an error handler.</span></span> <span data-ttu-id="247d7-158">IErrorHandler genişletilebilirlik noktası, hizmet düzeyi özel durumları işlemek için çağrılır.</span><span class="sxs-lookup"><span data-stu-id="247d7-158">The IErrorHandler extensibility point is called to handle service-level exceptions.</span></span> <span data-ttu-id="247d7-159">Buradan, çağırana geri gönderilecek yanıt, ve özel görevler ve raporlama gerçekleştirmek için de seçilebilir.</span><span class="sxs-lookup"><span data-stu-id="247d7-159">From there, the response to be sent back to the caller – as well as perform any custom tasks and reporting – may be chosen.</span></span>

## <a name="see-also"></a><span data-ttu-id="247d7-160">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="247d7-160">See also</span></span>

- [<span data-ttu-id="247d7-161">Temel WCF Programlama</span><span class="sxs-lookup"><span data-stu-id="247d7-161">Basic WCF Programming</span></span>](../basic-wcf-programming.md)
