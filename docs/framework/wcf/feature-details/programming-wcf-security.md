---
title: WCF Güvenliğini Programlama
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- message security [WCF], programming overview
ms.assetid: 739ec222-4eda-4cc9-a470-67e64a7a3f10
ms.openlocfilehash: 1e82fbb266d3789a8d34109c66d9ee1d8a93c70c
ms.sourcegitcommit: 927b7ea6b2ea5a440c8f23e3e66503152eb85591
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/16/2020
ms.locfileid: "81463816"
---
# <a name="programming-wcf-security"></a><span data-ttu-id="a3879-102">WCF Güvenliğini Programlama</span><span class="sxs-lookup"><span data-stu-id="a3879-102">Programming WCF Security</span></span>
<span data-ttu-id="a3879-103">Bu konu, güvenli bir Windows Communication Foundation (WCF) uygulaması oluşturmak için kullanılan temel programlama görevlerini açıklar.</span><span class="sxs-lookup"><span data-stu-id="a3879-103">This topic describes the fundamental programming tasks used to create a secure Windows Communication Foundation (WCF) application.</span></span> <span data-ttu-id="a3879-104">Bu konu yalnızca kimlik doğrulama, gizlilik ve bütünlüğü kapsar, topluca *aktarım güvenliği*olarak bilinir.</span><span class="sxs-lookup"><span data-stu-id="a3879-104">This topic covers only authentication, confidentiality, and integrity, collectively known as *transfer security*.</span></span> <span data-ttu-id="a3879-105">Bu konu yetkilendirmeyi (kaynaklara veya hizmetlere erişim denetimi) kapsamaz; yetkilendirme hakkında bilgi [Authorization](../../../../docs/framework/wcf/feature-details/authorization-in-wcf.md)için Yetkilendirme'ye bakın.</span><span class="sxs-lookup"><span data-stu-id="a3879-105">This topic does not cover authorization (the control of access to resources or services); for information on authorization, see [Authorization](../../../../docs/framework/wcf/feature-details/authorization-in-wcf.md).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="a3879-106">Güvenlik kavramlarına değerli bir giriş için, özellikle WCF ile ilgili olarak, [Senaryolar, Desenler ve Web Hizmetleri Geliştirmeleri (WSE) 3.0 için Uygulama Kılavuzu'nda](https://docs.microsoft.com/previous-versions/msp-n-p/ff648183(v=pandp.10))MSDN'deki desen ve uygulama öğreticileri kümesine bakın.</span><span class="sxs-lookup"><span data-stu-id="a3879-106">For a valuable introduction to security concepts, especially in regard to WCF, see the set of patterns and practices tutorials on MSDN at [Scenarios, Patterns, and Implementation Guidance for Web Services Enhancements (WSE) 3.0](https://docs.microsoft.com/previous-versions/msp-n-p/ff648183(v=pandp.10)).</span></span>  
  
 <span data-ttu-id="a3879-107">WCF güvenliğini programlamak, aşağıdakileri ayarlayan üç adımı temel aşar: güvenlik modu, istemci kimlik bilgisi türü ve kimlik bilgileri değerleri.</span><span class="sxs-lookup"><span data-stu-id="a3879-107">Programming WCF security is based on three steps setting the following: the security mode, a client credential type, and the credential values.</span></span> <span data-ttu-id="a3879-108">Bu adımları kod veya yapılandırma yoluyla gerçekleştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a3879-108">You can perform these steps either through code or configuration.</span></span>  
  
## <a name="setting-the-security-mode"></a><span data-ttu-id="a3879-109">Güvenlik Modunu Ayarlama</span><span class="sxs-lookup"><span data-stu-id="a3879-109">Setting the Security Mode</span></span>  
 <span data-ttu-id="a3879-110">WCF'de güvenlik moduile programlama için genel adımları aşağıda açıklar:</span><span class="sxs-lookup"><span data-stu-id="a3879-110">The following explains the general steps for programming with the security mode in WCF:</span></span>  
  
1. <span data-ttu-id="a3879-111">Uygulama gereksinimlerinize uygun önceden tanımlanmış bağlamalardan birini seçin.</span><span class="sxs-lookup"><span data-stu-id="a3879-111">Select one of the predefined bindings appropriate to your application requirements.</span></span> <span data-ttu-id="a3879-112">Bağlama seçeneklerinin listesi [için, Sistem Tarafından Sağlanan Bağlamalar'a](../../../../docs/framework/wcf/system-provided-bindings.md)bakın.</span><span class="sxs-lookup"><span data-stu-id="a3879-112">For a list of the binding choices, see [System-Provided Bindings](../../../../docs/framework/wcf/system-provided-bindings.md).</span></span> <span data-ttu-id="a3879-113">Varsayılan olarak, hemen hemen her bağlama güvenlik etkin.</span><span class="sxs-lookup"><span data-stu-id="a3879-113">By default, nearly every binding has security enabled.</span></span> <span data-ttu-id="a3879-114">Bir özel durum <xref:System.ServiceModel.BasicHttpBinding> sınıf (yapılandırma kullanarak, [ \<temelHttpBinding>). ](../../../../docs/framework/configure-apps/file-schema/wcf/basichttpbinding.md)</span><span class="sxs-lookup"><span data-stu-id="a3879-114">The one exception is the <xref:System.ServiceModel.BasicHttpBinding> class (using configuration, the [\<basicHttpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/basichttpbinding.md)).</span></span>  
  
     <span data-ttu-id="a3879-115">Seçtiğiniz bağlama aktarımını belirler.</span><span class="sxs-lookup"><span data-stu-id="a3879-115">The binding you select determines the transport.</span></span> <span data-ttu-id="a3879-116">Örneğin, <xref:System.ServiceModel.WSHttpBinding> aktarım olarak HTTP kullanır; <xref:System.ServiceModel.NetTcpBinding> TCP kullanır.</span><span class="sxs-lookup"><span data-stu-id="a3879-116">For example, <xref:System.ServiceModel.WSHttpBinding> uses HTTP as the transport; <xref:System.ServiceModel.NetTcpBinding> uses TCP.</span></span>  
  
2. <span data-ttu-id="a3879-117">Bağlama için güvenlik modlarından birini seçin.</span><span class="sxs-lookup"><span data-stu-id="a3879-117">Select one of the security modes for the binding.</span></span> <span data-ttu-id="a3879-118">Seçtiğiniz bağlamanın kullanılabilir mod seçeneklerini belirlediğini unutmayın.</span><span class="sxs-lookup"><span data-stu-id="a3879-118">Note that the binding you select determines the available mode choices.</span></span> <span data-ttu-id="a3879-119">Örneğin, aktarım güvenliğine izin <xref:System.ServiceModel.WSDualHttpBinding> vermez (bu bir seçenek değildir).</span><span class="sxs-lookup"><span data-stu-id="a3879-119">For example, the <xref:System.ServiceModel.WSDualHttpBinding> does not allow transport security (it is not an option).</span></span> <span data-ttu-id="a3879-120">Benzer şekilde, <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> ne <xref:System.ServiceModel.NetNamedPipeBinding> mesaj güvenliğine izin verir.</span><span class="sxs-lookup"><span data-stu-id="a3879-120">Similarly, neither the <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> nor the <xref:System.ServiceModel.NetNamedPipeBinding> allows message security.</span></span>  
  
     <span data-ttu-id="a3879-121">Üç seçeneğiniz vardır:</span><span class="sxs-lookup"><span data-stu-id="a3879-121">You have three choices:</span></span>  
  
    1. `Transport`  
  
         <span data-ttu-id="a3879-122">Aktarım güvenliği, seçtiğiniz bağlamanın kullandığı mekanizmaya bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="a3879-122">Transport security depends on the mechanism that the binding you have selected uses.</span></span> <span data-ttu-id="a3879-123">Örneğin, kullanıyorsanız `WSHttpBinding` güvenlik mekanizması Güvenli Soketler Katmanı (SSL) (ayrıca HTTPS protokolü mekanizması).</span><span class="sxs-lookup"><span data-stu-id="a3879-123">For example, if you are using `WSHttpBinding` then the security mechanism is Secure Sockets Layer (SSL) (also the mechanism for the HTTPS protocol).</span></span> <span data-ttu-id="a3879-124">Genel olarak konuşursak, taşıma güvenliğinin en büyük avantajı, hangi taşımayı kullanıyor olursanız olun iyi bir iş elde etmektir.</span><span class="sxs-lookup"><span data-stu-id="a3879-124">Generally speaking, the main advantage of transport security is that it delivers good throughput no matter which transport you are using.</span></span> <span data-ttu-id="a3879-125">Ancak, iki sınırlaması vardır: Birincisi, aktarım mekanizmasının bir kullanıcıyı doğrulamak için kullanılan kimlik bilgisi türünü dikte etmesidir.</span><span class="sxs-lookup"><span data-stu-id="a3879-125">However, it does have two limitations: The first is that the transport mechanism dictates the credential type used to authenticate a user.</span></span> <span data-ttu-id="a3879-126">Bu, yalnızca bir hizmetin farklı kimlik bilgileri gerektiren diğer hizmetlerle birlikte çalışması gerekiyorsa bir dezavantajdır.</span><span class="sxs-lookup"><span data-stu-id="a3879-126">This is a drawback only if a service needs to interoperate with other services that demand different types of credentials.</span></span> <span data-ttu-id="a3879-127">İkincisi, güvenlik ileti düzeyinde uygulanmadığından, güvenlik uçtan uca değil, hop-by-hop şekilde uygulanır.</span><span class="sxs-lookup"><span data-stu-id="a3879-127">The second is that, because the security is not applied at the message level, security is implemented in a hop-by-hop manner rather than end-to-end.</span></span> <span data-ttu-id="a3879-128">Bu ikinci sınırlama yalnızca istemci ve hizmet arasındaki ileti yolu aracılar içeriyorsa bir sorundur.</span><span class="sxs-lookup"><span data-stu-id="a3879-128">This latter limitation is an issue only if the message path between client and service includes intermediaries.</span></span> <span data-ttu-id="a3879-129">Hangi taşımanın kullanılacağı hakkında daha fazla bilgi için [bkz.](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md)</span><span class="sxs-lookup"><span data-stu-id="a3879-129">For more information about which transport to use, see [Choosing a Transport](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md).</span></span> <span data-ttu-id="a3879-130">Aktarım güvenliğini kullanma hakkında daha fazla bilgi için [Taşıma Güvenliğine Genel Bakış'a](../../../../docs/framework/wcf/feature-details/transport-security-overview.md)bakın.</span><span class="sxs-lookup"><span data-stu-id="a3879-130">For more information about using transport security, see [Transport Security Overview](../../../../docs/framework/wcf/feature-details/transport-security-overview.md).</span></span>  
  
    2. `Message`  
  
         <span data-ttu-id="a3879-131">İleti güvenliği, her iletinin iletiyi güvende tutmak için gerekli üstbilgileri ve verileri içerdiği anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="a3879-131">Message security means that every message includes the necessary headers and data to keep the message secure.</span></span> <span data-ttu-id="a3879-132">Üstbilgilerin bileşimi değiştiğinden, istediğiniz sayıda kimlik bilgileri ekleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a3879-132">Because the composition of the headers varies, you can include any number of credentials.</span></span> <span data-ttu-id="a3879-133">Bir aktarım mekanizmasının sağlayamadığı belirli bir kimlik bilgisi türünü talep eden diğer hizmetlerle birlikte çalışıyorsanız veya iletinin her hizmetin farklı bir kimlik bilgisi türü gerektirdiği birden fazla hizmetle kullanılması gerekiyorsa, bu bir faktör haline gelir.</span><span class="sxs-lookup"><span data-stu-id="a3879-133">This becomes a factor if you are interoperating with other services that demand a specific credential type that a transport mechanism can't supply, or if the message must be used with more than one service, where each service demands a different credential type.</span></span>  
  
         <span data-ttu-id="a3879-134">Daha fazla bilgi için [İleti Güvenliği'ne](../../../../docs/framework/wcf/feature-details/message-security-in-wcf.md)bakın.</span><span class="sxs-lookup"><span data-stu-id="a3879-134">For more information, see [Message Security](../../../../docs/framework/wcf/feature-details/message-security-in-wcf.md).</span></span>  
  
    3. `TransportWithMessageCredential`  
  
         <span data-ttu-id="a3879-135">Bu seçenek ileti aktarımını güvence altına almak için aktarım katmanını kullanırken, her ileti diğer hizmetlerin gereksinim duyduğu zengin kimlik bilgilerini içerir.</span><span class="sxs-lookup"><span data-stu-id="a3879-135">This choice uses the transport layer to secure the message transfer, while every message includes the rich credentials other services need.</span></span> <span data-ttu-id="a3879-136">Bu, aktarım güvenliğinin performans avantajını ileti güvenliğinin zengin kimlik bilgileri avantajıyla birleştirir.</span><span class="sxs-lookup"><span data-stu-id="a3879-136">This combines the performance advantage of transport security with the rich credentials advantage of message security.</span></span> <span data-ttu-id="a3879-137">Bu aşağıdaki bağlamaları ile <xref:System.ServiceModel.BasicHttpBinding>kullanılabilir: <xref:System.ServiceModel.NetPeerTcpBinding>, <xref:System.ServiceModel.WSHttpBinding>, <xref:System.ServiceModel.WSFederationHttpBinding>, ve .</span><span class="sxs-lookup"><span data-stu-id="a3879-137">This is available with the following bindings: <xref:System.ServiceModel.BasicHttpBinding>, <xref:System.ServiceModel.WSFederationHttpBinding>, <xref:System.ServiceModel.NetPeerTcpBinding>, and <xref:System.ServiceModel.WSHttpBinding>.</span></span>  
  
3. <span data-ttu-id="a3879-138">HTTP için aktarım güvenliğini kullanmaya karar verirseniz (başka bir deyişle, HTTPS), ana bilgisayarı bir SSL sertifikasıyla yapılandırmanız ve bir bağlantı noktasında SSL'yi etkinleştirmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="a3879-138">If you decide to use transport security for HTTP (in other words, HTTPS), you must also configure the host with an SSL certificate and enable SSL on a port.</span></span> <span data-ttu-id="a3879-139">Daha fazla bilgi için [HTTP Transport Security'ye](../../../../docs/framework/wcf/feature-details/http-transport-security.md)bakın.</span><span class="sxs-lookup"><span data-stu-id="a3879-139">For more information, see [HTTP Transport Security](../../../../docs/framework/wcf/feature-details/http-transport-security.md).</span></span>  
  
4. <span data-ttu-id="a3879-140">Kullanıyorsanız <xref:System.ServiceModel.WSHttpBinding> ve güvenli bir oturum oluşturmanız gerekmiyorsa, <xref:System.ServiceModel.NonDualMessageSecurityOverHttp.EstablishSecurityContext%2A> `false`özelliği .</span><span class="sxs-lookup"><span data-stu-id="a3879-140">If you are using the <xref:System.ServiceModel.WSHttpBinding> and do not need to establish a secure session, set the <xref:System.ServiceModel.NonDualMessageSecurityOverHttp.EstablishSecurityContext%2A> property to `false`.</span></span>  
  
     <span data-ttu-id="a3879-141">Güvenli oturum, bir istemci ve hizmet simetrik anahtar kullanarak bir kanal oluşturduğunda oluşur (hem istemci hem de sunucu iletişim kapatılana kadar konuşma uzunluğu için aynı anahtarı kullanır).</span><span class="sxs-lookup"><span data-stu-id="a3879-141">A secure session occurs when a client and service create a channel using a symmetric key (both client and server use the same key for the length of a conversation, until the dialog is closed).</span></span>  
  
## <a name="setting-the-client-credential-type"></a><span data-ttu-id="a3879-142">İstemci Kimlik Türünü Ayarlama</span><span class="sxs-lookup"><span data-stu-id="a3879-142">Setting the Client Credential Type</span></span>  
 <span data-ttu-id="a3879-143">Uygun olarak bir istemci kimlik bilgisi türü seçin.</span><span class="sxs-lookup"><span data-stu-id="a3879-143">Select a client credential type as appropriate.</span></span> <span data-ttu-id="a3879-144">Daha fazla bilgi için [bkz.](../../../../docs/framework/wcf/feature-details/selecting-a-credential-type.md)</span><span class="sxs-lookup"><span data-stu-id="a3879-144">For more information, see [Selecting a Credential Type](../../../../docs/framework/wcf/feature-details/selecting-a-credential-type.md).</span></span> <span data-ttu-id="a3879-145">Aşağıdaki istemci kimlik bilgileri türleri kullanılabilir:</span><span class="sxs-lookup"><span data-stu-id="a3879-145">The following client credential types are available:</span></span>  
  
- `Windows`  
  
- `Certificate`  
  
- `Digest`  
  
- `Basic`  
  
- `UserName`  
  
- `NTLM`  
  
- `IssuedToken`  
  
 <span data-ttu-id="a3879-146">Modu nasıl ayarladığınıza bağlı olarak, kimlik bilgisi türünü ayarlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="a3879-146">Depending on how you set the mode, you must set the credential type.</span></span> <span data-ttu-id="a3879-147">Örneğin, `wsHttpBinding`,, "İleti" modunu seçtiyseniz ve modu "İleti" `clientCredentialType` olarak ayarladıysanız, İleti öğesinin özniteliğini aşağıdaki değerlerden birine de ayarlayabilirsiniz: `None`, , `Windows` `UserName` `Certificate`ve `IssuedToken`, aşağıdaki yapılandırma örneğinde gösterildiği gibi.</span><span class="sxs-lookup"><span data-stu-id="a3879-147">For example, if you have selected the `wsHttpBinding`, and have set the mode to "Message," then you can also set the `clientCredentialType` attribute of the Message element to one of the following values: `None`, `Windows`, `UserName`, `Certificate`, and `IssuedToken`, as shown in the following configuration example.</span></span>  
  
```xml  
<system.serviceModel>  
<bindings>  
  <wsHttpBinding>  
    <binding name="myBinding">  
      <security mode="Message"/>  
      <message clientCredentialType="Windows"/>  
    </binding>
  </wsHttpBinding>
</bindings>  
</system.serviceModel>  
```  
  
 <span data-ttu-id="a3879-148">Veya kod olarak:</span><span class="sxs-lookup"><span data-stu-id="a3879-148">Or in code:</span></span>  
  
 [!code-csharp[c_WsHttpService#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_wshttpservice/cs/source.cs#1)]
 [!code-vb[c_WsHttpService#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_wshttpservice/vb/source.vb#1)]  
  
## <a name="setting-service-credential-values"></a><span data-ttu-id="a3879-149">Hizmet Kimlik Bilgileri Değerlerini Ayarlama</span><span class="sxs-lookup"><span data-stu-id="a3879-149">Setting Service Credential Values</span></span>  
 <span data-ttu-id="a3879-150">İstemci kimlik bilgisi türünü seçtikten sonra, hizmetin ve istemcinin kullanacağı gerçek kimlik bilgilerini ayarlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="a3879-150">Once you select a client credential type, you must set the actual credentials for the service and client to use.</span></span> <span data-ttu-id="a3879-151">Hizmette kimlik bilgileri <xref:System.ServiceModel.Description.ServiceCredentials> sınıf kullanılarak ayarlanır ve <xref:System.ServiceModel.ServiceHostBase.Credentials%2A> <xref:System.ServiceModel.ServiceHostBase> sınıfın özelliği tarafından döndürülür.</span><span class="sxs-lookup"><span data-stu-id="a3879-151">On the service, credentials are set using the <xref:System.ServiceModel.Description.ServiceCredentials> class and returned by the <xref:System.ServiceModel.ServiceHostBase.Credentials%2A> property of the <xref:System.ServiceModel.ServiceHostBase> class.</span></span> <span data-ttu-id="a3879-152">Kullanılan bağlama, hizmet kimlik bilgisi türünü, seçilen güvenlik modunu ve istemci kimlik bilgisinin türünü ifade eder.</span><span class="sxs-lookup"><span data-stu-id="a3879-152">The binding in use implies the service credential type, the security mode chosen, and the type of the client credential.</span></span> <span data-ttu-id="a3879-153">Aşağıdaki kod, bir hizmet kimlik bilgisi için bir sertifika ayarlar.</span><span class="sxs-lookup"><span data-stu-id="a3879-153">The following code sets a certificate for a service credential.</span></span>  
  
 [!code-csharp[c_tcpService#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_tcpservice/cs/source.cs#3)]
 [!code-vb[c_tcpService#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_tcpservice/vb/source.vb#3)]  
  
## <a name="setting-client-credential-values"></a><span data-ttu-id="a3879-154">İstemci Kimlik Bilgileri Değerlerini Ayarlama</span><span class="sxs-lookup"><span data-stu-id="a3879-154">Setting Client Credential Values</span></span>  
 <span data-ttu-id="a3879-155">İstemci üzerinde, <xref:System.ServiceModel.Description.ClientCredentials> sınıfı kullanarak istemci kimlik bilgileri değerlerini <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> ayarlayın <xref:System.ServiceModel.ClientBase%601> ve sınıfın özelliği tarafından döndürülür.</span><span class="sxs-lookup"><span data-stu-id="a3879-155">On the client, set client credential values using the <xref:System.ServiceModel.Description.ClientCredentials> class and returned by the <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> property of the <xref:System.ServiceModel.ClientBase%601> class.</span></span> <span data-ttu-id="a3879-156">Aşağıdaki kod, TCP protokolünü kullanan bir istemcide bir kimlik bilgisi olarak sertifika ayarlar.</span><span class="sxs-lookup"><span data-stu-id="a3879-156">The following code sets a certificate as a credential on a client using the TCP protocol.</span></span>  
  
 [!code-csharp[c_TcpClient#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_tcpclient/cs/source.cs#1)]
 [!code-vb[c_TcpClient#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_tcpclient/vb/source.vb#1)]  
  
## <a name="see-also"></a><span data-ttu-id="a3879-157">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="a3879-157">See also</span></span>

- [<span data-ttu-id="a3879-158">Temel WCF Programlama</span><span class="sxs-lookup"><span data-stu-id="a3879-158">Basic WCF Programming</span></span>](../../../../docs/framework/wcf/basic-wcf-programming.md)
- [<span data-ttu-id="a3879-159">Ortak Güvenlik Senaryoları</span><span class="sxs-lookup"><span data-stu-id="a3879-159">Common Security Scenarios</span></span>](../../../../docs/framework/wcf/feature-details/common-security-scenarios.md)
