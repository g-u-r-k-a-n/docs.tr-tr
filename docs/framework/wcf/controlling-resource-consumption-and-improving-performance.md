---
title: Kaynak Tüketimini Denetleme ve Performansı Geliştirme
ms.date: 03/30/2017
ms.assetid: 9a829669-5f76-4c88-80ec-92d0c62c0660
ms.openlocfilehash: 976eb1e4a507d3c09bbc6e030985cbc3143b5946
ms.sourcegitcommit: 628e8147ca10187488e6407dab4c4e6ebe0cac47
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/15/2019
ms.locfileid: "72320612"
---
# <a name="controlling-resource-consumption-and-improving-performance"></a><span data-ttu-id="c6abb-102">Kaynak Tüketimini Denetleme ve Performansı Geliştirme</span><span class="sxs-lookup"><span data-stu-id="c6abb-102">Controlling Resource Consumption and Improving Performance</span></span>
<span data-ttu-id="c6abb-103">Bu konuda, kaynak tüketimini denetlemek ve performans ölçümlerini etkilemek için çalışan Windows Communication Foundation (WCF) mimarisinin farklı alanlarındaki çeşitli özellikler açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="c6abb-103">This topic describes various properties in different areas of the Windows Communication Foundation (WCF) architecture that work to control resource consumption and affect performance metrics.</span></span>

## <a name="properties-that-constrain-resource-consumption-in-wcf"></a><span data-ttu-id="c6abb-104">WCF 'de kaynak tüketimini kısıtlayan Özellikler</span><span class="sxs-lookup"><span data-stu-id="c6abb-104">Properties that Constrain Resource Consumption in WCF</span></span>
 <span data-ttu-id="c6abb-105">Windows Communication Foundation (WCF), güvenlik veya performans amaçları için belirli işlem türlerinde kısıtlamalar uygular.</span><span class="sxs-lookup"><span data-stu-id="c6abb-105">Windows Communication Foundation (WCF) applies constraints on certain types of processes for either security or performance purposes.</span></span> <span data-ttu-id="c6abb-106">Bu kısıtlamalar iki ana formda gelir, Kotalar ve kısıtlar.</span><span class="sxs-lookup"><span data-stu-id="c6abb-106">These constraints come in two main forms, either quotas and throttles.</span></span> <span data-ttu-id="c6abb-107">*Kotalar* , sistem içindeki bir noktada anlık özel durum tetiklemeye ulaşıldığında veya aşılmışsa kısıtlar.</span><span class="sxs-lookup"><span data-stu-id="c6abb-107">*Quotas* are limits that when reached or exceeded trigger an immediate exception at some point in the system.</span></span> <span data-ttu-id="c6abb-108">*Kısıtlar* , bir özel durumun oluşturulmasına hemen neden olmayan sınırlardır.</span><span class="sxs-lookup"><span data-stu-id="c6abb-108">*Throttles* are limits that do not immediately cause an exception to be thrown.</span></span> <span data-ttu-id="c6abb-109">Bunun yerine, bir kısıtlama sınırına ulaşıldığında işleme devam eder, ancak bu kısıtlama değeri tarafından ayarlanan limitlerin içinde olur.</span><span class="sxs-lookup"><span data-stu-id="c6abb-109">Instead, when a throttle limit is reached, processing continues but within the limits set by that throttle value.</span></span> <span data-ttu-id="c6abb-110">Bu sınırlı işlem bir özel durumu başka bir yerde tetikleyebilir, ancak bu uygulamaya bağımlıdır.</span><span class="sxs-lookup"><span data-stu-id="c6abb-110">This limited processing might trigger an exception elsewhere, but this depends upon the application.</span></span>

 <span data-ttu-id="c6abb-111">Kotalar ve kısıtlar arasındaki ayrım konusunda ek olarak, bazı kısıtlama özellikleri serileştirme düzeyinde, bazıları Aktarım düzeyinde ve bazı uygulama düzeyinde bulunur.</span><span class="sxs-lookup"><span data-stu-id="c6abb-111">In addition to the distinction between quotas and throttles, some constraining properties are located at the serialization level, some at the transport level, and some at the application level.</span></span> <span data-ttu-id="c6abb-112">Örneğin, sistem tarafından sağlanan tüm aktarım bağlama öğeleri tarafından uygulanan <xref:System.ServiceModel.Channels.TransportBindingElement.MaxReceivedMessageSize%2A?displayProperty=nameWithType> kotası, kötü amaçlı istemcilerin, çok fazla bellek oluşmasına neden olan hizmet reddi saldırılarına karşı, varsayılan olarak 65.536 bayta ayarlanır Mine.</span><span class="sxs-lookup"><span data-stu-id="c6abb-112">For example, the quota <xref:System.ServiceModel.Channels.TransportBindingElement.MaxReceivedMessageSize%2A?displayProperty=nameWithType>, which is implemented by all system-supplied transport binding elements, is set to 65,536 bytes by default to hinder malicious clients from engaging in denial-of-service attacks against a service by causing excessive memory consumption.</span></span> <span data-ttu-id="c6abb-113">(Genellikle, bu değeri azaltarak performansı artırabilirsiniz.)</span><span class="sxs-lookup"><span data-stu-id="c6abb-113">(Typically, you can increase performance by lowering this value.)</span></span>

 <span data-ttu-id="c6abb-114">Serileştirme kotasına örnek olarak, seri hale getirici seri hale getirilen veya tek bir <xref:System.Runtime.Serialization.DataContractSerializer.ReadObject%2A> Yöntem çağrısında seri hale getirilen en fazla nesne sayısını belirten <xref:System.Runtime.Serialization.DataContractSerializer.MaxItemsInObjectGraph%2A?displayProperty=nameWithType> özelliğidir.</span><span class="sxs-lookup"><span data-stu-id="c6abb-114">An example of a serialization quota is the <xref:System.Runtime.Serialization.DataContractSerializer.MaxItemsInObjectGraph%2A?displayProperty=nameWithType> property, which specifies the maximum number of objects that the serializer serializes or deserializes in a single <xref:System.Runtime.Serialization.DataContractSerializer.ReadObject%2A> method call.</span></span> <span data-ttu-id="c6abb-115">Uygulama düzeyinde bir kısıtlama örneği, varsayılan olarak, eş zamanlı oturumsuz bağlantı sayısını 10 ' a kısıtlayan <xref:System.ServiceModel.Dispatcher.ServiceThrottle.MaxConcurrentSessions%2A?displayProperty=nameWithType> özelliğidir.</span><span class="sxs-lookup"><span data-stu-id="c6abb-115">An example of an application-level throttle is the <xref:System.ServiceModel.Dispatcher.ServiceThrottle.MaxConcurrentSessions%2A?displayProperty=nameWithType> property, which by default restricts the number of concurrent sessionful channel connections to 10.</span></span> <span data-ttu-id="c6abb-116">(Kotaların aksine, bu azaltma değerine ulaşıldığında uygulama işleme devam eder ancak yeni oturumsuz kanallar kabul etmez, bu da yeni istemcilerin diğer oturumlardan biri sonlandırana kadar bağlanamaması anlamına gelir.)</span><span class="sxs-lookup"><span data-stu-id="c6abb-116">(Unlike the quotas, if this throttle value is reached, the application continues processing but accepts no new sessionful channels, which means that new clients cannot connect until one of the other sessionful channels is ended.)</span></span>

 <span data-ttu-id="c6abb-117">Bu denetimler, belirli saldırı türlerine karşı bir kullanıma hazır risk azaltma veya bellek kaplama, başlangıç saati vb. gibi performans ölçümlerini geliştirmeye yönelik olarak tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="c6abb-117">These controls are designed to provide an out-of-the-box mitigation against certain types of attacks or to improve performance metrics such as memory footprint, start-up time, and so on.</span></span> <span data-ttu-id="c6abb-118">Ancak, uygulamaya bağlı olarak, bu denetimler hizmet uygulaması performansını engelleyebilir veya uygulamanın hiç çalışmasını engelleyebilir.</span><span class="sxs-lookup"><span data-stu-id="c6abb-118">However, depending on the application, these controls can impede service application performance or prevent the application from working at all.</span></span> <span data-ttu-id="c6abb-119">Örneğin, video akışı için tasarlanan bir uygulama, varsayılan <xref:System.ServiceModel.Channels.TransportBindingElement.MaxReceivedMessageSize%2A?displayProperty=nameWithType> özelliğini kolayca aşabilirler.</span><span class="sxs-lookup"><span data-stu-id="c6abb-119">For example, an application designed to stream video can easily exceed the default <xref:System.ServiceModel.Channels.TransportBindingElement.MaxReceivedMessageSize%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="c6abb-120">Bu konu, tüm WCF düzeylerinde uygulamalara uygulanan çeşitli denetimlere genel bakış sağlar, bir ayarın uygulamanız hindering olup olmadığı hakkında daha fazla bilgi edinmek için çeşitli yollar ve çeşitli sorunları düzeltme yollarını açıklar.</span><span class="sxs-lookup"><span data-stu-id="c6abb-120">This topic provides an overview of the various controls applied to applications at all levels of WCF, describes various ways to obtain more information about whether a setting is hindering your application, and describes ways to correct various problems.</span></span> <span data-ttu-id="c6abb-121">En kısıtları ve bazı kotalar, temel özellik bir serileştirme veya aktarım kısıtlaması olduğunda bile uygulama düzeyinde kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="c6abb-121">Most throttles and some quotas are available at the application level, even when the base property is a serialization or transport constraint.</span></span> <span data-ttu-id="c6abb-122">Örneğin, hizmet sınıfındaki <xref:System.ServiceModel.ServiceBehaviorAttribute.MaxItemsInObjectGraph%2A?displayProperty=nameWithType> özelliğini kullanarak <xref:System.Runtime.Serialization.DataContractSerializer.MaxItemsInObjectGraph%2A?displayProperty=nameWithType> özelliğini ayarlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c6abb-122">For example, you can set the <xref:System.Runtime.Serialization.DataContractSerializer.MaxItemsInObjectGraph%2A?displayProperty=nameWithType> property using the <xref:System.ServiceModel.ServiceBehaviorAttribute.MaxItemsInObjectGraph%2A?displayProperty=nameWithType> property on the service class.</span></span>

> [!NOTE]
> <span data-ttu-id="c6abb-123">Belirli bir sorununuz varsa, önce sorunun (ve bir çözümün) orada listelenip listelenmediğini öğrenmek için önce [WCF sorun giderme hızlı](wcf-troubleshooting-quickstart.md) başlangıcı ' nı okumalısınız.</span><span class="sxs-lookup"><span data-stu-id="c6abb-123">If you have a particular problem, you should first read the [WCF Troubleshooting Quickstart](wcf-troubleshooting-quickstart.md) to see whether your problem (and a solution) is listed there.</span></span>

 <span data-ttu-id="c6abb-124">Serileştirme süreçlerini kısıtlayan özellikler, [veriler Için güvenlik konuları](./feature-details/security-considerations-for-data.md)' nda listelenmiştir.</span><span class="sxs-lookup"><span data-stu-id="c6abb-124">Properties that restrict serialization processes are listed in [Security Considerations for Data](./feature-details/security-considerations-for-data.md).</span></span> <span data-ttu-id="c6abb-125">Aktarımlarla ilgili kaynakların tüketimini kısıtlayan Özellikler [Aktarım kotalarında](./feature-details/transport-quotas.md)listelenmiştir.</span><span class="sxs-lookup"><span data-stu-id="c6abb-125">Properties that restrict the consumption of resources related to transports are listed in [Transport Quotas](./feature-details/transport-quotas.md).</span></span> <span data-ttu-id="c6abb-126">Uygulama katmanındaki kaynakların tüketimini kısıtlayan Özellikler <xref:System.ServiceModel.Dispatcher.ServiceThrottle> sınıfının üyeleridir.</span><span class="sxs-lookup"><span data-stu-id="c6abb-126">Properties that restrict the consumption of resources at the application layer are the members of the <xref:System.ServiceModel.Dispatcher.ServiceThrottle> class.</span></span>

## <a name="detecting-application-and-performance-issues-related-to-quota-settings"></a><span data-ttu-id="c6abb-127">Kota ayarlarıyla Ilgili uygulama ve performans sorunları algılanıyor</span><span class="sxs-lookup"><span data-stu-id="c6abb-127">Detecting Application and Performance Issues Related to Quota Settings</span></span>
 <span data-ttu-id="c6abb-128">Yaygın güvenlik sorunlarına karşı temel koruma sağlarken, yukarıdaki değerlerin Varsayılanları çok çeşitli uygulama türleri genelinde temel uygulama işlevselliğini etkinleştirmek için seçilmiştir.</span><span class="sxs-lookup"><span data-stu-id="c6abb-128">The defaults of the preceding values have been chosen to enable basic application functionality across a wide range of application types while providing basic protection against common security issues.</span></span> <span data-ttu-id="c6abb-129">Bununla birlikte, farklı uygulama tasarımları bir veya daha fazla azaltma ayarını aşabileceğinden, aksi halde uygulama güvenli hale gelse ve tasarlandıkları gibi çalışır.</span><span class="sxs-lookup"><span data-stu-id="c6abb-129">However, different application designs might exceed one or more throttle settings although the application otherwise is secure and would work as designed.</span></span> <span data-ttu-id="c6abb-130">Bu durumlarda, hangi kısıtlama değerlerinin aşıldığını ve hangi düzeyde olduğunu tanımlamalısınız ve uygulama aktarım hızını artırmak için uygun eylem konusuna karar vermelisiniz.</span><span class="sxs-lookup"><span data-stu-id="c6abb-130">In these cases, you must identify which throttle values are being exceeded and at what level, and decide on the appropriate course of action to increase application throughput.</span></span>

 <span data-ttu-id="c6abb-131">Genellikle, uygulamayı yazarken ve hata ayıklarken, <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> özelliğini yapılandırma dosyasında veya program aracılığıyla `true` olarak ayarlarsınız.</span><span class="sxs-lookup"><span data-stu-id="c6abb-131">Typically, when writing the application and debugging it, you set the <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> property to `true` in the configuration file or programmatically.</span></span> <span data-ttu-id="c6abb-132">Bu, WCF 'yi, görüntüleme için hizmet özel durum yığını izlemelerini istemci uygulamasına döndürecek şekilde yönlendirir.</span><span class="sxs-lookup"><span data-stu-id="c6abb-132">This instructs WCF to return service exception stack traces to the client application for viewing.</span></span> <span data-ttu-id="c6abb-133">Bu özellik, uygulama düzeyindeki özel durumların çoğunu, bu sorun varsa hangi kota ayarlarının dahil olabileceğini göstermek için bir şekilde bildirir.</span><span class="sxs-lookup"><span data-stu-id="c6abb-133">This feature reports most application-level exceptions in such a way as to display which quota settings might be involved, if that is the problem.</span></span>

 <span data-ttu-id="c6abb-134">Bazı özel durumlar, uygulama katmanının görünürlüğü altında çalışma zamanında gerçekleşir ve bu mekanizma kullanılarak döndürülmez ve özel bir @no__t 0 uygulaması tarafından işlenmeyebilir.</span><span class="sxs-lookup"><span data-stu-id="c6abb-134">Some exceptions happen at run time below the visibility of the application layer and are not returned using this mechanism, and they might not be handled by a custom <xref:System.ServiceModel.Dispatcher.IErrorHandler?displayProperty=nameWithType> implementation.</span></span> <span data-ttu-id="c6abb-135">Microsoft Visual Studio gibi bir geliştirme ortamındaysanız, bu özel durumların çoğu otomatik olarak görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="c6abb-135">If you are in a development environment like Microsoft Visual Studio, most of these exceptions are displayed automatically.</span></span> <span data-ttu-id="c6abb-136">Ancak bazı özel durumlar, [yalnızca kendi kodum](/visualstudio/debugger/just-my-code) Visual Studio gibi geliştirme ortamı ayarları tarafından maskelenebilir.</span><span class="sxs-lookup"><span data-stu-id="c6abb-136">However, some exceptions can be masked by development environment settings such as [Just My Code](/visualstudio/debugger/just-my-code) Visual Studio.</span></span>

 <span data-ttu-id="c6abb-137">Geliştirme ortamınızın özelliklerine bakılmaksızın, tüm özel durumların hatalarını ayıklamak ve uygulamalarınızın performansını ayarlamak için WCF izleme ve ileti günlüğe kaydetme yeteneklerini kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c6abb-137">Regardless of the capabilities of your development environment, you can use capabilities of WCF tracing and message logging to debug all exceptions and tune the performance of your applications.</span></span> <span data-ttu-id="c6abb-138">Daha fazla bilgi için bkz. [uygulamanızın sorunlarını gidermek Için Izlemeyi kullanma](./diagnostics/tracing/using-tracing-to-troubleshoot-your-application.md).</span><span class="sxs-lookup"><span data-stu-id="c6abb-138">For more information, see [Using Tracing to Troubleshoot Your Application](./diagnostics/tracing/using-tracing-to-troubleshoot-your-application.md).</span></span>

## <a name="performance-issues-and-xmlserializer"></a><span data-ttu-id="c6abb-139">Performans sorunları ve XmlSerializer</span><span class="sxs-lookup"><span data-stu-id="c6abb-139">Performance Issues and XmlSerializer</span></span>
 <span data-ttu-id="c6abb-140">@No__t-0 kullanılarak seri hale getirilebilir veri türlerini kullanan hizmetler ve istemci uygulamaları, çalışma zamanında bu veri türleri için serileştirme kodu oluşturur ve derler ve bu da yavaş başlangıç performansına yol açabilir.</span><span class="sxs-lookup"><span data-stu-id="c6abb-140">Services and client applications that use data types that are serializable using the <xref:System.Xml.Serialization.XmlSerializer> generate and compile serialization code for those data types at run time, which can result in slow start-up performance.</span></span>

> [!NOTE]
> <span data-ttu-id="c6abb-141">Önceden oluşturulmuş serileştirme kodu, hizmetlerde değil yalnızca istemci uygulamalarında kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="c6abb-141">Pre-generated serialization code can be used only in client applications and not in services.</span></span>

 <span data-ttu-id="c6abb-142">[ServiceModel meta veri yardımcı programı Aracı (Svcutil. exe)](servicemodel-metadata-utility-tool-svcutil-exe.md) , uygulama için derlenmiş derlemelerden gerekli serileştirme kodunu oluşturarak bu uygulamalar için başlangıç performansını iyileştirebilir.</span><span class="sxs-lookup"><span data-stu-id="c6abb-142">The [ServiceModel Metadata Utility Tool (Svcutil.exe)](servicemodel-metadata-utility-tool-svcutil-exe.md) can improve start-up performance for these applications by generating the necessary serialization code from the compiled assemblies for the application.</span></span> <span data-ttu-id="c6abb-143">Daha fazla bilgi için bkz. [nasıl yapılır: XmlSerializer kullanarak WCF Istemci uygulamalarının başlangıç zamanını geliştirme](./feature-details/startup-time-of-wcf-client-applications-using-the-xmlserializer.md).</span><span class="sxs-lookup"><span data-stu-id="c6abb-143">For more information, see [How to: Improve the Startup Time of WCF Client Applications using the XmlSerializer](./feature-details/startup-time-of-wcf-client-applications-using-the-xmlserializer.md).</span></span>

## <a name="performance-issues-when-hosting-wcf-services-under-aspnet"></a><span data-ttu-id="c6abb-144">WCF hizmetlerini ASP.NET altında barındırırken performans sorunları</span><span class="sxs-lookup"><span data-stu-id="c6abb-144">Performance Issues When Hosting WCF Services Under ASP.NET</span></span>
 <span data-ttu-id="c6abb-145">Bir WCF hizmeti IIS ve ASP.NET altında barındırıldığı zaman IIS ve ASP.NET yapılandırma ayarları, WCF hizmetinin aktarım hızını ve bellek parmak izini etkileyebilir.</span><span class="sxs-lookup"><span data-stu-id="c6abb-145">When a WCF service is hosted under IIS and ASP.NET, the configuration settings of IIS and ASP.NET can affect the throughput and memory footprint of the WCF service.</span></span>  <span data-ttu-id="c6abb-146">ASP.NET performansı hakkında daha fazla bilgi için bkz. [ASP.net performansını geliştirme](https://go.microsoft.com/fwlink/?LinkId=186462).</span><span class="sxs-lookup"><span data-stu-id="c6abb-146">For more information about ASP.NET performance, see [Improving ASP.NET Performance](https://go.microsoft.com/fwlink/?LinkId=186462).</span></span>  <span data-ttu-id="c6abb-147">İstem dışı sonuçlara sahip olabilecek bir ayar, <xref:System.Web.Configuration.ProcessModelSection> ' in bir özelliği olan <xref:System.Web.Configuration.ProcessModelSection.MinWorkerThreads%2A> ' dır.</span><span class="sxs-lookup"><span data-stu-id="c6abb-147">One setting that might have unintended consequences is <xref:System.Web.Configuration.ProcessModelSection.MinWorkerThreads%2A>, which is a property of the <xref:System.Web.Configuration.ProcessModelSection>.</span></span> <span data-ttu-id="c6abb-148">Uygulamanızda sabit veya az sayıda istemci varsa, <xref:System.Web.Configuration.ProcessModelSection.MinWorkerThreads%2A> ' ı 2 olarak ayarlamak, CPU kullanımı %100 ' a yakın olan çok işlemcili bir makineye bir verimlilik artışı sağlayabilir.</span><span class="sxs-lookup"><span data-stu-id="c6abb-148">If your application has a fixed or small number of clients, setting <xref:System.Web.Configuration.ProcessModelSection.MinWorkerThreads%2A> to 2 might provide a throughput boost on a multiprocessor machine that has a CPU utilization close to 100%.</span></span> <span data-ttu-id="c6abb-149">Bu performans artışı bir maliyetle birlikte gelir: Ayrıca, bellek kullanımında artışa neden olur ve bu da ölçeklenebilirliği azaltabilir.</span><span class="sxs-lookup"><span data-stu-id="c6abb-149">This increase in performance comes with a cost: it will also cause an increase in memory usage, which could reduce scalability.</span></span>

## <a name="see-also"></a><span data-ttu-id="c6abb-150">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="c6abb-150">See also</span></span>

- [<span data-ttu-id="c6abb-151">Yönetim ve Tanılama</span><span class="sxs-lookup"><span data-stu-id="c6abb-151">Administration and Diagnostics</span></span>](./diagnostics/index.md)
- [<span data-ttu-id="c6abb-152">Büyük Veriler ve Akış Yapma</span><span class="sxs-lookup"><span data-stu-id="c6abb-152">Large Data and Streaming</span></span>](./feature-details/large-data-and-streaming.md)
