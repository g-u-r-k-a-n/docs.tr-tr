---
title: İş istasyonu ve sunucu atık toplama (GC)
description: .NET ' te iş istasyonu ve sunucu atık toplama hakkında bilgi edinin.
ms.date: 04/21/2020
helpviewer_keywords:
- garbage collection, workstation
- garbage collection, server
- workstation garbage collection
- server garbage collection
ms.openlocfilehash: 640b5f42c1f841c2537284e4721e827248e3d300
ms.sourcegitcommit: ef50c99928183a0bba75e07b9f22895cd4c480f8
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 08/07/2020
ms.locfileid: "87917011"
---
# <a name="workstation-and-server-garbage-collection"></a><span data-ttu-id="c9e09-103">İş istasyonu ve sunucu atık toplama</span><span class="sxs-lookup"><span data-stu-id="c9e09-103">Workstation and server garbage collection</span></span>

<span data-ttu-id="c9e09-104">Çöp toplayıcı kendi kendini ayarlamadır ve çok çeşitli senaryolarda çalışabilir.</span><span class="sxs-lookup"><span data-stu-id="c9e09-104">The garbage collector is self-tuning and can work in a wide variety of scenarios.</span></span> <span data-ttu-id="c9e09-105">Ancak, [çöp toplamanın türünü](../../core/run-time-config/garbage-collector.md#flavors-of-garbage-collection) iş yükünün özelliklerine göre ayarlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c9e09-105">However, you can [set the type of garbage collection](../../core/run-time-config/garbage-collector.md#flavors-of-garbage-collection) based on the characteristics of the workload.</span></span> <span data-ttu-id="c9e09-106">CLR aşağıdaki çöp toplama türlerini sağlar:</span><span class="sxs-lookup"><span data-stu-id="c9e09-106">The CLR provides the following types of garbage collection:</span></span>

- <span data-ttu-id="c9e09-107">İstemci uygulamaları için tasarlanan iş istasyonu atık toplama (GC).</span><span class="sxs-lookup"><span data-stu-id="c9e09-107">Workstation garbage collection (GC), which is designed for client apps.</span></span> <span data-ttu-id="c9e09-108">Tek başına uygulamalar için varsayılan GC Flavor ' dir.</span><span class="sxs-lookup"><span data-stu-id="c9e09-108">It's the default GC flavor for standalone apps.</span></span> <span data-ttu-id="c9e09-109">Barındırılan uygulamalarda, örneğin, ASP.NET tarafından barındırılan uygulamalar için, ana bilgisayar varsayılan GC özelliğini belirler.</span><span class="sxs-lookup"><span data-stu-id="c9e09-109">For hosted apps, for example, those hosted by ASP.NET, the host determines the default GC flavor.</span></span>

  <span data-ttu-id="c9e09-110">İş istasyonu atık toplama işlemi eşzamanlı olabilir veya eşzamanlı olmayan bir şekilde olabilir.</span><span class="sxs-lookup"><span data-stu-id="c9e09-110">Workstation garbage collection can be concurrent or non-concurrent.</span></span> <span data-ttu-id="c9e09-111">Eş zamanlı (veya *arka plan*) çöp toplama, yönetilen iş parçacıklarının çöp toplama sırasında işlemlere devam etmesine olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="c9e09-111">Concurrent (or *background*) garbage collection enables managed threads to continue operations during a garbage collection.</span></span> <span data-ttu-id="c9e09-112">[Arka plan atık toplama](background-gc.md) , .NET Framework 4 ve sonraki sürümlerde [eşzamanlı çöp toplama](background-gc.md#concurrent-garbage-collection) yerini alır.</span><span class="sxs-lookup"><span data-stu-id="c9e09-112">[Background garbage collection](background-gc.md) replaces [concurrent garbage collection](background-gc.md#concurrent-garbage-collection) in .NET Framework 4 and later versions.</span></span>

- <span data-ttu-id="c9e09-113">Yüksek aktarım hızı ve ölçeklenebilirlik gerektiren sunucu uygulamalarına yönelik olan sunucu çöp toplama.</span><span class="sxs-lookup"><span data-stu-id="c9e09-113">Server garbage collection, which is intended for server applications that need high throughput and scalability.</span></span>

  - <span data-ttu-id="c9e09-114">.NET Core 'da, sunucu çöp toplama, eş zamanlı olmayan veya arka plan olabilir.</span><span class="sxs-lookup"><span data-stu-id="c9e09-114">In .NET Core, server garbage collection can be non-concurrent or background.</span></span>

  - <span data-ttu-id="c9e09-115">.NET Framework 4,5 ve sonraki sürümlerinde, sunucu çöp toplama, eş zamanlı olmayan veya arka plan olabilir.</span><span class="sxs-lookup"><span data-stu-id="c9e09-115">In .NET Framework 4.5 and later versions, server garbage collection can be non-concurrent or background.</span></span> <span data-ttu-id="c9e09-116">.NET Framework 4 ve önceki sürümlerde, sunucu çöp toplama işlemi eşzamanlı değildir.</span><span class="sxs-lookup"><span data-stu-id="c9e09-116">In .NET Framework 4 and previous versions, server garbage collection is non-concurrent.</span></span>

<span data-ttu-id="c9e09-117">Aşağıdaki çizimde, bir sunucusunda çöp toplamayı gerçekleştiren adanmış iş parçacıkları gösterilmektedir:</span><span class="sxs-lookup"><span data-stu-id="c9e09-117">The following illustration shows the dedicated threads that perform the garbage collection on a server:</span></span>

![Sunucu atık toplama Iş parçacıkları](media/gc-server.png)

## <a name="performance-considerations"></a><span data-ttu-id="c9e09-119">Performansla ilgili önemli noktalar</span><span class="sxs-lookup"><span data-stu-id="c9e09-119">Performance considerations</span></span>

### <a name="workstation-gc"></a><span data-ttu-id="c9e09-120">İş istasyonu GC</span><span class="sxs-lookup"><span data-stu-id="c9e09-120">Workstation GC</span></span>

<span data-ttu-id="c9e09-121">İş istasyonu çöp toplama işlemi için iş parçacığı ve performans değerlendirmeleri aşağıda verilmiştir:</span><span class="sxs-lookup"><span data-stu-id="c9e09-121">The following are threading and performance considerations for workstation garbage collection:</span></span>

- <span data-ttu-id="c9e09-122">Koleksiyon, çöp toplamayı tetikleyen ve aynı önceliğe kalan Kullanıcı iş parçacığında oluşur.</span><span class="sxs-lookup"><span data-stu-id="c9e09-122">The collection occurs on the user thread that triggered the garbage collection and remains at the same priority.</span></span> <span data-ttu-id="c9e09-123">Kullanıcı iş parçacıkları genellikle normal öncelikte çalıştığı için çöp toplayıcı (normal bir öncelikli iş parçacığı üzerinde çalışır), CPU süresi için diğer iş parçacıklarıyla rekabet etmelidir.</span><span class="sxs-lookup"><span data-stu-id="c9e09-123">Because user threads typically run at normal priority, the garbage collector (which runs on a normal priority thread) must compete with other threads for CPU time.</span></span> <span data-ttu-id="c9e09-124">(Yerel kod çalıştıran iş parçacıkları sunucu veya iş istasyonu çöp toplamadan askıya alınmaz.)</span><span class="sxs-lookup"><span data-stu-id="c9e09-124">(Threads that run native code are not suspended on either server or workstation garbage collection.)</span></span>

- <span data-ttu-id="c9e09-125">İş istasyonu çöp toplama her zaman, [yapılandırma ayarından](../../core/run-time-config/garbage-collector.md#workstation-vs-server)bağımsız olarak yalnızca bir işlemciye sahip olan bir bilgisayarda kullanılır.</span><span class="sxs-lookup"><span data-stu-id="c9e09-125">Workstation garbage collection is always used on a computer that has only one processor, regardless of the [configuration setting](../../core/run-time-config/garbage-collector.md#workstation-vs-server).</span></span>

### <a name="server-gc"></a><span data-ttu-id="c9e09-126">Sunucu GC</span><span class="sxs-lookup"><span data-stu-id="c9e09-126">Server GC</span></span>

<span data-ttu-id="c9e09-127">Aşağıda sunucu çöp toplama için iş parçacığı ve performans konuları verilmiştir:</span><span class="sxs-lookup"><span data-stu-id="c9e09-127">The following are threading and performance considerations for server garbage collection:</span></span>

- <span data-ttu-id="c9e09-128">Koleksiyon, öncelik düzeyinde çalışan birden fazla adanmış iş parçacığında oluşur `THREAD_PRIORITY_HIGHEST` .</span><span class="sxs-lookup"><span data-stu-id="c9e09-128">The collection occurs on multiple dedicated threads that are running at `THREAD_PRIORITY_HIGHEST` priority level.</span></span>

- <span data-ttu-id="c9e09-129">Her CPU için bir yığın ve bir ayrılmış iş parçacığı her CPU için sağlanır ve sayfa@@ 'ler aynı anda toplanır.</span><span class="sxs-lookup"><span data-stu-id="c9e09-129">A heap and a dedicated thread to perform garbage collection are provided for each CPU, and the heaps are collected at the same time.</span></span> <span data-ttu-id="c9e09-130">Her yığın küçük bir nesne yığını ve büyük bir nesne yığını içerir ve tüm yığınlara Kullanıcı kodu tarafından erişilebilir.</span><span class="sxs-lookup"><span data-stu-id="c9e09-130">Each heap contains a small object heap and a large object heap, and all heaps can be accessed by user code.</span></span> <span data-ttu-id="c9e09-131">Farklı yığınlardaki nesneler birbirlerine başvurabilir.</span><span class="sxs-lookup"><span data-stu-id="c9e09-131">Objects on different heaps can refer to each other.</span></span>

- <span data-ttu-id="c9e09-132">Birden çok çöp toplama iş parçacığı birlikte çalıştığından, sunucu çöp toplama, aynı boyuttaki yığında iş istasyonu atık toplamadan daha hızlıdır.</span><span class="sxs-lookup"><span data-stu-id="c9e09-132">Because multiple garbage collection threads work together, server garbage collection is faster than workstation garbage collection on the same size heap.</span></span>

- <span data-ttu-id="c9e09-133">Sunucu çöp toplama genellikle daha büyük boyut segmentlerine sahiptir.</span><span class="sxs-lookup"><span data-stu-id="c9e09-133">Server garbage collection often has larger size segments.</span></span> <span data-ttu-id="c9e09-134">Ancak, bu yalnızca bir Genelleştirme 'dir: kesim boyutu uygulamaya özeldir ve değiştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="c9e09-134">However, this is only a generalization: segment size is implementation-specific and is subject to change.</span></span> <span data-ttu-id="c9e09-135">Uygulamanızı ayarlamaya yönelik çöp toplayıcı tarafından ayrılan parçaların boyutu hakkında varsayımlar yapmayın.</span><span class="sxs-lookup"><span data-stu-id="c9e09-135">Don't make assumptions about the size of segments allocated by the garbage collector when tuning your app.</span></span>

- <span data-ttu-id="c9e09-136">Sunucu atık toplama, kaynak kullanımı yoğun olabilir.</span><span class="sxs-lookup"><span data-stu-id="c9e09-136">Server garbage collection can be resource-intensive.</span></span> <span data-ttu-id="c9e09-137">Örneğin, dört işlemcili bir bilgisayarda çalışan sunucu GC 'yi kullanan 12 işlem olduğunu düşünün.</span><span class="sxs-lookup"><span data-stu-id="c9e09-137">For example, imagine that there are 12 processes that use server GC running on a computer that has four processors.</span></span> <span data-ttu-id="c9e09-138">Tüm süreçler aynı anda çöp toplama işlemi gerçekleşiyorsa, aynı işlemcide zamanlanan 12 iş parçacığı olduğu için birbirleriyle karışacaktır.</span><span class="sxs-lookup"><span data-stu-id="c9e09-138">If all the processes happen to collect garbage at the same time, they would interfere with each other, as there would be 12 threads scheduled on the same processor.</span></span> <span data-ttu-id="c9e09-139">Süreçler etkinse, hepsi sunucu GC 'yi kullanmak iyi bir fikir değildir.</span><span class="sxs-lookup"><span data-stu-id="c9e09-139">If the processes are active, it's not a good idea to have them all use server GC.</span></span>

<span data-ttu-id="c9e09-140">Bir uygulamanın yüzlerce örneğini çalıştırıyorsanız, eşzamanlı atık toplama devre dışı bırakılmış iş istasyonu çöp toplamayı kullanmayı düşünün.</span><span class="sxs-lookup"><span data-stu-id="c9e09-140">If you're running hundreds of instances of an application, consider using workstation garbage collection with concurrent garbage collection disabled.</span></span> <span data-ttu-id="c9e09-141">Bu, performansı iyileştirebilen daha az bağlam geçişe neden olur.</span><span class="sxs-lookup"><span data-stu-id="c9e09-141">This will result in less context switching, which can improve performance.</span></span>

## <a name="see-also"></a><span data-ttu-id="c9e09-142">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="c9e09-142">See also</span></span>

- [<span data-ttu-id="c9e09-143">Arka plan atık toplama</span><span class="sxs-lookup"><span data-stu-id="c9e09-143">Background garbage collection</span></span>](background-gc.md)
- [<span data-ttu-id="c9e09-144">Çöp toplama için çalışma zamanı yapılandırma seçenekleri</span><span class="sxs-lookup"><span data-stu-id="c9e09-144">Run-time configuration options for garbage collection</span></span>](../../core/run-time-config/garbage-collector.md)
