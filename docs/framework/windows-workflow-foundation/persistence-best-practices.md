---
title: Kalıcılık En İyi Uygulamaları
ms.date: 03/30/2017
ms.assetid: 6974c5a4-1af8-4732-ab53-7d694608a3a0
ms.openlocfilehash: 950a5d5c742b7882db93d71f3e7f205009f2a863
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 11/26/2020
ms.locfileid: "96246153"
---
# <a name="persistence-best-practices"></a><span data-ttu-id="dfb5d-102">Kalıcılık En İyi Uygulamaları</span><span class="sxs-lookup"><span data-stu-id="dfb5d-102">Persistence Best Practices</span></span>

<span data-ttu-id="dfb5d-103">Bu belge iş akışı tasarımı ve iş akışı kalıcılığı ile ilgili yapılandırma için en iyi yöntemleri içerir.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-103">This document covers best practices for workflow design and configuration related to workflow persistence.</span></span>  
  
## <a name="design-and-implementation-of-durable-workflows"></a><span data-ttu-id="dfb5d-104">Dayanıklı Iş akışlarının tasarımı ve uygulanması</span><span class="sxs-lookup"><span data-stu-id="dfb5d-104">Design and Implementation of Durable Workflows</span></span>  

 <span data-ttu-id="dfb5d-105">Genel olarak, iş akışları, bir olayı beklediği için iş akışının boşta olduğu zamanlarla birlikte Aralanmış kısa dönemlerde çalışır.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-105">In general, workflows perform work in short periods that are interleaved with times during which the workflow is idle because it is waiting for an event.</span></span> <span data-ttu-id="dfb5d-106">Bu olay, ileti veya süresi dolan bir zamanlayıcı gibi şeyler olabilir.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-106">This event can be such things as a message or an expiring timer.</span></span> <span data-ttu-id="dfb5d-107">İş akışı örneğini boşta kaldığında kaldırabilmek için, hizmet ana bilgisayarı iş akışı örneğini kalıcı hale vermelidir.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-107">To be able to unload the workflow instance when it becomes idle, the service host must persist the workflow instance.</span></span> <span data-ttu-id="dfb5d-108">Bu, yalnızca iş akışı örneği kalıcı olmayan bir bölgede değilse (örneğin, bir işlemin tamamlanmasını bekliyorsa veya zaman uyumsuz geri çağırma için beklerken) mümkündür.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-108">This is possible only if the workflow instance is not in a no-persist zone (for example, waiting for a transaction to complete, or waiting for an asynchronous callback).</span></span> <span data-ttu-id="dfb5d-109">Boş bir iş akışı örneğinin kaldırılmasına izin vermek için, iş akışı yazarı yalnızca kısa süreli eylemler için işlem kapsamlarını ve zaman uyumsuz etkinlikleri kullanmalıdır.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-109">To allow an idle workflow instance to unload, the workflow author should use transaction scopes and asynchronous activities for short-lived actions only.</span></span> <span data-ttu-id="dfb5d-110">Özellikle yazar, gecikme etkinliklerini bu kalıcı olmayan bölgeler içinde mümkün olduğunca kısa tutmaya devam etmelidir.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-110">In particular, the author should keep delay activities within these no-persist zones as short as possible.</span></span>  
  
 <span data-ttu-id="dfb5d-111">İş akışı yalnızca, iş akışı tarafından kullanılan tüm veri türleri seri hale getirilebilir ise kalıcı olabilir.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-111">A workflow can only be persisted if all of the data types used by the workflow are serializable.</span></span> <span data-ttu-id="dfb5d-112">Ayrıca, kalıcı iş akışlarında kullanılan özel türlerin, <xref:System.Runtime.Serialization.NetDataContractSerializer> tarafından kalıcı hale getirilemeyen şekilde seri hale getirilebilir olması gerekir <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> .</span><span class="sxs-lookup"><span data-stu-id="dfb5d-112">In addition, custom types used in persisted workflows must be serializable with <xref:System.Runtime.Serialization.NetDataContractSerializer> in order to be persisted by <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore>.</span></span>  
  
 <span data-ttu-id="dfb5d-113">Kalıcı olmayan bir konak veya bilgisayar arızası durumunda bir iş akışı örneği kurtarılamaz.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-113">A workflow instance cannot be recovered in case of a host or computer failure if it has not been persisted.</span></span> <span data-ttu-id="dfb5d-114">Genel olarak, iş akışı örneğini iş akışının yaşam döngüsünün başlarında kalıcı yapmanızı öneririz.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-114">In general, we recommend that you persist a workflow instance early in the workflow’s life cycle.</span></span>  
  
 <span data-ttu-id="dfb5d-115">İş akışınız uzun süredir meşgulse, iş akışı örneğini meşgul dönemi boyunca düzenli olarak kalıcı hale getirmek için önerilir.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-115">If your workflow is busy for a long time, we recommend that you persist the workflow instance regularly throughout its busy period.</span></span> <span data-ttu-id="dfb5d-116"><xref:System.Activities.Statements.Persist>İş akışı örneğini meşgul tutan etkinlik sırasına göre etkinlik ekleyerek bunu yapabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-116">You can do this by adding <xref:System.Activities.Statements.Persist> activities throughout the sequence of activities that keep the workflow instance busy.</span></span> <span data-ttu-id="dfb5d-117">Bu şekilde, uygulama etki alanı geri dönüştürme, ana bilgisayar sorunları veya bilgisayar sorunları sistemin meşgul döneminin başlangıcına geri alınmasına neden olmaz.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-117">In this manner, application domain recycling, host failures, or computer failures do not cause the system to be rolled back to the start of the busy period.</span></span> <span data-ttu-id="dfb5d-118"><xref:System.Activities.Statements.Persist>İş akışınıza etkinlik eklemenin bir performans düşüşüne neden olduğunu unutmayın.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-118">Be aware that adding <xref:System.Activities.Statements.Persist> activities to your workflow could lead to a degradation of performance.</span></span>  
  
 <span data-ttu-id="dfb5d-119">Windows Server App Fabric, kalıcılığı yapılandırmayı ve kullanımını büyük ölçüde basitleştirir.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-119">Windows Server App Fabric greatly simplifies the configuration and use of persistence.</span></span> <span data-ttu-id="dfb5d-120">Daha fazla bilgi için bkz. [Windows Server App Fabric kalıcılığı](/previous-versions/appfabric/ee677272(v=azure.10))</span><span class="sxs-lookup"><span data-stu-id="dfb5d-120">For more information, see [Windows Server App Fabric Persistence](/previous-versions/appfabric/ee677272(v=azure.10))</span></span>  
  
## <a name="configuration-of-scalability-parameters"></a><span data-ttu-id="dfb5d-121">Ölçeklenebilirlik parametrelerinin yapılandırması</span><span class="sxs-lookup"><span data-stu-id="dfb5d-121">Configuration of Scalability Parameters</span></span>  

 <span data-ttu-id="dfb5d-122">Ölçeklenebilirlik ve performans gereksinimleri aşağıdaki parametrelerin ayarlarını belirlemenizi ister:</span><span class="sxs-lookup"><span data-stu-id="dfb5d-122">Scalability and performance requirements determine the settings of the following parameters:</span></span>  
  
- <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToPersist%2A>  
  
- <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A>  
  
- <xref:System.ServiceModel.Activities.Description.SqlWorkflowInstanceStoreBehavior.InstanceLockedExceptionAction%2A>  
  
 <span data-ttu-id="dfb5d-123">Bu parametrelerin geçerli senaryoya göre aşağıdaki şekilde ayarlanması gerekir.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-123">These parameters should be set as follows, according to the current scenario.</span></span>  
  
### <a name="scenario-a-small-number-of-workflow-instances-that-require-optimal-response-time"></a><span data-ttu-id="dfb5d-124">Senaryo: En Iyi yanıt süresi gerektiren az sayıda Iş akışı örneği</span><span class="sxs-lookup"><span data-stu-id="dfb5d-124">Scenario: A Small Number of Workflow Instances That Require Optimal Response Time</span></span>  

 <span data-ttu-id="dfb5d-125">Bu senaryoda, tüm iş akışı örneklerinin Boşta olduklarında yüklenmiş olarak kalması gerekir.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-125">In this scenario, all workflow instances should remain loaded when they become idle.</span></span> <span data-ttu-id="dfb5d-126"><xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A>Büyük bir değere ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-126">Set <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> to a large value.</span></span> <span data-ttu-id="dfb5d-127">Bu ayarın kullanılması, bir iş akışı örneğinin bilgisayarlar arasında taşınmasına engel olur.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-127">The use of this setting prevents a workflow instance from moving between computers.</span></span> <span data-ttu-id="dfb5d-128">Bu ayarı yalnızca aşağıdakilerden biri veya daha fazlası geçerliyse kullanın:</span><span class="sxs-lookup"><span data-stu-id="dfb5d-128">Use this setting only if one or more of the following are true:</span></span>  
  
- <span data-ttu-id="dfb5d-129">Bir iş akışı örneği, ömrü boyunca tek bir ileti alır.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-129">A workflow instance receives a single message throughout its lifetime.</span></span>  
  
- <span data-ttu-id="dfb5d-130">Tüm iş akışı örnekleri tek bir bilgisayarda çalışır</span><span class="sxs-lookup"><span data-stu-id="dfb5d-130">All workflow instances run on a single computer</span></span>  
  
- <span data-ttu-id="dfb5d-131">Bir iş akışı örneği tarafından alınan tüm iletiler aynı bilgisayar tarafından alınır.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-131">All messages that are received by a workflow instance are received by the same computer.</span></span>  
  
 <span data-ttu-id="dfb5d-132"><xref:System.Activities.Statements.Persist> <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToPersist%2A> Hizmet ana bilgisayarı veya bilgisayar hatalarından sonra iş akışı örneğinizin kurtarılmasını etkinleştirmek için etkinlikleri kullanın veya 0 olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-132">Use <xref:System.Activities.Statements.Persist> activities or set <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToPersist%2A> to 0 to enable recovery of your workflow instance after service host or computer failures.</span></span>  
  
### <a name="scenario-workflow-instances-are-idle-for-long-periods-of-time"></a><span data-ttu-id="dfb5d-133">Senaryo: Iş akışı örnekleri uzun süre boşta kalır</span><span class="sxs-lookup"><span data-stu-id="dfb5d-133">Scenario: Workflow Instances Are Idle for Long Periods of Time</span></span>  

 <span data-ttu-id="dfb5d-134">Bu senaryoda, <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> kaynakları mümkün olan en kısa sürede serbest bırakmak için 0 olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-134">In this scenario, set <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> to 0 to release resources as soon as possible.</span></span>  
  
### <a name="scenario-workflow-instances-receive-multiple-messages-in-a-short-period-of-time"></a><span data-ttu-id="dfb5d-135">Senaryo: Iş akışı örnekleri kısa bir süre içinde birden çok Ileti alır</span><span class="sxs-lookup"><span data-stu-id="dfb5d-135">Scenario: Workflow Instances Receive Multiple Messages in a Short Period of Time</span></span>  

 <span data-ttu-id="dfb5d-136">Bu senaryoda, bu <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> iletiler aynı bilgisayar tarafından alınmışsa, bu senaryoda 60 saniyeye ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-136">In this scenario, set <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> to 60 seconds if these messages are received by the same computer.</span></span> <span data-ttu-id="dfb5d-137">Bu, bir iş akışı örneğinin kaldırılmasının ve yüklenmesinin hızlı bir sırasını önler.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-137">This prevents a rapid sequence of unloading and loading of a workflow instance.</span></span> <span data-ttu-id="dfb5d-138">Bu aynı zamanda örneği çok uzun süre boyunca bellekte tutmaz.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-138">This also does not keep the instance in memory for too long.</span></span>  
  
 <span data-ttu-id="dfb5d-139"><xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A>0 olarak ayarlayın ve <xref:System.ServiceModel.Activities.Description.SqlWorkflowInstanceStoreBehavior.InstanceLockedExceptionAction%2A> Bu iletiler farklı bilgisayarlar tarafından alınmışsa, BasicRetry veya kararlılığı olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-139">Set <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> to 0, and set <xref:System.ServiceModel.Activities.Description.SqlWorkflowInstanceStoreBehavior.InstanceLockedExceptionAction%2A> to BasicRetry or AggressiveRetry if these messages may be received by different computers.</span></span> <span data-ttu-id="dfb5d-140">Bu, iş akışı örneğinin başka bir bilgisayar tarafından yüklenmesine izin verir.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-140">This allows the workflow instance to be loaded by another computer.</span></span>  
  
### <a name="scenario-workflow-uses-delay-activities-with-short-durations"></a><span data-ttu-id="dfb5d-141">Senaryo: Iş akışı kısa sürelerle gecikme etkinlikleri kullanır</span><span class="sxs-lookup"><span data-stu-id="dfb5d-141">Scenario: Workflow Uses Delay Activities with Short Durations</span></span>  

 <span data-ttu-id="dfb5d-142">Bu senaryoda, <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> zaman aşımına uğradı bir etkinlik nedeniyle yüklenmesi gereken örnekler için kalıcılık veritabanını düzenli olarak yoklar <xref:System.Activities.Statements.Delay> .</span><span class="sxs-lookup"><span data-stu-id="dfb5d-142">In this scenario, the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> regularly polls the persistence database for instances that should be loaded because of an expired <xref:System.Activities.Statements.Delay> activity.</span></span> <span data-ttu-id="dfb5d-143"><xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore>Bir sonraki yoklama aralığında sona erecektir bir Zamanlayıcı bulursa, SQL Iş akışı örnek deposu yoklama aralığını kısaltır.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-143">If the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> finds a timer that will expire in the next polling interval, the SQL Workflow Instance Store shortens the polling interval.</span></span> <span data-ttu-id="dfb5d-144">Sonraki yoklama, Zamanlayıcının süresi dolduktan sonra doğru yapılır.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-144">The next poll will then occur right after the timer has expired.</span></span> <span data-ttu-id="dfb5d-145">Bu şekilde, SQL Iş akışı örneği deposu tarafından ayarlanan yoklama aralığından daha uzun süre çalışan zamanlayıcılar üzerinde yüksek bir doğrulukla ulaşır <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A> .</span><span class="sxs-lookup"><span data-stu-id="dfb5d-145">This way, the SQL Workflow Instance Store achieves a high accuracy of timers that run longer than the polling interval, which is set by <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A>.</span></span> <span data-ttu-id="dfb5d-146">Kısa gecikmelerin zamanında işlenmesini sağlamak için, en az bir yoklama aralığı için iş akışı örneğinin bellekte kalması gerekir.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-146">To enable timely processing of shorter delays, the workflow instance must remain in memory for at least one polling interval.</span></span>  
  
 <span data-ttu-id="dfb5d-147"><xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToPersist%2A>Son kullanma süresini kalıcılık veritabanına yazmak için 0 olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-147">Set <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToPersist%2A> to 0 to write the expiration time to the persistence database.</span></span>  
  
 <span data-ttu-id="dfb5d-148"><xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A> Örneği en az bir yoklama aralığı için bellekte tutmak üzere daha uzun veya eşit olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-148">Set <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> to longer than or equal to <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A> to keep the instance in memory for at least one polling interval.</span></span>  
  
 <span data-ttu-id="dfb5d-149"><xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A>Bu, kalıcılık veritabanındaki daha fazla yüke yol ettiğinden, bunun azalmasını önermiyoruz.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-149">We do not recommend reducing the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A> because this leads to an increased load on the persistence database.</span></span> <span data-ttu-id="dfb5d-150">Öğesini kullanan her hizmet ana bilgisayarı, her <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> algılama dönemi için veritabanını bir kez yoklar.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-150">Each service host that uses the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> polls the database one time per detection period.</span></span> <span data-ttu-id="dfb5d-151"><xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A>Bir zaman aralığı çok küçük olarak ayarlandığında, hizmet ana bilgisayarlarının sayısı büyükse sisteminizin performansının azalmasına neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-151">Setting <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A> to too small a time interval may cause your system's performance to decrease if the number of service hosts is large.</span></span>  
  
## <a name="configuring-the-sql-workflow-instance-store"></a><span data-ttu-id="dfb5d-152">SQL Iş akışı örnek deposunu yapılandırma</span><span class="sxs-lookup"><span data-stu-id="dfb5d-152">Configuring the SQL Workflow Instance Store</span></span>  

 <span data-ttu-id="dfb5d-153">SQL Iş akışı örneği deposunda aşağıdaki yapılandırma parametreleri vardır:</span><span class="sxs-lookup"><span data-stu-id="dfb5d-153">The SQL Workflow Instance Store has the following configuration parameters:</span></span>  
  
 <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.InstanceEncodingOption%2A>  
 <span data-ttu-id="dfb5d-154">Bu parametre, <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> iş akışı örneği durumunu sıkıştırmak için öğesine bildirir.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-154">This parameter instructs the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> to compress the workflow instance state.</span></span> <span data-ttu-id="dfb5d-155">Sıkıştırma, kalıcılık veritabanında depolanan veri miktarını azaltır ve kalıcılık veritabanının adanmış bir veritabanı sunucusunda bulunduğu durumlarda ağ trafiğini azaltır.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-155">Compression reduces the amount of data that is stored in the persistence database and reduces network traffic in case the persistence database resides on a dedicated database server.</span></span> <span data-ttu-id="dfb5d-156">Sıkıştırma kullanılıyorsa, örnek durumunu sıkıştırmak ve ayıklamak için hesaplama kaynakları gerekir.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-156">If compression is used, it requires computational resources to compress and extract the instance state.</span></span> <span data-ttu-id="dfb5d-157">Çoğu durumda, sıkıştırma performansı artar.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-157">In most cases, compression yields increased performance.</span></span>  
  
 <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.InstanceCompletionAction%2A>  
 <span data-ttu-id="dfb5d-158">Bu parametre, ' ın <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> tamamlanmış örnekleri tutaveya silmesine izin verir.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-158">This parameter instructs the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> to either keep or delete completed instances.</span></span> <span data-ttu-id="dfb5d-159">Tamamlanan örneklerin tutulması, Kalıcılık veritabanı depolama gereksinimlerini artırır ve tablo arama sürelerini artıran daha büyük tablolara yönlendirir.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-159">Keeping completed instances increases the persistence database storage requirements and leads to larger tables, which increases table lookup times.</span></span> <span data-ttu-id="dfb5d-160">Hata ayıklama veya denetim için tamamlanan örnekler gerekli değilse, <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> tamamlanmış örnekleri silmek için en iyisi.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-160">Unless completed instances are required for debugging or auditing, it is best to instruct the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> to delete completed instances.</span></span> <span data-ttu-id="dfb5d-161">Silinen örnekler yalnızca Kullanıcı tarafından son olarak kaldırılmakta olan bir işlem kurduğunda tutulmalıdır.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-161">Deleted instances should be kept only if the user establishes a process for eventually removing them.</span></span> <span data-ttu-id="dfb5d-162">Tamamlanan iş akışı örneği örnek deposunda bulunduğu sürece bağıntı anahtarlarının tekrar kullanılamayacağını unutmayın.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-162">Note that correlation keys cannot be reused as long as the completed workflow instance resides in the instance store.</span></span>  
  
 <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A>  
 <span data-ttu-id="dfb5d-163">Bu parametre, <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> bir <xref:System.Activities.Statements.Delay> Etkinliğin süresi dolarsa yüklenmesi gereken örneklerin kalıcılık veritabanını yokladığı en büyük aralığı tanımlar.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-163">This parameter defines the maximum interval with which the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> polls the persistence database for instances that should be loaded when a <xref:System.Activities.Statements.Delay> activity expires.</span></span> <span data-ttu-id="dfb5d-164"><xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore>Bir sonraki yoklama aralığında süresi dolacak bir Zamanlayıcı bulursa, bir sonraki yoklamanın zamanlayıcı süresi dolduktan sonra gerçekleşmesi için yoklama aralığını kısaltacaktır.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-164">If the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> finds a timer that will expire in the next polling interval, it shortens the polling interval so that the next poll will occur right after the timer has expired.</span></span> <span data-ttu-id="dfb5d-165">Bu şekilde, SQL Iş akışı örneği deposu, daha uzun süre çalışan zamanlayıcılar için yüksek doğrulukla ulaşır <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A> .</span><span class="sxs-lookup"><span data-stu-id="dfb5d-165">This way, the SQL Workflow Instance Store achieves a high accuracy of timers that run longer than <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A>.</span></span>  
  
 <span data-ttu-id="dfb5d-166"><xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A>Bu, kalıcılık veritabanındaki daha fazla yüke yol ettiğinden, ' ı azaltmanızı önermiyoruz.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-166">We do not recommend reducing the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A>, because this leads to an increased load on the persistence database.</span></span> <span data-ttu-id="dfb5d-167">Öğesini kullanan her hizmet ana bilgisayarı, her <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> algılama dönemi için veritabanını bir kez yoklar.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-167">Each service host that uses the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> polls the database one time per detection period.</span></span> <span data-ttu-id="dfb5d-168"><xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A>Bir aralığa çok küçük olarak ayarlandığında, hizmet ana bilgisayarlarının sayısı büyükse sisteminizin performansının azalmasına neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-168">Setting <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.RunnableInstancesDetectionPeriod%2A> to too small an interval may cause your system's performance to decrease if the number of service hosts is large.</span></span>  
  
 <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.HostLockRenewalPeriod%2A>  
 <span data-ttu-id="dfb5d-169">Bu parametre, ana bilgisayarın kilitlenme veritabanında kilidini yenilediğini belirleyen aralığı tanımlar.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-169">This parameter defines the interval with which the host renews its lock in the persistence database.</span></span> <span data-ttu-id="dfb5d-170">Bu aralığı kısaltaştırın, bir konağın veya bilgisayarın başarısız olması durumunda iş akışı örneklerinin daha hızlı kurtarılmasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-170">Shortening this interval will enable a quicker recovery of the workflow instances in case a host or computer fails.</span></span> <span data-ttu-id="dfb5d-171">Öte yandan, bir kısa kilit yenileme süresi Kalıcılık veritabanının yükünü arttırır.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-171">On the other hand, a short lock renewal period increases the load on the persistence database.</span></span> <span data-ttu-id="dfb5d-172">' İ kullanan her hizmet ana bilgisayarı, <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> yenileme süresi başına veritabanında bir kez kilitleri güncelleştirir.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-172">Each service host that uses the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> will update its locks in the database one time per renewal period.</span></span> <span data-ttu-id="dfb5d-173">Bir bilgisayar birçok hizmet ana bilgisayarı çalıştırıyorsa kilit yenilemesinin neden olduğu yükün sisteminizin performansını azaltmadığından emin olun.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-173">If a computer runs many service hosts, make sure that the load caused by lock renewal does not decrease your system's performance.</span></span> <span data-ttu-id="dfb5d-174">Varsa, artırmayı düşünün <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.HostLockRenewalPeriod%2A> .</span><span class="sxs-lookup"><span data-stu-id="dfb5d-174">If it does, consider increasing the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.HostLockRenewalPeriod%2A>.</span></span>  
  
 <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.InstanceLockedExceptionAction%2A>  
 <span data-ttu-id="dfb5d-175">Etkinleştirilirse, <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> sonraki 30 saniye boyunca kilitli bir örnek yüklemeye yeniden denemeler yapılır.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-175">If enabled, the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> retries to load a locked instance for the next 30 seconds.</span></span> <span data-ttu-id="dfb5d-176"><xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.InstanceLockedExceptionAction%2A>İş akışı kısa bir süre içinde birden çok ileti alırsa ve bu iletiler farklı bilgisayarlar tarafından alındığında, BasicRetry veya kararlılığı olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-176">Set <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.InstanceLockedExceptionAction%2A> to BasicRetry or AggressiveRetry if the workflow receives multiple messages in a short time, and these messages are received by different computers.</span></span>  
  
 <span data-ttu-id="dfb5d-177">Yük yeniden deneme mekanizması, yük yeniden denemeleri denenmediği sürece herhangi bir performans yükü sunmaz, <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.InstanceLockedExceptionAction%2A> her zaman etkinleştirilmelidir.</span><span class="sxs-lookup"><span data-stu-id="dfb5d-177">Because the load retry mechanism does not introduce any performance overhead as long as load retries are not tried, <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.InstanceLockedExceptionAction%2A> should always be enabled.</span></span>
