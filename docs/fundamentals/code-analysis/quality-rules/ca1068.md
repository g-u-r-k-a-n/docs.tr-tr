---
title: 'CA1068: CancellationToken parametreleri en son (kod analizi) gelmelidir'
description: 'Kod Analizi kuralı CA1068 hakkında bilgi edinin: CancellationToken parametreleri en son gelmelidir'
ms.date: 09/16/2019
ms.topic: reference
f1_keywords:
- CA1068
- CancellationTokenParametersMustComeLast
helpviewer_keywords:
- CA1068
- CancellationTokenParametersMustComeLast
author: mavasani
ms.author: mavasani
ms.openlocfilehash: a87519b019dc7c3dbce8cd68f3e1eb93eaced069
ms.sourcegitcommit: 45c7148f2483db2501c1aa696ab6ed2ed8cb71b2
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 12/08/2020
ms.locfileid: "96851561"
---
# <a name="ca1068-cancellationtoken-parameters-must-come-last"></a>CA1068: CancellationToken parametreleri en sonda olmalıdır

| | Değer |
|-|-|
| **Kural Kimliği** |CA1068|
| **Kategori** |Microsoft. Design|
| **Düzeltilme veya kırılmamış** |Yeni|

## <a name="cause"></a>Nedeni

Bir yöntem, <xref:System.Threading.CancellationToken> son parametre olmayan bir parametreye sahiptir.

Varsayılan olarak, bu kural codebase 'in tamamını analiz eder, ancak bu [yapılandırılabilir](#include-or-exclude-selected-apis).

## <a name="rule-description"></a>Kural açıklaması

Uzun süre çalışan işlemler veya zaman uyumsuz işlemler gerçekleştiren ve normalde iptal edilebilen Yöntemler bir iptal belirteci parametresi alır. Her iptal belirteci <xref:System.Threading.CancellationTokenSource> , belirteci oluşturan ve bunu iptal edilebilen hesaplamalar için kullanan bir öğesine sahiptir. Çağıranlara çağrı yapanların iptal belirtecini geçen uzun bir yöntem çağrısı zincirine sahip olmak yaygın bir uygulamadır. Bu nedenle, iptal edilebilen bir hesaplamanın parçası olan çok sayıda yöntem iptal belirteci parametresine sahip olmalıdır. Ancak, iptal belirtecinin kendisi genellikle bu yöntemlerin büyük çoğunluğunun temel işlevleriyle ilgili değildir. Bu parametre, söz konusu parametrelerin listedeki son parametre olması için iyi bir API tasarım uygulaması olarak kabul edilir.

## <a name="special-cases"></a>Özel durumlar

Rule CA1068 aşağıdaki özel durumlarda harekete geçmiyor:

- Yöntem, isteğe bağlı olmayan bir iptal belirteci parametresi takip eden bir veya daha fazla [isteğe](../../../csharp/programming-guide/classes-and-structs/named-and-optional-arguments.md#optional-arguments) bağlı parametreye sahiptir (Visual Basic[isteğe bağlıdır](../../../visual-basic/programming-guide/language-features/procedures/optional-parameters.md) ). Derleyici tüm isteğe bağlı parametrelerin tüm isteğe bağlı olmayan parametrelerden sonra tanımlanmasını gerektirir.
- Yöntemde bir veya daha fazla [ref](../../../csharp/language-reference/keywords/ref.md) veya [Out](../../../csharp/language-reference/keywords/out-parameter-modifier.md) parametresi vardır (Visual Basic içinde[ByRef](../../../visual-basic/language-reference/modifiers/byref.md) ), iptal belirteci parametresini takip ediyor. `ref` `out` Genellikle metodun çıkış değerlerini belirttiğinden, listenin sonunda olması veya parametrelerin olması yaygın bir uygulamadır.

## <a name="how-to-fix-violations"></a>İhlalleri çözme

İptal belirteci parametresini listenin sonuna taşımak için yöntem imzasını değiştirin. Örneğin, aşağıdaki iki kod parçacığı kural ihlalini ve nasıl düzeltileceğini gösterir:

```csharp
// Violates CA1068
public void LongRunningOperation(CancellationToken token, string usefulParameter)
{
    ...
}
```

```csharp
// Does not violate CA1068
public void LongRunningOperation(string usefulParameter, CancellationToken token)
{
    ...
}
```

## <a name="when-to-suppress-warnings"></a>Uyarıların ne zaman bastırılamıyor

Bu yöntem, zaten bir sevk edilen kitaplığın parçası olan dışarıdan görünebilir bir ortak API ise, kitaplık tüketicilerinin önemli bir değişikliğine engel olmak için bu kuraldan bir uyarının görüntülenmesini güvenli hale gelir.

## <a name="configurability"></a>Yapılandırılabilirlik

Bu kural, yalnızca bu kural için, tüm kurallar için veya bu kategorideki tüm kurallar için yapılandırılabilecek yapılandırılabilir seçeneklere sahiptir (tasarım). Daha fazla bilgi için bkz. [kod kalitesi kural yapılandırma seçenekleri](../code-quality-rule-options.md).

### <a name="include-or-exclude-selected-apis"></a>Seçili API 'Leri dahil et veya Dışla

Kod tabanınızın hangi bölümlerinin bu kuralı çalıştıracağınızı yapılandırmak için aşağıdaki seçenekleri kullanın.

- [Belirli API yüzeylerini dahil et](#include-specific-api-surfaces)
- [Belirli sembolleri Dışla](#exclude-specific-symbols)
- [Belirli türleri ve bunların türetilmiş türlerini Dışla](#exclude-specific-types-and-their-derived-types)

#### <a name="include-specific-api-surfaces"></a>Belirli API yüzeylerini dahil et

API 'Lerine göre Analize API 'Leri dahil edebilir veya dışlayabilirsiniz. Örneğin, kuralın yalnızca genel olmayan API yüzeyine karşı çalışması gerektiğini belirtmek için, aşağıdaki anahtar-değer çiftini projenizdeki bir *. editorconfig* dosyasına ekleyin:

```ini
dotnet_code_quality.CA1068.api_surface = private, internal
```

#### <a name="exclude-specific-symbols"></a>Belirli sembolleri Dışla

Tür ve yöntemler gibi belirli sembolleri analizden dışlayabilirsiniz. Örneğin, kuralın adlı tür içindeki herhangi bir kodda çalıştırılmamalıdır `MyType` , aşağıdaki anahtar-değer çiftini projenizdeki bir *. editorconfig* dosyasına ekleyin:

```ini
dotnet_code_quality.CA1068.excluded_symbol_names = MyType
```

Seçenek değerindeki izin verilen sembol adı biçimleri (ile ayrılmış `|` ):

- Yalnızca sembol adı (kapsayan tür veya ad alanından bağımsız olarak ada sahip tüm sembolleri içerir).
- Simgenin [belge kimliği biçimindeki](../../../csharp/programming-guide/xmldoc/processing-the-xml-file.md#id-strings)tam adlar. Her sembol adı, metotlar için, `M:` `T:` türler için ve ad alanları gibi bir sembol türü ön eki gerektirir `N:` .
- `.ctor` oluşturucular ve `.cctor` statik oluşturucular için.

Örnekler:

| Seçenek değeri | Özet |
| --- | --- |
|`dotnet_code_quality.CA1068.excluded_symbol_names = MyType` | ' MyType ' adlı tüm simgeleri eşleştirir. |
|`dotnet_code_quality.CA1068.excluded_symbol_names = MyType1|MyType2` | ' MyType1 ' veya ' MyType2 ' adlı tüm simgelerle eşleşir. |
|`dotnet_code_quality.CA1068.excluded_symbol_names = M:NS.MyType.MyMethod(ParamType)` | `MyMethod`Belirtilen tam imzaya sahip belirli bir yöntemle eşleşir. |
|`dotnet_code_quality.CA1068.excluded_symbol_names = M:NS1.MyType1.MyMethod1(ParamType)|M:NS2.MyType2.MyMethod2(ParamType)` | Belirli ' MyMethod1 ' ve ' MyMethod2 ' yöntemleriyle ilgili tam imzalar ile eşleşir. |

#### <a name="exclude-specific-types-and-their-derived-types"></a>Belirli türleri ve bunların türetilmiş türlerini Dışla

Belirli türleri ve bunların türetilmiş türlerini analizden dışlayabilirsiniz. Örneğin, kuralın adlandırılmış türler ve türetilmiş türleri içindeki herhangi bir yöntemde çalıştırılmamalıdır `MyType` ve aşağıdaki anahtar-değer çiftini projenizdeki bir *. editorconfig* dosyasına ekleyin:

```ini
dotnet_code_quality.CA1068.excluded_type_names_with_derived_types = MyType
```

Seçenek değerindeki izin verilen sembol adı biçimleri (ile ayrılmış `|` ):

- Yalnızca tür adı (kapsayan tür veya ad alanından bağımsız olarak adı olan tüm türleri içerir).
- Simgenin [belge kimliği biçimindeki](../../../csharp/programming-guide/xmldoc/processing-the-xml-file.md#id-strings), isteğe bağlı ön ek olarak tam adlar `T:` .

Örnekler:

| Seçenek değeri | Özet |
| --- | --- |
|`dotnet_code_quality.CA1068.excluded_type_names_with_derived_types = MyType` | ' MyType ' adlı tüm türleri ve bunların tüm türetilmiş türlerini eşleştirir. |
|`dotnet_code_quality.CA1068.excluded_type_names_with_derived_types = MyType1|MyType2` | ' MyType1 ' veya ' MyType2 ' adlı tüm türleri ve bunların tüm türetilmiş türlerini eşleştirir. |
|`dotnet_code_quality.CA1068.excluded_type_names_with_derived_types = M:NS.MyType` | Verilen tam adı ve tüm türetilmiş türlerini içeren ' MyType ' türüyle eşleşir. |
|`dotnet_code_quality.CA1068.excluded_type_names_with_derived_types = M:NS1.MyType1|M:NS2.MyType2` | ' MyType1 ' ve ' MyType2 ' belirli türleriyle ilgili tam nitelikli adlarla ve bunların tüm türetilmiş türleriyle eşleşir. |

## <a name="related-rules"></a>İlgili kurallar

- [CA1021: out parametrelerinden kaçının](ca1021.md)

## <a name="see-also"></a>Ayrıca bkz.

- [CancellationToken için önerilen desenler](https://devblogs.microsoft.com/premier-developer/recommended-patterns-for-cancellationtoken/)
