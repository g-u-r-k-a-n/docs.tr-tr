---
title: Akış hizmetleri ve tekrarlanan alanlar - WCF geliştiricileri için gRPC
description: Yinelenen alanları, gRPC kullanarak veri koleksiyonlarını geçirme yolları olarak akış hizmetleriyle karşılaştırın.
ms.date: 09/02/2019
ms.openlocfilehash: 542ebc393f9c9c1ad717d02d01fab33d85c18917
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/12/2020
ms.locfileid: "79147756"
---
# <a name="grpc-streaming-services-vs-repeated-fields"></a><span data-ttu-id="7dda7-103">gRPC akış hizmetleri ile yinelenen alanlar karşılaştırması</span><span class="sxs-lookup"><span data-stu-id="7dda7-103">gRPC streaming services vs. repeated fields</span></span>

<span data-ttu-id="7dda7-104">gRPC hizmetleri, veri kümelerini veya nesne listelerini döndürmenin iki yolunu sağlar.</span><span class="sxs-lookup"><span data-stu-id="7dda7-104">gRPC services provide two ways of returning datasets, or lists of objects.</span></span> <span data-ttu-id="7dda7-105">Protokol Arabellekleri ileti `repeated` belirtimi, başka bir iletiiçinde liste veya ileti dizilerini bildirmek için anahtar sözcüğü kullanır.</span><span class="sxs-lookup"><span data-stu-id="7dda7-105">The Protocol Buffers message specification uses the `repeated` keyword for declaring lists or arrays of messages within another message.</span></span> <span data-ttu-id="7dda7-106">gRPC hizmet belirtimi, uzun süredir devam eden kalıcı bağlantıyı bildirmek için `stream` anahtar sözcüğü kullanır.</span><span class="sxs-lookup"><span data-stu-id="7dda7-106">The gRPC service specification uses the `stream` keyword to declare a long-running persistent connection.</span></span> <span data-ttu-id="7dda7-107">Bu bağlantı üzerinden, birden çok ileti gönderilir ve tek tek işlenebilir.</span><span class="sxs-lookup"><span data-stu-id="7dda7-107">Over that connection, multiple messages are sent, and can be processed, individually.</span></span>

<span data-ttu-id="7dda7-108">Bu `stream` özelliği, bildirimler veya günlük iletileri gibi uzun süreli zamansal veriler için de kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7dda7-108">You can also use the `stream` feature for long-running temporal data such as notifications or log messages.</span></span> <span data-ttu-id="7dda7-109">Ancak bu bölüm, tek bir veri kümesini döndürmek için kullanımını dikkate alacaktır.</span><span class="sxs-lookup"><span data-stu-id="7dda7-109">But this chapter will consider its use for returning a single dataset.</span></span>

<span data-ttu-id="7dda7-110">Kullanmanız gereken ler aşağıdaki gibi etkenlere bağlıdır:</span><span class="sxs-lookup"><span data-stu-id="7dda7-110">Which you should use depends on factors such as:</span></span>

- <span data-ttu-id="7dda7-111">Veri kümesinin genel boyutu.</span><span class="sxs-lookup"><span data-stu-id="7dda7-111">The overall size of the dataset.</span></span>
- <span data-ttu-id="7dda7-112">İstemci veya sunucu sonunda veri kümesi oluşturmak için gereken süre.</span><span class="sxs-lookup"><span data-stu-id="7dda7-112">The time it took to create the dataset at either the client or server end.</span></span>
- <span data-ttu-id="7dda7-113">Veri kümesinin tüketicisi ilk öğe kullanılabilir olur olmaz harekete geçer başlamalı veya yararlı bir şey yapmak için tam veri kümesine ihtiyaç dolup taşabilir.</span><span class="sxs-lookup"><span data-stu-id="7dda7-113">Whether the consumer of the dataset can start acting on it as soon as the first item is available, or needs the complete dataset to do anything useful.</span></span>

## <a name="when-to-use-repeated-fields"></a><span data-ttu-id="7dda7-114">Alanların ne `repeated` zaman kullanılacağı</span><span class="sxs-lookup"><span data-stu-id="7dda7-114">When to use `repeated` fields</span></span>

<span data-ttu-id="7dda7-115">Boyutu kısıtlı olan ve kısa bir süre içinde bütünüyle oluşturulabilen herhangi bir veri kümesi için-örneğin, `repeated` bir saniyenin altında- normal bir Protobuf iletisinde bir alan kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="7dda7-115">For any dataset that's constrained in size and that can be generated in its entirety in a short time—say, under one second—you should use a `repeated` field in a regular Protobuf message.</span></span> <span data-ttu-id="7dda7-116">Örneğin, bir e-ticaret sisteminde, bir sipariş içindeki öğelerin listesini oluşturmak büyük olasılıkla hızlıdır ve liste çok büyük olmayacaktır.</span><span class="sxs-lookup"><span data-stu-id="7dda7-116">For example, in an e-commerce system, to build a list of items within an order is probably quick and the list won't be very large.</span></span> <span data-ttu-id="7dda7-117">Bir alanla tek `repeated` bir iletiyi döndürme, `stream` kullanmaktan daha hızlı bir büyüklük sırasıdır ve daha az ağ yüküne neden olur.</span><span class="sxs-lookup"><span data-stu-id="7dda7-117">Returning a single message with a `repeated` field is an order of magnitude faster than using `stream` and incurs less network overhead.</span></span>

<span data-ttu-id="7dda7-118">İstemci işlemeye başlamadan önce tüm verilere ihtiyaç duyarsa ve veri kümesi bellekte oluşturmak için yeterince küçükse, bir `repeated` alan kullanmayı düşünün.</span><span class="sxs-lookup"><span data-stu-id="7dda7-118">If the client needs all the data before starting to process it and the dataset is small enough to construct in memory, then consider using a `repeated` field.</span></span> <span data-ttu-id="7dda7-119">Sunucudaki bellekte veri kümesinin oluşturulması daha yavaş olsa bile bunu göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="7dda7-119">Consider it even if the creation of the dataset in memory on the server is slower.</span></span>

## <a name="when-to-use-stream-methods"></a><span data-ttu-id="7dda7-120">Yöntemler ne `stream` zaman kullanılır?</span><span class="sxs-lookup"><span data-stu-id="7dda7-120">When to use `stream` methods</span></span>

<span data-ttu-id="7dda7-121">Veri kümelerinizdeki ileti nesneleri büyük ölçüde çok büyükse, akış isteklerini veya yanıtlarını kullanarak bunları aktarabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7dda7-121">When the message objects in your datasets are potentially very large, it's best for you transfer them by using streaming requests or responses.</span></span> <span data-ttu-id="7dda7-122">Bellekte büyük bir nesne oluşturmak, ağa yazmak ve kaynakları boşaltmak daha verimlidir.</span><span class="sxs-lookup"><span data-stu-id="7dda7-122">It's more efficient to construct a large object in memory, write it to the network, and then free up the resources.</span></span> <span data-ttu-id="7dda7-123">Bu yaklaşım, hizmetinölçeklenebilirliğini artırır.</span><span class="sxs-lookup"><span data-stu-id="7dda7-123">This approach will improve the scalability of your service.</span></span>

<span data-ttu-id="7dda7-124">Benzer şekilde, bunları yaparken bellek tükenen önlemek için akışları üzerinde sınırlandırılmamış boyutta veri kümeleri göndermelisiniz.</span><span class="sxs-lookup"><span data-stu-id="7dda7-124">Similarly, you should send datasets of unconstrained size over streams to avoid running out of memory while constructing them.</span></span>

<span data-ttu-id="7dda7-125">Tüketicinin her öğeyi ayrı ayrı işleyebilir veri kümeleri için, ilerlemenin kullanıcıya gösterilebildiği anlamına geliyorsa bir akış kullanmayı düşünmelisiniz.</span><span class="sxs-lookup"><span data-stu-id="7dda7-125">For datasets where the consumer can separately process each item, you should consider using a stream if it means that progress can be indicated to the user.</span></span> <span data-ttu-id="7dda7-126">Akış kullanmak bir uygulamanın yanıt verme yeteneğini artırabilir, ancak bunu uygulamanın genel performansına göre dengelemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="7dda7-126">Using a stream can improve the responsiveness of an application, but you should balance it against the overall performance of the application.</span></span>

<span data-ttu-id="7dda7-127">Akışların yararlı olabileceği başka bir senaryo da, iletinin birden çok hizmet arasında işlendiği yerdir.</span><span class="sxs-lookup"><span data-stu-id="7dda7-127">Another scenario where streams can be useful is where a message is being processed across multiple services.</span></span> <span data-ttu-id="7dda7-128">Zincirdeki her hizmet bir akışı döndürürse, terminal hizmeti (diğer bir deyişle, zincirdeki son hizmet) iletileri döndürmeye başlayabilir.</span><span class="sxs-lookup"><span data-stu-id="7dda7-128">If each service in a chain returns a stream, then the terminal service (that is, the last one in the chain) can start returning messages.</span></span> <span data-ttu-id="7dda7-129">Bu iletiler işlenebilir ve zincir boyunca orijinal istekte bulunup aktarılabilir.</span><span class="sxs-lookup"><span data-stu-id="7dda7-129">These messages can be processed and passed back along the chain to the original requestor.</span></span> <span data-ttu-id="7dda7-130">İstekçi bir akışı döndürebilir veya sonuçları tek bir yanıt iletisine toplayabilir.</span><span class="sxs-lookup"><span data-stu-id="7dda7-130">The requestor can either return a stream or aggregate the results into a single response message.</span></span> <span data-ttu-id="7dda7-131">Bu yaklaşım, MapReduce gibi desenlere iyi bir şekilde katkıda bulunmaktadır.</span><span class="sxs-lookup"><span data-stu-id="7dda7-131">This approach lends itself well to patterns like MapReduce.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="7dda7-132">[Önceki](migrate-duplex-services.md)
>[Sonraki](client-libraries.md)</span><span class="sxs-lookup"><span data-stu-id="7dda7-132">[Previous](migrate-duplex-services.md)
[Next](client-libraries.md)</span></span>
