---
description: 'Daha fazla bilgi edinin: Iş akışı hizmeti konak genişletilebilirliği'
title: İş Akışı Hizmeti Ana Bilgisayar Genişletilebilirliği
ms.date: 03/30/2017
ms.assetid: c0e8f7bb-cb13-49ec-852f-b85d7c23972f
ms.openlocfilehash: 7454d894823a67b3621828afdd70a28cf2e7506c
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 02/06/2021
ms.locfileid: "99704348"
---
# <a name="workflow-service-host-extensibility"></a><span data-ttu-id="30b1b-103">İş Akışı Hizmeti Ana Bilgisayar Genişletilebilirliği</span><span class="sxs-lookup"><span data-stu-id="30b1b-103">Workflow Service Host Extensibility</span></span>

[!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)] <span data-ttu-id="30b1b-104">, <xref:System.ServiceModel.Activities.WorkflowServiceHost> iş akışı hizmetlerini barındırmak için sınıfını sağlar.</span><span class="sxs-lookup"><span data-stu-id="30b1b-104">provides the <xref:System.ServiceModel.Activities.WorkflowServiceHost> class for hosting workflow services.</span></span> <span data-ttu-id="30b1b-105">Bu sınıf, yönetilen bir uygulamada veya bir Windows hizmetinde bir iş akışı hizmetini kendiliğinden barındırıyorsanız kullanılır.</span><span class="sxs-lookup"><span data-stu-id="30b1b-105">This class is used when you are self-hosting a workflow service in a managed application or a Windows service.</span></span> <span data-ttu-id="30b1b-106">Bu sınıf, Internet Information Services (IIS) veya Windows Işlem etkinleştirme hizmeti (WAS) ile bir iş akışı hizmeti barındırırken de kullanılır.</span><span class="sxs-lookup"><span data-stu-id="30b1b-106">This class is also used when hosting a workflow service with Internet Information Services (IIS) or Windows Process Activation Service (WAS).</span></span> <span data-ttu-id="30b1b-107"><xref:System.ServiceModel.Activities.WorkflowServiceHost>Sınıfı, Özel uzantılar eklemenize, boşta davranışını değiştirmenize ve hizmet dışı iş akışlarını (ileti alma etkinliği kullanmayan iş akışları) barındırmanıza olanak sağlayan uzantı noktaları sağlar.</span><span class="sxs-lookup"><span data-stu-id="30b1b-107">The <xref:System.ServiceModel.Activities.WorkflowServiceHost> class provides extension points that allow you to add custom extensions, change the idle behavior, and host non-service workflows (workflows that do not use messaging activities).</span></span>  
  
## <a name="workflow-service-host-extensions"></a><span data-ttu-id="30b1b-108">İş akışı hizmeti konak uzantıları</span><span class="sxs-lookup"><span data-stu-id="30b1b-108">Workflow Service Host Extensions</span></span>  

 <span data-ttu-id="30b1b-109">, ' <xref:System.ServiceModel.Activities.WorkflowServiceHost> A <xref:System.ServiceModel.Activities.WorkflowServiceHost.WorkflowExtensions%2A> <xref:System.Activities.Hosting.WorkflowInstanceExtensionManager> uzantı eklemek için yöntemler sağlayan türünde bir özelliği içerir <xref:System.ServiceModel.Activities.WorkflowServiceHost> .</span><span class="sxs-lookup"><span data-stu-id="30b1b-109">The <xref:System.ServiceModel.Activities.WorkflowServiceHost> contains a <xref:System.ServiceModel.Activities.WorkflowServiceHost.WorkflowExtensions%2A> property of type <xref:System.Activities.Hosting.WorkflowInstanceExtensionManager> that provides methods to add extensions to the <xref:System.ServiceModel.Activities.WorkflowServiceHost>.</span></span> <span data-ttu-id="30b1b-110"><xref:System.Activities.Hosting.WorkflowInstanceExtensionManager.Add%2A>Her bir iş akışı hizmeti örneği için bir uzantı eklemek için yöntemini kullanın.</span><span class="sxs-lookup"><span data-stu-id="30b1b-110">Use the <xref:System.Activities.Hosting.WorkflowInstanceExtensionManager.Add%2A> method to add an extension for each workflow service instance.</span></span> <span data-ttu-id="30b1b-111">Belirtilen temsilci, bir iş akışı hizmet örneği oluşturulduğunda veya bir kalıcılık deposundan yüklendiğinde yeni bir uzantı oluşturmak için çağırılır.</span><span class="sxs-lookup"><span data-stu-id="30b1b-111">The delegate specified is called to create a new extension when a workflow service instance is created or loaded from a persistence store.</span></span> <span data-ttu-id="30b1b-112">Yöntemini kullanarak <xref:System.Activities.Hosting.WorkflowInstanceExtensionManager.Add%2A> her bir iş akışı hizmet ana bilgisayarı için bir uzantı ekleyin, uzantının bir örneği tüm iş akışı hizmeti örnekleri için paylaşılır.</span><span class="sxs-lookup"><span data-stu-id="30b1b-112">Use the <xref:System.Activities.Hosting.WorkflowInstanceExtensionManager.Add%2A> method to add an extension for each workflow service host, one instance of the extension is shared for all workflow service instances.</span></span>  
  
## <a name="react-to-unhandled-exceptions"></a><span data-ttu-id="30b1b-113">Işlenmeyen özel durumlara tepki verme</span><span class="sxs-lookup"><span data-stu-id="30b1b-113">React to Unhandled Exceptions</span></span>  

 <span data-ttu-id="30b1b-114">, <xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionBehavior> Bir iş akışı hizmeti içinde işlenmeyen bir özel durum oluşursa gerçekleştirilecek eylemi belirtmenizi sağlar.</span><span class="sxs-lookup"><span data-stu-id="30b1b-114">The <xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionBehavior> enables you to specify the action to take if an unhandled exception occurs within a workflow service.</span></span> <span data-ttu-id="30b1b-115"><xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionBehavior.Action%2A>Özelliği değerlerden birini belirtir <xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionAction> :</span><span class="sxs-lookup"><span data-stu-id="30b1b-115">The <xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionBehavior.Action%2A> property specifies one of the <xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionAction> values:</span></span>  
  
- <span data-ttu-id="30b1b-116"><xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionAction.Abandon> – İş akışı hizmeti örneğini iptal eder.</span><span class="sxs-lookup"><span data-stu-id="30b1b-116"><xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionAction.Abandon> – Aborts the workflow service instance.</span></span>  
  
- <span data-ttu-id="30b1b-117"><xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionAction.AbandonAndSuspend> – Son kalıcı duruma geri döner ve iş akışı hizmeti örneğini askıya alır.</span><span class="sxs-lookup"><span data-stu-id="30b1b-117"><xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionAction.AbandonAndSuspend> – Rolls back to the last persisted state and suspends the workflow service instance.</span></span> <span data-ttu-id="30b1b-118">Bu yalnızca iş akışı en az bir kez tekrarlanmışsa oluşur.</span><span class="sxs-lookup"><span data-stu-id="30b1b-118">This only occurs if the workflow has already been persisted at least once.</span></span> <span data-ttu-id="30b1b-119">İş akışı örneği durdurulmaz.</span><span class="sxs-lookup"><span data-stu-id="30b1b-119">If not the workflow instance is aborted.</span></span>  
  
- <span data-ttu-id="30b1b-120"><xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionAction.Cancel> – Örneği iptal eder.</span><span class="sxs-lookup"><span data-stu-id="30b1b-120"><xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionAction.Cancel> – Cancels the instance.</span></span>  
  
- <span data-ttu-id="30b1b-121"><xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionAction.Terminate> – Örneği sonlandırır.</span><span class="sxs-lookup"><span data-stu-id="30b1b-121"><xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionAction.Terminate> – Terminates the instance.</span></span>  
  
 <span data-ttu-id="30b1b-122">Bu davranış, aşağıdaki örnekte gösterildiği gibi, kodda yapılandırılabilir.</span><span class="sxs-lookup"><span data-stu-id="30b1b-122">This behavior can be configured in code as shown in the following example.</span></span>  
  
```csharp  
host.Description.Behaviors.Add(new WorkflowUnhandledExceptionBehavior { Action = WorkflowUnhandledExceptionAction.Abandon });  
```  
  
 <span data-ttu-id="30b1b-123">Ayrıca, aşağıdaki örnekte gösterildiği gibi bir yapılandırma dosyasında da yapılandırılabilir.</span><span class="sxs-lookup"><span data-stu-id="30b1b-123">It can also be configured in a configuration file as shown in the following example.</span></span>  
  
```xml
<behaviors>  
      <serviceBehaviors>  
        <behavior>  
          <serviceMetadata httpGetEnabled="True"/>  
          <serviceDebug includeExceptionDetailInFaults="False" />  
          <workflowUnhandledExceptionBehavior action="Abandon" />
        </behavior>  
      </serviceBehaviors>  
</behaviors>
```  
  
## <a name="hosting-non-service-workflows"></a><span data-ttu-id="30b1b-124">Hizmet dışı Iş akışlarını barındırma</span><span class="sxs-lookup"><span data-stu-id="30b1b-124">Hosting Non-Service Workflows</span></span>  

 <span data-ttu-id="30b1b-125"><xref:System.ServiceModel.Activities.WorkflowServiceHost> hizmet dışı iş akışlarını veya <xref:System.ServiceModel.Activities.Receive> ileti oluşturma etkinliklerini kullanmayan bir etkinlik ya da iş akışlarıyla başlamayan iş akışlarını barındırmak için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="30b1b-125"><xref:System.ServiceModel.Activities.WorkflowServiceHost> can be used to host non-service workflows, or workflows that either do not begin with a <xref:System.ServiceModel.Activities.Receive> activity or workflows that do not use the messaging activities.</span></span> <span data-ttu-id="30b1b-126">İş akışı Hizmetleri normalde bir <xref:System.ServiceModel.Activities.Receive> etkinlikle başlar.</span><span class="sxs-lookup"><span data-stu-id="30b1b-126">Workflow services normally begin with a <xref:System.ServiceModel.Activities.Receive> activity.</span></span> <span data-ttu-id="30b1b-127"><xref:System.ServiceModel.Activities.WorkflowServiceHost>Bir iş akışı hizmeti için bir ileti aldığında, zaten çalışmıyorsa (veya kalıcı), yeni bir iş akışı hizmeti örneği oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="30b1b-127">When the <xref:System.ServiceModel.Activities.WorkflowServiceHost> receives a message for a workflow service, if it is not already running (or persisted) a new workflow service instance is created.</span></span> <span data-ttu-id="30b1b-128">Bir iş akışı alma etkinliğiyle başlamazsa, iletiyi alacak bir etkinlik olmadığından ileti gönderilerek başlatılamaz.</span><span class="sxs-lookup"><span data-stu-id="30b1b-128">If a workflow does not begin with a Receive activity, it cannot be started by sending a message because there is no activity to receive the message.</span></span> <span data-ttu-id="30b1b-129">Hizmet dışı bir iş akışını barındırmak için, ve ' den bir sınıf türetebilir ve <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint> geçersiz kılın <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint.OnGetInstanceId%2A> <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint.OnGetCreationContext%2A> <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint.OnResolveBookmark%2A> .</span><span class="sxs-lookup"><span data-stu-id="30b1b-129">To host a non-service workflow, derive a class from <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint> and override <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint.OnGetInstanceId%2A>, <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint.OnGetCreationContext%2A>, and <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint.OnResolveBookmark%2A>.</span></span> <span data-ttu-id="30b1b-130"><xref:System.ServiceModel.Activities.WorkflowHostingEndpoint.OnGetInstanceId%2A>Tercih edilen örnek kimliği sağlamak istiyorsanız bunu geçersiz kılın.</span><span class="sxs-lookup"><span data-stu-id="30b1b-130">Override <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint.OnGetInstanceId%2A> if you want to provide a preferred instance ID.</span></span> <span data-ttu-id="30b1b-131"><xref:System.ServiceModel.Activities.WorkflowHostingEndpoint.OnGetCreationContext%2A>Özel bir iş akışı oluşturma bağlamı oluşturmak veya var olan bir örneğini doldurmak için geçersiz kılın <xref:System.ServiceModel.Activities.WorkflowCreationContext> .</span><span class="sxs-lookup"><span data-stu-id="30b1b-131">Override <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint.OnGetCreationContext%2A> to create a custom workflow creation context or populate an instance of the existing <xref:System.ServiceModel.Activities.WorkflowCreationContext>.</span></span> <span data-ttu-id="30b1b-132"><xref:System.ServiceModel.Activities.WorkflowHostingEndpoint.OnResolveBookmark%2A>Gelen iletiden yer işaretini el ile ayıklamak için geçersiz kılın.</span><span class="sxs-lookup"><span data-stu-id="30b1b-132">Override <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint.OnResolveBookmark%2A> to manually extract the bookmark from the incoming message.</span></span> <span data-ttu-id="30b1b-133">Bu yöntemi geçersiz kılarsınız, <xref:System.ServiceModel.Activities.WorkflowHostingResponseContext.SendResponse%2A> Workflowwhostingendpoint 'e gönderilen iletiye yanıt vermek için gövdesini çağırmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="30b1b-133">If you override this method, you must invoke <xref:System.ServiceModel.Activities.WorkflowHostingResponseContext.SendResponse%2A> in its body so as to respond to the message sent to the WorkflowHostingEndpoint.</span></span> <span data-ttu-id="30b1b-134">Bunu yapmazsanız, bir <xref:System.ServiceModel.Description.ServiceThrottlingBehavior.MaxConcurrentCalls%2A> sınır en sonunda aşılmış olabilir.</span><span class="sxs-lookup"><span data-stu-id="30b1b-134">If you do not do so, a <xref:System.ServiceModel.Description.ServiceThrottlingBehavior.MaxConcurrentCalls%2A> limit may be eventually exceeded.</span></span> <span data-ttu-id="30b1b-135">İki yönlü sözleşmelerde, <xref:System.ServiceModel.Activities.WorkflowHostingResponseContext.SendResponse%2A> istemcinin yanıt alma hatası nedeniyle çağırma başarısızlığını tespit edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="30b1b-135">In two-way contracts, you may be able to detect your   failure to invoke <xref:System.ServiceModel.Activities.WorkflowHostingResponseContext.SendResponse%2A> because of the client’s failure to receive a response.</span></span> <span data-ttu-id="30b1b-136">Tek yönlü sözleşmelerde, <xref:System.ServiceModel.Activities.WorkflowHostingResponseContext.SendResponse%2A> <xref:System.ServiceModel.Description.ServiceThrottlingBehavior.MaxConcurrentCalls%2A> kısıtlama sınırı aşıldıktan sonra çok geç olana kadar çağrı başarısız olma hatası ' nı tanıyamayabiliriz.</span><span class="sxs-lookup"><span data-stu-id="30b1b-136">In one-way contracts, you may not recognize the mistake of failing to call <xref:System.ServiceModel.Activities.WorkflowHostingResponseContext.SendResponse%2A> until it’s too late, after the <xref:System.ServiceModel.Description.ServiceThrottlingBehavior.MaxConcurrentCalls%2A> throttle limit is exceeded.</span></span> <span data-ttu-id="30b1b-137">Daha fazla bilgi için lütfen [Workflowwhostingendpoint özgeçmişi yer işaretine](../../windows-workflow-foundation/samples/workflowhostingendpoint-resume-bookmark.md)bakın. hizmet olmayan bir iş akışının yeni bir örneğini oluşturmak için yeni bir örnek oluşturan bir işlemi tanımlayan bir hizmet sözleşmesi bildirin.</span><span class="sxs-lookup"><span data-stu-id="30b1b-137">For more information, please see the [WorkflowHostingEndpoint Resume Bookmark](../../windows-workflow-foundation/samples/workflowhostingendpoint-resume-bookmark.md)To create a new instance of a non-service workflow, declare a service contract that defines an operation that creates a new instance.</span></span> <span data-ttu-id="30b1b-138">Oluşturma işlemi, \<string, object> gerekli herhangi bir iş akışı parametresini iletmek için bir IDictionary almalıdır.</span><span class="sxs-lookup"><span data-stu-id="30b1b-138">The creation operation should take an IDictionary\<string, object> to pass any required workflow parameters.</span></span> <span data-ttu-id="30b1b-139">Bu sözleşme, türetilmiş sınıf tarafından örtük olarak uygulanır <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint> .</span><span class="sxs-lookup"><span data-stu-id="30b1b-139">This contract is implicitly implemented by the <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint>-derived class.</span></span> <span data-ttu-id="30b1b-140">İş akışını barındırırken, <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint> çağırarak ve çağırarak konağa türetilmiş sınıfın bir örneğini ekleyin <xref:System.ServiceModel.Activities.WorkflowServiceHost.AddServiceEndpoint%2A> <xref:System.ServiceModel.Channels.CommunicationObject.Open%2A> .</span><span class="sxs-lookup"><span data-stu-id="30b1b-140">When hosting the workflow, add an instance of the <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint>-derived class to the host by calling <xref:System.ServiceModel.Activities.WorkflowServiceHost.AddServiceEndpoint%2A> and call <xref:System.ServiceModel.Channels.CommunicationObject.Open%2A>.</span></span> <span data-ttu-id="30b1b-141">İş akışının bir örneğini oluşturmak için, <xref:System.ServiceModel.ChannelFactory%601> hizmet sözleşmesi türü ve çağrısı oluşturun <xref:System.ServiceModel.ChannelFactory%601.CreateChannel%2A> .</span><span class="sxs-lookup"><span data-stu-id="30b1b-141">To create an instance of the workflow, create a <xref:System.ServiceModel.ChannelFactory%601> of your service contract type and call <xref:System.ServiceModel.ChannelFactory%601.CreateChannel%2A>.</span></span> <span data-ttu-id="30b1b-142">Ardından, hizmet sözleşmeniz tarafından tanımlanan oluşturma işlemini çağırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="30b1b-142">You can then call the create operation defined in your service contract.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="30b1b-143">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="30b1b-143">See also</span></span>

- [<span data-ttu-id="30b1b-144">İş Akışı Hizmetleri</span><span class="sxs-lookup"><span data-stu-id="30b1b-144">Workflow Services</span></span>](workflow-services.md)
- [<span data-ttu-id="30b1b-145">Mesajlaşma Etkinlikleri</span><span class="sxs-lookup"><span data-stu-id="30b1b-145">Messaging Activities</span></span>](messaging-activities.md)
