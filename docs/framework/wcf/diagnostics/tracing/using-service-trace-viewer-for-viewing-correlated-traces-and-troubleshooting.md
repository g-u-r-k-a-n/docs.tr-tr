---
title: 'İlişkilendirilmiş İzlemeleri Görüntülemek ve Sorun Gidermek için Hizmet İzleme Görüntüleyicisini Kullanma '
ms.date: 03/30/2017
ms.assetid: 05d2321c-8acb-49d7-a6cd-8ef2220c6775
ms.openlocfilehash: e1cd1443e96e7195127cb95e7ef1b2c4d6d9c176
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 06/09/2020
ms.locfileid: "84587761"
---
# <a name="using-service-trace-viewer-for-viewing-correlated-traces-and-troubleshooting"></a><span data-ttu-id="97ef6-102">İlişkilendirilmiş İzlemeleri Görüntülemek ve Sorun Gidermek için Hizmet İzleme Görüntüleyicisini Kullanma </span><span class="sxs-lookup"><span data-stu-id="97ef6-102">Using Service Trace Viewer for Viewing Correlated Traces and Troubleshooting</span></span>

<span data-ttu-id="97ef6-103">Bu konu başlığı altında, izleme verilerinin biçimi, nasıl görüntüleneceği ve uygulamanızın sorunlarını gidermek için hizmet Izleme görüntüleyicisini kullanan yaklaşımlar açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="97ef6-103">This topic describes the format of trace data, how to view it, and approaches that use the Service Trace Viewer to troubleshoot your application.</span></span>

## <a name="using-the-service-trace-viewer-tool"></a><span data-ttu-id="97ef6-104">Hizmet Izleme Görüntüleyicisi aracını kullanma</span><span class="sxs-lookup"><span data-stu-id="97ef6-104">Using the Service Trace Viewer Tool</span></span>

<span data-ttu-id="97ef6-105">Windows Communication Foundation (WCF) hizmet Izleme Görüntüleyicisi Aracı, bir hatanın kök nedenini bulmak için WCF dinleyicileri tarafından üretilen tanılama izlemelerini ilişkilendirmenize yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="97ef6-105">The Windows Communication Foundation (WCF) Service Trace Viewer tool helps you correlate diagnostic traces produced by WCF listeners to locate the root cause of an error.</span></span> <span data-ttu-id="97ef6-106">Araç, WCF hizmetleriyle ilgili sorunları tanılamak, onarmak ve doğrulamak üzere izlemeleri kolayca görüntülemenizi, gruplandırmanızı ve filtrelemenizi sağlayan bir yol sunar.</span><span class="sxs-lookup"><span data-stu-id="97ef6-106">The tool gives you a way to easily view, group, and filter traces so that you can diagnose, repair and verify issues with WCF services.</span></span> <span data-ttu-id="97ef6-107">Bu aracı kullanma hakkında daha fazla bilgi için bkz. [hizmet Izleme Görüntüleyicisi Aracı (SvcTraceViewer. exe)](../../service-trace-viewer-tool-svctraceviewer-exe.md).</span><span class="sxs-lookup"><span data-stu-id="97ef6-107">For more information about using this tool, see [Service Trace Viewer Tool (SvcTraceViewer.exe)](../../service-trace-viewer-tool-svctraceviewer-exe.md).</span></span>

<span data-ttu-id="97ef6-108">Bu konu, [hizmet Izleme Görüntüleyicisi Aracı (SvcTraceViewer. exe)](../../service-trace-viewer-tool-svctraceviewer-exe.md)kullanılarak görüntülenirken [Izleme ve mesaj günlüğü](../../samples/tracing-and-message-logging.md) örneği çalıştırılarak oluşturulan izlemelerin ekran görüntülerini içerir.</span><span class="sxs-lookup"><span data-stu-id="97ef6-108">This topic contains screenshots of traces generated by running the [Tracing and Message Logging](../../samples/tracing-and-message-logging.md) sample, when viewed using the [Service Trace Viewer Tool (SvcTraceViewer.exe)](../../service-trace-viewer-tool-svctraceviewer-exe.md).</span></span> <span data-ttu-id="97ef6-109">Bu konu, izleme içeriğini, etkinlikleri ve bunların bağıntılarını ve sorun giderirken çok sayıda izlemenin nasıl çözümlendiğini gösterir.</span><span class="sxs-lookup"><span data-stu-id="97ef6-109">This topic demonstrates how to understand trace content, activities and their correlation, and how to analyze large numbers of traces when troubleshooting.</span></span>

## <a name="viewing-trace-content"></a><span data-ttu-id="97ef6-110">Izleme Içeriğini görüntüleme</span><span class="sxs-lookup"><span data-stu-id="97ef6-110">Viewing Trace Content</span></span>

<span data-ttu-id="97ef6-111">İzleme olayı aşağıdaki en önemli bilgileri içerir:</span><span class="sxs-lookup"><span data-stu-id="97ef6-111">A trace event contains the following most significant information:</span></span>

- <span data-ttu-id="97ef6-112">Ayarlandığında etkinlik adı.</span><span class="sxs-lookup"><span data-stu-id="97ef6-112">Activity name when set.</span></span>

- <span data-ttu-id="97ef6-113">Emisin süresi.</span><span class="sxs-lookup"><span data-stu-id="97ef6-113">Emission time.</span></span>

- <span data-ttu-id="97ef6-114">İzleme düzeyi.</span><span class="sxs-lookup"><span data-stu-id="97ef6-114">Trace level.</span></span>

- <span data-ttu-id="97ef6-115">İzleme kaynağı adı.</span><span class="sxs-lookup"><span data-stu-id="97ef6-115">Trace source name.</span></span>

- <span data-ttu-id="97ef6-116">İşlem adı.</span><span class="sxs-lookup"><span data-stu-id="97ef6-116">Process name.</span></span>

- <span data-ttu-id="97ef6-117">İş parçacığı kimliği.</span><span class="sxs-lookup"><span data-stu-id="97ef6-117">Thread id.</span></span>

- <span data-ttu-id="97ef6-118">Microsoft Docs içindeki bir hedefe işaret eden, izleme ile ilgili daha fazla bilgi alabileceğiniz bir URL olan benzersiz bir izleme tanımlayıcısı.</span><span class="sxs-lookup"><span data-stu-id="97ef6-118">A unique trace identifier, which is a URL that points to a destination in Microsoft Docs, from which you can obtain more information related to the trace.</span></span>

 <span data-ttu-id="97ef6-119">Bunların tümü, hizmet Izleme görüntüleyicisinde sağ üst panelde veya bir izleme seçilirken sağ alt panelin biçimlendirilen görünümündeki **temel bilgiler** bölümünde görülebilir.</span><span class="sxs-lookup"><span data-stu-id="97ef6-119">All of these can be seen in the upper right panel in the Service Trace Viewer, or in the **Basic Information** section in the formatted view of the lower-right panel when selecting a trace.</span></span>

> [!NOTE]
> <span data-ttu-id="97ef6-120">İstemci ve hizmet aynı makineli ise, her iki uygulamanın izlemeleri da mevcut olacaktır.</span><span class="sxs-lookup"><span data-stu-id="97ef6-120">If the client and the service are on the same machine, the traces for both applications will be present.</span></span> <span data-ttu-id="97ef6-121">Bunlar, **Işlem adı** sütunu kullanılarak filtrelenebilir.</span><span class="sxs-lookup"><span data-stu-id="97ef6-121">These can be filtered using the **Process Name** column.</span></span>

<span data-ttu-id="97ef6-122">Ayrıca, biçimlendirilen görünüm, izleme için bir açıklama ve kullanılabilir olduğunda ek ayrıntılı bilgiler de sağlar.</span><span class="sxs-lookup"><span data-stu-id="97ef6-122">In addition, the formatted view also provides a description for the trace and additional detailed information when available.</span></span> <span data-ttu-id="97ef6-123">İkincisi, özel durum türü ve ileti, çağrı yığınları, ileti eylemi, from/to alanları ve diğer özel durum bilgilerini içerebilir.</span><span class="sxs-lookup"><span data-stu-id="97ef6-123">The latter can include exception type and message, call stacks, message action, from/to fields, and other exception information.</span></span>

<span data-ttu-id="97ef6-124">XML görünümünde, yararlı XML etiketleri şunları içerir:</span><span class="sxs-lookup"><span data-stu-id="97ef6-124">In the XML view, useful xml tags include the following:</span></span>

- <span data-ttu-id="97ef6-125">`<SubType>`(izleme düzeyi).</span><span class="sxs-lookup"><span data-stu-id="97ef6-125">`<SubType>` (trace level).</span></span>

- <span data-ttu-id="97ef6-126">`<TimeCreated>`.</span><span class="sxs-lookup"><span data-stu-id="97ef6-126">`<TimeCreated>`.</span></span>

- <span data-ttu-id="97ef6-127">`<Source>`(izleme kaynağı adı).</span><span class="sxs-lookup"><span data-stu-id="97ef6-127">`<Source>` (trace source name).</span></span>

- <span data-ttu-id="97ef6-128">`<Correlation>`(izleme yayırken etkinlik kimliği kümesi).</span><span class="sxs-lookup"><span data-stu-id="97ef6-128">`<Correlation>` (activity id set when emitting the trace).</span></span>

- <span data-ttu-id="97ef6-129">`<Execution>`(işlem ve iş parçacığı kimliği).</span><span class="sxs-lookup"><span data-stu-id="97ef6-129">`<Execution>` (process and thread id).</span></span>

- <span data-ttu-id="97ef6-130">`<Computer>`.</span><span class="sxs-lookup"><span data-stu-id="97ef6-130">`<Computer>`.</span></span>

- <span data-ttu-id="97ef6-131">`<ExtendedData>`, `<Action>` `<MessageID>` ve `<ActivityId>` bir ileti gönderilirken ileti üstbilgisinde ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="97ef6-131">`<ExtendedData>`, including `<Action>`, `<MessageID>` and the `<ActivityId>` set in the message header when sending a message.</span></span>

<span data-ttu-id="97ef6-132">"Bir kanaldan ileti gönderildi" izlemesini incelerseniz, aşağıdaki içeriği görebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="97ef6-132">If you examine the "Sent a message over a channel" trace, you may see the following content.</span></span>

```xml
<E2ETraceEvent xmlns="http://schemas.microsoft.com/2004/06/E2ETraceEvent">
   <System xmlns="http://schemas.microsoft.com/2004/06/windows/eventlog/system">
      <EventID>262163</EventID>
      <Type>3</Type>
      <SubType Name="Information">0</SubType>
      <Level>8</Level>
      <TimeCreated SystemTime="2006-08-04T18:45:30.8491051Z" />
      <Source Name="System.ServiceModel" />
       <Correlation ActivityID="{27c6331d-8998-43aa-a382-03239013a6bd}"/>
       <Execution ProcessName="client" ProcessID="1808" ThreadID="1" />
       <Channel />
       <Computer>TEST1</Computer>
   </System>
   <ApplicationData>
       <TraceData>
          <DataItem>
             <TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Information">
                 <TraceIdentifier>http://msdn.microsoft.com/library/System.ServiceModel.Channels.MessageSent.aspx</TraceIdentifier>
                 <Description>Sent a message over a channel.</Description>
                 <AppDomain>client.exe</AppDomain>
                 <Source>System.ServiceModel.Channels.ClientFramingDuplexSessionChannel/35191196</Source>
                <ExtendedData xmlns="http://schemas.microsoft.com/2006/08/ServiceModel/MessageTransmitTraceRecord">

                  <MessageProperties>
                     <AllowOutputBatching>False</AllowOutputBatching>
                  </MessageProperties>
                  <MessageHeaders>
                     <Action d4p1:mustUnderstand="1" xmlns:d4p1="http://www.w3.org/2003/05/soap-envelope" xmlns="http://www.w3.org/2005/08/addressing">http://Microsoft.ServiceModel.Samples/ICalculator/Multiply</Action>
                     <MessageID xmlns="http://www.w3.org/2005/08/addressing">urn:uuid:7c6670d8-4c9c-496e-b6a0-2ceb6db35338</MessageID>
                     <ActivityId CorrelationId="b02e2189-0816-4387-980c-dd8e306440f5" xmlns="http://schemas.microsoft.com/2004/09/ServiceModel/Diagnostics">27c6331d-8998-43aa-a382-03239013a6bd</ActivityId>
                     <ReplyTo xmlns="http://www.w3.org/2005/08/addressing">
                        <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
                    </ReplyTo>
                    <To d4p1:mustUnderstand="1" xmlns:d4p1="http://www.w3.org/2003/05/soap-envelope" xmlns="http://www.w3.org/2005/08/addressing">net.tcp://localhost/servicemodelsamples/service</To>
                  </MessageHeaders>
                  <RemoteAddress>net.tcp://localhost/servicemodelsamples/service</RemoteAddress>
                </ExtendedData>
            </TraceRecord>
          </DataItem>
       </TraceData>
   </ApplicationData>
</E2ETraceEvent>
```

## <a name="servicemodel-e2e-tracing"></a><span data-ttu-id="97ef6-133">ServiceModel E2E Izleme</span><span class="sxs-lookup"><span data-stu-id="97ef6-133">ServiceModel E2E Tracing</span></span>

<span data-ttu-id="97ef6-134">`System.ServiceModel`İzleme kaynağı off dışında bir ile ayarlandığında `switchValue` ve `ActivityTracing` WCF, WCF işleme için etkinlikler ve aktarımlar oluşturur.</span><span class="sxs-lookup"><span data-stu-id="97ef6-134">When the `System.ServiceModel` trace source is set with a `switchValue` other than Off, and `ActivityTracing`, WCF creates activities and transfers for WCF processing.</span></span>

<span data-ttu-id="97ef6-135">Etkinlik, bu işleme birimiyle ilgili tüm izlemeleri gruplandıran mantıksal bir işleme birimidir.</span><span class="sxs-lookup"><span data-stu-id="97ef6-135">An activity is a logical unit of processing that groups all traces related to that processing unit.</span></span> <span data-ttu-id="97ef6-136">Örneğin, her istek için bir etkinlik tanımlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="97ef6-136">For example, you can define one activity for each request.</span></span> <span data-ttu-id="97ef6-137">Aktarımlar, uç noktalar içindeki etkinlikler arasında bir causal ilişkisi oluşturur.</span><span class="sxs-lookup"><span data-stu-id="97ef6-137">Transfers create a causal relationship between activities within endpoints.</span></span> <span data-ttu-id="97ef6-138">Etkinlik KIMLIĞINI yayma, etkinlikleri uç noktalar arasında ilişkilendirmenizi sağlar.</span><span class="sxs-lookup"><span data-stu-id="97ef6-138">Propagating the activity ID enables you to relate activities across endpoints.</span></span> <span data-ttu-id="97ef6-139">Bu, `propagateActivity` = `true` her uç noktada yapılandırma ayarı yaparak yapılabilir.</span><span class="sxs-lookup"><span data-stu-id="97ef6-139">This can be done by setting `propagateActivity`=`true` in configuration at every endpoint.</span></span> <span data-ttu-id="97ef6-140">Etkinlikler, aktarımlar ve yayma, hata bağıntısını gerçekleştirmenize olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="97ef6-140">Activities, transfers, and propagation allow you to perform error correlation.</span></span> <span data-ttu-id="97ef6-141">Bu şekilde, bir hatanın kök nedenini daha hızlı bulabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="97ef6-141">In this way, you can find the root cause of an error more quickly.</span></span>

<span data-ttu-id="97ef6-142">İstemcide, her nesne modeli çağrısı için bir WCF etkinliği oluşturulur (örneğin, ChannelFactory, Ekle, Böl vb.) İşlem çağrılarının her biri bir "Işlem eylemi" etkinliğinde işlenir.</span><span class="sxs-lookup"><span data-stu-id="97ef6-142">On the client, one WCF activity is created for each object model call (for example, Open ChannelFactory, Add, Divide, and so on.) Each of the operation calls is processed in a "Process Action" activity.</span></span>

<span data-ttu-id="97ef6-143">Aşağıdaki ekran görüntüsünde, [izleme ve Ileti günlüğe kaydetme](../../samples/tracing-and-message-logging.md) örneğinden ayıklanan sol panel, istemci işleminde oluşturulan etkinliklerin listesini, oluşturma zamanına göre sıralanmış olarak görüntüler.</span><span class="sxs-lookup"><span data-stu-id="97ef6-143">In the following screenshot, extracted from the [Tracing and Message Logging](../../samples/tracing-and-message-logging.md) sample the left panel displays the list of activities created in the client process, sorted by creation time.</span></span> <span data-ttu-id="97ef6-144">Aşağıda, etkinliklerin kronolojik bir listesi verilmiştir:</span><span class="sxs-lookup"><span data-stu-id="97ef6-144">The following is a chronological list of activities:</span></span>

- <span data-ttu-id="97ef6-145">Kanal fabrikası (ClientBase) oluşturulmuş.</span><span class="sxs-lookup"><span data-stu-id="97ef6-145">Constructed the channel factory (ClientBase).</span></span>

- <span data-ttu-id="97ef6-146">Kanal fabrikası açıldı.</span><span class="sxs-lookup"><span data-stu-id="97ef6-146">Opened the channel factory.</span></span>

- <span data-ttu-id="97ef6-147">Ekleme eylemi işlendi.</span><span class="sxs-lookup"><span data-stu-id="97ef6-147">Processed the Add action.</span></span>

- <span data-ttu-id="97ef6-148">Güvenli oturumu ayarlayın (Bu ilk istekte meydana geldı) ve üç güvenlik altyapısı yanıt iletisini işledi: RST, RSTR, SCT (Işlem iletisi 1, 2, 3).</span><span class="sxs-lookup"><span data-stu-id="97ef6-148">Set up the Secure Session (this OCCURRED on the first request) and processed three security infrastructure response messages: RST, RSTR, SCT (Process message 1, 2, 3).</span></span>

- <span data-ttu-id="97ef6-149">Çıkarma, çarpma ve bölme istekleri işlendi.</span><span class="sxs-lookup"><span data-stu-id="97ef6-149">Processed the Subtract, Multiply, and Divide requests.</span></span>

- <span data-ttu-id="97ef6-150">Kanal fabrikası kapatıldı ve bunu yapmak güvenli oturumu kapattı ve güvenlik iletisi yanıtı Iptali 'ni işledi.</span><span class="sxs-lookup"><span data-stu-id="97ef6-150">Closed the channel factory, and doing so closed the Secure session and processed the security message response Cancel.</span></span>

 <span data-ttu-id="97ef6-151">WsHttpBinding nedeniyle güvenlik altyapısı iletileri görüyoruz.</span><span class="sxs-lookup"><span data-stu-id="97ef6-151">We see the security infrastructure messages because of the wsHttpBinding.</span></span>

> [!NOTE]
> <span data-ttu-id="97ef6-152">WCF 'de, bir aktarım aracılığıyla istek iletisini içeren ilgili Işlem eylemi etkinliğiyle ilişkilendirmeden önce, ilk olarak ayrı bir etkinlikte (Işlem iletisi) işlenen yanıt iletilerini gösteririz.</span><span class="sxs-lookup"><span data-stu-id="97ef6-152">In WCF, we show response messages being processed initially in a separate activity (Process message) before we correlate them to the corresponding Process Action activity that includes the request message, through a transfer.</span></span> <span data-ttu-id="97ef6-153">Bu durum, altyapı iletileri ve zaman uyumsuz istekler için gerçekleşir ve iletiyi incelebilmemiz, ActivityId üst bilgisini okuduğumuz ve bu kimlik ile ilişkilendirmek üzere var olan Işlem eylemi etkinliğini tanımmız gerekir.</span><span class="sxs-lookup"><span data-stu-id="97ef6-153">This happens for infrastructure messages and asynchronous requests and is due to the fact that we must inspect the message, read the activityId header, and identify the existing Process Action activity with that id to correlate to it.</span></span> <span data-ttu-id="97ef6-154">Zaman uyumlu istekler için, yanıtı engelliyoruz ve bu nedenle yanıtın hangi Işlem eylemiyle ilişkili olduğunu biliyoruz.</span><span class="sxs-lookup"><span data-stu-id="97ef6-154">For synchronous requests, we are blocking for the response and hence know which Process action the response relates to.</span></span>

<span data-ttu-id="97ef6-155">Aşağıdaki görüntüde, oluşturma zamanı (sol panel) ve iç içe geçmiş etkinlikleri ve izlemeleri (sağ üst panel) tarafından listelenen WCF istemci etkinlikleri gösterilmektedir:</span><span class="sxs-lookup"><span data-stu-id="97ef6-155">The following image shows WCF client activities listed by creation time (left panel) and their nested activities and traces (upper right panel):</span></span>

![Oluşturulma zamanına göre listelenen WCF istemci etkinliklerini gösteren ekran görüntüsü.](./media/using-service-trace-viewer-for-viewing-correlated-traces-and-troubleshooting/wcf-client-activities-creation-time.gif)

<span data-ttu-id="97ef6-157">Sol panelde bir etkinlik seçtiğimiz zaman, sağ üst panelde iç içe geçmiş etkinlikleri ve izlemeleri görebiliriz.</span><span class="sxs-lookup"><span data-stu-id="97ef6-157">When we select an activity in the left panel, we can see nested activities and traces on the upper right panel.</span></span> <span data-ttu-id="97ef6-158">Bu nedenle, seçilen üst etkinliğe bağlı olarak, sol taraftaki etkinliklerin listesinin azaltılmış hiyerarşik görünümüdür.</span><span class="sxs-lookup"><span data-stu-id="97ef6-158">Therefore, this is a reduced hierarchical view of the list of activities on the left, based on the selected parent activity.</span></span> <span data-ttu-id="97ef6-159">Seçilen Işlem eylemi ekleme ilk istek yaptığı için, bu etkinlik, Ekle eyleminin gerçek işleme için güvenli oturum ayarlama etkinliğini (aktarım, geri aktarma) ve izlemeleri içerir.</span><span class="sxs-lookup"><span data-stu-id="97ef6-159">Because the selected Process action Add is the first request made, this activity contains the Set Up Secure Session activity (transfer to, transfer back from), and traces for the actual processing of the Add action.</span></span>

<span data-ttu-id="97ef6-160">Sol panelde Işlem eylemi ekleme etkinliği ' ne çift tıkladığımızda, ekleme ile ilgili istemci WCF etkinliklerinin grafik bir gösterimini görebiliriz.</span><span class="sxs-lookup"><span data-stu-id="97ef6-160">If we double click the Process action Add activity in the left panel, we can see a graphical representation of the client WCF activities related to Add.</span></span> <span data-ttu-id="97ef6-161">Soldaki ilk etkinlik, varsayılan etkinlik olan kök etkinliğidir (0000).</span><span class="sxs-lookup"><span data-stu-id="97ef6-161">The first activity on the left is the root activity (0000), which is the default activity.</span></span> <span data-ttu-id="97ef6-162">WCF, çevresel etkinlikten dışarı aktarır.</span><span class="sxs-lookup"><span data-stu-id="97ef6-162">WCF transfers out of the ambient activity.</span></span> <span data-ttu-id="97ef6-163">Tanımlı değilse, WCF/0000 'yi aktarır.</span><span class="sxs-lookup"><span data-stu-id="97ef6-163">If this is not defined, WCF transfers out of 0000.</span></span> <span data-ttu-id="97ef6-164">Burada, ikinci etkinlik, Işlem eylemi Ekle, 0 ' dan dışarı aktarır.</span><span class="sxs-lookup"><span data-stu-id="97ef6-164">Here, the second activity, Process Action Add, transfers out of 0.</span></span> <span data-ttu-id="97ef6-165">Daha sonra güvenli oturum ayarla ' yı görüyoruz.</span><span class="sxs-lookup"><span data-stu-id="97ef6-165">Then we see Setup Secure Session.</span></span>

<span data-ttu-id="97ef6-166">Aşağıdaki görüntüde, WCF istemci etkinliklerinin grafik görünümü, özellikle çevresel etkinlik (burada 0), Işlem eylemi ve güvenli oturum ayarlama gösterilmektedir:</span><span class="sxs-lookup"><span data-stu-id="97ef6-166">The following image shows a graph view of WCF client activities, specifically Ambient Activity (here 0), Process action, and Set Up Secure Session:</span></span>

![Izleme görüntüleyicisinde çevresel etkinlik ve Işlem eylemini gösteren grafik.](./media/using-service-trace-viewer-for-viewing-correlated-traces-and-troubleshooting/wcf-activities-graph-ambient-process.gif)

<span data-ttu-id="97ef6-168">Sağ üst panelde, Işlem eylemi ekleme etkinliği ile ilgili tüm izlemeleri görebiliriz.</span><span class="sxs-lookup"><span data-stu-id="97ef6-168">On the upper right panel, we can see all traces related to the Process Action Add activity.</span></span> <span data-ttu-id="97ef6-169">Özellikle, istek iletisini ("bir kanal üzerinden bir ileti gönderdi") gönderdik ve aynı etkinlikte yanıtı ("bir kanal üzerinden bir ileti alındı") aldınız.</span><span class="sxs-lookup"><span data-stu-id="97ef6-169">Specifically, we have sent the request message ("Sent a message over a channel") and received the response ("Received a message over a channel") in the same activity.</span></span> <span data-ttu-id="97ef6-170">Bu, aşağıdaki grafikte gösterilmiştir.</span><span class="sxs-lookup"><span data-stu-id="97ef6-170">This is shown in the following graph.</span></span> <span data-ttu-id="97ef6-171">Netlik açısından, güvenli oturum ayarla etkinliği grafikte daraltılır.</span><span class="sxs-lookup"><span data-stu-id="97ef6-171">For clarity, the Set up Secure Session activity is collapsed in the graph.</span></span>

<span data-ttu-id="97ef6-172">Aşağıdaki görüntüde Işlem eylemi etkinliğinin izlemelerinin bir listesi gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="97ef6-172">The following image shows a list of traces for the Process Action activity.</span></span> <span data-ttu-id="97ef6-173">İsteği gönderir ve aynı etkinlikte yanıtı alırsınız.</span><span class="sxs-lookup"><span data-stu-id="97ef6-173">We send the request and receive the response in the same activity.</span></span>

![Işlem eylemi etkinliğinin izlemelerinin listesini gösteren Izleme görüntüleyicisinin ekran görüntüsü](./media/using-service-trace-viewer-for-viewing-correlated-traces-and-troubleshooting/process-action-traces.gif)

<span data-ttu-id="97ef6-175">Burada, istemci izlemelerini yalnızca açıklık için yükledik, ancak hizmet izlemeleri (gönderilen istek iletisi ve yanıt iletisi gönderildi) aynı etkinlikte araç içinde yükleniyorsa ve `propagateActivity` `true.` daha sonra bu şekilde ayarlandıysa, daha sonraki bir çizimde gösterilmiştir.</span><span class="sxs-lookup"><span data-stu-id="97ef6-175">Here, we load client traces only for clarity, but service traces (request message received and response message sent) appear in the same activity if they are also loaded in the tool and `propagateActivity` was set to `true.` This is shown in a later illustration.</span></span>

<span data-ttu-id="97ef6-176">Hizmette, etkinlik modeli aşağıdaki şekilde WCF kavramlarıyla eşlenir:</span><span class="sxs-lookup"><span data-stu-id="97ef6-176">On the service, the activity model maps to the WCF concepts as follows:</span></span>

1. <span data-ttu-id="97ef6-177">Bir ServiceHost oluşturacağız ve Açarsınız (örneğin, güvenlik durumunda, ana bilgisayarla ilgili birkaç etkinlik oluşturabilir).</span><span class="sxs-lookup"><span data-stu-id="97ef6-177">We construct and open a ServiceHost (this may create several host-related activities, for instance, in the case of security).</span></span>

2. <span data-ttu-id="97ef6-178">ServiceHost 'daki her dinleyici için bir dinleme etkinliği oluşturacağız (açık ServiceHost içindeki ve olmayan aktarımlarla).</span><span class="sxs-lookup"><span data-stu-id="97ef6-178">We create a Listen At activity for each listener in the ServiceHost (with transfers in and out of Open ServiceHost).</span></span>

3. <span data-ttu-id="97ef6-179">Dinleyici, istemci tarafından başlatılan bir iletişim isteği algıladığında, istemciden gönderilen tüm baytların işlendiği bir "alma bayt" etkinliğine aktarır.</span><span class="sxs-lookup"><span data-stu-id="97ef6-179">When the listener detects a communication request initiated by the client, it transfers to a "Receive Bytes" activity, in which all bytes sent from the client are processed.</span></span> <span data-ttu-id="97ef6-180">Bu etkinlikte, istemci-hizmet etkileşimi sırasında gerçekleşen bağlantı hatalarını görebiliriz.</span><span class="sxs-lookup"><span data-stu-id="97ef6-180">In this activity, we can see any connection errors that have happened during the client-service interaction.</span></span>

4. <span data-ttu-id="97ef6-181">Bir iletiye karşılık gelen her bir bayt kümesi için, bu baytları WCF Ileti nesnesini oluşturduğumuz "Işlem Iletisi" etkinliğinde işletik.</span><span class="sxs-lookup"><span data-stu-id="97ef6-181">For each set of bytes that is received that corresponds to a message, we process these bytes in a "Process Message" activity, where we create the WCF Message object.</span></span> <span data-ttu-id="97ef6-182">Bu etkinlikte, hatalı bir zarfa veya hatalı biçimlendirilmiş iletiyle ilgili hatalar görüyoruz.</span><span class="sxs-lookup"><span data-stu-id="97ef6-182">In this activity, we see errors related to a bad envelope or a malformed message.</span></span>

5. <span data-ttu-id="97ef6-183">İleti oluşturulduktan sonra bir Işlem eylemi etkinliğine aktarıyoruz.</span><span class="sxs-lookup"><span data-stu-id="97ef6-183">Once the message is formed, we transfer to a Process Action activity.</span></span> <span data-ttu-id="97ef6-184">`propagateActivity` `true` Hem istemci hem de hizmette olarak ayarlandıysa, bu etkinlik istemcide tanımlananla aynı kimliğe sahiptir ve daha önce açıklanmıştır.</span><span class="sxs-lookup"><span data-stu-id="97ef6-184">If `propagateActivity` is set to `true` on both the client and service, this activity has the same id as the one defined in the client, and described previously.</span></span> <span data-ttu-id="97ef6-185">Bu aşamada, istekle ilişkili tüm izlemeler, yanıt iletisi işleme dahil olmak üzere aynı etkinlik içinde olduğundan, uç noktalar genelinde doğrudan bağıntı üzerinden faydalanabilir.</span><span class="sxs-lookup"><span data-stu-id="97ef6-185">From this stage we start to benefit from direct correlation across endpoints, because all traces emitted in WCF that are related to the request are in that same activity, including the response message processing.</span></span>

6. <span data-ttu-id="97ef6-186">İşlem dışı eylem için, WCF 'de yayıldıklarından Kullanıcı kodunda oluşturulan izlemeleri yalıtmak üzere bir "Kullanıcı kodu Yürüt" etkinliği oluşturacağız.</span><span class="sxs-lookup"><span data-stu-id="97ef6-186">For out-of-process action, we create an "Execute user code" activity to isolate traces emitted in user code from the ones emitted in WCF.</span></span> <span data-ttu-id="97ef6-187">Yukarıdaki örnekte, "hizmet yanıtı gönderme" izlemesi, varsa istemci tarafından yayılan etkinlikte "Kullanıcı kodunu Yürüt" etkinliği içinde dağıtılır.</span><span class="sxs-lookup"><span data-stu-id="97ef6-187">In the preceding example, the "Service sends Add response" trace is emitted in the "Execute User code" activity not in the activity propagated by the client, if applicable.</span></span>

<span data-ttu-id="97ef6-188">Aşağıdaki çizimde, soldaki ilk etkinlik, varsayılan etkinlik olan kök etkinliğidir (0000).</span><span class="sxs-lookup"><span data-stu-id="97ef6-188">In the illustration that follows, the first activity on the left is the root activity (0000), which is the default activity.</span></span> <span data-ttu-id="97ef6-189">Sonraki üç etkinlik ServiceHost 'u açmak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="97ef6-189">The next three activities are to open the ServiceHost.</span></span> <span data-ttu-id="97ef6-190">5. sütundaki etkinlik, dinleyiciye ve kalan etkinliklerin (6-8), bayt işlemeden Kullanıcı kodu etkinleştirmesine kadar bir iletinin WCF işlemesini tanımlıyor.</span><span class="sxs-lookup"><span data-stu-id="97ef6-190">The activity in column 5 is the listener, and the remaining activities (6 to 8) describe the WCF processing of a message, from bytes processing to user code activation.</span></span>

<span data-ttu-id="97ef6-191">Aşağıdaki görüntüde, WCF hizmeti etkinliklerinin grafik görünümü gösterilmektedir:</span><span class="sxs-lookup"><span data-stu-id="97ef6-191">The following image shows a graph view of WCF service activities:</span></span>

![WCF hizmeti etkinliklerinin listesini gösteren Izleme görüntüleyicisinin ekran görüntüsü](./media/using-service-trace-viewer-for-viewing-correlated-traces-and-troubleshooting/wcf-service-activities.gif)

<span data-ttu-id="97ef6-193">Aşağıdaki ekran görüntüsünde hem istemci hem de hizmetin etkinlikleri gösterilmektedir ve işlemler arasında etkinlik Ekle (turuncu) Işlem eylemi vurgulanmıştır.</span><span class="sxs-lookup"><span data-stu-id="97ef6-193">The following screenshot shows the activities for both the client and service, and highlights the Process Action Add activity across processes (orange).</span></span> <span data-ttu-id="97ef6-194">Oklar, istemci ve hizmet tarafından gönderilen ve alınan istek ve yanıt iletilerini birbirleriyle ilişkilidir.</span><span class="sxs-lookup"><span data-stu-id="97ef6-194">Arrows relate the request and response messages sent and received by the client and service.</span></span> <span data-ttu-id="97ef6-195">Işlem izlemeleri eylemi, grafikteki işlemler arasında ayrılır, ancak sağ üst panelde aynı etkinliğin bir parçası olarak gösterilir.</span><span class="sxs-lookup"><span data-stu-id="97ef6-195">The traces of Process Action are separated across processes in the graph, but shown as part of the same activity in the upper-right panel.</span></span> <span data-ttu-id="97ef6-196">Bu panelde, gönderilen iletiler için istemci izlemelerini ve alınan ve işlenen iletiler için hizmet izlemelerini görebiliriz.</span><span class="sxs-lookup"><span data-stu-id="97ef6-196">In this panel, we can see client traces for sent messages followed by service traces for received and processed messages.</span></span>

<span data-ttu-id="97ef6-197">Aşağıdaki resimlerde hem WCF istemcisinin hem de hizmet etkinliklerinin grafik görünümü gösterilmektedir</span><span class="sxs-lookup"><span data-stu-id="97ef6-197">The following images shows a graph view of both WCF client and service activities</span></span>

![Hem WCF istemcisi hem de hizmet etkinliklerini gösteren Izleme görüntüleyicisinden grafik.](./media/using-service-trace-viewer-for-viewing-correlated-traces-and-troubleshooting/wcf-client-service-activities.gif)

<span data-ttu-id="97ef6-199">Aşağıdaki hata senaryosunda, hizmette ve istemcide hata ve uyarı izlemeleri ilgili.</span><span class="sxs-lookup"><span data-stu-id="97ef6-199">In the following error scenario, error and warning traces at the service and client are related.</span></span> <span data-ttu-id="97ef6-200">İlk olarak, hizmette Kullanıcı kodunda bir özel durum oluşturulur (özel durum için bir uyarı izlemesi içeren en yüksek yeşil etkinlik "hizmetin Kullanıcı kodunda bu isteği işleyemez.").</span><span class="sxs-lookup"><span data-stu-id="97ef6-200">An exception is first thrown in user code on the service (right-most green activity that includes a warning trace for the exception "The service cannot process this request in user code.").</span></span> <span data-ttu-id="97ef6-201">Yanıt istemciye gönderildiğinde, hata iletisini göstermek için bir uyarı izlemesi yeniden oluşturulur (sol pembe etkinlik).</span><span class="sxs-lookup"><span data-stu-id="97ef6-201">When the response is sent to the client, a warning trace is again emitted to denote the fault message (left pink activity).</span></span> <span data-ttu-id="97ef6-202">İstemci daha sonra, hizmet bağlantısını iptal eden WCF istemcisini (sol tarafta sarı etkinlik) kapatır.</span><span class="sxs-lookup"><span data-stu-id="97ef6-202">The client then closes its WCF client (yellow activity on the lower-left side), which aborts the connection to the service.</span></span> <span data-ttu-id="97ef6-203">Hizmet bir hata (sağ tarafta en uzun pembe etkinlik) oluşturur.</span><span class="sxs-lookup"><span data-stu-id="97ef6-203">The service throws an error (longest pink activity on the right).</span></span>

<span data-ttu-id="97ef6-204">![Izleme görüntüleyicisini kullanma](media/wcfc-e2etrace9s.gif "wcfc_e2etrace9s")</span><span class="sxs-lookup"><span data-stu-id="97ef6-204">![Using the Trace Viewer](media/wcfc-e2etrace9s.gif "wcfc_e2etrace9s")</span></span>

<span data-ttu-id="97ef6-205">Hizmet ve istemci genelinde hata bağıntısı</span><span class="sxs-lookup"><span data-stu-id="97ef6-205">Error correlation across the service and client</span></span>

<span data-ttu-id="97ef6-206">Bu izlemeleri oluşturmak için kullanılan örnek, wsHttpBinding kullanan bir dizi zaman uyumlu istekdir.</span><span class="sxs-lookup"><span data-stu-id="97ef6-206">The sample used to generate these traces is a series of synchronous requests using the wsHttpBinding.</span></span> <span data-ttu-id="97ef6-207">Bu grafikten güvenlik içermeyen senaryolar veya zaman uyumsuz isteklerle ilgili sapmalar vardır; burada Işlem eylemi etkinliği, zaman uyumsuz çağrıyı oluşturan başlangıç ve bitiş işlemlerini kapsar ve bir geri çağırma etkinliğine yapılan aktarımları gösterir.</span><span class="sxs-lookup"><span data-stu-id="97ef6-207">There are deviations from this graph for scenarios without security, or with asynchronous requests, where the Process Action activity encompasses the begin and end operations that constitute the asynchronous call, and shows transfers to a callback activity.</span></span> <span data-ttu-id="97ef6-208">Ek senaryolar hakkında daha fazla bilgi için bkz. [uçtan uca Izleme senaryoları](end-to-end-tracing-scenarios.md).</span><span class="sxs-lookup"><span data-stu-id="97ef6-208">For more information about additional scenarios, see [End-To-End Tracing Scenarios](end-to-end-tracing-scenarios.md).</span></span>

## <a name="troubleshooting-using-the-service-trace-viewer"></a><span data-ttu-id="97ef6-209">Hizmet Izleme görüntüleyicisini kullanarak sorun giderme</span><span class="sxs-lookup"><span data-stu-id="97ef6-209">Troubleshooting Using the Service Trace Viewer</span></span>

<span data-ttu-id="97ef6-210">İzleme dosyalarını hizmet Izleme Görüntüleyicisi aracında yüklediğinizde, uygulamanızdaki bir sorunun nedenini izlemek için sol panelde herhangi bir kırmızı veya sarı etkinlik seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="97ef6-210">When you load trace files in the Service Trace Viewer Tool, you can select any red or yellow activity on the left panel to track down the cause of a problem in your application.</span></span> <span data-ttu-id="97ef6-211">000 etkinlik genellikle kullanıcıya kabarcıklu işlenmemiş özel durumlara sahiptir.</span><span class="sxs-lookup"><span data-stu-id="97ef6-211">The 000 activity typically has unhandled exceptions that bubble up to the user.</span></span>

<span data-ttu-id="97ef6-212">Aşağıdaki görüntüde, bir sorunun kökünü bulmak için kırmızı veya sarı bir etkinliğin nasıl görüntüleneceği gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="97ef6-212">The following image shows how to select a red or yellow activity to locate the root of a problem.</span></span>
<span data-ttu-id="97ef6-213">![Bir sorunun kökünü bulmak için kırmızı veya sarı etkinliklerin ekran görüntüsü.](./media/using-service-trace-viewer-for-viewing-correlated-traces-and-troubleshooting/service-trace-viewer.gif)</span><span class="sxs-lookup"><span data-stu-id="97ef6-213">![Screenshot of red or yellow activities for locating the root of a problem.](./media/using-service-trace-viewer-for-viewing-correlated-traces-and-troubleshooting/service-trace-viewer.gif)</span></span>

<span data-ttu-id="97ef6-214">Sağ üst bölmede, sol tarafta seçtiğiniz etkinliğin izlemelerini inceleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="97ef6-214">On the upper right panel, you can examine traces for the activity you selected on the left.</span></span> <span data-ttu-id="97ef6-215">Daha sonra bu panelde kırmızı veya sarı izlemeleri inceleyebilir ve bunların nasıl bağıntılı olduğunu görebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="97ef6-215">You can then examine red or yellow traces in that panel and see how they are correlated.</span></span> <span data-ttu-id="97ef6-216">Yukarıdaki grafikte, aynı Işlem eylemi etkinliğinde istemci ve hizmet için uyarı izlemelerinin her ikisini de görüyoruz.</span><span class="sxs-lookup"><span data-stu-id="97ef6-216">In the preceding graph, we see warning traces both for the client and service in the same Process Action activity.</span></span>

<span data-ttu-id="97ef6-217">Bu izlemeler, hatanın temel nedenini sağlamıyorsa, sol panelde seçili etkinliğe çift tıklayarak grafiği kullanabilirsiniz (burada Işlem eylemi).</span><span class="sxs-lookup"><span data-stu-id="97ef6-217">If these traces do not provide you with the root cause of the error, you can utilize the graph by double-clicking the selected activity on the left panel (here Process action).</span></span> <span data-ttu-id="97ef6-218">İlgili etkinlikleri içeren grafik daha sonra görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="97ef6-218">The graph with related activities is then displayed.</span></span> <span data-ttu-id="97ef6-219">Ardından ilgili etkinlikleri genişleterek ilgili etkinlikleri genişletebilirsiniz ("+" işaretlerine tıklayarak) ve ilgili etkinlikteki ilk yayınlanan izlemeyi kırmızı veya sarı olarak bulabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="97ef6-219">You can then expand related activities (by clicking the "+" signs) to find the first emitted trace in red or yellow in a related activity.</span></span> <span data-ttu-id="97ef6-220">Sorunun kök nedenini izlemediğiniz sürece, yalnızca kırmızı veya sarı bir şekilde ilgilenmeden önce gerçekleşen etkinlikleri genişlettikten sonra, uç noktalar arasında ilgili etkinliklere veya ileti akışlarına yönelik aktarımları takip edin.</span><span class="sxs-lookup"><span data-stu-id="97ef6-220">Keep expanding the activities that happened just before the red or yellow trace of interest, following transfers to related activities or message flows across endpoints, until you track the root cause of the problem.</span></span>

<span data-ttu-id="97ef6-221">![Izleme görüntüleyicisini kullanma](media/wcfc-e2etrace9s.gif "wcfc_e2etrace9s")</span><span class="sxs-lookup"><span data-stu-id="97ef6-221">![Using the Trace Viewer](media/wcfc-e2etrace9s.gif "wcfc_e2etrace9s")</span></span>

<span data-ttu-id="97ef6-222">Sorunun kök nedenini izlemek için etkinlikleri genişletme</span><span class="sxs-lookup"><span data-stu-id="97ef6-222">Expanding activities to track the root cause of a problem</span></span>

<span data-ttu-id="97ef6-223">ServiceModel `ActivityTracing` kapalıysa ancak ServiceModel izleme açık ise, 0000 etkinliğinde bulunan ServiceModel izlemelerini görebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="97ef6-223">If ServiceModel `ActivityTracing` is off but ServiceModel tracing is on, you can see ServiceModel traces emitted in the 0000 activity.</span></span> <span data-ttu-id="97ef6-224">Ancak, bu izlemelerin bağıntısını anlamak için daha fazla çaba gerektirir.</span><span class="sxs-lookup"><span data-stu-id="97ef6-224">However, this requires more effort to understand the correlation of these traces.</span></span>

<span data-ttu-id="97ef6-225">Ileti günlüğe kaydetme etkinse, hatadan etkilenen iletiyi görmek için Ileti sekmesini kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="97ef6-225">If Message Logging is enabled, you can use the Message Tab to see which message is impacted by the error.</span></span> <span data-ttu-id="97ef6-226">Kırmızı veya sarı renkte bir iletiye çift tıklayarak ilgili etkinliklerin grafik görünümünü görebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="97ef6-226">By double-clicking a message in red or yellow, you can see the graph view of the related activities.</span></span> <span data-ttu-id="97ef6-227">Bu etkinlikler, bir hatanın gerçekleştiği istekle en yakından ilgili olan etkinliklerdir.</span><span class="sxs-lookup"><span data-stu-id="97ef6-227">These activities are the ones most closely related to the request where an error happened.</span></span>

![İleti günlüğü etkin olan Izleme görüntüleyicisinin ekran görüntüsü.](./media/using-service-trace-viewer-for-viewing-correlated-traces-and-troubleshooting/message-logging-enabled.gif)

<span data-ttu-id="97ef6-229">Sorun gidermeye başlamak için Ayrıca kırmızı veya sarı bir ileti izlemesi seçebilir ve temel nedeni izlemek için çift tıklayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="97ef6-229">To start troubleshooting, you can also pick a red or yellow message trace and double click it to track the root cause.</span></span>

## <a name="see-also"></a><span data-ttu-id="97ef6-230">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="97ef6-230">See also</span></span>

- [<span data-ttu-id="97ef6-231">Uçtan Uca İzleme Senaryoları</span><span class="sxs-lookup"><span data-stu-id="97ef6-231">End-To-End Tracing Scenarios</span></span>](end-to-end-tracing-scenarios.md)
- [<span data-ttu-id="97ef6-232">Hizmet İzleme Görüntüleyicisi Aracı (SvcTraceViewer.exe)</span><span class="sxs-lookup"><span data-stu-id="97ef6-232">Service Trace Viewer Tool (SvcTraceViewer.exe)</span></span>](../../service-trace-viewer-tool-svctraceviewer-exe.md)
- [<span data-ttu-id="97ef6-233">İzleme</span><span class="sxs-lookup"><span data-stu-id="97ef6-233">Tracing</span></span>](index.md)
