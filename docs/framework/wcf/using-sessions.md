---
title: Oturumları Kullanma
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- sessions [WCF]
ms.assetid: 864ba12f-3331-4359-a359-6d6d387f1035
ms.openlocfilehash: 42159b3871d974e53751468b422cbe9f72b6f908
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 11/26/2020
ms.locfileid: "96273691"
---
# <a name="using-sessions"></a><span data-ttu-id="efb7c-102">Oturumları Kullanma</span><span class="sxs-lookup"><span data-stu-id="efb7c-102">Using Sessions</span></span>

<span data-ttu-id="efb7c-103">Windows Communication Foundation (WCF) uygulamalarında, bir *oturum* bir ileti grubunu bir konuşmaya ilişkilendirir.</span><span class="sxs-lookup"><span data-stu-id="efb7c-103">In Windows Communication Foundation (WCF) applications, a *session* correlates a group of messages into a conversation.</span></span> <span data-ttu-id="efb7c-104">WCF oturumları, ASP.NET uygulamalarında bulunan oturum nesnesinden farklıdır, farklı davranışları destekler ve farklı yollarla denetlenir.</span><span class="sxs-lookup"><span data-stu-id="efb7c-104">WCF sessions are different than the session object available in ASP.NET applications, support different behaviors, and are controlled in different ways.</span></span> <span data-ttu-id="efb7c-105">Bu konuda, oturum açma özelliklerinin WCF uygulamalarında etkinleştirilmesi ve bunların nasıl kullanılacağı açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="efb7c-105">This topic describes the features that sessions enable in WCF applications and how to use them.</span></span>  
  
## <a name="sessions-in-windows-communication-foundation-applications"></a><span data-ttu-id="efb7c-106">Windows Communication Foundation uygulamalardaki oturumlar</span><span class="sxs-lookup"><span data-stu-id="efb7c-106">Sessions in Windows Communication Foundation Applications</span></span>  

 <span data-ttu-id="efb7c-107">Bir hizmet sözleşmesi bir oturum gerektirdiğini belirttiğinde, bu sözleşme tüm çağrıların (yani, çağrıları destekleyen temel alınan ileti değişimlerinin) aynı görüşmenin parçası olması gerektiğini belirtir.</span><span class="sxs-lookup"><span data-stu-id="efb7c-107">When a service contract specifies that it requires a session, that contract is specifying that all calls (that is, the underlying message exchanges that support the calls) must be part of the same conversation.</span></span> <span data-ttu-id="efb7c-108">Bir sözleşme, oturumlara izin verdiğini ancak bir tane gerektirmediğini belirtir, istemciler bağlanabilir ve oturum oluşturabilir ya da bir oturum oluşturmaz.</span><span class="sxs-lookup"><span data-stu-id="efb7c-108">If a contract specifies that it allows sessions but does not require one, clients can connect and either establish a session or not establish a session.</span></span> <span data-ttu-id="efb7c-109">Oturum sonlanıyorsa ve aynı kanaldan bir ileti gönderildiğinde bir özel durum oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="efb7c-109">If the session ends and a message is sent through the same channel an exception is thrown.</span></span>  
  
 <span data-ttu-id="efb7c-110">WCF oturumları aşağıdaki ana kavramsal özelliklere sahiptir:</span><span class="sxs-lookup"><span data-stu-id="efb7c-110">WCF sessions have the following main conceptual features:</span></span>  
  
- <span data-ttu-id="efb7c-111">Bunlar, çağıran uygulama (WCF istemcisi) tarafından açıkça başlatılır ve sonlandırılır.</span><span class="sxs-lookup"><span data-stu-id="efb7c-111">They are explicitly initiated and terminated by the calling application (the WCF client).</span></span>  
  
- <span data-ttu-id="efb7c-112">Bir oturum sırasında teslim edilen iletiler alındıkları sırada işlenir.</span><span class="sxs-lookup"><span data-stu-id="efb7c-112">Messages delivered during a session are processed in the order in which they are received.</span></span>  
  
- <span data-ttu-id="efb7c-113">Bir ileti grubunu bir konuşmaya ilişkilendirmede oturumlar.</span><span class="sxs-lookup"><span data-stu-id="efb7c-113">Sessions correlate a group of messages into a conversation.</span></span> <span data-ttu-id="efb7c-114">Farklı bağıntı türleri mümkündür.</span><span class="sxs-lookup"><span data-stu-id="efb7c-114">Different types of correlation are possible.</span></span> <span data-ttu-id="efb7c-115">Örneğin, bir oturum tabanlı kanal, bir paylaşılan ağ bağlantısına göre iletileri ilişkilendirebilir, ancak başka bir oturum tabanlı kanal ileti gövdesinde paylaşılan bir etikete göre iletileri ilişkilendirip ilişkilendiremeyebilir.</span><span class="sxs-lookup"><span data-stu-id="efb7c-115">For instance, one session-based channel may correlate messages based on a shared network connection while another session-based channel may correlate messages based on a shared tag in the message body.</span></span> <span data-ttu-id="efb7c-116">Oturumdan türetilebilen özellikler, bağıntı yapısına bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="efb7c-116">The features that can be derived from the session depend on the nature of the correlation.</span></span>  
  
- <span data-ttu-id="efb7c-117">Bir WCF oturumuyla ilişkili genel veri deposu yok.</span><span class="sxs-lookup"><span data-stu-id="efb7c-117">There is no general data store associated with a WCF session.</span></span>  
  
 <span data-ttu-id="efb7c-118"><xref:System.Web.SessionState.HttpSessionState?displayProperty=nameWithType>ASP.NET uygulamalarında sınıfı ve sağladığı işlevselliği biliyorsanız, bu tür oturum ve WCF oturumları arasında aşağıdaki farklılıkları fark edebilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="efb7c-118">If you are familiar with the <xref:System.Web.SessionState.HttpSessionState?displayProperty=nameWithType> class in ASP.NET applications and the functionality it provides, you might notice the following differences between that kind of session and WCF sessions:</span></span>  
  
- <span data-ttu-id="efb7c-119">ASP.NET oturumları her zaman sunucu tarafından başlatılır.</span><span class="sxs-lookup"><span data-stu-id="efb7c-119">ASP.NET sessions are always server-initiated.</span></span>  
  
- <span data-ttu-id="efb7c-120">ASP.NET oturumları örtük olarak sırasız değildir.</span><span class="sxs-lookup"><span data-stu-id="efb7c-120">ASP.NET sessions are implicitly unordered.</span></span>  
  
- <span data-ttu-id="efb7c-121">ASP.NET oturumları, istekler arasında genel bir veri depolama mekanizması sağlar.</span><span class="sxs-lookup"><span data-stu-id="efb7c-121">ASP.NET sessions provide a general data storage mechanism across requests.</span></span>  
  
 <span data-ttu-id="efb7c-122">Bu konuda aşağıdakiler açıklanmaktadır:</span><span class="sxs-lookup"><span data-stu-id="efb7c-122">This topic describes:</span></span>  
  
- <span data-ttu-id="efb7c-123">Hizmet modeli katmanında oturum tabanlı bağlamalar kullanılırken varsayılan yürütme davranışı.</span><span class="sxs-lookup"><span data-stu-id="efb7c-123">The default execution behavior when using session-based bindings in the service model layer.</span></span>  
  
- <span data-ttu-id="efb7c-124">WCF oturum tabanlı, sistem tarafından belirtilen bağlamaların sağladığı Özellik türleri.</span><span class="sxs-lookup"><span data-stu-id="efb7c-124">The types of features that the WCF session-based, system-provided bindings provide.</span></span>  
  
- <span data-ttu-id="efb7c-125">Oturum gereksinimini bildiren bir sözleşme oluşturma.</span><span class="sxs-lookup"><span data-stu-id="efb7c-125">How to create a contract that declares a session requirement.</span></span>  
  
- <span data-ttu-id="efb7c-126">Oturumun oluşturulması ve sonlandırılmasını ve hizmetin hizmet örneği ile ilişkisini anlama ve denetleme.</span><span class="sxs-lookup"><span data-stu-id="efb7c-126">How to understand and control the creation and termination of the session and the relationship of the session to the service instance.</span></span>  
  
## <a name="default-execution-behavior-using-sessions"></a><span data-ttu-id="efb7c-127">Oturumları kullanan varsayılan yürütme davranışı</span><span class="sxs-lookup"><span data-stu-id="efb7c-127">Default Execution Behavior Using Sessions</span></span>  

 <span data-ttu-id="efb7c-128">Oturumu başlatmayı deneyen bir bağlamaya *oturum tabanlı* bağlama denir.</span><span class="sxs-lookup"><span data-stu-id="efb7c-128">A binding that attempts to initiate a session is called a *session-based* binding.</span></span> <span data-ttu-id="efb7c-129">Hizmet sözleşmeleri, <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> hizmet sözleşmesi arabirimindeki (veya sınıfında) özelliği sabit listesi değerlerinden birine ayarlayarak, oturum tabanlı bağlamalar gerektirdiğini, bunlara izin vermenizi veya reddetmesini belirler <xref:System.ServiceModel.SessionMode?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="efb7c-129">Service contracts specify that they require, permit, or refuse session-based bindings by setting the <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> property on the service contract interface (or class) to one of the <xref:System.ServiceModel.SessionMode?displayProperty=nameWithType> enumeration values.</span></span> <span data-ttu-id="efb7c-130">Varsayılan olarak, bu özelliğin değeri, <xref:System.ServiceModel.SessionMode.Allowed> bir istemci BIR WCF Hizmeti uygulamasıyla oturum tabanlı bağlama kullanıyorsa, hizmet tarafından sağlanmış oturumu oluşturur ve kullanır.</span><span class="sxs-lookup"><span data-stu-id="efb7c-130">By default, the value of this property is <xref:System.ServiceModel.SessionMode.Allowed>, which means that if a client uses a session-based binding with a WCF service implementation, the service establishes and uses the session provided.</span></span>  
  
 <span data-ttu-id="efb7c-131">Bir WCF hizmeti bir istemci oturumu kabul ettiğinde, aşağıdaki özellikler varsayılan olarak etkindir:</span><span class="sxs-lookup"><span data-stu-id="efb7c-131">When a WCF service accepts a client session, the following features are enabled by default:</span></span>  
  
1. <span data-ttu-id="efb7c-132">WCF istemci nesnesi arasındaki tüm çağrılar aynı hizmet örneği tarafından işlenir.</span><span class="sxs-lookup"><span data-stu-id="efb7c-132">All calls between a WCF client object are handled by the same service instance.</span></span>  
  
2. <span data-ttu-id="efb7c-133">Farklı oturum tabanlı bağlamalar ek özellikler sağlar.</span><span class="sxs-lookup"><span data-stu-id="efb7c-133">Different session-based bindings provide additional features.</span></span>  
  
## <a name="system-provided-session-types"></a><span data-ttu-id="efb7c-134">System-Provided oturum türleri</span><span class="sxs-lookup"><span data-stu-id="efb7c-134">System-Provided Session Types</span></span>  

 <span data-ttu-id="efb7c-135">Oturum tabanlı bağlama, belirli bir oturumla bir hizmet örneğinin varsayılan ilişkilendirmesini destekler.</span><span class="sxs-lookup"><span data-stu-id="efb7c-135">A session-based binding supports the default association of a service instance with a particular session.</span></span> <span data-ttu-id="efb7c-136">Ancak, farklı oturum tabanlı bağlamalar, daha önce açıklanan oturum tabanlı örnek oluşturma denetimini etkinleştirmeye ek olarak farklı özellikleri de destekler.</span><span class="sxs-lookup"><span data-stu-id="efb7c-136">However, different session-based bindings support different features in addition to enabling the session-based instancing control previously described.</span></span>  
  
 <span data-ttu-id="efb7c-137">WCF, aşağıdaki oturum tabanlı uygulama davranışı türlerini sağlar:</span><span class="sxs-lookup"><span data-stu-id="efb7c-137">WCF provides the following types of session-based application behavior:</span></span>  
  
- <span data-ttu-id="efb7c-138">, <xref:System.ServiceModel.Channels.SecurityBindingElement?displayProperty=nameWithType> Her iki iletişimin de belirli bir güvenli konuşmaya karşı anlaştığı güvenlik tabanlı oturumları destekler.</span><span class="sxs-lookup"><span data-stu-id="efb7c-138">The <xref:System.ServiceModel.Channels.SecurityBindingElement?displayProperty=nameWithType> supports security-based sessions, in which both ends of communication have agreed upon a specific secure conversation.</span></span> <span data-ttu-id="efb7c-139">Daha fazla bilgi için bkz. [hizmetleri güvenli hale getirme](securing-services.md).</span><span class="sxs-lookup"><span data-stu-id="efb7c-139">For more information, see [Securing Services](securing-services.md).</span></span> <span data-ttu-id="efb7c-140">Örneğin, <xref:System.ServiceModel.WSHttpBinding?displayProperty=nameWithType> hem güvenlik oturumları hem de güvenilir oturumlar için destek içeren bağlama, varsayılan olarak yalnızca iletileri şifreleyen ve dijital olarak imzalayabilen güvenli bir oturum kullanır.</span><span class="sxs-lookup"><span data-stu-id="efb7c-140">For example, the <xref:System.ServiceModel.WSHttpBinding?displayProperty=nameWithType> binding, which contains support for both security sessions and reliable sessions, by default uses only a secure session that encrypts and digitally signs messages.</span></span>  
  
- <span data-ttu-id="efb7c-141"><xref:System.ServiceModel.NetTcpBinding?displayProperty=nameWithType>Bağlama, tüm iletilerin yuva düzeyindeki bağlantıyla bağıntılı olduğundan emin olmak IÇIN TCP/IP tabanlı oturumları destekler.</span><span class="sxs-lookup"><span data-stu-id="efb7c-141">The <xref:System.ServiceModel.NetTcpBinding?displayProperty=nameWithType> binding supports TCP/IP-based sessions to ensure that all messages are correlated by the connection at the socket level.</span></span>  
  
- <span data-ttu-id="efb7c-142"><xref:System.ServiceModel.Channels.ReliableSessionBindingElement?displayProperty=nameWithType>WS-ReliableMessaging belirtimini uygulayan öğesi, iletilerin, konuşma sırasında birden çok düğüm arasında seyahat edildiğinde bile iletilerin alınmasını sağlamak için, iletilerin sırayla ve tek bir kez teslim edileceği güvenilir oturumlara yönelik destek sağlar.</span><span class="sxs-lookup"><span data-stu-id="efb7c-142">The <xref:System.ServiceModel.Channels.ReliableSessionBindingElement?displayProperty=nameWithType> element, which implements the WS-ReliableMessaging specification, provides support for reliable sessions in which messages can be configured to be delivered in order and exactly once, ensuring messages are received even when messages travel across multiple nodes during the conversation.</span></span> <span data-ttu-id="efb7c-143">Daha fazla bilgi için bkz. [Güvenilir Oturumlar](./feature-details/reliable-sessions.md).</span><span class="sxs-lookup"><span data-stu-id="efb7c-143">For more information, see [Reliable Sessions](./feature-details/reliable-sessions.md).</span></span>  
  
- <span data-ttu-id="efb7c-144"><xref:System.ServiceModel.NetMsmqBinding?displayProperty=nameWithType>Bağlama, MSMQ veri birimi oturumları sağlar.</span><span class="sxs-lookup"><span data-stu-id="efb7c-144">The <xref:System.ServiceModel.NetMsmqBinding?displayProperty=nameWithType> binding provides MSMQ datagram sessions.</span></span> <span data-ttu-id="efb7c-145">Daha fazla bilgi için bkz. [WCF 'de kuyruklar](./feature-details/queues-in-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="efb7c-145">For more information, see [Queues in WCF](./feature-details/queues-in-wcf.md).</span></span>  
  
 <span data-ttu-id="efb7c-146">Özelliği ayarlamak, <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A> sözleşmenin gerektirdiği oturum türünü belirtmez, yalnızca bir tane gerektirir.</span><span class="sxs-lookup"><span data-stu-id="efb7c-146">Setting the <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A> property does not specify the type of session the contract requires, only that it requires one.</span></span>  
  
## <a name="creating-a-contract-that-requires-a-session"></a><span data-ttu-id="efb7c-147">Oturum gerektiren bir sözleşme oluşturma</span><span class="sxs-lookup"><span data-stu-id="efb7c-147">Creating a Contract That Requires a Session</span></span>  

 <span data-ttu-id="efb7c-148">Oturum gerektiren bir sözleşmenin oluşturulması, hizmet sözleşmesinin bildirdiği işlem grubunun tümünün aynı oturum içinde yürütülmesi ve iletilerin sırayla teslim edilmesi gerektiğini belirtir.</span><span class="sxs-lookup"><span data-stu-id="efb7c-148">Creating a contract that requires a session states that the group of operations that the service contract declares must all be executed within the same session and that messages must be delivered in order.</span></span> <span data-ttu-id="efb7c-149">Bir hizmet sözleşmesinin gerektirdiği oturum desteğinin düzeyini belirlemek için, <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> hizmet sözleşmesi arabiriminizdeki veya sınıfınızın özelliğini, <xref:System.ServiceModel.SessionMode?displayProperty=nameWithType> sözleşmenin değerini belirtmek için numaralandırmanın değerine ayarlayın:</span><span class="sxs-lookup"><span data-stu-id="efb7c-149">To assert the level of session support that a service contract requires, set the <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> property on your service contract interface or class to the value of the <xref:System.ServiceModel.SessionMode?displayProperty=nameWithType> enumeration to specify whether the contract:</span></span>  
  
- <span data-ttu-id="efb7c-150">Bir oturum gerektirir.</span><span class="sxs-lookup"><span data-stu-id="efb7c-150">Requires a session.</span></span>  
  
- <span data-ttu-id="efb7c-151">Bir istemcinin oturum kurmasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="efb7c-151">Allows a client to establish a session.</span></span>  
  
- <span data-ttu-id="efb7c-152">Bir oturumu yasaklar.</span><span class="sxs-lookup"><span data-stu-id="efb7c-152">Prohibits a session.</span></span>  
  
 <span data-ttu-id="efb7c-153"><xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A>Ancak özelliğin ayarlanması, sözleşmenin gerektirdiği oturum tabanlı davranış türünü belirtir.</span><span class="sxs-lookup"><span data-stu-id="efb7c-153">Setting the <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A> property does not, however, specify the type of session-based behavior the contract requires.</span></span> <span data-ttu-id="efb7c-154">Bu, WCF 'nin hizmet için yapılandırılmış bağlamanın (iletişim kanalını oluşturan) çalışma zamanında, bir hizmet uygularken bir oturum oluşturmadığını veya bir oturumu oluşturduğunu onaylamasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="efb7c-154">It instructs WCF to confirm at runtime that the configured binding (which creates the communication channel) for the service does, does not, or can establish a session when implementing a service.</span></span> <span data-ttu-id="efb7c-155">Bu durumda, bağlama, tercih eden her türlü oturum tabanlı davranışla (güvenlik, taşıma, güvenilir veya bir bileşim) bu gereksinimi karşılayamaz.</span><span class="sxs-lookup"><span data-stu-id="efb7c-155">Again, the binding can satisfy that requirement with any type of session-based behavior it chooses—security, transport, reliable, or some combination.</span></span> <span data-ttu-id="efb7c-156">Tam davranış <xref:System.ServiceModel.SessionMode?displayProperty=nameWithType> Seçili değere bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="efb7c-156">The exact behavior depends on the <xref:System.ServiceModel.SessionMode?displayProperty=nameWithType> value selected.</span></span> <span data-ttu-id="efb7c-157">Yapılandırılmış hizmetin bağlaması değerine uygun değilse <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A> , bir özel durum oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="efb7c-157">If the configured binding of the service does not conform to the value of <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A>, an exception is thrown.</span></span> <span data-ttu-id="efb7c-158">Bağlama ve destek oturumlarını oluşturdukları kanallar, oturum tabanlı olarak kabul edilir.</span><span class="sxs-lookup"><span data-stu-id="efb7c-158">Bindings and the channels they create that support sessions are said to be session-based.</span></span>  
  
 <span data-ttu-id="efb7c-159">Aşağıdaki hizmet sözleşmesi, içindeki tüm işlemlerin `ICalculatorSession` bir oturum içinde alışverişi gerektiğini belirtir.</span><span class="sxs-lookup"><span data-stu-id="efb7c-159">The following service contract specifies that all operations in the `ICalculatorSession` must be exchanged within a session.</span></span> <span data-ttu-id="efb7c-160">İşlemlerden hiçbiri Yöntem dışında çağırana bir değer döndürmez `Equals` .</span><span class="sxs-lookup"><span data-stu-id="efb7c-160">None of the operations returns a value to the caller except the `Equals` method.</span></span> <span data-ttu-id="efb7c-161">Ancak, `Equals` yöntemi parametre içermez ve bu nedenle, yalnızca verilerin diğer işlemlere geçirilmiş bir oturum içinde sıfır olmayan bir değer döndürebilir.</span><span class="sxs-lookup"><span data-stu-id="efb7c-161">However, the `Equals` method takes no parameters and, therefore, can only return a non-zero value inside a session in which data has already been passed to the other operations.</span></span> <span data-ttu-id="efb7c-162">Bu sözleşme, bir oturumun düzgün çalışmasını gerektirir.</span><span class="sxs-lookup"><span data-stu-id="efb7c-162">This contract requires a session to function properly.</span></span> <span data-ttu-id="efb7c-163">Belirli bir istemciyle ilişkili bir oturum olmadan, hizmet örneğinin bu istemcinin gönderdiği önceki verileri bilmesinin bir yolu yoktur.</span><span class="sxs-lookup"><span data-stu-id="efb7c-163">Without a session associated with a specific client, the service instance has no way of knowing what previous data this client has sent.</span></span>  
  
 [!code-csharp[S_Service_Session#1](../../../samples/snippets/csharp/VS_Snippets_CFX/s_service_session/cs/service.cs#1)]
 [!code-vb[S_Service_Session#1](../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_service_session/vb/service.vb#1)]  
  
 <span data-ttu-id="efb7c-164">Bir hizmet bir oturuma izin veriyorsa, bir oturum oluşturulur ve istemci bir tane başlatırsa kullanılır; Aksi takdirde, hiçbir oturum kurulmaz.</span><span class="sxs-lookup"><span data-stu-id="efb7c-164">If a service allows a session, then a session is established and used if the client initiates one; otherwise, no session is established.</span></span>  
  
## <a name="sessions-and-service-instances"></a><span data-ttu-id="efb7c-165">Oturumlar ve hizmet örnekleri</span><span class="sxs-lookup"><span data-stu-id="efb7c-165">Sessions and Service Instances</span></span>  

 <span data-ttu-id="efb7c-166">WCF 'de varsayılan örnek oluşturma davranışını kullanırsanız, WCF istemci nesnesi arasındaki tüm çağrılar aynı hizmet örneği tarafından işlenir.</span><span class="sxs-lookup"><span data-stu-id="efb7c-166">If you use the default instancing behavior in WCF, all calls between a WCF client object are handled by the same service instance.</span></span> <span data-ttu-id="efb7c-167">Bu nedenle, uygulama düzeyinde, yerel çağrı davranışına benzer şekilde uygulama davranışını etkinleştirme olarak bir oturum düşünebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="efb7c-167">Therefore, at the application level, you can think of a session as enabling application behavior similar to local call behavior.</span></span> <span data-ttu-id="efb7c-168">Örneğin, yerel bir nesne oluşturduğunuzda:</span><span class="sxs-lookup"><span data-stu-id="efb7c-168">For example, when you create a local object:</span></span>  
  
- <span data-ttu-id="efb7c-169">Bir Oluşturucu çağırılır.</span><span class="sxs-lookup"><span data-stu-id="efb7c-169">A constructor is called.</span></span>  
  
- <span data-ttu-id="efb7c-170">WCF istemci nesne başvurusuna yapılan sonraki tüm çağrılar aynı nesne örneği tarafından işlenir.</span><span class="sxs-lookup"><span data-stu-id="efb7c-170">All subsequent calls made to the WCF client object reference are processed by the same object instance.</span></span>  
  
- <span data-ttu-id="efb7c-171">Nesne başvurusu yok edildiğinde yıkıcı çağrılır.</span><span class="sxs-lookup"><span data-stu-id="efb7c-171">A destructor is called when the object reference is destroyed.</span></span>  
  
 <span data-ttu-id="efb7c-172">Oturumlar, varsayılan hizmet örneği davranışı kullanıldığı sürece istemciler ve hizmetler arasında benzer bir davranışı etkinleştirir.</span><span class="sxs-lookup"><span data-stu-id="efb7c-172">Sessions enable a similar behavior between clients and services as long as the default service instance behavior is used.</span></span> <span data-ttu-id="efb7c-173">Bir hizmet sözleşmesi oturumları gerektiriyorsa veya destekliyorsa, bir veya daha fazla sözleşme işlemi, ve özelliklerini ayarlayarak bir oturumu başlatma veya sonlandırma olarak işaretlenebilir <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A> <xref:System.ServiceModel.OperationContractAttribute.IsTerminating%2A> .</span><span class="sxs-lookup"><span data-stu-id="efb7c-173">If a service contract requires or supports sessions, one or more contract operations can be marked as initiating or terminating a session by setting the <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A> and <xref:System.ServiceModel.OperationContractAttribute.IsTerminating%2A> properties.</span></span>  
  
 <span data-ttu-id="efb7c-174">*Başlatma işlemleri* , yeni bir oturumun ilk işlemi olarak çağrılması gereken olanlardır.</span><span class="sxs-lookup"><span data-stu-id="efb7c-174">*Initiating operations* are those that must be called as the first operation of a new session.</span></span> <span data-ttu-id="efb7c-175">Başlatma olmayan işlemler, en az bir başlatma işlemi çağrıldıktan sonra çağrılabilir.</span><span class="sxs-lookup"><span data-stu-id="efb7c-175">Non-initiating operations can be called only after at least one initiating operation has been called.</span></span> <span data-ttu-id="efb7c-176">Bu nedenle, hizmet örneğinin başlangıcına uygun istemcilerden giriş almak üzere tasarlanan başlatma işlemlerini bildirerek hizmetinize yönelik bir dizi oturum Oluşturucu oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="efb7c-176">You can therefore create a kind of session constructor for your service by declaring initiating operations designed to take input from clients appropriate to the beginning of the service instance.</span></span> <span data-ttu-id="efb7c-177">(Durum, ancak hizmet nesnesi değil, oturumla ilişkilendirilir.)</span><span class="sxs-lookup"><span data-stu-id="efb7c-177">(The state is associated with the session, however, and not the service object.)</span></span>  
  
 <span data-ttu-id="efb7c-178">Diğer yandan, *Işlemleri sonlandırma*, var olan bir oturumda son ileti olarak çağrılması gereken olanlardır.</span><span class="sxs-lookup"><span data-stu-id="efb7c-178">*Terminating operations*, conversely, are those that must be called as the last message in an existing session.</span></span> <span data-ttu-id="efb7c-179">Varsayılan durumda, WCF hizmet nesnesini ve hizmetin ilişkili olduğu oturum kapatıldıktan sonra bağlamını geri dönüştürür.</span><span class="sxs-lookup"><span data-stu-id="efb7c-179">In the default case, WCF recycles the service object and its context after the session with which the service was associated is closed.</span></span> <span data-ttu-id="efb7c-180">Bu nedenle, hizmet örneğinin sonuna uygun bir işlevi gerçekleştirmek için tasarlanan sonlandırma işlemlerini bildirerek bir tür yıkıcı oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="efb7c-180">You can, therefore, create a kind of destructor by declaring terminating operations designed to perform a function appropriate to the end of the service instance.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="efb7c-181">Varsayılan davranış yerel oluşturucular ve Yıkıcılar ile benzerliği olsa da, yalnızca benzerliği vardır.</span><span class="sxs-lookup"><span data-stu-id="efb7c-181">Although the default behavior bears a resemblance to local constructors and destructors, it is only a resemblance.</span></span> <span data-ttu-id="efb7c-182">Herhangi bir WCF hizmeti işlemi, bir başlatma veya sonlandırma işlemi ya da aynı anda her ikisi de olabilir.</span><span class="sxs-lookup"><span data-stu-id="efb7c-182">Any WCF service operation can be an initiating or terminating operation, or both at the same time.</span></span> <span data-ttu-id="efb7c-183">Ayrıca, varsayılan durumda, başlatma işlemlerine herhangi bir sırada herhangi bir sayıda çağrılabilir. oturum kurulduktan ve hizmet örneğinin ömrünü açıkça denetmediğiniz (nesneyi işleyerek) bir örnekle ilişkilendirildiğinde hiçbir ek oturum oluşturulmaz <xref:System.ServiceModel.InstanceContext?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="efb7c-183">In addition, in the default case, initiating operations can be called any number of times in any order; no additional sessions are created once the session is established and associated with an instance unless you explicitly control the lifetime of the service instance (by manipulating the <xref:System.ServiceModel.InstanceContext?displayProperty=nameWithType> object).</span></span> <span data-ttu-id="efb7c-184">Son olarak, durum hizmet nesnesi değil, oturumla ilişkilendirilir.</span><span class="sxs-lookup"><span data-stu-id="efb7c-184">Finally, the state is associated with the session and not the service object.</span></span>  
  
 <span data-ttu-id="efb7c-185">Örneğin, `ICalculatorSession` Önceki örnekte kullanılan sözleşme, WCF istemci nesnesinin `Clear` diğer bir işlemden önce işlemi ilk kez çağırmasını ve bu WCF istemci nesnesiyle olan oturumun işlemi aradığında sonlandırılması gerekir `Equals` .</span><span class="sxs-lookup"><span data-stu-id="efb7c-185">For example, the `ICalculatorSession` contract used in the preceding example requires that the WCF client object first call the `Clear` operation prior to any other operation and that the session with this WCF client object should terminate when it calls the `Equals` operation.</span></span> <span data-ttu-id="efb7c-186">Aşağıdaki kod örneğinde, bu gereksinimleri zorlayan bir sözleşme gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="efb7c-186">The following code example shows a contract that enforces these requirements.</span></span> <span data-ttu-id="efb7c-187">`Clear` bir oturumu başlatmak için önce çağrılmalıdır ve bu oturum çağrıldığında oturumu sonlandırır `Equals` .</span><span class="sxs-lookup"><span data-stu-id="efb7c-187">`Clear` must be called first to initiate a session, and that session ends when `Equals` is called.</span></span>  
  
 [!code-csharp[SCA.IsInitiatingIsTerminating#1](../../../samples/snippets/csharp/VS_Snippets_CFX/sca.isinitiatingisterminating/cs/service.cs#1)]
 [!code-vb[SCA.IsInitiatingIsTerminating#1](../../../samples/snippets/visualbasic/VS_Snippets_CFX/sca.isinitiatingisterminating/vb/service.vb#1)]  
  
 <span data-ttu-id="efb7c-188">Hizmetler, istemcileri ile oturum başlatmazlar.</span><span class="sxs-lookup"><span data-stu-id="efb7c-188">Services do not start sessions with clients.</span></span> <span data-ttu-id="efb7c-189">WCF istemci uygulamalarında, oturum tabanlı kanalın yaşam süresi ve oturumun kendisinin ömrü arasında doğrudan bir ilişki bulunur.</span><span class="sxs-lookup"><span data-stu-id="efb7c-189">In WCF client applications, a direct relationship exists between the lifetime of the session-based channel and the lifetime of the session itself.</span></span> <span data-ttu-id="efb7c-190">Bu nedenle, istemciler yeni oturum tabanlı kanallar oluşturarak ve oturum tabanlı kanalları düzgün bir şekilde kapatarak mevcut oturumları kopararak yeni oturumlar oluşturur.</span><span class="sxs-lookup"><span data-stu-id="efb7c-190">As such, clients create new sessions by creating new session-based channels and tear down existing sessions by closing session-based channels gracefully.</span></span> <span data-ttu-id="efb7c-191">İstemci, aşağıdakilerden birini çağırarak hizmet uç noktasıyla bir oturum başlatır:</span><span class="sxs-lookup"><span data-stu-id="efb7c-191">A client starts a session with a service endpoint by calling one of the following:</span></span>  
  
- <span data-ttu-id="efb7c-192"><xref:System.ServiceModel.ICommunicationObject.Open%2A?displayProperty=nameWithType> bir çağrısıyla döndürülen kanalda <xref:System.ServiceModel.ChannelFactory%601.CreateChannel%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="efb7c-192"><xref:System.ServiceModel.ICommunicationObject.Open%2A?displayProperty=nameWithType> on the channel returned by a call to <xref:System.ServiceModel.ChannelFactory%601.CreateChannel%2A?displayProperty=nameWithType>.</span></span>  
  
- <span data-ttu-id="efb7c-193"><xref:System.ServiceModel.ClientBase%601.Open%2A?displayProperty=nameWithType>[ServiceModel meta veri yardımcı programı aracı](servicemodel-metadata-utility-tool-svcutil-exe.md)tarafından oluşturulan WCF istemci nesnesinde (Svcutil.exe).</span><span class="sxs-lookup"><span data-stu-id="efb7c-193"><xref:System.ServiceModel.ClientBase%601.Open%2A?displayProperty=nameWithType> on the WCF client object generated by the [ServiceModel Metadata Utility Tool (Svcutil.exe)](servicemodel-metadata-utility-tool-svcutil-exe.md).</span></span>  
  
- <span data-ttu-id="efb7c-194">Her iki tür WCF istemci nesnesi (varsayılan olarak, tüm işlemler başlatılıyor) üzerinde başlatma işlemi.</span><span class="sxs-lookup"><span data-stu-id="efb7c-194">An initiating operation on either type of WCF client object (by default, all operations are initiating).</span></span> <span data-ttu-id="efb7c-195">İlk işlem çağrıldığında, WCF istemci nesnesi kanalı otomatik olarak açar ve bir oturum başlatır.</span><span class="sxs-lookup"><span data-stu-id="efb7c-195">When the first operation is called, the WCF client object automatically opens the channel and initiates a session.</span></span>  
  
 <span data-ttu-id="efb7c-196">Genellikle bir istemci, aşağıdakilerden birini çağırarak bir hizmet uç noktasıyla oturumu sonlandırır:</span><span class="sxs-lookup"><span data-stu-id="efb7c-196">Typically a client ends a session with a service endpoint by calling one of the following:</span></span>  
  
- <span data-ttu-id="efb7c-197"><xref:System.ServiceModel.ICommunicationObject.Close%2A?displayProperty=nameWithType> bir çağrısıyla döndürülen kanalda <xref:System.ServiceModel.ChannelFactory%601.CreateChannel%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="efb7c-197"><xref:System.ServiceModel.ICommunicationObject.Close%2A?displayProperty=nameWithType> on the channel returned by a call to <xref:System.ServiceModel.ChannelFactory%601.CreateChannel%2A?displayProperty=nameWithType>.</span></span>  
  
- <span data-ttu-id="efb7c-198"><xref:System.ServiceModel.ClientBase%601.Close%2A?displayProperty=nameWithType> Svcutil.exe tarafından oluşturulan WCF istemci nesnesi üzerinde.</span><span class="sxs-lookup"><span data-stu-id="efb7c-198"><xref:System.ServiceModel.ClientBase%601.Close%2A?displayProperty=nameWithType> on the WCF client object generated by Svcutil.exe.</span></span>  
  
- <span data-ttu-id="efb7c-199">Her iki tür WCF istemci nesnesi üzerinde sonlandırma işlemi (varsayılan olarak, hiçbir işlem sonlandıralınmaz; sözleşme açıkça bir sonlandırma işlemi belirtmelidir).</span><span class="sxs-lookup"><span data-stu-id="efb7c-199">A terminating operation on either type of WCF client object (by default, no operations are terminating; the contract must explicitly specify a terminating operation).</span></span> <span data-ttu-id="efb7c-200">İlk işlem çağrıldığında, WCF istemci nesnesi kanalı otomatik olarak açar ve bir oturum başlatır.</span><span class="sxs-lookup"><span data-stu-id="efb7c-200">When the first operation is called, the WCF client object automatically opens the channel and initiates a session.</span></span>  
  
 <span data-ttu-id="efb7c-201">Örnekler için bkz. [nasıl yapılır: oturum gerektiren bir hizmet oluşturma](./feature-details/how-to-create-a-service-that-requires-sessions.md) ve [varsayılan hizmet davranışı](./samples/default-service-behavior.md) ve [örnek](./samples/instancing.md) oluşturma örnekleri.</span><span class="sxs-lookup"><span data-stu-id="efb7c-201">For examples, see [How to: Create a Service That Requires Sessions](./feature-details/how-to-create-a-service-that-requires-sessions.md) as well as the [Default Service Behavior](./samples/default-service-behavior.md) and [Instancing](./samples/instancing.md) samples.</span></span>  
  
 <span data-ttu-id="efb7c-202">İstemciler ve oturumlar hakkında daha fazla bilgi için bkz. [WCF Istemcisi kullanarak hizmetlere erişme](./feature-details/accessing-services-using-a-client.md).</span><span class="sxs-lookup"><span data-stu-id="efb7c-202">For more information about clients and sessions, see [Accessing Services Using a WCF Client](./feature-details/accessing-services-using-a-client.md).</span></span>  
  
## <a name="sessions-interact-with-instancecontext-settings"></a><span data-ttu-id="efb7c-203">Oturumlar InstanceContext ayarlarıyla etkileşim kurar</span><span class="sxs-lookup"><span data-stu-id="efb7c-203">Sessions Interact with InstanceContext Settings</span></span>  

 <span data-ttu-id="efb7c-204"><xref:System.ServiceModel.SessionMode>Bir sözleşmede sabit listesi ile <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> belirli hizmet nesneleri arasındaki ilişkilendirmeyi denetleyen özelliği arasında bir etkileşim vardır.</span><span class="sxs-lookup"><span data-stu-id="efb7c-204">There is an interaction between the <xref:System.ServiceModel.SessionMode> enumeration in a contract and the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> property, which controls the association between channels and specific service objects.</span></span> <span data-ttu-id="efb7c-205">Daha fazla bilgi için bkz. [Oturumlar, örnek oluşturma ve eşzamanlılık](./feature-details/sessions-instancing-and-concurrency.md).</span><span class="sxs-lookup"><span data-stu-id="efb7c-205">For more information, see [Sessions, Instancing, and Concurrency](./feature-details/sessions-instancing-and-concurrency.md).</span></span>  
  
### <a name="sharing-instancecontext-objects"></a><span data-ttu-id="efb7c-206">InstanceContext nesnelerini paylaşma</span><span class="sxs-lookup"><span data-stu-id="efb7c-206">Sharing InstanceContext Objects</span></span>  

 <span data-ttu-id="efb7c-207">Ayrıca, <xref:System.ServiceModel.InstanceContext> Bu ilişkilendirmeyi kendiniz gerçekleştirerek hangi oturum tabanlı kanalın veya çağrının hangi nesneyle ilişkili olduğunu da denetleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="efb7c-207">You can also control which session-based channel or call is associated with which <xref:System.ServiceModel.InstanceContext> object by performing that association yourself.</span></span>
  
## <a name="sessions-and-streaming"></a><span data-ttu-id="efb7c-208">Oturumlar ve akış</span><span class="sxs-lookup"><span data-stu-id="efb7c-208">Sessions and Streaming</span></span>  

 <span data-ttu-id="efb7c-209">Aktarılacak büyük miktarda veriniz olduğunda, WCF 'deki akış aktarım modu, iletilerin arabelleğe alınması ve işlenmesi için varsayılan davranış için uygun bir alternatiftir.</span><span class="sxs-lookup"><span data-stu-id="efb7c-209">When you have a large amount of data to transfer, the streaming transfer mode in WCF is a feasible alternative to the default behavior of buffering and processing messages in memory in their entirety.</span></span> <span data-ttu-id="efb7c-210">Oturum tabanlı bağlama ile çağrı akışı yaparken beklenmedik bir davranış alabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="efb7c-210">You may get unexpected behavior when streaming calls with a session-based binding.</span></span> <span data-ttu-id="efb7c-211">Kullanılan bağlama oturumları kullanacak şekilde yapılandırılmış olsa bile, tüm akış çağrıları, oturumları desteklemeyen tek bir kanal (Datagram kanalı) aracılığıyla yapılır.</span><span class="sxs-lookup"><span data-stu-id="efb7c-211">All streaming calls are made through a single channel (the datagram channel) that does not support sessions even if the binding being used is configured to use sessions.</span></span> <span data-ttu-id="efb7c-212">Birden çok istemci, oturum tabanlı bir bağlama üzerinden aynı hizmet nesnesine akış çağrıları yapar ve hizmet nesnesinin eşzamanlılık modu tek olarak ayarlanır ve örnek bağlam modu olarak ayarlanmışsa `PerSession` , tüm çağrılar aynı anda yalnızca bir çağrı işlenir.</span><span class="sxs-lookup"><span data-stu-id="efb7c-212">If multiple clients make streaming calls to the same service object over a session-based binding, and the service object's concurrency mode is set to single and its instance context mode is set to `PerSession`, all calls must go through the datagram channel and so only one call is processed at a time.</span></span> <span data-ttu-id="efb7c-213">Daha sonra bir veya daha fazla istemci zaman aşımına uğrar. Bu soruna geçici bir çözüm olarak, hizmet nesnesinin ' i ' veya eşzamanlılık ' i ' i ' olarak ayarlayarak çalışabilirsiniz `InstanceContextMode` `PerCall` .</span><span class="sxs-lookup"><span data-stu-id="efb7c-213">One or more clients may then time out. You can work around this issue by either setting the service object's `InstanceContextMode` to `PerCall` or Concurrency to multiple.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="efb7c-214">Yalnızca bir "oturum" var olduğundan, MaxConcurrentSessions bu durumda hiçbir etkiye sahip değildir.</span><span class="sxs-lookup"><span data-stu-id="efb7c-214">MaxConcurrentSessions have no effect in this case because there is only one "session" available.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="efb7c-215">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="efb7c-215">See also</span></span>

- <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A>
- <xref:System.ServiceModel.OperationContractAttribute.IsTerminating%2A>
