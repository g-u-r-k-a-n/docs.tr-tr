---
title: Kanal Fabrikası ve Önbelleğe Alma
ms.date: 03/30/2017
ms.assetid: 954f030e-091c-4c0e-a7a2-10f9a6b1f529
ms.openlocfilehash: 5b8348a98b484ca08e3dbeba141dc49825c8c071
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 06/09/2020
ms.locfileid: "84587371"
---
# <a name="channel-factory-and-caching"></a>Kanal Fabrikası ve Önbelleğe Alma

WCF istemci uygulamaları, <xref:System.ServiceModel.ChannelFactory%601> BIR WCF hizmeti ile iletişim kanalı oluşturmak için sınıfını kullanır.  <xref:System.ServiceModel.ChannelFactory%601>Aşağıdaki işlemleri içerdiğinden örnek oluşturma bazı ek yük doğurur:

- Ağacı oluşturma <xref:System.ServiceModel.Description.ContractDescription>

- Tüm gerekli CLR türlerini yansıtma

- Kanal yığınını oluşturma

- Kaynakları elden atma

Bu ek yükü en aza indirmenize yardımcı olmak için WCF istemci ara sunucusu kullanırken WCF kanal fabrikalarını önbelleğe alabilir.

> [!TIP]
> Sınıfını doğrudan kullandığınızda kanal fabrikası oluşturma üzerinde doğrudan denetiminiz vardır <xref:System.ServiceModel.ChannelFactory%601> .

[ServiceModel meta veri yardımcı programı Aracı (Svcutil. exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md) Ile oluşturulan WCF istemci proxy 'leri, öğesinden türetilir <xref:System.ServiceModel.ClientBase%601> . <xref:System.ServiceModel.ClientBase%601><xref:System.ServiceModel.ClientBase%601.CacheSetting%2A>kanal fabrikası önbelleğe alma davranışını tanımlayan bir statik özelliği tanımlar. Belirli bir tür için önbellek ayarları yapılır. Örneğin, `ClientBase<ITest>.CacheSettings` aşağıda tanımlanan değerlerden birine ayarlandığında yalnızca türünün proxy/ClientBase değeri etkilenir `ITest` . <xref:System.ServiceModel.ClientBase%601>İlk proxy/ClientBase örneği oluşturulduktan hemen sonra, belirli bir için önbellek ayarı sabittir.

## <a name="specifying-caching-behavior"></a>Önbelleğe alma davranışını belirtme

Önbelleğe alma davranışı, <xref:System.ServiceModel.ClientBase%601.CacheSetting> özelliği aşağıdaki değerlerden birine ayarlanarak belirtilir.

|Önbellek ayarı değeri|Açıklama|
|-------------------------|-----------------|
|<xref:System.ServiceModel.CacheSetting.AlwaysOn>|<xref:System.ServiceModel.ClientBase%601>Uygulama etki alanı içindeki tüm örnekleri önbelleğe alma işlemine katılabilir. Geliştirici, önbelleğe alma işleminin olumsuz güvenlik etkilerine sahip olmadığını belirledi. "Güvenliğe duyarlı" özelliklere erişilmesi durumunda bile önbelleğe alma devre dışı bırakılır <xref:System.ServiceModel.ClientBase%601> . ' Nin "güvenlik duyarlı" özellikleri <xref:System.ServiceModel.ClientBase%601> <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> ve ' dir <xref:System.ServiceModel.ClientBase%601.Endpoint%2A> <xref:System.ServiceModel.ClientBase%601.ChannelFactory%2A> .|
|<xref:System.ServiceModel.CacheSetting.Default>|Yalnızca <xref:System.ServiceModel.ClientBase%601> yapılandırma dosyalarında tanımlanan bitiş noktalarından oluşturulan örnekleri, uygulama etki alanı içinde önbelleğe almaya katılır. <xref:System.ServiceModel.ClientBase%601>Bu uygulama etki alanı içinde programlı olarak oluşturulan tüm örnekleri, önbelleğe alma işlemine katılmaz. Ayrıca, <xref:System.ServiceModel.ClientBase%601> "güvenliğe duyarlı" özelliklerden birine erişildiğinde bir örneği için önbelleğe alma devre dışı bırakılır.|
|<xref:System.ServiceModel.CacheSetting.AlwaysOff>|Bu, <xref:System.ServiceModel.ClientBase%601> söz konusu App-Domain içindeki belirli bir türün tüm örnekleri için önbelleğe alma kapalıdır.|

Aşağıdaki kod parçacıkları, özelliğinin nasıl kullanılacağını gösterir <xref:System.ServiceModel.ClientBase%601.CacheSetting%2A> .

```csharp
class Program
{
   static void Main(string[] args)
   {
      ClientBase<ITest>.CacheSettings = CacheSettings.AlwaysOn;
      foreach (string msg in messages)
      {
         using (TestClient proxy = new TestClient (new BasicHttpBinding(), new EndpointAddress(address)))
         {
            // ...
            proxy.Test(msg);
            // ...
         }
      }
   }
}
// Generated by SvcUtil.exe
public partial class TestClient : System.ServiceModel.ClientBase, ITest { }
```

Yukarıdaki kodda, tüm örnekleri `TestClient` aynı kanal fabrikasını kullanır.

```csharp
class Program
{
   static void Main(string[] args)
   {
      ClientBase.CacheSettings = CacheSettings.Default;
      int i = 1;
      foreach (string msg in messages)
      {
         using (TestClient proxy = new TestClient ("MyEndpoint", new EndpointAddress(address)))
         {
            if (i == 4)
            {
               ServiceEndpoint endpoint = proxy.Endpoint;
               ... // use endpoint in some way
            }
            proxy.Test(msg);
         }
         i++;
   }
}

// Generated by SvcUtil.exe
public partial class TestClient : System.ServiceModel.ClientBase, ITest {}
```

Yukarıdaki örnekte, öğesinin tüm örnekleri, `TestClient` örnek #4 dışında aynı kanal fabrikası kullanır. Örnek #4, kullanımı için özel olarak oluşturulan bir kanal fabrikası kullanacaktır. Bu ayar, belirli bir uç noktanın aynı kanal fabrikası türünün diğer uç noktalarından farklı güvenlik ayarlarına ihtiyacı olan senaryolarda (Bu durumda `ITest` ) çalışır.

```csharp
class Program
{
   static void Main(string[] args)
   {
      ClientBase.CacheSettings = CacheSettings.AlwaysOff;
      foreach (string msg in messages)
      {
         using (TestClient proxy = new TestClient ("MyEndpoint", new EndpointAddress(address)))
         {
            proxy.Test(msg);
         }
      }
   }
}

// Generated by SvcUtil.exe
public partial class TestClient : System.ServiceModel.ClientBase, ITest {}
```

Yukarıdaki örnekte, öğesinin tüm örnekleri `TestClient` farklı kanal fabrikaları kullanır. Bu, her bir uç nokta farklı güvenlik gereksinimlerine sahip olduğunda ve önbelleğe alma mantıklı olmadığında yararlıdır.

## <a name="see-also"></a>Ayrıca bkz.

- <xref:System.ServiceModel.ClientBase%601>
- [İstemci Derleme](../building-clients.md)
- [İstemciler](clients.md)
- [WCF İstemcisi Kullanarak Hizmetlere Erişme](../accessing-services-using-a-wcf-client.md)
- [Nasıl yapılır: ChannelFactory Kullanma](how-to-use-the-channelfactory.md)
