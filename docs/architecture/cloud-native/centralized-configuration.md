---
title: Merkezi yapılandırma
description: Azure Uygulama yapılandırması ve AzureKey kasasını kullanarak bulutta yerel uygulamalar için yapılandırmayı merkezileştirme.
ms.date: 04/19/2020
ms.openlocfilehash: 53bdc03370b04af4d830fe7abbd8aebad81e9650
ms.sourcegitcommit: 957c49696eaf048c284ef8f9f8ffeb562357ad95
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 05/07/2020
ms.locfileid: "82895651"
---
# <a name="centralized-configuration"></a><span data-ttu-id="0e1a0-103">Merkezi yapılandırma</span><span class="sxs-lookup"><span data-stu-id="0e1a0-103">Centralized configuration</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="0e1a0-104">Her şeyin tek bir örnek içinde çalıştığı tek parçalı bir uygulamanın aksine, bulutta yerel bir uygulama, sanal makineler, kapsayıcılar ve coğrafi bölgeler arasında dağıtılan bağımsız hizmetlerden oluşur.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-104">Unlike a monolithic app in which everything runs within a single instance, a cloud-native application consists of independent services distributed across virtual machines, containers, and geographic regions.</span></span> <span data-ttu-id="0e1a0-105">Onlarca birbirine bağlı hizmetlerin yapılandırma ayarlarını yönetmek zor olabilir.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-105">Managing configuration settings for dozens of interdependent services can be challenging.</span></span> <span data-ttu-id="0e1a0-106">Yapılandırma ayarlarının farklı konumlarda yinelenen kopyaları, yönetim açısından hataya açıktır ve zor olur.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-106">Duplicate copies of configuration settings across different locations is error prone and difficult to manage.</span></span> <span data-ttu-id="0e1a0-107">Merkezi yapılandırma, dağıtılmış bulutta yerel uygulamalar için kritik bir gereksinimdir.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-107">Centralized configuration is a critical requirement for distributed cloud-native applications.</span></span>

<span data-ttu-id="0e1a0-108">[Bölüm 1](introduction.md)' de anlatıldığı gibi, on Iki öğeli uygulama önerileri, kod ve yapılandırma arasında katı ayrım gerektirir.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-108">As discussed in [Chapter 1](introduction.md), the Twelve-Factor App recommendations require strict separation between code and configuration.</span></span> <span data-ttu-id="0e1a0-109">Yapılandırma, uygulamadan dışarıdan depolanmalıdır ve gerektiğinde okunabilir olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-109">Configuration must be stored externally from the application and read-in as needed.</span></span> <span data-ttu-id="0e1a0-110">Yapılandırma değerlerini sabitler veya kodda değişmez değer olarak depolamak bir ihladir.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-110">Storing configuration values as constants or literal values in code is a violation.</span></span> <span data-ttu-id="0e1a0-111">Aynı yapılandırma değerleri genellikle aynı uygulamadaki birçok hizmet tarafından kullanılır.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-111">The same configuration values are often be used by many services in the same application.</span></span> <span data-ttu-id="0e1a0-112">Ayrıca, geliştirme, test ve üretim gibi birden çok ortamda aynı değerleri desteklememiz gerekir.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-112">Additionally, we must support the same values across multiple environments, such as dev, testing, and production.</span></span> <span data-ttu-id="0e1a0-113">En iyi uygulama, bunları merkezi bir yapılandırma deposunda saklar.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-113">The best practice is store them in a centralized configuration store.</span></span>

<span data-ttu-id="0e1a0-114">Azure bulutu birçok harika seçenek sunar.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-114">The Azure cloud presents several great options.</span></span>

## <a name="azure-app-configuration"></a><span data-ttu-id="0e1a0-115">Azure Uygulama Yapılandırması</span><span class="sxs-lookup"><span data-stu-id="0e1a0-115">Azure App Configuration</span></span>

<span data-ttu-id="0e1a0-116">[Azure Uygulama yapılandırması](https://docs.microsoft.com/azure/azure-app-configuration/overview) , gizli olmayan yapılandırma ayarlarını güvenli, merkezi bir konumda depolayan, tam olarak yönetilen bir Azure hizmetidir.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-116">[Azure App Configuration](https://docs.microsoft.com/azure/azure-app-configuration/overview) is a fully managed Azure service that stores non-secret configuration settings in a secure, centralized location.</span></span> <span data-ttu-id="0e1a0-117">Depolanan değerler, birden fazla hizmet ve uygulama arasında paylaşılabilir.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-117">Stored values can be shared among multiple services and applications.</span></span>

<span data-ttu-id="0e1a0-118">Hizmetin kullanımı basittir ve çeşitli avantajlar sunar:</span><span class="sxs-lookup"><span data-stu-id="0e1a0-118">The service is simple to use and provides several benefits:</span></span>

- <span data-ttu-id="0e1a0-119">Esnek anahtar/değer gösterimleri ve eşlemeler</span><span class="sxs-lookup"><span data-stu-id="0e1a0-119">Flexible key/value representations and mappings</span></span>
- <span data-ttu-id="0e1a0-120">Azure etiketleriyle etiketleme</span><span class="sxs-lookup"><span data-stu-id="0e1a0-120">Tagging with Azure labels</span></span>
- <span data-ttu-id="0e1a0-121">Yönetim için adanmış Kullanıcı arabirimi</span><span class="sxs-lookup"><span data-stu-id="0e1a0-121">Dedicated UI for management</span></span>
- <span data-ttu-id="0e1a0-122">Hassas bilgilerin şifrelenmesi</span><span class="sxs-lookup"><span data-stu-id="0e1a0-122">Encryption of sensitive information</span></span>
- <span data-ttu-id="0e1a0-123">Sorgulama ve toplu alma</span><span class="sxs-lookup"><span data-stu-id="0e1a0-123">Querying and batch retrieval</span></span>

<span data-ttu-id="0e1a0-124">Azure Uygulama yapılandırması, yedi gün için anahtar-değer ayarlarında yapılan değişiklikleri tutar.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-124">Azure App Configuration maintains changes made to key-value settings for seven days.</span></span> <span data-ttu-id="0e1a0-125">Noktadan noktaya anlık görüntü özelliği, bir ayarın geçmişini yeniden yapılandırmanızı ve hatta başarısız bir dağıtım için geri dönmenizi sağlar.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-125">The point-in-time snapshot feature enables you to reconstruct the history of a setting and even rollback for a failed deployment.</span></span>

<span data-ttu-id="0e1a0-126">Yapılandırma deposuna aşırı çağrı yapmaktan kaçınmak için uygulama yapılandırması her ayarı otomatik olarak önbelleğe alır.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-126">App Configuration automatically caches each setting to avoid excessive calls to the configuration store.</span></span> <span data-ttu-id="0e1a0-127">Yenileme işlemi, yapılandırma deposundaki değeri değiştiğinde bile bu ayarı güncelleştirmek için bir ayarın önbelleğe alınmış değerinin süresinin dolacağını bekler.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-127">The refresh operation waits until the cached value of a setting expires to update that setting, even when its value changes in the configuration store.</span></span> <span data-ttu-id="0e1a0-128">Varsayılan önbellek süre sonu zamanı 30 saniyedir.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-128">The default cache expiration time is 30 seconds.</span></span> <span data-ttu-id="0e1a0-129">Süre sonu süresini geçersiz kılabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-129">You can override the expiration time.</span></span>

<span data-ttu-id="0e1a0-130">Uygulama yapılandırması, yoldaki ve bekleyen tüm yapılandırma değerlerini şifreler.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-130">App Configuration encrypts all configuration values in transit and at rest.</span></span> <span data-ttu-id="0e1a0-131">Anahtar adları ve Etiketler, yapılandırma verilerini almak için dizinler olarak kullanılır ve şifrelenmez.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-131">Key names and labels are used as indexes for retrieving configuration data and aren't encrypted.</span></span>

<span data-ttu-id="0e1a0-132">Uygulama yapılandırması sıkı güvenlik sağlar, ancak Azure Key Vault uygulama gizli dizileri depolamak için de en iyi yerdir.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-132">Although App Configuration provides hardened security, Azure Key Vault is still the best place for storing application secrets.</span></span> <span data-ttu-id="0e1a0-133">Key Vault, donanım düzeyinde şifreleme, ayrıntılı erişim ilkeleri ve sertifika döndürme gibi yönetim işlemleri sağlar.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-133">Key Vault provides hardware-level encryption, granular access policies, and management operations such as certificate rotation.</span></span> <span data-ttu-id="0e1a0-134">Key Vault depolanan gizli dizileri referans eden uygulama yapılandırma değerleri oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-134">You can create App Configuration values that reference secrets stored in a Key Vault.</span></span>

## <a name="azure-key-vault"></a><span data-ttu-id="0e1a0-135">Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="0e1a0-135">Azure Key Vault</span></span>

<span data-ttu-id="0e1a0-136">Key Vault, gizli dizileri güvenli bir şekilde depolamak ve bunlara erişmek için yönetilen bir hizmettir.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-136">Key Vault is a managed service for securely storing and accessing secrets.</span></span> <span data-ttu-id="0e1a0-137">Gizli dizi; API anahtarları, parolalar veya sertifikalar gibi erişimi sıkı bir şekilde denetlemek istediğiniz tüm öğelerdir.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-137">A secret is anything that you want to tightly control access to, such as API keys, passwords, or certificates.</span></span> <span data-ttu-id="0e1a0-138">Kasa, mantıksal bir gizli dizi grubudur.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-138">A vault is a logical group of secrets.</span></span>

<span data-ttu-id="0e1a0-139">Key Vault, gizli dizilerin yanlışlıkla sızdırılma olasılığını büyük oranda azaltır.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-139">Key Vault greatly reduces the chances that secrets may be accidentally leaked.</span></span> <span data-ttu-id="0e1a0-140">Key Vault kullanırken, uygulama geliştiricilerinin güvenlik bilgilerini uygulamalarında depolaması artık gerekli değildir.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-140">When using Key Vault, application developers no longer need to store security information in their application.</span></span> <span data-ttu-id="0e1a0-141">Bu uygulama, bu bilgileri kodunuzun içinde depolama gereksinimini ortadan kaldırır.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-141">This practice eliminates the need to store this information inside your code.</span></span> <span data-ttu-id="0e1a0-142">Örneğin, bir uygulamanın bir veritabanına bağlanması gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-142">For example, an application may need to connect to a database.</span></span> <span data-ttu-id="0e1a0-143">Bağlantı dizesini uygulamanın kodunda depolamak yerine, Key Vault ' de güvenli bir şekilde depolayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-143">Instead of storing the connection string in the app's code, you can store it securely in Key Vault.</span></span>

<span data-ttu-id="0e1a0-144">Uygulamalarınız, URI 'Leri kullanarak ihtiyaç duydukları bilgilere güvenli bir şekilde erişebilir.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-144">Your applications can securely access the information they need by using URIs.</span></span> <span data-ttu-id="0e1a0-145">Bu URI 'Ler, uygulamaların belirli bir gizli sürümü almasına izin verir.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-145">These URIs allow the applications to retrieve specific versions of a secret.</span></span> <span data-ttu-id="0e1a0-146">Key Vault depolanan gizli bilgilerin hiçbirini korumak için özel kod yazmanıza gerek yoktur.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-146">There's no need to write custom code to protect any of the secret information stored in Key Vault.</span></span>

<span data-ttu-id="0e1a0-147">Key Vault erişim, uygun arayan kimlik doğrulaması ve yetkilendirme gerektirir.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-147">Access to Key Vault requires proper caller authentication and authorization.</span></span> <span data-ttu-id="0e1a0-148">Genellikle, her bir bulutta yerel mikro hizmet bir ClientID/ClientSecret birleşimini kullanır.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-148">Typically, each cloud-native microservice uses a ClientId/ClientSecret combination.</span></span> <span data-ttu-id="0e1a0-149">Bu kimlik bilgilerinin kaynak denetimi dışında tutulması önemlidir.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-149">It's important to keep these credentials outside source control.</span></span> <span data-ttu-id="0e1a0-150">En iyi uygulama, bunları uygulamanın ortamında ayarlamanıza olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-150">A best practice is to set them in  the application's environment.</span></span> <span data-ttu-id="0e1a0-151">AKS 'ten Key Vault doğrudan erişim, [Key Vault FlexVolume](https://github.com/Azure/kubernetes-keyvault-flexvol)kullanılarak elde edilebilir.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-151">Direct access to Key Vault from AKS can be achieved using [Key Vault FlexVolume](https://github.com/Azure/kubernetes-keyvault-flexvol).</span></span>

## <a name="configuration-in-eshop"></a><span data-ttu-id="0e1a0-152">EShop 'de yapılandırma</span><span class="sxs-lookup"><span data-stu-id="0e1a0-152">Configuration in eShop</span></span>

<span data-ttu-id="0e1a0-153">EShopOnContainers uygulaması, her mikro hizmetle yerel uygulama ayarları dosyalarını içerir.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-153">The eShopOnContainers application includes local application settings files with each microservice.</span></span> <span data-ttu-id="0e1a0-154">Bu dosyalar kaynak denetimine iade edilir, ancak bağlantı dizeleri veya API anahtarları gibi üretim sırları dahil değildir.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-154">These files are checked into source control, but don't include production secrets such as connection strings or API keys.</span></span> <span data-ttu-id="0e1a0-155">Üretimde, hizmet başına ortam değişkenleriyle bireysel ayarların üzerine yazılabilir.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-155">In production, individual settings may be overwritten with per-service environment variables.</span></span> <span data-ttu-id="0e1a0-156">Ortam değişkenlerinde ekleme gizli dizileri barındırılan uygulamalar için yaygın bir uygulamadır, ancak merkezi bir yapılandırma deposu sağlamaz.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-156">Injecting secrets in environment variables is a common practice for hosted applications, but doesn't provide a central configuration store.</span></span> <span data-ttu-id="0e1a0-157">Yapılandırma ayarlarının merkezi yönetimini desteklemek için her mikro hizmet, yerel ayarları veya Azure Key Vault ayarları kullanımı arasında geçiş yapmak için bir ayar içerir.</span><span class="sxs-lookup"><span data-stu-id="0e1a0-157">To support centralized management of configuration settings, each microservice includes a setting to toggle between its use of local settings or Azure Key Vault settings.</span></span>

## <a name="references"></a><span data-ttu-id="0e1a0-158">Başvurular</span><span class="sxs-lookup"><span data-stu-id="0e1a0-158">References</span></span>

- [<span data-ttu-id="0e1a0-159">EShopOnContainers mimarisi</span><span class="sxs-lookup"><span data-stu-id="0e1a0-159">The eShopOnContainers Architecture</span></span>](https://github.com/dotnet-architecture/eShopOnContainers/wiki/Architecture)
- [<span data-ttu-id="0e1a0-160">Yüksek ölçeklenebilirlik ve kullanılabilirlik için mikro hizmetleri ve çok kapsayıcılı uygulamaları yönetme</span><span class="sxs-lookup"><span data-stu-id="0e1a0-160">Orchestrating microservices and multi-container applications for high scalability and availability</span></span>](https://docs.microsoft.com/dotnet/architecture/microservices/architect-microservice-container-applications/scalable-available-multi-container-microservice-applications)
- [<span data-ttu-id="0e1a0-161">Azure API Management</span><span class="sxs-lookup"><span data-stu-id="0e1a0-161">Azure API Management</span></span>](https://docs.microsoft.com/azure/api-management/api-management-key-concepts)
- [<span data-ttu-id="0e1a0-162">Azure SQL veritabanına genel bakış</span><span class="sxs-lookup"><span data-stu-id="0e1a0-162">Azure SQL Database Overview</span></span>](https://docs.microsoft.com/azure/sql-database/sql-database-technical-overview)
- [<span data-ttu-id="0e1a0-163">Redis için Azure Önbelleği</span><span class="sxs-lookup"><span data-stu-id="0e1a0-163">Azure Cache for Redis</span></span>](https://azure.microsoft.com/services/cache/)
- [<span data-ttu-id="0e1a0-164">MongoDB için Azure Cosmos DB API'si</span><span class="sxs-lookup"><span data-stu-id="0e1a0-164">Azure Cosmos DB's API for MongoDB</span></span>](https://docs.microsoft.com/azure/cosmos-db/mongodb-introduction)
- [<span data-ttu-id="0e1a0-165">Azure Service Bus</span><span class="sxs-lookup"><span data-stu-id="0e1a0-165">Azure Service Bus</span></span>](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-messaging-overview)
- [<span data-ttu-id="0e1a0-166">Azure İzleyici’ye genel bakış</span><span class="sxs-lookup"><span data-stu-id="0e1a0-166">Azure Monitor overview</span></span>](https://docs.microsoft.com/azure/azure-monitor/overview)
- <span data-ttu-id="0e1a0-167">[eShopOnContainers: AKS 'te Kubernetes kümesi oluşturma](https://github.com/dotnet-architecture/eShopOnContainers/wiki/Deploy-to-Azure-Kubernetes-Service-(AKS)#create-kubernetes-cluster-in-aks)</span><span class="sxs-lookup"><span data-stu-id="0e1a0-167">[eShopOnContainers: Create Kubernetes cluster in AKS](https://github.com/dotnet-architecture/eShopOnContainers/wiki/Deploy-to-Azure-Kubernetes-Service-(AKS)#create-kubernetes-cluster-in-aks)</span></span>
- [<span data-ttu-id="0e1a0-168">eShopOnContainers: Azure Dev Spaces</span><span class="sxs-lookup"><span data-stu-id="0e1a0-168">eShopOnContainers: Azure Dev Spaces</span></span>](https://github.com/dotnet-architecture/eShopOnContainers/wiki/Azure-Dev-Spaces)
- [<span data-ttu-id="0e1a0-169">Azure Dev Spaces</span><span class="sxs-lookup"><span data-stu-id="0e1a0-169">Azure Dev Spaces</span></span>](https://docs.microsoft.com/azure/dev-spaces/about)

>[!div class="step-by-step"]
><span data-ttu-id="0e1a0-170">[Önceki](deploy-eshoponcontainers-azure.md)
>[İleri](scale-applications.md)</span><span class="sxs-lookup"><span data-stu-id="0e1a0-170">[Previous](deploy-eshoponcontainers-azure.md)
[Next](scale-applications.md)</span></span>
