---
title: Zayıf Başvurular
ms.date: 03/30/2017
ms.technology: dotnet-standard
helpviewer_keywords:
- weak references, short
- weak references, using
- weak references, long
- garbage collection, weak references
ms.assetid: 6a600fe5-3af3-4c64-82da-10a0a8e2d79b
ms.openlocfilehash: 120777ca3c26b1634bd2143863547cfa4ea5deac
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/15/2020
ms.locfileid: "73141336"
---
# <a name="weak-references"></a><span data-ttu-id="da789-102">Zayıf Başvurular</span><span class="sxs-lookup"><span data-stu-id="da789-102">Weak References</span></span>
<span data-ttu-id="da789-103">Çöp toplayıcı, uygulamanın kodu bu nesneye ulaşabiliyorken, uygulama tarafından kullanılan bir nesneyi toplayamaz.</span><span class="sxs-lookup"><span data-stu-id="da789-103">The garbage collector cannot collect an object in use by an application while the application's code can reach that object.</span></span> <span data-ttu-id="da789-104">Uygulama nesne için güçlü bir referans olduğu söyleniyor.</span><span class="sxs-lookup"><span data-stu-id="da789-104">The application is said to have a strong reference to the object.</span></span>  
  
 <span data-ttu-id="da789-105">Zayıf bir başvuru, başvurunun nesneye erişmesine izin verirken çöp toplayıcısının nesneyi toplamasına izin verir.</span><span class="sxs-lookup"><span data-stu-id="da789-105">A weak reference permits the garbage collector to collect the object while still allowing the application to access the object.</span></span> <span data-ttu-id="da789-106">Zayıf bir başvuru, yalnızca nesne güçlü bir başvuru olmadığında toplanana kadar belirsiz süre boyunca geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="da789-106">A weak reference is valid only during the indeterminate amount of time until the object is collected when no strong references exist.</span></span> <span data-ttu-id="da789-107">Zayıf bir başvuru kullandığınızda, uygulama nesneye güçlü bir başvuru almaya devam edebilir ve bu da nesnenin toplanmasını engeller.</span><span class="sxs-lookup"><span data-stu-id="da789-107">When you use a weak reference, the application can still obtain a strong reference to the object, which prevents it from being collected.</span></span> <span data-ttu-id="da789-108">Ancak, güçlü bir başvuru yeniden kurulmadan önce çöp toplayıcısının nesneye ilk olarak gelme riski her zaman vardır.</span><span class="sxs-lookup"><span data-stu-id="da789-108">However, there is always the risk that the garbage collector will get to the object first before a strong reference is reestablished.</span></span>  
  
 <span data-ttu-id="da789-109">Zayıf başvurular, çok fazla bellek kullanan nesneler için yararlıdır, ancak çöp toplama tarafından geri kazanılırsa kolayca yeniden oluşturulabilir.</span><span class="sxs-lookup"><span data-stu-id="da789-109">Weak references are useful for objects that use a lot of memory, but can be recreated easily if they are reclaimed by garbage collection.</span></span>  
  
 <span data-ttu-id="da789-110">Windows Forms uygulamasındaki ağaç görünümünün kullanıcıiçin karmaşık hiyerarşik bir seçenek seçeneği görüntülediğini varsayalım.</span><span class="sxs-lookup"><span data-stu-id="da789-110">Suppose a tree view in a Windows Forms application displays a complex hierarchical choice of options to the user.</span></span> <span data-ttu-id="da789-111">Temel veriler büyükse, kullanıcı uygulamada başka bir şeyle ilgili olduğunda ağacı bellekte tutmak verimsizdir.</span><span class="sxs-lookup"><span data-stu-id="da789-111">If the underlying data is large, keeping the tree in memory is inefficient when the user is involved with something else in the application.</span></span>  
  
 <span data-ttu-id="da789-112">Kullanıcı uygulamanın başka bir bölümüne geçtiğinde, <xref:System.WeakReference> ağaca zayıf bir başvuru oluşturmak ve tüm güçlü başvuruları yok etmek için sınıfı kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="da789-112">When the user switches away to another part of the application, you can use the <xref:System.WeakReference> class to create a weak reference to the tree and destroy all strong references.</span></span> <span data-ttu-id="da789-113">Kullanıcı ağaca geri döndüğünde, uygulama ağaca güçlü bir başvuru elde etmeye çalışır ve başarılı olursa, ağacı yeniden yapılandırmaktan kaçınır.</span><span class="sxs-lookup"><span data-stu-id="da789-113">When the user switches back to the tree, the application attempts to obtain a strong reference to the tree and, if successful, avoids reconstructing the tree.</span></span>  
  
 <span data-ttu-id="da789-114">Bir nesneyle zayıf bir başvuru oluşturmak <xref:System.WeakReference> için, izlenecek nesnenin örneğini kullanarak bir nesne oluşturursunuz.</span><span class="sxs-lookup"><span data-stu-id="da789-114">To establish a weak reference with an object, you create a <xref:System.WeakReference> using the instance of the object to be tracked.</span></span> <span data-ttu-id="da789-115">Daha sonra <xref:System.WeakReference.Target%2A> özelliği bu nesneye ayarlarsınız ve nesnenin özgün başvurusu `null`'nu .</span><span class="sxs-lookup"><span data-stu-id="da789-115">You then set the <xref:System.WeakReference.Target%2A> property to that object and set the original reference to the object to `null`.</span></span> <span data-ttu-id="da789-116">Kod örneği için <xref:System.WeakReference> sınıf kitaplığına bakın.</span><span class="sxs-lookup"><span data-stu-id="da789-116">For a code example, see <xref:System.WeakReference> in the class library.</span></span>  
  
## <a name="short-and-long-weak-references"></a><span data-ttu-id="da789-117">Kısa ve Uzun Zayıf Referanslar</span><span class="sxs-lookup"><span data-stu-id="da789-117">Short and Long Weak References</span></span>  
 <span data-ttu-id="da789-118">Kısa zayıf bir başvuru veya uzun zayıf bir başvuru oluşturabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="da789-118">You can create a short weak reference or a long weak reference:</span></span>  
  
- <span data-ttu-id="da789-119">Kısa</span><span class="sxs-lookup"><span data-stu-id="da789-119">Short</span></span>  
  
     <span data-ttu-id="da789-120">Kısa zayıf bir başvurunun `null` hedefi, nesne çöp toplama tarafından geri kazanıldığında olur.</span><span class="sxs-lookup"><span data-stu-id="da789-120">The target of a short weak reference becomes `null` when the object is reclaimed by garbage collection.</span></span> <span data-ttu-id="da789-121">Zayıf başvuru nun kendisi yönetilen bir nesnedir ve diğer yönetilen nesne gibi çöp toplamaya tabidir.</span><span class="sxs-lookup"><span data-stu-id="da789-121">The weak reference is itself a managed object, and is subject to garbage collection just like any other managed object.</span></span>  <span data-ttu-id="da789-122">Kısa zayıf bir referans için <xref:System.WeakReference>parametresiz yapıcıdır.</span><span class="sxs-lookup"><span data-stu-id="da789-122">A short weak reference is the parameterless constructor for <xref:System.WeakReference>.</span></span>  
  
- <span data-ttu-id="da789-123">Uzun</span><span class="sxs-lookup"><span data-stu-id="da789-123">Long</span></span>  
  
     <span data-ttu-id="da789-124">Nesnenin <xref:System.Object.Finalize%2A> yöntemi çağrıldıktan sonra uzun zayıf bir başvuru korunur.</span><span class="sxs-lookup"><span data-stu-id="da789-124">A long weak reference is retained after the object's <xref:System.Object.Finalize%2A> method has been called.</span></span> <span data-ttu-id="da789-125">Bu, nesnenin yeniden oluşturulmasına izin verir, ancak nesnenin durumu öngörülemez kalır.</span><span class="sxs-lookup"><span data-stu-id="da789-125">This allows the object to be recreated, but the state of the object remains unpredictable.</span></span> <span data-ttu-id="da789-126">Uzun bir başvuru kullanmak `true` için, oluşturucu belirtin. <xref:System.WeakReference></span><span class="sxs-lookup"><span data-stu-id="da789-126">To use a long reference, specify `true` in the <xref:System.WeakReference> constructor.</span></span>  
  
     <span data-ttu-id="da789-127">Nesnenin türünde bir <xref:System.Object.Finalize%2A> yöntem yoksa, kısa zayıf başvuru işlevi uygulanır ve zayıf başvuru yalnızca hedef toplanana kadar geçerlidir ve bu da sonlandırıcı çalıştırıldıktan sonra her zaman oluşabilir.</span><span class="sxs-lookup"><span data-stu-id="da789-127">If the object's type does not have a <xref:System.Object.Finalize%2A> method, the short weak reference functionality applies and the weak reference is valid only until the target is collected, which can occur anytime after the finalizer is run.</span></span>  
  
 <span data-ttu-id="da789-128">Güçlü bir başvuru oluşturmak ve nesneyi <xref:System.WeakReference.Target%2A> yeniden kullanmak <xref:System.WeakReference> için, a özelliğini nesnenin türüne atın.</span><span class="sxs-lookup"><span data-stu-id="da789-128">To establish a strong reference and use the object again, cast the <xref:System.WeakReference.Target%2A> property of a <xref:System.WeakReference> to the type of the object.</span></span> <span data-ttu-id="da789-129"><xref:System.WeakReference.Target%2A> Özellik dönerse, `null`nesne toplandı; aksi takdirde, uygulama ona güçlü bir başvuru kazandı, çünkü nesneyi kullanmaya devam edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="da789-129">If the <xref:System.WeakReference.Target%2A> property returns `null`, the object was collected; otherwise, you can continue to use the object because the application has regained a strong reference to it.</span></span>  
  
## <a name="guidelines-for-using-weak-references"></a><span data-ttu-id="da789-130">Zayıf Referansları Kullanma Yönergeleri</span><span class="sxs-lookup"><span data-stu-id="da789-130">Guidelines for Using Weak References</span></span>  
 <span data-ttu-id="da789-131">Yalnızca nesnenin durumu sonlandırmadan sonra öngörülemez olduğu için gerektiğinde uzun zayıf başvurular kullanın.</span><span class="sxs-lookup"><span data-stu-id="da789-131">Use long weak references only when necessary as the state of the object is unpredictable after finalization.</span></span>  
  
 <span data-ttu-id="da789-132">İşaretçinin kendisi büyük veya daha büyük olabileceğinden, küçük nesnelere zayıf başvurular kullanmaktan kaçının.</span><span class="sxs-lookup"><span data-stu-id="da789-132">Avoid using weak references to small objects because the pointer itself may be as large or larger.</span></span>  
  
 <span data-ttu-id="da789-133">Zayıf başvuruları bellek yönetimi sorunlarına otomatik bir çözüm olarak kullanmaktan kaçının.</span><span class="sxs-lookup"><span data-stu-id="da789-133">Avoid using weak references as an automatic solution to memory management problems.</span></span> <span data-ttu-id="da789-134">Bunun yerine, uygulamanızın nesnelerini işlemek için etkili bir önbelleğe alma ilkesi geliştirin.</span><span class="sxs-lookup"><span data-stu-id="da789-134">Instead, develop an effective caching policy for handling your application's objects.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="da789-135">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="da789-135">See also</span></span>

- [<span data-ttu-id="da789-136">Çöp Toplama</span><span class="sxs-lookup"><span data-stu-id="da789-136">Garbage Collection</span></span>](../../../docs/standard/garbage-collection/index.md)
