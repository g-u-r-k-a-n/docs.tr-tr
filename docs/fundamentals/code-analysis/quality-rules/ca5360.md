---
title: 'CA5360: serisini kaldırma içinde tehlikeli yöntemleri çağırmayın (kod analizi)'
description: Kod Analizi kuralı CA5360, nedenler, ihlallerin nasıl düzeltileceğini ve ne zaman bastıralınacağını içeren bilgiler sağlar.
ms.date: 05/27/2020
ms.topic: reference
author: LLLXXXCCC
ms.author: linche
f1_keywords:
- CA5360
- DoNotCallDangerousMethodsInDeserialization
ms.openlocfilehash: d3b1e93b955b2584ce7b6d2865b520cfc58e65d6
ms.sourcegitcommit: 4f5f1855849cb02c3b610c7006ac21d7429f3348
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 01/15/2021
ms.locfileid: "98235279"
---
# <a name="ca5360-do-not-call-dangerous-methods-in-deserialization"></a><span data-ttu-id="b106c-103">CA5360: Seri durumdan çıkarırken tehlikeli metotlar çağırmayın</span><span class="sxs-lookup"><span data-stu-id="b106c-103">CA5360: Do not call dangerous methods in deserialization</span></span>

| | <span data-ttu-id="b106c-104">Değer</span><span class="sxs-lookup"><span data-stu-id="b106c-104">Value</span></span> |
|-|-|
| <span data-ttu-id="b106c-105">**Kural Kimliği**</span><span class="sxs-lookup"><span data-stu-id="b106c-105">**Rule ID**</span></span> |<span data-ttu-id="b106c-106">CA5360</span><span class="sxs-lookup"><span data-stu-id="b106c-106">CA5360</span></span>|
| <span data-ttu-id="b106c-107">**Kategori**</span><span class="sxs-lookup"><span data-stu-id="b106c-107">**Category**</span></span> |<span data-ttu-id="b106c-108">Microsoft.Security</span><span class="sxs-lookup"><span data-stu-id="b106c-108">Microsoft.Security</span></span>|
| <span data-ttu-id="b106c-109">**Düzeltilme veya kırılmamış**</span><span class="sxs-lookup"><span data-stu-id="b106c-109">**Fix is breaking or non-breaking**</span></span> |<span data-ttu-id="b106c-110">Kırılmamış</span><span class="sxs-lookup"><span data-stu-id="b106c-110">Non-breaking</span></span>|

## <a name="cause"></a><span data-ttu-id="b106c-111">Nedeni</span><span class="sxs-lookup"><span data-stu-id="b106c-111">Cause</span></span>

<span data-ttu-id="b106c-112">Deserializatio içinde aşağıdaki tehlikeli yöntemlerden birini çağırma:</span><span class="sxs-lookup"><span data-stu-id="b106c-112">Calling one of the following dangerous methods in deserializatio:</span></span>

- <xref:System.IO.Directory.Delete%2A?displayProperty=fullName>
- <xref:System.IO.DirectoryInfo.Delete%2A?displayProperty=fullName>
- <xref:System.IO.File.AppendAllLines%2A?displayProperty=fullName>
- <xref:System.IO.File.AppendAllText%2A?displayProperty=fullName>
- <xref:System.IO.File.AppendText%2A?displayProperty=fullName>
- <xref:System.IO.File.Copy%2A?displayProperty=fullName>
- <xref:System.IO.File.Delete%2A?displayProperty=fullName>
- <xref:System.IO.File.WriteAllBytes%2A?displayProperty=fullName>
- <xref:System.IO.File.WriteAllLines%2A?displayProperty=fullName>
- <xref:System.IO.File.WriteAllText%2A?displayProperty=fullName>
- <xref:System.IO.FileInfo.Delete%2A?displayProperty=fullName>
- <xref:System.IO.Log.LogStore.Delete%2A?displayProperty=fullName>
- <xref:System.Reflection.Assembly.GetLoadedModules%2A?displayProperty=fullName>
- <xref:System.Reflection.Assembly.Load%2A?displayProperty=fullName>
- <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=fullName>
- <xref:System.Reflection.Assembly.LoadFile%2A?displayProperty=fullName>
- <xref:System.Reflection.Assembly.LoadModule%2A?displayProperty=fullName>
- <xref:System.Reflection.Assembly.LoadWithPartialName%2A?displayProperty=fullName>
- <xref:System.Reflection.Assembly.ReflectionOnlyLoad%2A?displayProperty=fullName>
- <xref:System.Reflection.Assembly.ReflectionOnlyLoadFrom%2A?displayProperty=fullName>
- <xref:System.Reflection.Assembly.UnsafeLoadFrom%2A?displayProperty=fullName>

<span data-ttu-id="b106c-113">Tüm yöntemler şu gereksinimlerden birini karşılar: deserializatio 'nin geri çağırması olabilir:</span><span class="sxs-lookup"><span data-stu-id="b106c-113">All methods meets one of the following requirements could be the callback of deserializatio:</span></span>

- <span data-ttu-id="b106c-114">İle işaretlenir <xref:System.Runtime.Serialization.OnDeserializingAttribute?displayProperty=fullName> .</span><span class="sxs-lookup"><span data-stu-id="b106c-114">Marked with <xref:System.Runtime.Serialization.OnDeserializingAttribute?displayProperty=fullName>.</span></span>
- <span data-ttu-id="b106c-115">İle işaretlenir <xref:System.Runtime.Serialization.OnDeserializedAttribute?displayProperty=fullName> .</span><span class="sxs-lookup"><span data-stu-id="b106c-115">Marked with <xref:System.Runtime.Serialization.OnDeserializedAttribute?displayProperty=fullName>.</span></span>
- <span data-ttu-id="b106c-116">Uygulama <xref:System.Runtime.Serialization.IDeserializationCallback.OnDeserialization%2A?displayProperty=fullName> .</span><span class="sxs-lookup"><span data-stu-id="b106c-116">Implementing <xref:System.Runtime.Serialization.IDeserializationCallback.OnDeserialization%2A?displayProperty=fullName>.</span></span>
- <span data-ttu-id="b106c-117">Uygulama <xref:System.IDisposable.Dispose%2A?displayProperty=fullName> .</span><span class="sxs-lookup"><span data-stu-id="b106c-117">Implementing <xref:System.IDisposable.Dispose%2A?displayProperty=fullName>.</span></span>
- <span data-ttu-id="b106c-118">Bir yıkıcı.</span><span class="sxs-lookup"><span data-stu-id="b106c-118">Is a destructor.</span></span>

## <a name="rule-description"></a><span data-ttu-id="b106c-119">Kural açıklaması</span><span class="sxs-lookup"><span data-stu-id="b106c-119">Rule description</span></span>

<span data-ttu-id="b106c-120">Güvenli olmayan seri kaldırma, güvenilir olmayan veriler bir uygulamanın mantığını kötüye kullanma, bir hizmet reddi (DoS) saldırısı veya hatta seri hale getirilmesi sırasında rastgele kod yürütme için kullanıldığında oluşan bir güvenlik açığıdır.</span><span class="sxs-lookup"><span data-stu-id="b106c-120">Insecure deserialization is a vulnerability which occurs when untrusted data is used to abuse the logic of an application, inflict a Denial-of-Service (DoS) attack, or even execute arbitrary code upon it being deserialized.</span></span> <span data-ttu-id="b106c-121">Kötü amaçlı kullanıcıların, denetimi altında olan güvenilmeyen verileri seri durumdan çıkarılırken, bu, bu kaldırma özelliklerini kötüye kullanma olasılığı vardır.</span><span class="sxs-lookup"><span data-stu-id="b106c-121">It's frequently possible for malicious users to abuse these deserialization features when the application is deserializing untrusted data which is under their control.</span></span> <span data-ttu-id="b106c-122">Özel olarak, seri durumdan çıkarma sürecinde tehlikeli Yöntemler çağırın.</span><span class="sxs-lookup"><span data-stu-id="b106c-122">Specifically, invoke dangerous methods in the process of deserialization.</span></span> <span data-ttu-id="b106c-123">Güvenli olmayan güvenli seri kaldırma saldırıları, bir saldırganın DoS saldırıları, kimlik doğrulaması atlanır ve uzaktan kod yürütme gibi saldırıları çalıştırmasına izin verebilir.</span><span class="sxs-lookup"><span data-stu-id="b106c-123">Successful insecure deserialization attacks could allow an attacker to carry out attacks such as DoS attacks, authentication bypasses, and remote code execution.</span></span>

## <a name="how-to-fix-violations"></a><span data-ttu-id="b106c-124">İhlalleri çözme</span><span class="sxs-lookup"><span data-stu-id="b106c-124">How to fix violations</span></span>

<span data-ttu-id="b106c-125">Bu tehlikeli yöntemleri otomatik olarak serisini kaldırma geri çağırmaları Çalıştır.</span><span class="sxs-lookup"><span data-stu-id="b106c-125">Remove these dangerous methods from automatically run deserialization callbacks.</span></span> <span data-ttu-id="b106c-126">Yalnızca giriş doğrulandıktan sonra tehlikeli Yöntemler çağırın.</span><span class="sxs-lookup"><span data-stu-id="b106c-126">Call dangerous methods only after validating the input.</span></span>

## <a name="when-to-suppress-warnings"></a><span data-ttu-id="b106c-127">Uyarıların ne zaman bastırılamıyor</span><span class="sxs-lookup"><span data-stu-id="b106c-127">When to suppress warnings</span></span>

<span data-ttu-id="b106c-128">Şu durumlarda bu kuralı gizlemek güvenlidir:</span><span class="sxs-lookup"><span data-stu-id="b106c-128">It's safe to suppress this rule if:</span></span>

- <span data-ttu-id="b106c-129">Girişin güvenilir olduğunu bilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="b106c-129">You know the input is trusted.</span></span> <span data-ttu-id="b106c-130">Uygulamanızın güven sınırının ve veri akışlarının zaman içinde değişebilir olduğunu göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="b106c-130">Consider that your application's trust boundary and data flows may change over time.</span></span>
- <span data-ttu-id="b106c-131">Seri hale getirilmiş veriler, daha fazla kanıt olur.</span><span class="sxs-lookup"><span data-stu-id="b106c-131">The serialized data is tamper-proof.</span></span> <span data-ttu-id="b106c-132">Serileştirmeden sonra, serileştirilmiş verileri şifreli olarak imzalayın.</span><span class="sxs-lookup"><span data-stu-id="b106c-132">After serialization, cryptographically sign the serialized data.</span></span> <span data-ttu-id="b106c-133">Seri durumdan önce, şifreleme imzasını doğrulayın.</span><span class="sxs-lookup"><span data-stu-id="b106c-133">Before deserialization, validate the cryptographic signature.</span></span> <span data-ttu-id="b106c-134">Şifreleme anahtarını, önemli döndürmeler için açıklanmasını ve tasarıma karşı koruyun.</span><span class="sxs-lookup"><span data-stu-id="b106c-134">Protect the cryptographic key from being disclosed and design for key rotations.</span></span>
- <span data-ttu-id="b106c-135">Veriler, uygulama için güvenli olarak onaylanır.</span><span class="sxs-lookup"><span data-stu-id="b106c-135">The data is validated as safe to the application.</span></span>

## <a name="pseudo-code-examples"></a><span data-ttu-id="b106c-136">Sözde kod örnekleri</span><span class="sxs-lookup"><span data-stu-id="b106c-136">Pseudo-code examples</span></span>

### <a name="violation"></a><span data-ttu-id="b106c-137">Edildiği</span><span class="sxs-lookup"><span data-stu-id="b106c-137">Violation</span></span>

```csharp
using System;
using System.IO;
using System.Runtime.Serialization;

[Serializable()]
public class ExampleClass : IDeserializationCallback
{
    private string member;

    void IDeserializationCallback.OnDeserialization(Object sender)
    {
        var sourceFileName = "malicious file";
        var destFileName = "sensitive file";
        File.Copy(sourceFileName, destFileName);
    }
}
```

### <a name="solution"></a><span data-ttu-id="b106c-138">Çözüm</span><span class="sxs-lookup"><span data-stu-id="b106c-138">Solution</span></span>

```csharp
using System;
using System.IO;
using System.Runtime.Serialization;

[Serializable()]
public class ExampleClass : IDeserializationCallback
{
    private string member;

    void IDeserializationCallback.OnDeserialization(Object sender)
    {
        var sourceFileName = "malicious file";
        var destFileName = "sensitive file";
        // Remove the potential dangerous operation.
        // File.Copy(sourceFileName, destFileName);
    }
}
```
