---
description: 'Daha fazla bilgi edinin: gözlemci tasarım deseninin En Iyi yöntemleri'
title: Gözlemci Tasarım Deseni En İyi Yöntemleri
ms.date: 03/30/2017
helpviewer_keywords:
- observer design pattern [.NET], best practices
- best practices [.NET], observer design pattern
ms.assetid: c834760f-ddd4-417f-abb7-a059679d5b8c
ms.openlocfilehash: 0c7e739081516776efbabb77ef88dbc3598d7fb9
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 02/06/2021
ms.locfileid: "99641732"
---
# <a name="observer-design-pattern-best-practices"></a><span data-ttu-id="59fe0-103">Gözlemci Tasarım Deseni En İyi Yöntemleri</span><span class="sxs-lookup"><span data-stu-id="59fe0-103">Observer Design Pattern Best Practices</span></span>

<span data-ttu-id="59fe0-104">.NET sürümünde, gözlemci tasarım alanı bir arabirim kümesi olarak uygulanır.</span><span class="sxs-lookup"><span data-stu-id="59fe0-104">In .NET, the observer design pattern is implemented as a set of interfaces.</span></span> <span data-ttu-id="59fe0-105"><xref:System.IObservable%601?displayProperty=nameWithType>Arabirim, <xref:System.IDisposable> gözlemcilerin 'ın bildirimlerden aboneliklerini kaldırma olanağı sağlayan bir uygulama sağlamaktan de sorumlu olan veri sağlayıcısını temsil eder.</span><span class="sxs-lookup"><span data-stu-id="59fe0-105">The <xref:System.IObservable%601?displayProperty=nameWithType> interface represents the data provider, which is also responsible for providing an <xref:System.IDisposable> implementation that lets observers unsubscribe from notifications.</span></span> <span data-ttu-id="59fe0-106"><xref:System.IObserver%601?displayProperty=nameWithType>Arabirim, gözlemciyi temsil eder.</span><span class="sxs-lookup"><span data-stu-id="59fe0-106">The <xref:System.IObserver%601?displayProperty=nameWithType> interface represents the observer.</span></span> <span data-ttu-id="59fe0-107">Bu konuda, bu arabirimleri kullanarak gözlemci tasarım modelini uygularken geliştiricilerin izlenmesi gereken en iyi uygulamalar açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="59fe0-107">This topic describes the best practices that developers should follow when implementing the observer design pattern using these interfaces.</span></span>  
  
## <a name="threading"></a><span data-ttu-id="59fe0-108">İş Parçacığı Oluşturma</span><span class="sxs-lookup"><span data-stu-id="59fe0-108">Threading</span></span>  

 <span data-ttu-id="59fe0-109">Genellikle, bir sağlayıcı, <xref:System.IObservable%601.Subscribe%2A?displayProperty=nameWithType> bazı koleksiyon nesneleri tarafından temsil edilen bir abone listesine belirli bir gözlemci ekleyerek yöntemini uygular ve <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType> abone listesinden belirli bir gözlemci kaldırarak yöntemi uygular.</span><span class="sxs-lookup"><span data-stu-id="59fe0-109">Typically, a provider implements the <xref:System.IObservable%601.Subscribe%2A?displayProperty=nameWithType> method by adding a particular observer to a subscriber list that is represented by some collection object, and it implements the <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType> method by removing a particular observer from the subscriber list.</span></span> <span data-ttu-id="59fe0-110">Bir gözlemci, bu yöntemleri dilediğiniz zaman çağırabilir.</span><span class="sxs-lookup"><span data-stu-id="59fe0-110">An observer can call these methods at any time.</span></span> <span data-ttu-id="59fe0-111">Ayrıca, sağlayıcı/gözlemci, geri çağırma yönteminden sonra aboneliği kaldırmaktan sorumlu kişiyi belirtmediğinden <xref:System.IObserver%601.OnCompleted%2A?displayProperty=nameWithType> , sağlayıcı ve gözlemci aynı üyeyi listeden kaldırmayı deneyebilir.</span><span class="sxs-lookup"><span data-stu-id="59fe0-111">In addition, because the provider/observer contract does not specify who is responsible for unsubscribing after the <xref:System.IObserver%601.OnCompleted%2A?displayProperty=nameWithType> callback method, the provider and observer may both try to remove the same member from the list.</span></span> <span data-ttu-id="59fe0-112">Bu olasılığa göre, ve yöntemlerinin her ikisi de <xref:System.IObservable%601.Subscribe%2A> <xref:System.IDisposable.Dispose%2A> iş parçacığı açısından güvenli olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="59fe0-112">Because of this possibility, both the <xref:System.IObservable%601.Subscribe%2A> and <xref:System.IDisposable.Dispose%2A> methods should be thread-safe.</span></span> <span data-ttu-id="59fe0-113">Genellikle, bu, [eş zamanlı bir koleksiyonun](../parallel-programming/data-structures-for-parallel-programming.md) veya kilidin kullanılmasını içerir.</span><span class="sxs-lookup"><span data-stu-id="59fe0-113">Typically, this involves using a [concurrent collection](../parallel-programming/data-structures-for-parallel-programming.md) or a lock.</span></span> <span data-ttu-id="59fe0-114">İş parçacığı açısından güvenli olmayan uygulamalar, açık bir şekilde belgelemelidir.</span><span class="sxs-lookup"><span data-stu-id="59fe0-114">Implementations that are not thread-safe should explicitly document that they are not.</span></span>  
  
 <span data-ttu-id="59fe0-115">Ek garantiler sağlayıcının/gözlemci sözleşmesinin en üstündeki bir katmanda belirtilmelidir.</span><span class="sxs-lookup"><span data-stu-id="59fe0-115">Any additional guarantees have to be specified in a layer on top of the provider/observer contract.</span></span> <span data-ttu-id="59fe0-116">Uygulayıcılar, gözlemciye ilişkin Kullanıcı karışıklığına engel olmak için ek gereksinimler gerçekleştirdiklerinde açıkça bir çağrı çağırmalıdır.</span><span class="sxs-lookup"><span data-stu-id="59fe0-116">Implementers should clearly call out when they impose additional requirements to avoid user confusion about the observer contract.</span></span>  
  
## <a name="handling-exceptions"></a><span data-ttu-id="59fe0-117">Özel Durumları İşleme</span><span class="sxs-lookup"><span data-stu-id="59fe0-117">Handling Exceptions</span></span>  

 <span data-ttu-id="59fe0-118">Bir veri sağlayıcısı ve gözlemci arasındaki gevşek bağlantısı nedeniyle, gözlemci tasarım düzenindeki özel durumlar bilgilendirme amaçlıdır.</span><span class="sxs-lookup"><span data-stu-id="59fe0-118">Because of the loose coupling between a data provider and an observer, exceptions in the observer design pattern are intended to be informational.</span></span> <span data-ttu-id="59fe0-119">Bu, sağlayıcının ve gözlemcilerin 'ın gözlemci tasarım modelinde özel durumları nasıl işleyeceğini etkiler.</span><span class="sxs-lookup"><span data-stu-id="59fe0-119">This affects how providers and observers handle exceptions in the observer design pattern.</span></span>  
  
### <a name="the-provider----calling-the-onerror-method"></a><span data-ttu-id="59fe0-120">Sağlayıcı--HATADÜZEYİ yöntemi çağrılıyor</span><span class="sxs-lookup"><span data-stu-id="59fe0-120">The Provider -- Calling the OnError Method</span></span>  

 <span data-ttu-id="59fe0-121"><xref:System.IObserver%601.OnError%2A>Yöntemi, observers 'e, yöntemi gibi bir bilgi iletisi olarak tasarlanmıştır <xref:System.IObserver%601.OnNext%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="59fe0-121">The <xref:System.IObserver%601.OnError%2A> method is intended as an informational message to observers, much like the <xref:System.IObserver%601.OnNext%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="59fe0-122">Ancak, <xref:System.IObserver%601.OnNext%2A> yöntemi geçerli veya güncelleştirilmiş verilerle bir gözlemci sağlamak üzere tasarlanmıştır, ancak <xref:System.IObserver%601.OnError%2A> yöntem sağlayıcının geçerli verileri sağlayamayacağı olduğunu göstermek için tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="59fe0-122">However, the <xref:System.IObserver%601.OnNext%2A> method is designed to provide an observer with current or updated data, whereas the <xref:System.IObserver%601.OnError%2A> method is designed to indicate that the provider is unable to provide valid data.</span></span>  
  
 <span data-ttu-id="59fe0-123">Sağlayıcı, özel durumları işlerken ve yöntemi çağırırken bu en iyi yöntemleri izlemelidir <xref:System.IObserver%601.OnError%2A> :</span><span class="sxs-lookup"><span data-stu-id="59fe0-123">The provider should follow these best practices when handling exceptions and calling the <xref:System.IObserver%601.OnError%2A> method:</span></span>  
  
- <span data-ttu-id="59fe0-124">Belirli gereksinimlere sahipse sağlayıcı kendi özel durumlarını işlemelidir.</span><span class="sxs-lookup"><span data-stu-id="59fe0-124">The provider must handle its own exceptions if it has any specific requirements.</span></span>  
  
- <span data-ttu-id="59fe0-125">Sağlayıcı, gözlemcilerin 'ın özel durumları belirli bir şekilde işlemesini beklememelidir veya gerektirmemelidir.</span><span class="sxs-lookup"><span data-stu-id="59fe0-125">The provider should not expect or require that observers handle exceptions in any particular way.</span></span>  
  
- <span data-ttu-id="59fe0-126">Sağlayıcı, <xref:System.IObserver%601.OnError%2A> güncelleştirme sağlama yeteneğini karşılayan bir özel durum işlediğinde yöntemi çağırmalıdır.</span><span class="sxs-lookup"><span data-stu-id="59fe0-126">The provider should call the <xref:System.IObserver%601.OnError%2A> method when it handles an exception that compromises its ability to provide updates.</span></span> <span data-ttu-id="59fe0-127">Bu tür özel durumlarla ilgili bilgiler gözlemciye geçirilebilir.</span><span class="sxs-lookup"><span data-stu-id="59fe0-127">Information on such exceptions can be passed to the observer.</span></span> <span data-ttu-id="59fe0-128">Diğer durumlarda, bir özel durumun gözlemcilerin 'a bildirimde olması gerekmez.</span><span class="sxs-lookup"><span data-stu-id="59fe0-128">In other cases, there is no need to notify observers of an exception.</span></span>  
  
 <span data-ttu-id="59fe0-129">Sağlayıcı <xref:System.IObserver%601.OnError%2A> veya <xref:System.IObserver%601.OnCompleted%2A?displayProperty=nameWithType> yöntemini çağırdığında, başka bildirim olmaması gerekir ve sağlayıcı observers aboneliğini iptal edebilir.</span><span class="sxs-lookup"><span data-stu-id="59fe0-129">Once the provider calls the <xref:System.IObserver%601.OnError%2A> or <xref:System.IObserver%601.OnCompleted%2A?displayProperty=nameWithType> method, there should be no further notifications, and the provider can unsubscribe its observers.</span></span> <span data-ttu-id="59fe0-130">Ancak, gözlemcilerin, bir veya bildirimi aldıktan sonra da dahil olmak üzere herhangi bir zamanda kendi aboneliklerini da kaldırabilirsiniz <xref:System.IObserver%601.OnError%2A> <xref:System.IObserver%601.OnCompleted%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="59fe0-130">However, the observers can also unsubscribe themselves at any time, including both before and after they receive an <xref:System.IObserver%601.OnError%2A> or <xref:System.IObserver%601.OnCompleted%2A?displayProperty=nameWithType> notification.</span></span> <span data-ttu-id="59fe0-131">Gözlemci tasarım deseninin, sağlayıcının veya gözlemci aboneliği kaldırma işleminden sorumlu olup olmadığı görünmez; Bu nedenle, her ikisinin de aboneliği kaldırma girişiminde bulunduğu bir olasılık vardır.</span><span class="sxs-lookup"><span data-stu-id="59fe0-131">The observer design pattern does not dictate whether the provider or the observer is responsible for unsubscribing; therefore, there is a possibility that both may attempt to unsubscribe.</span></span> <span data-ttu-id="59fe0-132">Genellikle, gözlemcilerin aboneliği kaldırıldığında bir abone koleksiyonundan kaldırılır.</span><span class="sxs-lookup"><span data-stu-id="59fe0-132">Typically, when observers unsubscribe, they are removed from a subscribers collection.</span></span> <span data-ttu-id="59fe0-133">Tek iş parçacıklı bir uygulamada, <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType> uygulama bir nesne başvurusunun geçerli olduğundan ve nesnenin kaldırmayı denemeden önce aboneler koleksiyonunun bir üyesi olduğundan emin olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="59fe0-133">In a single-threaded application, the <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType> implementation should ensure that an object reference is valid and that the object is a member of the subscribers collection before attempting to remove it.</span></span> <span data-ttu-id="59fe0-134">Çok iş parçacıklı bir uygulamada, nesne gibi bir iş parçacığı güvenli koleksiyon nesnesi <xref:System.Collections.Concurrent.BlockingCollection%601?displayProperty=nameWithType> kullanılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="59fe0-134">In a multithreaded application, a thread-safe collection object, such as a <xref:System.Collections.Concurrent.BlockingCollection%601?displayProperty=nameWithType> object, should be used.</span></span>  
  
### <a name="the-observer----implementing-the-onerror-method"></a><span data-ttu-id="59fe0-135">Gözlemci--HataDurumunda yöntemi uygulama</span><span class="sxs-lookup"><span data-stu-id="59fe0-135">The Observer -- Implementing the OnError Method</span></span>  

 <span data-ttu-id="59fe0-136">Bir gözlemci bir sağlayıcıdan bir hata bildirimi aldığında, gözlemci özel durumu bilgilendirici olarak kabul etmelidir ve belirli bir eylemi gerçekleştirmek için gerekli değildir.</span><span class="sxs-lookup"><span data-stu-id="59fe0-136">When an observer receives an error notification from a provider, the observer should treat the exception as informational and should not be required to take any particular action.</span></span>  
  
 <span data-ttu-id="59fe0-137">Gözlemci <xref:System.IObserver%601.OnError%2A> bir sağlayıcıdan gelen yöntem çağrısına yanıt vermediğinde, bu en iyi yöntemleri izlemelidir:</span><span class="sxs-lookup"><span data-stu-id="59fe0-137">The observer should follow these best practices when responding to an <xref:System.IObserver%601.OnError%2A> method call from a provider:</span></span>  
  
- <span data-ttu-id="59fe0-138">Gözlemci, veya gibi arabirim uygulamalarından özel durumlar oluşturmaz <xref:System.IObserver%601.OnNext%2A> <xref:System.IObserver%601.OnError%2A> .</span><span class="sxs-lookup"><span data-stu-id="59fe0-138">The observer should not throw exceptions from its interface implementations, such as <xref:System.IObserver%601.OnNext%2A> or <xref:System.IObserver%601.OnError%2A>.</span></span> <span data-ttu-id="59fe0-139">Ancak, gözlemci özel durum fırlatsam, bu özel durumların işlenmemiş olması beklenir.</span><span class="sxs-lookup"><span data-stu-id="59fe0-139">However, if the observer does throw exceptions, it should expect these exceptions to go unhandled.</span></span>  
  
- <span data-ttu-id="59fe0-140">Çağrı yığınını korumak için, metoduna geçirilen bir nesne oluşturmak isteyen bir gözlemci, <xref:System.Exception> <xref:System.IObserver%601.OnError%2A> özel durumu oluşturmadan önce sarmalıdır.</span><span class="sxs-lookup"><span data-stu-id="59fe0-140">To preserve the call stack, an observer that wishes to throw an <xref:System.Exception> object that was passed to its <xref:System.IObserver%601.OnError%2A> method should wrap the exception before throwing it.</span></span> <span data-ttu-id="59fe0-141">Bu amaçla bir standart özel durum nesnesi kullanılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="59fe0-141">A standard exception object should be used for this purpose.</span></span>  
  
## <a name="additional-best-practices"></a><span data-ttu-id="59fe0-142">Diğer En Iyi Yöntemler</span><span class="sxs-lookup"><span data-stu-id="59fe0-142">Additional Best Practices</span></span>  

 <span data-ttu-id="59fe0-143">Yönteminde kaydı kaldırılmaya çalışılması <xref:System.IObservable%601.Subscribe%2A?displayProperty=nameWithType> null başvuruya neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="59fe0-143">Attempting to unregister in the <xref:System.IObservable%601.Subscribe%2A?displayProperty=nameWithType> method may result in a null reference.</span></span> <span data-ttu-id="59fe0-144">Bu nedenle, bu uygulamalardan kaçınmanızı öneririz.</span><span class="sxs-lookup"><span data-stu-id="59fe0-144">Therefore, we recommend that you avoid this practice.</span></span>  
  
 <span data-ttu-id="59fe0-145">Birden çok sağlayıcıya bir gözlemci iliştirmek mümkün olsa da, önerilen model <xref:System.IObserver%601> yalnızca bir örneğe örnek eklemektir <xref:System.IObservable%601> .</span><span class="sxs-lookup"><span data-stu-id="59fe0-145">Although it is possible to attach an observer to multiple providers, the recommended pattern is to attach an <xref:System.IObserver%601> instance to only one <xref:System.IObservable%601> instance.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="59fe0-146">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="59fe0-146">See also</span></span>

- [<span data-ttu-id="59fe0-147">Gözlemci tasarım kalıbı</span><span class="sxs-lookup"><span data-stu-id="59fe0-147">Observer Design Pattern</span></span>](observer-design-pattern.md)
- [<span data-ttu-id="59fe0-148">Nasıl yapılır: gözlemci uygulama</span><span class="sxs-lookup"><span data-stu-id="59fe0-148">How to: Implement an Observer</span></span>](how-to-implement-an-observer.md)
- [<span data-ttu-id="59fe0-149">Nasıl yapılır: sağlayıcı uygulama</span><span class="sxs-lookup"><span data-stu-id="59fe0-149">How to: Implement a Provider</span></span>](how-to-implement-a-provider.md)
