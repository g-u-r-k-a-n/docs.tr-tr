---
description: 'Hakkında daha fazla bilgi edinin: CustomPeerResolverService: Istemci kayıtları'
title: 'CustomPeerResolverService İçinde: İstemci Kayıtları'
ms.date: 03/30/2017
ms.assetid: 40236953-a916-4236-84a6-928859e1331a
ms.openlocfilehash: 2cc0706fc473985cf6572e6ee5387a26366bc2c8
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 02/06/2021
ms.locfileid: "99802846"
---
# <a name="inside-the-custompeerresolverservice-client-registrations"></a><span data-ttu-id="cd97a-103">CustomPeerResolverService İçinde: İstemci Kayıtları</span><span class="sxs-lookup"><span data-stu-id="cd97a-103">Inside the CustomPeerResolverService: Client Registrations</span></span>

<span data-ttu-id="cd97a-104">Kafesteki her düğüm, kendi uç nokta bilgilerini işlev aracılığıyla çözümleyici hizmetine yayımlar `Register` .</span><span class="sxs-lookup"><span data-stu-id="cd97a-104">Each node in the mesh publishes its endpoint information to the resolver service through the `Register` function.</span></span> <span data-ttu-id="cd97a-105">Çözümleyici Hizmeti bu bilgileri kayıt kaydı olarak depolar.</span><span class="sxs-lookup"><span data-stu-id="cd97a-105">The resolver service stores this information as a registration record.</span></span> <span data-ttu-id="cd97a-106">Bu kayıt, düğüm için benzersiz bir tanımlayıcı (RegistrationId) ve uç nokta bilgileri (PeerNodeAddress) içerir.</span><span class="sxs-lookup"><span data-stu-id="cd97a-106">This record contains a unique identifier (RegistrationID) and endpoint information (PeerNodeAddress) for the node.</span></span>  
  
## <a name="stale-records-and-expiration-time"></a><span data-ttu-id="cd97a-107">Eski kayıtlar ve sona erme saati</span><span class="sxs-lookup"><span data-stu-id="cd97a-107">Stale Records and Expiration Time</span></span>  

 <span data-ttu-id="cd97a-108">İdeal olarak, bir düğüm ağı terk ettiğinde, `Unregister` çözümleyici hizmetinin kayıt girdisini kaldırmasına neden olan işlevini çağırır.</span><span class="sxs-lookup"><span data-stu-id="cd97a-108">Ideally, when a node leaves the mesh, it will call the `Unregister` function, which causes the resolver service to remove the registration entry.</span></span> <span data-ttu-id="cd97a-109">Bazen düğümler `Unregister` , eski bir kayıt kaydının arkasında bırakarak, çağrılmadan önce kapanır veya erişilemez duruma gelir.</span><span class="sxs-lookup"><span data-stu-id="cd97a-109">Sometimes, nodes shut down or become inaccessible before calling `Unregister`, leaving behind a stale registration record.</span></span>  
  
 <span data-ttu-id="cd97a-110">Çözümleyici hizmetinizdeki eski kayıtlar başarısız bağlantılara neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="cd97a-110">Stale records in your resolver service can cause failed connections.</span></span> <span data-ttu-id="cd97a-111">Bir ağ bağlantısını bağlamaya çalışan bir düğüm, çözümleyici hizmetinden eski bağlantı bilgilerini alırsa, bu, kafesin başarıyla katılması daha uzun sürebilir.</span><span class="sxs-lookup"><span data-stu-id="cd97a-111">If a node trying to connect to a mesh receives stale connection information from the resolver service, it can take longer to successfully join the mesh.</span></span> <span data-ttu-id="cd97a-112">Eski kayıtlar da bellek alır.</span><span class="sxs-lookup"><span data-stu-id="cd97a-112">Stale records also take up memory.</span></span> <span data-ttu-id="cd97a-113">Etkili bir temizleme işlemi olmadan, kayıtları depolamak için kullanılan önbellek, son olarak çözümleyici hizmetini temizleyebilir ve çökebilir.</span><span class="sxs-lookup"><span data-stu-id="cd97a-113">Without an efficient clean up process, the cache used to store registrations could eventually overflow and crash the resolver service.</span></span>  
  
 <span data-ttu-id="cd97a-114"><xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService>Her kaydı bir sona erme saati (DateTime) ile işaretler ve bu bilgileri kaydın bir parçası olarak depolar.</span><span class="sxs-lookup"><span data-stu-id="cd97a-114">The <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> marks each record with an expiration time (DateTime), and stores that information as part of the record.</span></span> <span data-ttu-id="cd97a-115">Hizmet eski kayıtları tanımlamak için sona erme süresini kullanır.</span><span class="sxs-lookup"><span data-stu-id="cd97a-115">The service uses the expiration time to identify stale records.</span></span> <span data-ttu-id="cd97a-116">Özel uygulamalar benzer bir şeyler yapmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="cd97a-116">Custom implementations should do something similar.</span></span>  
  
## <a name="refreshinterval-and-cleanupinterval"></a><span data-ttu-id="cd97a-117">RefreshInterval ve CleanupInterval</span><span class="sxs-lookup"><span data-stu-id="cd97a-117">RefreshInterval and CleanupInterval</span></span>  

 <span data-ttu-id="cd97a-118">`RefreshInterval`Öğesinin özelliği, <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> kayıt kayıtlarının hizmetin kayıt arama tablosunda ne kadar süreyle geçerli kalacağını tanımlar.</span><span class="sxs-lookup"><span data-stu-id="cd97a-118">The `RefreshInterval` property of the <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> defines how long registration records remain valid in the service's registration lookup table.</span></span> <span data-ttu-id="cd97a-119">Bu özelliğe sağlanan süre miktarı belirli bir kayıt için geçtiğinde, bu kayıt eskimiş olur ve silinmek üzere işaretlenir.</span><span class="sxs-lookup"><span data-stu-id="cd97a-119">When the amount of time supplied to this property has passed for a given record, that record becomes stale and is marked for deletion.</span></span>  
  
 <span data-ttu-id="cd97a-120">`CleanupInterval`Öğesinin özelliği, <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> hizmete eski kayıt kayıtlarını ne sıklıkla arayacağını ve sildiğini söyler.</span><span class="sxs-lookup"><span data-stu-id="cd97a-120">The `CleanupInterval` property of the <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> tells the service how often to search for and delete stale registration records.</span></span> <span data-ttu-id="cd97a-121">`CleanupInterval`Hizmetin, hizmette ayarlanan değere eşit veya ondan daha büyük bir zamana ayarlanmış olması gerekir `RefreshInterval` .</span><span class="sxs-lookup"><span data-stu-id="cd97a-121">The `CleanupInterval` should be set to a time greater than or equal to the `RefreshInterval` set on the service.</span></span>  
  
 <span data-ttu-id="cd97a-122">Kendi çözümleyici hizmetinizi uygulamak için, eski kayıt kayıtlarını kaldırmak üzere bir bakım işlevi yazmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="cd97a-122">To implement your own resolver service, you need to write a maintenance function to remove stale registration records.</span></span> <span data-ttu-id="cd97a-123">Bunu yapmak için çeşitli yollar vardır:</span><span class="sxs-lookup"><span data-stu-id="cd97a-123">There are several ways to do this:</span></span>  
  
- <span data-ttu-id="cd97a-124">**Düzenli bakım**: bir zamanlayıcıyı düzenli aralıklarla kapatılacak şekilde ayarlayın ve eski kayıtları silmek için Veri deponuzdan ilerleyin.</span><span class="sxs-lookup"><span data-stu-id="cd97a-124">**Periodic maintenance**: Set a timer to go off periodically, and go through your data store to delete old records.</span></span> <span data-ttu-id="cd97a-125"><xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService>Bu yaklaşımı kullanır.</span><span class="sxs-lookup"><span data-stu-id="cd97a-125">The <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> uses this approach.</span></span>  
  
- <span data-ttu-id="cd97a-126">**Pasif silme**: eski kayıtları düzenli aralıklarla etkin şekilde aramak yerine, hizmetiniz zaten başka bir işlev gerçekleştirirken eski kayıtları tanımlayabilir ve silebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="cd97a-126">**Passive deletion**: Instead of actively searching for stale records at regular intervals, you can identify and delete stale records when your service is already performing another function.</span></span> <span data-ttu-id="cd97a-127">Bu durum, çözümleyici istemcilerinden gelen isteklere yanıt süresini yavaşlatabilir, ancak bir Zamanlayıcı gereksinimini ortadan kaldırır ve çok sayıda düğümün çağrılmadan bırakması bekleniyorsa daha verimli olabilir `Unregister` .</span><span class="sxs-lookup"><span data-stu-id="cd97a-127">This may potentially slow down response time to requests from the resolver clients, but it eliminates the need for a timer, and may be more efficient if few nodes are expected to leave without calling `Unregister`.</span></span>  
  
## <a name="registrationlifetime-and-refresh"></a><span data-ttu-id="cd97a-128">RegistrationLifetime ve Yenile</span><span class="sxs-lookup"><span data-stu-id="cd97a-128">RegistrationLifetime and Refresh</span></span>  

 <span data-ttu-id="cd97a-129">Bir düğüm çözümleyici hizmetine kaydolduktan sonra <xref:System.ServiceModel.PeerResolvers.RegisterResponseInfo> hizmetten bir nesne alır.</span><span class="sxs-lookup"><span data-stu-id="cd97a-129">When a node registers with a resolver service, it receives a <xref:System.ServiceModel.PeerResolvers.RegisterResponseInfo> object from the service.</span></span> <span data-ttu-id="cd97a-130">Bu nesne, `RegistrationLifetime` kayıt süresi dolmadan önce düğüme ne kadar zaman kaldığını ve çözümleyici hizmeti tarafından kaldırılması gerektiğini belirten bir özelliğe sahiptir.</span><span class="sxs-lookup"><span data-stu-id="cd97a-130">This object has a `RegistrationLifetime` property which indicates to the node how much time it has before the registration expires and is removed by the resolver service.</span></span> <span data-ttu-id="cd97a-131">Örneğin, `RegistrationLifetime` 2 dakikadır, düğümün, `Refresh` kaydın yeni kalmasını sağlamak ve silinmediğinden emin olmak için 2 dakika altında çağrı yapması gerekir.</span><span class="sxs-lookup"><span data-stu-id="cd97a-131">If, for example, the `RegistrationLifetime` is 2 minutes, the node needs to call `Refresh` in under 2 minutes to ensure the record stays fresh and is not deleted.</span></span> <span data-ttu-id="cd97a-132">Çözümleyici hizmeti bir `Refresh` istek aldığında, kaydı arar ve sona erme süresini sıfırlar.</span><span class="sxs-lookup"><span data-stu-id="cd97a-132">When the resolver service receives a `Refresh` request, it looks up the record and resets the expiration time.</span></span> <span data-ttu-id="cd97a-133">Refresh <xref:System.ServiceModel.PeerResolvers.RefreshResponseInfo> özelliği ile bir nesne döndürür `RegistrationLifetime` .</span><span class="sxs-lookup"><span data-stu-id="cd97a-133">Refresh returns a <xref:System.ServiceModel.PeerResolvers.RefreshResponseInfo> object with a `RegistrationLifetime` property.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="cd97a-134">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="cd97a-134">See also</span></span>

- [<span data-ttu-id="cd97a-135">Eş Çözücüler</span><span class="sxs-lookup"><span data-stu-id="cd97a-135">Peer Resolvers</span></span>](peer-resolvers.md)
