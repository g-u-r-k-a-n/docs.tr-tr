---
title: 'Nasıl yapilir: MetadataLoadContext kullanarak montaj içeriğini inceleyin'
description: .NET derlemelerini denetim amacıyla yüklemenize olanak tanıyan bir API olan MetadataLoadContext'ı nasıl kullanacağınızı öğrenin.
author: MSDN-WhiteKnight
ms.date: 03/10/2020
ms.technology: dotnet-standard
ms.openlocfilehash: d2589d51a6e0611504c0133d293d3fdfae32553c
ms.sourcegitcommit: 7980a91f90ae5eca859db7e6bfa03e23e76a1a50
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/13/2020
ms.locfileid: "81242666"
---
# <a name="how-to-inspect-assembly-contents-using-metadataloadcontext"></a><span data-ttu-id="81cfa-103">Nasıl yapilir: MetadataLoadContext kullanarak montaj içeriğini inceleyin</span><span class="sxs-lookup"><span data-stu-id="81cfa-103">How to: Inspect assembly contents using MetadataLoadContext</span></span>

<span data-ttu-id="81cfa-104">.NET'teki yansıma API'si varsayılan olarak geliştiricilerin ana yürütme bağlamına yüklenen derlemelerin içeriğini denetlemesine olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="81cfa-104">The reflection API in .NET by default enables developers to inspect the contents of assemblies loaded into the main execution context.</span></span> <span data-ttu-id="81cfa-105">Ancak, bazen bir derlemeyi yürütme bağlamına yüklemek mümkün değildir, örneğin, başka bir platform veya işlemci mimarisi için derlenmiş olduğundan veya bir [başvuru derlemesi](reference-assemblies.md)olduğundan.</span><span class="sxs-lookup"><span data-stu-id="81cfa-105">However, sometimes it isn't possible to load an assembly into the execution context, for example, because it was compiled for another platform or processor architecture, or it's a [reference assembly](reference-assemblies.md).</span></span> <span data-ttu-id="81cfa-106">API, <xref:System.Reflection.MetadataLoadContext?displayProperty=fullName> bu tür derlemeleri yüklemenize ve incelemenize olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="81cfa-106">The <xref:System.Reflection.MetadataLoadContext?displayProperty=fullName> API allows you to load and inspect such assemblies.</span></span> <span data-ttu-id="81cfa-107">Yüklenen <xref:System.Reflection.MetadataLoadContext> derlemeler yalnızca meta veri olarak kabul edilir, diğer bir deyişle, derlemedeki türleri inceleyebilirsiniz, ancak içinde bulunan herhangi bir kodu yürütemezsiniz.</span><span class="sxs-lookup"><span data-stu-id="81cfa-107">Assemblies loaded into the <xref:System.Reflection.MetadataLoadContext> are treated only as metadata, that is, you can examine types in the assembly, but you can't execute any code contained in it.</span></span> <span data-ttu-id="81cfa-108">Ana yürütme bağlamından <xref:System.Reflection.MetadataLoadContext> farklı olarak, geçerli dizinden otomatik olarak bağımlılıklar yüklenmez; bunun <xref:System.Reflection.MetadataAssemblyResolver> yerine, ona geçen tarafından sağlanan özel bağlama mantığını kullanır.</span><span class="sxs-lookup"><span data-stu-id="81cfa-108">Unlike the main execution context, the <xref:System.Reflection.MetadataLoadContext> doesn't automatically load dependencies from the current directory; instead it uses the custom binding logic provided by the <xref:System.Reflection.MetadataAssemblyResolver> passed to it.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="81cfa-109">Ön koşullar</span><span class="sxs-lookup"><span data-stu-id="81cfa-109">Prerequisites</span></span>

<span data-ttu-id="81cfa-110">Kullanmak <xref:System.Reflection.MetadataLoadContext>için [System.Reflection.MetadataLoadContext](https://www.nuget.org/packages/System.Reflection.MetadataLoadContext) NuGet paketini yükleyin.</span><span class="sxs-lookup"><span data-stu-id="81cfa-110">To use <xref:System.Reflection.MetadataLoadContext>, install the [System.Reflection.MetadataLoadContext](https://www.nuget.org/packages/System.Reflection.MetadataLoadContext) NuGet package.</span></span> <span data-ttu-id="81cfa-111">.NET Standard 2.0 uyumlu hedef çerçevede desteklenir, örneğin,.NET Core 2.0 veya .NET Framework 4.6.1.</span><span class="sxs-lookup"><span data-stu-id="81cfa-111">It is supported on any .NET Standard 2.0-compliant target framework, for example, .NET Core 2.0 or .NET Framework 4.6.1.</span></span>

## <a name="create-metadataassemblyresolver-for-metadataloadcontext"></a><span data-ttu-id="81cfa-112">MetadataLoadContext için MetadataAssemblyResolver oluşturma</span><span class="sxs-lookup"><span data-stu-id="81cfa-112">Create MetadataAssemblyResolver for MetadataLoadContext</span></span>

<span data-ttu-id="81cfa-113"><xref:System.Reflection.MetadataLoadContext> Oluşturma, <xref:System.Reflection.MetadataAssemblyResolver>'nin örneğini sağlamayı gerektirir.</span><span class="sxs-lookup"><span data-stu-id="81cfa-113">Creating the <xref:System.Reflection.MetadataLoadContext> requires providing the instance of the <xref:System.Reflection.MetadataAssemblyResolver>.</span></span> <span data-ttu-id="81cfa-114">Bir sağlamak için en basit <xref:System.Reflection.PathAssemblyResolver>yolu, montajları montajları verilen toplama derlemesini çözer kullanmaktır.</span><span class="sxs-lookup"><span data-stu-id="81cfa-114">The simplest way to provide one is to use the <xref:System.Reflection.PathAssemblyResolver>, which resolves assemblies from the given collection of assembly path strings.</span></span> <span data-ttu-id="81cfa-115">Bu koleksiyon, doğrudan incelemek istediğiniz derlemelerin yanı sıra, gerekli tüm bağımlılıkları da içermelidir.</span><span class="sxs-lookup"><span data-stu-id="81cfa-115">This collection, besides assemblies you want to inspect directly, should also include all needed dependencies.</span></span> <span data-ttu-id="81cfa-116">Örneğin, harici bir derlemede bulunan özel özniteliği okumak için, bu derlemeyi eklemeniz gerekir veya bir özel durum atılır.</span><span class="sxs-lookup"><span data-stu-id="81cfa-116">For example, to read the custom attribute located in an external assembly, you should include that assembly or an exception will be thrown.</span></span> <span data-ttu-id="81cfa-117">Çoğu durumda, en azından *çekirdek derlemeyi*, yani yerleşik sistem türlerini içeren <xref:System.Object?displayProperty=nameWithType>derlemeyi içermelisiniz.</span><span class="sxs-lookup"><span data-stu-id="81cfa-117">In most cases, you should include at least the *core assembly*, that is, the assembly containing built-in system types, such as <xref:System.Object?displayProperty=nameWithType>.</span></span> <span data-ttu-id="81cfa-118">Aşağıdaki kod, denetlenen <xref:System.Reflection.PathAssemblyResolver> derleme ve geçerli çalışma zamanının çekirdek derlemesi oluşan toplama nın nasıl oluşturulacak olduğunu gösterir:</span><span class="sxs-lookup"><span data-stu-id="81cfa-118">The following code shows how to create the <xref:System.Reflection.PathAssemblyResolver> using the collection consisting of the inspected assembly and the current runtime's core assembly:</span></span>

[!code-csharp[](snippets/inspect-contents-using-metadataloadcontext/MetadataLoadContextSnippets.cs#CoreAssembly)]

<span data-ttu-id="81cfa-119">Tüm BCL türlerine erişmeniz gerekiyorsa, koleksiyona tüm çalışma zamanı derlemelerini ekleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="81cfa-119">If you need access to all BCL types, you can include all runtime assemblies in the collection.</span></span> <span data-ttu-id="81cfa-120">Aşağıdaki kod, denetlenen <xref:System.Reflection.PathAssemblyResolver> derlemeve geçerli çalışma zamanının tüm derlemelerinden oluşan koleksiyonun nasıl oluşturulturun nasıl oluşturulacak larını gösterir:</span><span class="sxs-lookup"><span data-stu-id="81cfa-120">The following code shows how to create the <xref:System.Reflection.PathAssemblyResolver> using the collection consisting of the inspected assembly and all assemblies of the current runtime:</span></span>

[!code-csharp[](snippets/inspect-contents-using-metadataloadcontext/MetadataLoadContextSnippets.cs#RuntimeAssemblies)]

## <a name="create-metadataloadcontext"></a><span data-ttu-id="81cfa-121">MetadataLoadContext oluşturma</span><span class="sxs-lookup"><span data-stu-id="81cfa-121">Create MetadataLoadContext</span></span>

<span data-ttu-id="81cfa-122">Oluşturmak <xref:System.Reflection.MetadataLoadContext>için, daha önce <xref:System.Reflection.MetadataLoadContext.%23ctor%28System.Reflection.MetadataAssemblyResolver%2CSystem.String%29>ilk parametre <xref:System.Reflection.MetadataAssemblyResolver> olarak oluşturulan ve ikinci parametre olarak çekirdek derleme adı geçen, onun oluşturucu çağırmak.</span><span class="sxs-lookup"><span data-stu-id="81cfa-122">To create the <xref:System.Reflection.MetadataLoadContext>, invoke its constructor <xref:System.Reflection.MetadataLoadContext.%23ctor%28System.Reflection.MetadataAssemblyResolver%2CSystem.String%29>, passing the previously created <xref:System.Reflection.MetadataAssemblyResolver> as the first parameter and the core assembly name as the second parameter.</span></span> <span data-ttu-id="81cfa-123">Çekirdek derleme adını atlayabilirsiniz, bu durumda oluşturucu varsayılan adları kullanmaya çalışır: "mscorlib", "System.Runtime" veya "netstandard".</span><span class="sxs-lookup"><span data-stu-id="81cfa-123">You can omit the core assembly name, in which case the constructor will attempt to use default names: "mscorlib", "System.Runtime", or "netstandard".</span></span>

<span data-ttu-id="81cfa-124">Bağlamı oluşturduktan sonra, <xref:System.Reflection.MetadataLoadContext.LoadFromAssemblyPath%2A>derlemeleri '.</span><span class="sxs-lookup"><span data-stu-id="81cfa-124">After you've created the context, you can load assemblies into it using methods such as <xref:System.Reflection.MetadataLoadContext.LoadFromAssemblyPath%2A>.</span></span> <span data-ttu-id="81cfa-125">Kod yürütme içerenler dışında yüklü derlemelerde tüm yansıma API'lerini kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="81cfa-125">You can use all reflection APIs on loaded assemblies except ones that involve code execution.</span></span> <span data-ttu-id="81cfa-126">Yöntem <xref:System.Reflection.MemberInfo.GetCustomAttributes%2A> yapıcıların yürütülmesini içerir, bu nedenle <xref:System.Reflection.MemberInfo.GetCustomAttributesData%2A> özel öznitelikleri incelemek için gerektiğinde <xref:System.Reflection.MetadataLoadContext>yerine yöntemi kullanın.</span><span class="sxs-lookup"><span data-stu-id="81cfa-126">The <xref:System.Reflection.MemberInfo.GetCustomAttributes%2A> method does involve the execution of constructors, so use the <xref:System.Reflection.MemberInfo.GetCustomAttributesData%2A> method instead when you need to examine custom attributes in the <xref:System.Reflection.MetadataLoadContext>.</span></span>

<span data-ttu-id="81cfa-127">Aşağıdaki kod örneği <xref:System.Reflection.MetadataLoadContext>oluşturur, montaj yükler ve konsola montaj öznitelikleri çıkar:</span><span class="sxs-lookup"><span data-stu-id="81cfa-127">The following code sample creates <xref:System.Reflection.MetadataLoadContext>, loads the assembly into it, and outputs assembly attributes into the console:</span></span>

[!code-csharp[](snippets/inspect-contents-using-metadataloadcontext/MetadataLoadContextSnippets.cs#CreateContext)]

## <a name="example"></a><span data-ttu-id="81cfa-128">Örnek</span><span class="sxs-lookup"><span data-stu-id="81cfa-128">Example</span></span>

<span data-ttu-id="81cfa-129">Tam bir kod örneği için [MetadataLoadContext örneğini kullanarak montaj içeriğini incele'ye](https://github.com/dotnet/samples/tree/master/core/assembly/MetadataLoadContext)bakın.</span><span class="sxs-lookup"><span data-stu-id="81cfa-129">For a complete code example, see the [Inspect assembly contents using MetadataLoadContext sample](https://github.com/dotnet/samples/tree/master/core/assembly/MetadataLoadContext).</span></span>
