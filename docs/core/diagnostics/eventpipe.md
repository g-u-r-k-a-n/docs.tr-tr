---
title: EventPipe genel bakış
description: EventPipe hakkında bilgi edinin ve performans sorunlarını tanılamak üzere .NET uygulamalarınızı izlemek için nasıl kullanacağınızı öğrenin.
ms.date: 11/09/2020
ms.topic: overview
ms.openlocfilehash: d30cdf02c3ae300401febe2078dfd3431269c73e
ms.sourcegitcommit: 34968a61e9bac0f6be23ed6ffb837f52d2390c85
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 11/17/2020
ms.locfileid: "94688575"
---
# <a name="eventpipe"></a><span data-ttu-id="cb33c-103">EventPipe</span><span class="sxs-lookup"><span data-stu-id="cb33c-103">EventPipe</span></span>

<span data-ttu-id="cb33c-104">EventPipe, ETW veya LTTng 'e benzeyen izleme verilerini toplamak için kullanılabilen bir çalışma zamanı bileşenidir.</span><span class="sxs-lookup"><span data-stu-id="cb33c-104">EventPipe is a runtime component that can be used to collect tracing data, similar to ETW or LTTng.</span></span> <span data-ttu-id="cb33c-105">EventPipe 'ın amacı, .NET geliştiricilerinin ETW veya LTTng gibi platforma özgü işletim sistemi yerel bileşenlerine güvenmeksizin .NET uygulamalarını kolayca izlemesine izin sağlamaktır.</span><span class="sxs-lookup"><span data-stu-id="cb33c-105">The goal of EventPipe is to allow .NET developers to easily trace their .NET applications without having to rely on platform-specific OS-native components such as ETW or LTTng.</span></span>

<span data-ttu-id="cb33c-106">EventPipe, çoğu tanılama aracının arkasındaki mekanizmadır ve çalışma zamanı tarafından oluşturulan olaylar ve [EventSource](xref:System.Diagnostics.Tracing.EventSource)ile yazılmış özel olaylar için de kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="cb33c-106">EventPipe is the mechanism behind many of the diagnostic tools and can be used for consuming events emitted by the runtime as well as custom events written with [EventSource](xref:System.Diagnostics.Tracing.EventSource).</span></span>

<span data-ttu-id="cb33c-107">Bu makale, EventPipe 'ın ne zaman ve nasıl kullanılacağını açıklayan EventPipe 'ın ve gereksinimlerinize en uygun şekilde nasıl yapılandırılacağı hakkında üst düzey bir genel bakıştır.</span><span class="sxs-lookup"><span data-stu-id="cb33c-107">This article is a high-level overview of EventPipe describing when and how to use EventPipe, and how to configure it to best suit your needs.</span></span>

## <a name="eventpipe-basics"></a><span data-ttu-id="cb33c-108">EventPipe temelleri</span><span class="sxs-lookup"><span data-stu-id="cb33c-108">EventPipe basics</span></span>

<span data-ttu-id="cb33c-109">EventPipe, çalışma zamanı bileşenleri tarafından yayılan olayları toplar-Örneğin, tam zamanında derleyici veya çöp toplayıcı ve kitaplıklarda ve Kullanıcı kodundaki [EventSource](xref:System.Diagnostics.Tracing.EventSource) örneklerinden yazılmış olaylar.</span><span class="sxs-lookup"><span data-stu-id="cb33c-109">EventPipe aggregates events emitted by runtime components - for example, the Just-In-Time compiler or the garbage collector - and events written from [EventSource](xref:System.Diagnostics.Tracing.EventSource) instances in the libraries and user code.</span></span>

<span data-ttu-id="cb33c-110">Olaylar daha sonra serileştirilir ve doğrudan bir dosyaya yazılabilir veya bir tanılama bağlantı noktası aracılığıyla bir tanesi tarafından tüketilebilir.</span><span class="sxs-lookup"><span data-stu-id="cb33c-110">The events are then serialized and can be written directly to a file or consumed through a Diagnostics Port from out-of-proces.</span></span> <span data-ttu-id="cb33c-111">Windows 'da tanılama bağlantı noktaları s olarak uygulanır `NamedPipe` .</span><span class="sxs-lookup"><span data-stu-id="cb33c-111">On Windows, Diagnostic Ports are implemented as `NamedPipe`s.</span></span> <span data-ttu-id="cb33c-112">Linux veya macOS gibi Windows dışı platformlarda, Unix etki alanı yuvaları kullanılarak uygulanır.</span><span class="sxs-lookup"><span data-stu-id="cb33c-112">On non-Windows platforms, such as Linux or macOS, it is implemented using Unix Domain Sockets.</span></span> <span data-ttu-id="cb33c-113">Tanılama bağlantı noktası hakkında daha fazla bilgi ve özel işlem arası iletişim protokolü aracılığıyla bununla etkileşim kurma hakkında daha fazla bilgi için bkz. [Tanılama IPC Protokolü belgeleri](https://github.com/dotnet/diagnostics/blob/master/documentation/design-docs/ipc-protocol.md).</span><span class="sxs-lookup"><span data-stu-id="cb33c-113">For more information about the Diagnostics Port and how to interact with it via its custom inter-process communication protocol, see the [diagnostics IPC protocol documentation](https://github.com/dotnet/diagnostics/blob/master/documentation/design-docs/ipc-protocol.md).</span></span>

<span data-ttu-id="cb33c-114">EventPipe daha sonra seri hale getirilmiş olayları `.nettrace` , tanılama bağlantı noktaları aracılığıyla ya da doğrudan bir dosyaya dosya biçiminde yazar.</span><span class="sxs-lookup"><span data-stu-id="cb33c-114">EventPipe then writes the serialized events in the `.nettrace` file format, either as a stream via Diagnostic Ports or directly to a file.</span></span> <span data-ttu-id="cb33c-115">EventPipe serileştirme biçimi hakkında daha fazla bilgi edinmek için [Eventpipe biçim belgelerine](https://github.com/microsoft/perfview/blob/master/src/TraceEvent/EventPipe/EventPipeFormat.md)bakın.</span><span class="sxs-lookup"><span data-stu-id="cb33c-115">To learn more about the EventPipe serialization format, refer to the [EventPipe format documentation](https://github.com/microsoft/perfview/blob/master/src/TraceEvent/EventPipe/EventPipeFormat.md).</span></span>

## <a name="eventpipe-vs-etwlttng"></a><span data-ttu-id="cb33c-116">EventPipe ve ETW/LTTng karşılaştırması</span><span class="sxs-lookup"><span data-stu-id="cb33c-116">EventPipe vs. ETW/LTTng</span></span>

<span data-ttu-id="cb33c-117">EventPipe, .NET çalışma zamanının (CoreCLR) bir parçasıdır ve .NET Core 'un desteklediği tüm platformlarda aynı şekilde çalışacak şekilde tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="cb33c-117">EventPipe is part of the .NET runtime (CoreCLR) and is designed to work the same way across all the platforms .NET Core supports.</span></span> <span data-ttu-id="cb33c-118">Bu,, ve gibi EventPipe tabanlı izleme araçlarının `dotnet-counters` `dotnet-gcdump` `dotnet-trace` platformlar arasında sorunsuz bir şekilde çalışmasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="cb33c-118">This allows tracing tools based on EventPipe, such as `dotnet-counters`, `dotnet-gcdump`, and `dotnet-trace`, to work seamlessly across platforms.</span></span>

<span data-ttu-id="cb33c-119">Ancak, EventPipe bir çalışma zamanı yerleşik bileşeni olduğundan, kapsamı yönetilen kodla ve çalışma zamanının kendisi ile sınırlıdır.</span><span class="sxs-lookup"><span data-stu-id="cb33c-119">However, because EventPipe is a runtime built-in component, its scope is limited to managed code and the runtime itself.</span></span> <span data-ttu-id="cb33c-120">EventPipe, yerel kod yığınını çözümleme veya çeşitli çekirdek olayları alma gibi bazı alt düzey olayları izlemek için kullanılamaz.</span><span class="sxs-lookup"><span data-stu-id="cb33c-120">EventPipe cannot be used for tracking some lower-level events, such as resolving native code stack or getting various kernel events.</span></span> <span data-ttu-id="cb33c-121">Uygulamanızda C/C++ birlikte çalışabiliri veya çalışma zamanının kendisini (C++ dilinde yazılmış) izlemek isterseniz ya da bir uygulamanın, çekirdek olayları gerektiren (yani, yerel iş parçacığı bağlamı değiştirme olayları) uygulama davranışına daha derin tanılama yapmak istiyorsanız, ETW veya [perf/LTTng](./trace-perfcollect-lttng.md)kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="cb33c-121">If you use C/C++ interop in your app or you want to trace the runtime itself (which is written in C++), or want deeper diagnostics into the behavior of the app that requires kernel events (that is, native-thread context-switching events) you should use ETW or [perf/LTTng](./trace-perfcollect-lttng.md).</span></span>

<span data-ttu-id="cb33c-122">EventPipe ile ETW/LTTng arasındaki diğer önemli fark, yönetici/kök ayrıcalık gereksinimidir.</span><span class="sxs-lookup"><span data-stu-id="cb33c-122">Another major difference between EventPipe and ETW/LTTng is admin/root privilege requirement.</span></span> <span data-ttu-id="cb33c-123">ETW veya LTTng kullanarak bir uygulamayı izlemek için yönetici/kök olmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="cb33c-123">To trace an application using ETW or LTTng you need to be an admin/root.</span></span> <span data-ttu-id="cb33c-124">EventPipe kullanarak, izleyici (örneğin, `dotnet-trace` ) uygulamayı başlatan kullanıcıyla aynı kullanıcı olarak çalıştırıldığı sürece uygulamaları izleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="cb33c-124">Using EventPipe, you can trace applications as long as the tracer (for example, `dotnet-trace`) is run as the same user as the user that launched the application.</span></span>

<span data-ttu-id="cb33c-125">Aşağıdaki tabloda EventPipe ile ETW/LTTng arasındaki farkların bir özeti verilmiştir.</span><span class="sxs-lookup"><span data-stu-id="cb33c-125">The following table is a summary of the differences between EventPipe and ETW/LTTng.</span></span>

|<span data-ttu-id="cb33c-126">Öne çıkan özelliği</span><span class="sxs-lookup"><span data-stu-id="cb33c-126">Feature</span></span>|<span data-ttu-id="cb33c-127">EventPipe</span><span class="sxs-lookup"><span data-stu-id="cb33c-127">EventPipe</span></span>|<span data-ttu-id="cb33c-128">ETW</span><span class="sxs-lookup"><span data-stu-id="cb33c-128">ETW</span></span>|<span data-ttu-id="cb33c-129">Lttng kullanılabilir</span><span class="sxs-lookup"><span data-stu-id="cb33c-129">LTTng</span></span>|
|-------|---------|---|-----------|
|<span data-ttu-id="cb33c-130">Platformlar arası</span><span class="sxs-lookup"><span data-stu-id="cb33c-130">Cross-platform</span></span>|<span data-ttu-id="cb33c-131">Yes</span><span class="sxs-lookup"><span data-stu-id="cb33c-131">Yes</span></span>|<span data-ttu-id="cb33c-132">Hayır (yalnızca Windows üzerinde)</span><span class="sxs-lookup"><span data-stu-id="cb33c-132">No (only on Windows)</span></span>|<span data-ttu-id="cb33c-133">Hayır (yalnızca desteklenen Linux 'ları destekler)</span><span class="sxs-lookup"><span data-stu-id="cb33c-133">No (only on supported Linux distros)</span></span>|
|<span data-ttu-id="cb33c-134">Yönetici/kök ayrıcalığı iste</span><span class="sxs-lookup"><span data-stu-id="cb33c-134">Require admin/root privilege</span></span>|<span data-ttu-id="cb33c-135">Hayır</span><span class="sxs-lookup"><span data-stu-id="cb33c-135">No</span></span>|<span data-ttu-id="cb33c-136">Yes</span><span class="sxs-lookup"><span data-stu-id="cb33c-136">Yes</span></span>|<span data-ttu-id="cb33c-137">Yes</span><span class="sxs-lookup"><span data-stu-id="cb33c-137">Yes</span></span>|
|<span data-ttu-id="cb33c-138">İşletim sistemi/çekirdek olayları alabilir</span><span class="sxs-lookup"><span data-stu-id="cb33c-138">Can get OS/kernel events</span></span>|<span data-ttu-id="cb33c-139">Hayır</span><span class="sxs-lookup"><span data-stu-id="cb33c-139">No</span></span>|<span data-ttu-id="cb33c-140">Yes</span><span class="sxs-lookup"><span data-stu-id="cb33c-140">Yes</span></span>|<span data-ttu-id="cb33c-141">Yes</span><span class="sxs-lookup"><span data-stu-id="cb33c-141">Yes</span></span>|
|<span data-ttu-id="cb33c-142">Yerel çağrı yığınlarını çözümleyebilir</span><span class="sxs-lookup"><span data-stu-id="cb33c-142">Can resolve native callstacks</span></span>|<span data-ttu-id="cb33c-143">Hayır</span><span class="sxs-lookup"><span data-stu-id="cb33c-143">No</span></span>|<span data-ttu-id="cb33c-144">Yes</span><span class="sxs-lookup"><span data-stu-id="cb33c-144">Yes</span></span>|<span data-ttu-id="cb33c-145">Yes</span><span class="sxs-lookup"><span data-stu-id="cb33c-145">Yes</span></span>|

## <a name="use-eventpipe-to-trace-your-net-application"></a><span data-ttu-id="cb33c-146">.NET uygulamanızı izlemek için EventPipe 'ı kullanma</span><span class="sxs-lookup"><span data-stu-id="cb33c-146">Use EventPipe to trace your .NET application</span></span>

<span data-ttu-id="cb33c-147">.NET uygulamanızı birçok şekilde izlemek için EventPipe kullanabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="cb33c-147">You can use EventPipe to trace your .NET application in many ways:</span></span>

* <span data-ttu-id="cb33c-148">EventPipe 'ın üzerine inşa edilen [tanılama araçlarından](#tools-using-eventpipe) birini kullanın.</span><span class="sxs-lookup"><span data-stu-id="cb33c-148">Use one of the [diagnostics tools](#tools-using-eventpipe) that are built on top of EventPipe.</span></span>

* <span data-ttu-id="cb33c-149">EventPipe oturumlarını kendiniz yapılandırmak ve başlatmak için kendi aracınızı yazmak üzere [Microsoft. Diagnostics. NETCore. Client](https://github.com/dotnet/diagnostics/blob/master/documentation/diagnostics-client-library-instructions.md) kitaplığını kullanın.</span><span class="sxs-lookup"><span data-stu-id="cb33c-149">Use [Microsoft.Diagnostics.NETCore.Client](https://github.com/dotnet/diagnostics/blob/master/documentation/diagnostics-client-library-instructions.md) library to write your own tool to configure and start EventPipe sessions yourself.</span></span>

* <span data-ttu-id="cb33c-150">EventPipe 'ı başlatmak için [ortam değişkenlerini](#trace-using-environment-variables) kullanın.</span><span class="sxs-lookup"><span data-stu-id="cb33c-150">Use [environment variables](#trace-using-environment-variables) to start EventPipe.</span></span>

<span data-ttu-id="cb33c-151">`nettrace`EventPipe olaylarınızı içeren bir dosya oluşturduktan sonra, dosyayı [`PerfView`](https://github.com/Microsoft/perfview#perfview-overview) veya Visual Studio 'yu görüntüleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="cb33c-151">After you've produced a `nettrace` file that contains your EventPipe events, you can view the file in [`PerfView`](https://github.com/Microsoft/perfview#perfview-overview) or Visual Studio.</span></span> <span data-ttu-id="cb33c-152">Windows dışı platformlarda, `nettrace` `speedscope` komutunu kullanarak dosyayı bir veya `Chromium` izleme biçimine dönüştürebilir [`dotnet-trace convert`](./dotnet-trace.md#dotnet-trace-convert) ve [`speedscope`](https://www.speedscope.app/) ya da Chrome DevTools ile görüntüleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="cb33c-152">On non-Windows platforms, you can convert the `nettrace` file to a `speedscope` or `Chromium` trace format by using [`dotnet-trace convert`](./dotnet-trace.md#dotnet-trace-convert) command and view it with [`speedscope`](https://www.speedscope.app/) or Chrome DevTools.</span></span>

<span data-ttu-id="cb33c-153">Ayrıca, EventPipe izlemelerini [TraceEvent](https://github.com/Microsoft/perfview/blob/master/documentation/TraceEvent/TraceEventLibrary.md)ile programlı bir şekilde çözümleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="cb33c-153">You can also analyze EventPipe traces programmatically with [TraceEvent](https://github.com/Microsoft/perfview/blob/master/documentation/TraceEvent/TraceEventLibrary.md).</span></span>

### <a name="tools-that-use-eventpipe"></a><span data-ttu-id="cb33c-154">EventPipe kullanan araçlar</span><span class="sxs-lookup"><span data-stu-id="cb33c-154">Tools that use EventPipe</span></span>

<span data-ttu-id="cb33c-155">Bu, uygulamanızı izlemek için EventPipe kullanmanın en kolay yoludur.</span><span class="sxs-lookup"><span data-stu-id="cb33c-155">This is the easiest way to use EventPipe to trace your application.</span></span> <span data-ttu-id="cb33c-156">Bu araçların her birini kullanma hakkında daha fazla bilgi edinmek için, her aracın belgelerine bakın.</span><span class="sxs-lookup"><span data-stu-id="cb33c-156">To learn more about how to use each of these tools, refer to each tool's documentation.</span></span>

* <span data-ttu-id="cb33c-157">[DotNet sayaçları](./dotnet-counters.md) , .NET çalışma zamanı ve çekirdek kitaplıkları tarafından yayılan çeşitli ölçümleri izlemenize ve toplamanıza olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="cb33c-157">[dotnet-counters](./dotnet-counters.md) lets you monitor and collect various metrics emitted by the .NET runtime and core libraries, as well as custom metrics you can write.</span></span>

* <span data-ttu-id="cb33c-158">[DotNet-gcdump](./dotnet-gcdump.md) , uygulamanın yönetilen yığınını çözümlemek için canlı işlemlerin GC yığın dökümünü toplamanıza olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="cb33c-158">[dotnet-gcdump](./dotnet-gcdump.md) lets you collect GC heap dumps of live processes for analyzing an application's managed heap.</span></span>

* <span data-ttu-id="cb33c-159">[DotNet-Trace](./dotnet-trace.md) , performans için analiz edilecek uygulama izlemelerini toplamanıza olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="cb33c-159">[dotnet-trace](./dotnet-trace.md) lets you collect traces of applications to analyze for performance.</span></span>

## <a name="trace-using-environment-variables"></a><span data-ttu-id="cb33c-160">Ortam değişkenlerini kullanarak izleme</span><span class="sxs-lookup"><span data-stu-id="cb33c-160">Trace using environment variables</span></span>

<span data-ttu-id="cb33c-161">EventPipe kullanımı için tercih edilen mekanizma, `dotnet-trace` veya `Microsoft.Diagnostics.NETCore.Client` kitaplığını kullanmaktır.</span><span class="sxs-lookup"><span data-stu-id="cb33c-161">The preferred mechanism for using EventPipe is to use `dotnet-trace` or the `Microsoft.Diagnostics.NETCore.Client` library.</span></span>

<span data-ttu-id="cb33c-162">Ancak, bir uygulamada EventPipe oturumu ayarlamak ve izlemeyi doğrudan bir dosyaya yazmak için aşağıdaki ortam değişkenlerini kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="cb33c-162">However, you can use the following environment variables to set up an EventPipe session on an app and have it write the trace directly to a file.</span></span> <span data-ttu-id="cb33c-163">İzlemeyi durdurmak için uygulamadan çıkın.</span><span class="sxs-lookup"><span data-stu-id="cb33c-163">To stop tracing, exit the application.</span></span>

* <span data-ttu-id="cb33c-164">`COMPlus_EnableEventPipe`: `1` Doğrudan bir dosyaya yazan bir EventPipe oturumu başlatmak için bunu olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="cb33c-164">`COMPlus_EnableEventPipe`: Set this to `1` to start an EventPipe session that writes directly to a file.</span></span> <span data-ttu-id="cb33c-165">`0` varsayılan değerdir.</span><span class="sxs-lookup"><span data-stu-id="cb33c-165">The default value is `0`.</span></span>

* <span data-ttu-id="cb33c-166">`COMPlus_EventPipeOutputPath`: Üzerinden çalışacak şekilde yapılandırıldığında çıkış EventPipe izleme dosyasının yolu `COMPlus_EnableEventPipe` .</span><span class="sxs-lookup"><span data-stu-id="cb33c-166">`COMPlus_EventPipeOutputPath`: The path to the output EventPipe trace file when it's configured to run via `COMPlus_EnableEventPipe`.</span></span> <span data-ttu-id="cb33c-167">Varsayılan değer `trace.nettrace` , uygulamanın üzerinde çalıştığı aynı dizinde oluşturulacak olur.</span><span class="sxs-lookup"><span data-stu-id="cb33c-167">The default value is `trace.nettrace`, which will be created in the same directory that the app is running from.</span></span>

* <span data-ttu-id="cb33c-168">`COMPlus_CircularBufferMB`: İle çalışacak şekilde yapılandırıldığında EventPipe tarafından kullanılan iç arabelleğin boyutu `COMPlus_EnableEventPipe` .</span><span class="sxs-lookup"><span data-stu-id="cb33c-168">`COMPlus_CircularBufferMB`: The size of the internal buffer that is used by EventPipe when it's configured to run via `COMPlus_EnableEventPipe`.</span></span>

* <span data-ttu-id="cb33c-169">`COMPlus_EventPipeConfig`: EventPipe oturumu başlatılırken EventPipe oturum yapılandırmasını ayarlar `COMPlus_EnableEventPipe` .</span><span class="sxs-lookup"><span data-stu-id="cb33c-169">`COMPlus_EventPipeConfig`: Sets up the EventPipe session configuration when starting an EventPipe session with `COMPlus_EnableEventPipe`.</span></span>

  <span data-ttu-id="cb33c-170">Söz dizimi şu şekildedir:</span><span class="sxs-lookup"><span data-stu-id="cb33c-170">The syntax is as follows:</span></span>

  `<provider>:<keyword>:<level>`

  <span data-ttu-id="cb33c-171">Ayrıca, birden çok sağlayıcıyı virgülle ayırarak belirtebilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="cb33c-171">You can also specify multiple providers by concatenating them with a comma:</span></span>

  `<provider1>:<keyword1>:<level1>,<provider2>:<keyword2>:<level2>`

  <span data-ttu-id="cb33c-172">Bu ortam değişkeni ayarlanmamışsa ancak EventPipe tarafından etkinleştirilmişse, aşağıdaki aşağıdaki `COMPlus_EnableEventPipe` anahtar sözcükler ve Düzeyler ile aşağıdaki sağlayıcıları etkinleştirerek izleme başlatılır:</span><span class="sxs-lookup"><span data-stu-id="cb33c-172">If this environment variable is not set but EventPipe is enabled by `COMPlus_EnableEventPipe`, it will start tracing by enabling the following providers with the following keywords and levels:</span></span>

  - `Microsoft-Windows-DotNETRuntime:4c14fccbd:5`
  - `Microsoft-Windows-DotNETRuntimePrivate:4002000b:5`
  - `Microsoft-DotNETCore-SampleProfiler:0:5`
