---
title: Kısmi hata işleme
description: Kısmi hataları niçin incelikle işleyeceğinizi öğrenin. Bir microservice tam olarak işlevsel olmayabilir ama yine de bazı yararlı işler yapmak mümkün olabilir.
ms.date: 10/16/2018
ms.openlocfilehash: f00e5349df74b543deb6ac941c751cb130b3837c
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/14/2020
ms.locfileid: "73732973"
---
# <a name="handle-partial-failure"></a><span data-ttu-id="a8bd6-104">Kısmi hata işleme</span><span class="sxs-lookup"><span data-stu-id="a8bd6-104">Handle partial failure</span></span>

<span data-ttu-id="a8bd6-105">Mikro hizmetler tabanlı uygulamalar gibi dağıtılmış sistemlerde, kısmi arıza riski her zaman vardır.</span><span class="sxs-lookup"><span data-stu-id="a8bd6-105">In distributed systems like microservices-based applications, there's an ever-present risk of partial failure.</span></span> <span data-ttu-id="a8bd6-106">Örneğin, tek bir microservice/container başarısız olabilir veya kısa bir süre için yanıt vermek için kullanılabilir olmayabilir veya tek bir VM veya sunucu çökebilir.</span><span class="sxs-lookup"><span data-stu-id="a8bd6-106">For instance, a single microservice/container can fail or might not be available to respond for a short time, or a single VM or server can crash.</span></span> <span data-ttu-id="a8bd6-107">İstemciler ve hizmetler ayrı işlemler olduğundan, bir hizmet istemcinin isteğine zamanında yanıt veremeyebilir.</span><span class="sxs-lookup"><span data-stu-id="a8bd6-107">Since clients and services are separate processes, a service might not be able to respond in a timely way to a client’s request.</span></span> <span data-ttu-id="a8bd6-108">Hizmet aşırı yüklenmiş ve isteklere çok yavaş yanıt verebilir veya ağ sorunları nedeniyle kısa bir süre için erişilemeyebilir.</span><span class="sxs-lookup"><span data-stu-id="a8bd6-108">The service might be overloaded and responding very slowly to requests or might simply not be accessible for a short time because of network issues.</span></span>

<span data-ttu-id="a8bd6-109">Örneğin, eShopOnContainers örnek uygulamasından Sipariş ayrıntıları sayfasını göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="a8bd6-109">For example, consider the Order details page from the eShopOnContainers sample application.</span></span> <span data-ttu-id="a8bd6-110">Kullanıcı bir sipariş göndermeye çalıştığında sipariş mikrohizmeti yanıt vermiyorsa, istemci işleminin kötü bir uygulaması (MVC web uygulaması)—örneğin, istemci kodu zaman olmadan eşzamanlı RPC'ler kullanıyorsa— iş parçacıklarını süresiz olarak engeller bir yanıt bekliyor.</span><span class="sxs-lookup"><span data-stu-id="a8bd6-110">If the ordering microservice is unresponsive when the user tries to submit an order, a bad implementation of the client process (the MVC web application)—for example, if the client code were to use synchronous RPCs with no timeout—would block threads indefinitely waiting for a response.</span></span> <span data-ttu-id="a8bd6-111">Kötü bir kullanıcı deneyimi oluşturmanın yanı sıra, yanıt vermeyen her bekleme bir iş parçacığı tüketir veya engeller ve iş parçacıkları yüksek ölçeklenebilir uygulamalarda son derece değerlidir.</span><span class="sxs-lookup"><span data-stu-id="a8bd6-111">Besides creating a bad user experience, every unresponsive wait consumes or blocks a thread, and threads are extremely valuable in highly scalable applications.</span></span> <span data-ttu-id="a8bd6-112">Engellenen çok sayıda iş parçacığı varsa, sonunda uygulamanın çalışma zamanı iş parçacıkları tükenebilir.</span><span class="sxs-lookup"><span data-stu-id="a8bd6-112">If there are many blocked threads, eventually the application’s runtime can run out of threads.</span></span> <span data-ttu-id="a8bd6-113">Bu durumda, uygulama Şekil 8-1'de gösterildiği gibi kısmen yanıt vermemek yerine genel olarak yanıt sızabilir.</span><span class="sxs-lookup"><span data-stu-id="a8bd6-113">In that case, the application can become globally unresponsive instead of just partially unresponsive, as shown in Figure 8-1.</span></span>

![Kısmi hataları gösteren diyagram.](./media/handle-partial-failure/partial-failures-diagram.png)

<span data-ttu-id="a8bd6-115">**Şekil 8-1**.</span><span class="sxs-lookup"><span data-stu-id="a8bd6-115">**Figure 8-1**.</span></span> <span data-ttu-id="a8bd6-116">Hizmet iş parçacığı kullanılabilirliğini etkileyen bağımlılıklar nedeniyle kısmi hatalar</span><span class="sxs-lookup"><span data-stu-id="a8bd6-116">Partial failures because of dependencies that impact service thread availability</span></span>

<span data-ttu-id="a8bd6-117">Büyük bir mikrohizmet tabanlı uygulamada, herhangi bir kısmi hata, özellikle dahili microservices etkileşimin çoğu senkron HTTP çağrıları (bir anti-desen olarak kabul edilir) dayanmaktadır yükseltilebilir.</span><span class="sxs-lookup"><span data-stu-id="a8bd6-117">In a large microservices-based application, any partial failure can be amplified, especially if most of the internal microservices interaction is based on synchronous HTTP calls (which is considered an anti-pattern).</span></span> <span data-ttu-id="a8bd6-118">Günde milyonlarca gelen çağrı alan bir sistem düşünün.</span><span class="sxs-lookup"><span data-stu-id="a8bd6-118">Think about a system that receives millions of incoming calls per day.</span></span> <span data-ttu-id="a8bd6-119">Sisteminizin uzun eşzamanlı HTTP çağrıları zincirlerine dayanan kötü bir tasarımı varsa, bu gelen aramalar milyonlarca giden çağrıya (1:4'lük bir oranın 1:4 oranında olduğunu varsayalım) ve eşzamanlı bağımlılıklar olarak düzinelerce dahili mikro hizmete neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="a8bd6-119">If your system has a bad design that's based on long chains of synchronous HTTP calls, these incoming calls might result in many more millions of outgoing calls (let’s suppose a ratio of 1:4) to dozens of internal microservices as synchronous dependencies.</span></span> <span data-ttu-id="a8bd6-120">Bu durum Şekil 8-2'de, \#özellikle bağımlılık 3'te gösterilmiştir, bu zincir başlatılır ve bağımlılık #4.</span><span class="sxs-lookup"><span data-stu-id="a8bd6-120">This situation is shown in Figure 8-2, especially dependency \#3, that starts a chain, calling dependency #4.</span></span> <span data-ttu-id="a8bd6-121">hangi aramalar #5.</span><span class="sxs-lookup"><span data-stu-id="a8bd6-121">which the calls #5.</span></span>

![Birden çok dağıtılmış bağımlılıkları gösteren diyagram.](./media/handle-partial-failure/multiple-distributed-dependencies.png)

<span data-ttu-id="a8bd6-123">**Şekil 8-2**.</span><span class="sxs-lookup"><span data-stu-id="a8bd6-123">**Figure 8-2**.</span></span> <span data-ttu-id="a8bd6-124">UZUN HTTP istekleri zincirlerini içeren yanlış bir tasarıma sahip olmanın etkisi</span><span class="sxs-lookup"><span data-stu-id="a8bd6-124">The impact of having an incorrect design featuring long chains of HTTP requests</span></span>

<span data-ttu-id="a8bd6-125">Her bağımlılığın kendisi mükemmel kullanılabilirlik olsa bile, dağıtılmış ve bulut tabanlı bir sistemde aralıklı hata garanti edilir.</span><span class="sxs-lookup"><span data-stu-id="a8bd6-125">Intermittent failure is guaranteed in a distributed and cloud-based system, even if every dependency itself has excellent availability.</span></span> <span data-ttu-id="a8bd6-126">Bu göz önünde bulundurman gereken bir gerçek.</span><span class="sxs-lookup"><span data-stu-id="a8bd6-126">It's a fact you need to consider.</span></span>

<span data-ttu-id="a8bd6-127">Hata toleransı sağlamak için teknikler tasarlamaz ve uygulamazsanız, küçük arıza süreleri bile yükseltilebilir.</span><span class="sxs-lookup"><span data-stu-id="a8bd6-127">If you do not design and implement techniques to ensure fault tolerance, even small downtimes can be amplified.</span></span> <span data-ttu-id="a8bd6-128">Örnek olarak, kullanılabilirliğin %99,99'una sahip 50 bağımlılık, bu dalgalanma etkisi nedeniyle her ay birkaç saatlik kapalı kalma süresine neden olur.</span><span class="sxs-lookup"><span data-stu-id="a8bd6-128">As an example, 50 dependencies each with 99.99% of availability would result in several hours of downtime each month because of this ripple effect.</span></span> <span data-ttu-id="a8bd6-129">Bir mikrohizmet bağımlılığı, yüksek sayıda isteği işlerken başarısız olduğunda, bu hata her hizmetteki tüm kullanılabilir istek iş parçacığına hızla doyabilir ve tüm uygulamayı kilitleyebilir.</span><span class="sxs-lookup"><span data-stu-id="a8bd6-129">When a microservice dependency fails while handling a high volume of requests, that failure can quickly saturate all available request threads in each service and crash the whole application.</span></span>

![Mikro hizmetlerde artırılmış kısmi arızayı gösteren diyagram.](./media/handle-partial-failure/partial-failure-amplified-microservices.png)

<span data-ttu-id="a8bd6-131">**Şekil 8-3**.</span><span class="sxs-lookup"><span data-stu-id="a8bd6-131">**Figure 8-3**.</span></span> <span data-ttu-id="a8bd6-132">Senkron UZUN zincirleri ile mikrohizmetler tarafından güçlendirilmiş kısmi başarısızlık HTTP aramaları</span><span class="sxs-lookup"><span data-stu-id="a8bd6-132">Partial failure amplified by microservices with long chains of synchronous HTTP calls</span></span>

<span data-ttu-id="a8bd6-133">Bu sorunu en aza indirmek için, bölümünde [Asynchronous microservice entegrasyonu microservice özerkliğini zorlamak](../architect-microservice-container-applications/communication-in-microservice-architecture.md#asynchronous-microservice-integration-enforces-microservices-autonomy), bu kılavuz da dahili mikro hizmetler arasında asynchronous iletişim kullanmaya teşvik eder.</span><span class="sxs-lookup"><span data-stu-id="a8bd6-133">To minimize this problem, in the section [Asynchronous microservice integration enforce microservice’s autonomy](../architect-microservice-container-applications/communication-in-microservice-architecture.md#asynchronous-microservice-integration-enforces-microservices-autonomy), this guide encourages you to use asynchronous communication across the internal microservices.</span></span>

<span data-ttu-id="a8bd6-134">Buna ek olarak, mikro hizmetlerinizi ve istemci uygulamalarınızı kısmi hataları işlemek için tasarlamanız, yani esnek mikro hizmetler ve istemci uygulamaları oluşturmanız esastır.</span><span class="sxs-lookup"><span data-stu-id="a8bd6-134">In addition, it's essential that you design your microservices and client applications to handle partial failures—that is, to build resilient microservices and client applications.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="a8bd6-135">[Önceki](index.md)
>[Sonraki](partial-failure-strategies.md)</span><span class="sxs-lookup"><span data-stu-id="a8bd6-135">[Previous](index.md)
[Next](partial-failure-strategies.md)</span></span>
