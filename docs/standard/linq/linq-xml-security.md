---
title: LINQ to XML güvenlik-LINQ to XML
description: LINQ to XML güvenlik sorunları ve güvenlik görünürlüğünü azaltmaya yönelik yollar hakkında bilgi edinin.
ms.date: 07/20/2015
ms.assetid: ef2c0dc9-ecf9-4c17-b24e-144184ab725f
ms.openlocfilehash: 72dd2bfe2a3f0edb69645daf4625ba24fb56732b
ms.sourcegitcommit: 0c3ce6d2e7586d925a30f231f32046b7b3934acb
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 09/08/2020
ms.locfileid: "89553333"
---
# <a name="linq-to-xml-security"></a><span data-ttu-id="337af-103">LINQ to XML güvenliği</span><span class="sxs-lookup"><span data-stu-id="337af-103">LINQ to XML security</span></span>

<span data-ttu-id="337af-104">Bu makalede, LINQ to XML ilişkili güvenlik sorunları açıklanmakta ve güvenlik açısından etkilenme konusunda rehberlik sunulmaktadır.</span><span class="sxs-lookup"><span data-stu-id="337af-104">This article describes security issues associated with LINQ to XML, and provides guidance for mitigating security exposure.</span></span>

## <a name="linq-to-xml-security-overview"></a><span data-ttu-id="337af-105">LINQ to XML güvenliğe genel bakış</span><span class="sxs-lookup"><span data-stu-id="337af-105">LINQ to XML security overview</span></span>

<span data-ttu-id="337af-106">LINQ to XML, katı güvenlik gereksinimlerine sahip sunucu tarafı uygulamalardan daha fazla programlama kolaylığı için tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="337af-106">LINQ to XML is designed more for programming convenience than for server-side applications with stringent security requirements.</span></span> <span data-ttu-id="337af-107">Çoğu XML senaryosu, bir sunucuya yüklenen güvenilmeyen XML belgelerini işlemek yerine, güvenilen XML belgelerinin işlenmesini içerir.</span><span class="sxs-lookup"><span data-stu-id="337af-107">Most XML scenarios consist of processing trusted XML documents, rather than processing untrusted XML documents that are uploaded to a server.</span></span> <span data-ttu-id="337af-108">LINQ to XML, bu senaryolar için iyileştirilmiştir.</span><span class="sxs-lookup"><span data-stu-id="337af-108">LINQ to XML is optimized for these scenarios.</span></span>

<span data-ttu-id="337af-109">Bilinmeyen kaynaklardan güvenilmeyen verileri işlemek istiyorsanız, Microsoft, <xref:System.Xml.XmlReader> BILINEN XML hizmet reddi (DOS) saldırılarını filtrelemek için yapılandırılmış bir sınıfının örneğini kullanmanızı önerir.</span><span class="sxs-lookup"><span data-stu-id="337af-109">If you must process untrusted data from unknown sources, Microsoft recommends that you use an instance of the <xref:System.Xml.XmlReader> class that has been configured to filter out known XML denial of service (DoS) attacks.</span></span>

<span data-ttu-id="337af-110"><xref:System.Xml.XmlReader>Hizmet reddi saldırılarını azaltmak için bir yapılandırdıysanız, bu okuyucuyu bir LINQ to XML ağacı doldurmak ve LINQ to XML programcı üretkenlik geliştirmelerinden faydalanmaya devam etmek için kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="337af-110">If you've configured an <xref:System.Xml.XmlReader> to mitigate denial of service attacks, you can use that reader to populate a LINQ to XML tree and still benefit from the programmer productivity enhancements of LINQ to XML.</span></span> <span data-ttu-id="337af-111">Birçok azaltma tekniği, güvenlik sorununu hafifletmek üzere yapılandırılmış okuyucular oluşturmayı ve sonra yapılandırılmış okuyucu aracılığıyla bir XML ağacını örneklamayı içerir.</span><span class="sxs-lookup"><span data-stu-id="337af-111">Many mitigation techniques involve creating readers that are configured to mitigate the security issue, and then instantiating an XML tree through the configured reader.</span></span>

<span data-ttu-id="337af-112">Belgeler boyut, derinlik, öğe adı boyutu ve daha fazlası için sınırsız olduğundan, XML, hizmet reddi saldırılarına karşı doğası gereği açıktır.</span><span class="sxs-lookup"><span data-stu-id="337af-112">XML is intrinsically vulnerable to denial of service attacks because documents are unbounded in size, depth, element name size, and more.</span></span> <span data-ttu-id="337af-113">XML işlemek için kullandığınız bileşenden bağımsız olarak, aşırı kaynak kullanıyorsa uygulama etki alanını geri dönüştürmeye her zaman hazırlıklı olmalısınız.</span><span class="sxs-lookup"><span data-stu-id="337af-113">Regardless of the component that you use to process XML, you should always be prepared to recycle the application domain if it uses excessive resources.</span></span>

## <a name="mitigation-of-xml-xsd-xpath-and-xslt-attacks"></a><span data-ttu-id="337af-114">XML, XSD, XPath ve XSLT saldırıları üzerinde risk azaltma</span><span class="sxs-lookup"><span data-stu-id="337af-114">Mitigation of XML, XSD, XPath, and XSLT attacks</span></span>

<span data-ttu-id="337af-115">LINQ to XML, ve üzerine <xref:System.Xml.XmlReader> kurulmuştur <xref:System.Xml.XmlWriter> .</span><span class="sxs-lookup"><span data-stu-id="337af-115">LINQ to XML is built upon <xref:System.Xml.XmlReader> and <xref:System.Xml.XmlWriter>.</span></span> <span data-ttu-id="337af-116">LINQ to XML, <xref:System.Xml.Schema?displayProperty=nameWithType> ve ad alanlarındaki genişletme yöntemleri aracılığıyla XSD ve XPath 'i destekler <xref:System.Xml.XPath?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="337af-116">LINQ to XML supports XSD and XPath through extension methods in the <xref:System.Xml.Schema?displayProperty=nameWithType> and <xref:System.Xml.XPath?displayProperty=nameWithType> namespaces.</span></span> <span data-ttu-id="337af-117"><xref:System.Xml.XmlReader>, <xref:System.Xml.XPath.XPathNavigator> , Ve <xref:System.Xml.XmlWriter> sınıflarını LINQ to XML Ile birlikte kullanarak XML AĞAÇLARıNı dönüştürmek için XSLT 'yi çağırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="337af-117">By using the <xref:System.Xml.XmlReader>, <xref:System.Xml.XPath.XPathNavigator>, and <xref:System.Xml.XmlWriter> classes in conjunction with LINQ to XML, you can invoke XSLT to transform XML trees.</span></span>

<span data-ttu-id="337af-118">Daha az güvenli bir ortamda çalışıyorsanız, XML ile ilişkili birçok güvenlik sorunu ve,, ve içinde sınıfların kullanımı vardır <xref:System.Xml?displayProperty=nameWithType> <xref:System.Xml.Schema?displayProperty=nameWithType> <xref:System.Xml.XPath?displayProperty=nameWithType> <xref:System.Xml.Xsl?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="337af-118">If you're  operating in a less secure environment, there are a number of security issues that are associated with XML and the use of the classes in <xref:System.Xml?displayProperty=nameWithType>, <xref:System.Xml.Schema?displayProperty=nameWithType>, <xref:System.Xml.XPath?displayProperty=nameWithType>, and <xref:System.Xml.Xsl?displayProperty=nameWithType>.</span></span> <span data-ttu-id="337af-119">Bu sorunlar şunlardır, ancak bunlarla sınırlı değildir:</span><span class="sxs-lookup"><span data-stu-id="337af-119">These issues include, but aren't limited to, the following:</span></span>

- <span data-ttu-id="337af-120">XSD, XPath ve XSLT, çok fazla zamanı veya belleği kullanan işlemleri belirtebileceğiniz dize tabanlı dillerdir.</span><span class="sxs-lookup"><span data-stu-id="337af-120">XSD, XPath, and XSLT are string-based languages in which you can specify operations that consume a lot of time or memory.</span></span> <span data-ttu-id="337af-121">Bu, dizelerin kötü amaçlı olduğunu doğrulamak üzere güvenilmeyen kaynaklardan XSD, XPath veya XSLT dizeleri alan uygulama programcılarının sorumluluğundadır veya bu dizeleri değerlendirme olasılığını izleyip, sistem kaynak tüketimine yol açacağından emin olur.</span><span class="sxs-lookup"><span data-stu-id="337af-121">It's the responsibility of application programmers who take XSD, XPath, or XSLT strings from untrusted sources to validate that the strings aren't malicious, or to monitor and mitigate the possibility that evaluating these strings will lead to excessive system resource consumption.</span></span>
- <span data-ttu-id="337af-122">XSD şemaları (satır içi şemalar dahil), doğal olarak hizmet reddi saldırılarına karşı savunmasız kalır; Güvenilmeyen kaynaklardan şemaları kabul etmemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="337af-122">XSD schemas (including inline schemas) are inherently vulnerable to denial of service attacks; you shouldn't accept schemas from untrusted sources.</span></span>
- <span data-ttu-id="337af-123">XSD ve XSLT diğer dosyalara başvurular içerebilir ve bu tür başvurular, bölgeler arası ve etki alanları arası saldırılara yol açabilir.</span><span class="sxs-lookup"><span data-stu-id="337af-123">XSD and XSLT can include references to other files, and such references can result in cross-zone and cross-domain attacks.</span></span>
- <span data-ttu-id="337af-124">DTD 'lerde dış varlıklar, bölgeler arası ve etki alanları arası saldırılara yol açabilir.</span><span class="sxs-lookup"><span data-stu-id="337af-124">External entities in DTDs can result in cross-zone and cross-domain attacks.</span></span>
- <span data-ttu-id="337af-125">DTD 'Ler hizmet reddi saldırılarına karşı savunmasızdır.</span><span class="sxs-lookup"><span data-stu-id="337af-125">DTDs are vulnerable to denial of service attacks.</span></span>
- <span data-ttu-id="337af-126">Daha fazla derin XML belgesi, hizmet reddi sorunları oluşturabilir; XML belgelerinin derinliğini kısıtlamak isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="337af-126">Exceptionally deep XML documents can pose denial of service issues; you might want to limit the depth of XML documents.</span></span>
- <span data-ttu-id="337af-127"><xref:System.Xml.NameTable> <xref:System.Xml.XmlNamespaceManager> Güvenilmeyen derlemelerden,, ve nesneleri gibi destekleyici bileşenleri kabul etmeyin <xref:System.Xml.XmlResolver> .</span><span class="sxs-lookup"><span data-stu-id="337af-127">Don't accept supporting components, such as <xref:System.Xml.NameTable>, <xref:System.Xml.XmlNamespaceManager>, and <xref:System.Xml.XmlResolver> objects, from untrusted assemblies.</span></span>
- <span data-ttu-id="337af-128">Büyük belge saldırılarını azaltmak için öbeklerdeki verileri okuyun.</span><span class="sxs-lookup"><span data-stu-id="337af-128">Read data in chunks to mitigate large document attacks.</span></span>
- <span data-ttu-id="337af-129">XSLT stil sayfalarındaki betik blokları çok sayıda saldırı sunabilir.</span><span class="sxs-lookup"><span data-stu-id="337af-129">Script blocks in XSLT style sheets can expose a number of attacks.</span></span>
- <span data-ttu-id="337af-130">Dinamik XPath ifadelerini oluşturmadan önce dikkatle doğrulayın.</span><span class="sxs-lookup"><span data-stu-id="337af-130">Validate carefully before constructing dynamic XPath expressions.</span></span>

## <a name="linq-to-xml-security-issues"></a><span data-ttu-id="337af-131">LINQ to XML güvenlik sorunları</span><span class="sxs-lookup"><span data-stu-id="337af-131">LINQ to XML security issues</span></span>

<span data-ttu-id="337af-132">Bu makaledeki güvenlik sorunları belirli bir sırada sunulmaz.</span><span class="sxs-lookup"><span data-stu-id="337af-132">The security issues in this article aren't presented in any particular order.</span></span> <span data-ttu-id="337af-133">Tüm sorunlar önemlidir ve uygun şekilde ele alınmalıdır.</span><span class="sxs-lookup"><span data-stu-id="337af-133">All issues are important and should be addressed as appropriate.</span></span>

<span data-ttu-id="337af-134">Başarılı bir ayrıcalık yükselmesi saldırısı, kendi ortamı üzerinde kötü amaçlı bir derlemeye daha fazla denetim sağlar.</span><span class="sxs-lookup"><span data-stu-id="337af-134">A successful elevation of privilege attack gives a malicious assembly more control over its environment.</span></span> <span data-ttu-id="337af-135">Başarılı bir ayrıcalık yükseltme saldırısı, verilerin açığa çıkmasına, hizmet reddine ve daha fazlasına neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="337af-135">A successful elevation of privilege attack can result in disclosure of data, denial of service, and more.</span></span>

<span data-ttu-id="337af-136">Uygulamalar, verileri görme yetkisine sahip olmayan kullanıcılara verileri açıklamamalıdır.</span><span class="sxs-lookup"><span data-stu-id="337af-136">Applications shouldn't disclose data to users who aren't authorized to see that data.</span></span>

<span data-ttu-id="337af-137">Hizmet reddi saldırıları, XML ayrıştırıcısının veya LINQ to XML aşırı miktarda belleği veya CPU süresini kullanmasına neden olur.</span><span class="sxs-lookup"><span data-stu-id="337af-137">Denial of service attacks cause the XML parser or LINQ to XML to consume excessive amounts of memory or CPU time.</span></span> <span data-ttu-id="337af-138">Hizmet reddi saldırıları, ayrıcalık saldırılarının yükseltilmesinin veya veri saldırılarının açıklanmasının daha az önemli olduğu kabul edilir.</span><span class="sxs-lookup"><span data-stu-id="337af-138">Denial of service attacks are considered to be less severe than elevation of privilege attacks or disclosure of data attacks.</span></span> <span data-ttu-id="337af-139">Ancak, bir sunucunun güvenilmeyen kaynaklardan XML belgelerini işlemesi gereken bir senaryoda önemli olurlar.</span><span class="sxs-lookup"><span data-stu-id="337af-139">However, they're important in a scenario where a server needs to process XML documents from untrusted sources.</span></span>

### <a name="dont-expose-error-messages-to-untrusted-callers"></a><span data-ttu-id="337af-140">Güvenilmeyen çağıranlara hata iletileri gösterme</span><span class="sxs-lookup"><span data-stu-id="337af-140">Don't expose error messages to untrusted callers</span></span>

<span data-ttu-id="337af-141">Bir hatanın açıklaması, dönüştürülen veriler, dosya adları veya uygulama ayrıntıları gibi verileri açığa çıkarmayabilir.</span><span class="sxs-lookup"><span data-stu-id="337af-141">The description of an error might reveal data, such as the data being transformed, file names, or implementation details.</span></span> <span data-ttu-id="337af-142">Hata iletileri güvenilmeyen çağıranlara gösterilmemelidir.</span><span class="sxs-lookup"><span data-stu-id="337af-142">Error messages shouldn't be exposed to callers that aren't trusted.</span></span> <span data-ttu-id="337af-143">Kendi özel hata mesajlarınız ile tüm hataları ve rapor hatalarını yakalamalı.</span><span class="sxs-lookup"><span data-stu-id="337af-143">You should catch all errors and report errors with your own custom error messages.</span></span>

### <a name="dont-call-codeaccesspermissionsassert-in-an-event-handler"></a><span data-ttu-id="337af-144">CodeAccessPermissions çağrısı yapmayın. bir olay işleyicisindeki onaylama</span><span class="sxs-lookup"><span data-stu-id="337af-144">Don't call CodeAccessPermissions.Assert in an event handler</span></span>

<span data-ttu-id="337af-145">Bir derlemenin daha az veya daha fazla izni olabilir.</span><span class="sxs-lookup"><span data-stu-id="337af-145">An assembly can have lesser or greater permissions.</span></span> <span data-ttu-id="337af-146">Daha fazla izne sahip bir derleme, bilgisayar ve ortamları üzerinde daha fazla denetime sahiptir.</span><span class="sxs-lookup"><span data-stu-id="337af-146">An assembly that has greater permissions has greater control over the computer and its environments.</span></span>

<span data-ttu-id="337af-147">Daha fazla izinlere sahip bir derlemedeki kod <xref:System.Security.CodeAccessPermission.Assert%2A?displayProperty=nameWithType> bir olay işleyicide çağrılamışsa ve sonra XML ağacı kısıtlanmış izinlere sahip kötü amaçlı bir derlemeye geçirilirse, kötü amaçlı derleme bir olayın oluşturulmasına neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="337af-147">If code in an assembly with greater permissions calls <xref:System.Security.CodeAccessPermission.Assert%2A?displayProperty=nameWithType> in an event handler, and then the XML tree is passed to a malicious assembly that has restricted permissions, the malicious assembly can cause an event to be raised.</span></span> <span data-ttu-id="337af-148">Olay derlemede daha fazla izinle kod çalıştırdığı için kötü amaçlı derleme yükseltilmiş ayrıcalıklarla çalışır.</span><span class="sxs-lookup"><span data-stu-id="337af-148">Because the event runs code that's in the assembly with greater permissions, the malicious assembly would then be operating with elevated privileges.</span></span>

<span data-ttu-id="337af-149">Microsoft bir olay işleyicisinde hiçbir şekilde çağrı yapmanızı önerir <xref:System.Security.CodeAccessPermission.Assert%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="337af-149">Microsoft recommends that you never call <xref:System.Security.CodeAccessPermission.Assert%2A?displayProperty=nameWithType> in an event handler.</span></span>

### <a name="dont-accept-dtds-from-untrusted-sources"></a><span data-ttu-id="337af-150">Güvenilmeyen kaynaklardan DTD 'Leri kabul etme</span><span class="sxs-lookup"><span data-stu-id="337af-150">Don't accept DTDs from untrusted sources</span></span>

<span data-ttu-id="337af-151">DTD 'lerde varlıklar, doğal olarak güvenli değildir.</span><span class="sxs-lookup"><span data-stu-id="337af-151">Entities in DTDs are inherently not secure.</span></span> <span data-ttu-id="337af-152">Bir DTD içeren kötü amaçlı bir XML belgesi, ayrıştırıcısının tüm belleği ve CPU süresini kullanmasına neden olur ve bu da hizmet reddi saldırısına neden olur.</span><span class="sxs-lookup"><span data-stu-id="337af-152">It's possible for a malicious XML document that contains a DTD to cause the parser to use all memory and CPU time, causing a denial of service attack.</span></span> <span data-ttu-id="337af-153">Bu nedenle, LINQ to XML öğesinde DTD işleme varsayılan olarak kapalıdır.</span><span class="sxs-lookup"><span data-stu-id="337af-153">Therefore, in LINQ to XML, DTD processing is turned off by default.</span></span> <span data-ttu-id="337af-154">Güvenilmeyen kaynaklardan DTD 'Leri kabul etmemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="337af-154">You shouldn't accept DTDs from untrusted sources.</span></span>

<span data-ttu-id="337af-155">Güvenilmeyen kaynaklardan DTD 'Leri kabul etmenin bir örneği, Web kullanıcılarının bir DTD 'ye ve DTD dosyasına başvuran bir XML dosyasını karşıya yüklemesine izin veren bir Web uygulamasıdır.</span><span class="sxs-lookup"><span data-stu-id="337af-155">One example of accepting DTDs from untrusted sources is a Web application that allows Web users to upload an XML file that references a DTD and a DTD file.</span></span> <span data-ttu-id="337af-156">Dosyanın doğrulanması sırasında, kötü amaçlı bir DTD sunucunuz üzerinde bir hizmet reddi saldırısı yürütebilir.</span><span class="sxs-lookup"><span data-stu-id="337af-156">Upon validation of the file, a malicious DTD could execute a denial of service attack on your server.</span></span> <span data-ttu-id="337af-157">Güvenilmeyen kaynaklardan DTD 'Lerin kabul edilmesi için başka bir örnek de, anonim FTP erişimine izin veren bir ağ paylaşımındaki bir DTD 'ye başvurulmalıdır.</span><span class="sxs-lookup"><span data-stu-id="337af-157">Another example of accepting DTDs from untrusted sources is to reference a DTD on a network share that also allows anonymous FTP access.</span></span>

### <a name="avoid-excessive-buffer-allocation"></a><span data-ttu-id="337af-158">Aşırı arabellek ayırmayı önleyin</span><span class="sxs-lookup"><span data-stu-id="337af-158">Avoid excessive buffer allocation</span></span>

<span data-ttu-id="337af-159">Uygulama geliştiricileri, son derece büyük veri kaynaklarının kaynak tükenmesi ve hizmet reddi saldırılarına yol açabileceğini bilmelidir.</span><span class="sxs-lookup"><span data-stu-id="337af-159">Application developers should be aware that extremely large data sources can lead to resource exhaustion and denial of service attacks.</span></span>

<span data-ttu-id="337af-160">Kötü amaçlı bir Kullanıcı çok büyük bir XML belgesi gönderdiğinde veya karşıya yüklediğinde, LINQ to XML aşırı sistem kaynağı kullanmasına neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="337af-160">If a malicious user submits or uploads a very large XML document, it could cause LINQ to XML to consume excessive system resources.</span></span> <span data-ttu-id="337af-161">Bu, bir hizmet reddi saldırısı oluşturabilir.</span><span class="sxs-lookup"><span data-stu-id="337af-161">This can constitute a denial of service attack.</span></span> <span data-ttu-id="337af-162">Bunu engellemek için <xref:System.Xml.XmlReaderSettings.MaxCharactersInDocument%2A?displayProperty=nameWithType> özelliği ayarlayabilir ve daha sonra yükleyebilen belgenin boyutuyla sınırlı bir okuyucu oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="337af-162">To prevent this, you can set the <xref:System.Xml.XmlReaderSettings.MaxCharactersInDocument%2A?displayProperty=nameWithType> property, and create a reader that's then limited in the size of document that it can load.</span></span> <span data-ttu-id="337af-163">Ardından, XML ağacı oluşturmak için okuyucuyu kullanın.</span><span class="sxs-lookup"><span data-stu-id="337af-163">You then use the reader to create the XML tree.</span></span>

<span data-ttu-id="337af-164">Örneğin, güvenilir olmayan bir kaynaktan gelen XML belgelerinin beklenen en büyük boyutunun 50K bayttan daha az olacağını biliyorsanız, <xref:System.Xml.XmlReaderSettings.MaxCharactersInDocument%2A?displayProperty=nameWithType> 100.000 olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="337af-164">For example, if you know that the maximum expected size of your XML documents coming from an untrusted source will be less than 50K bytes, set <xref:System.Xml.XmlReaderSettings.MaxCharactersInDocument%2A?displayProperty=nameWithType> to 100,000.</span></span> <span data-ttu-id="337af-165">Bu, XML belgelerinin işlenmesini içermez ve aynı zamanda, belgelerin karşıya yüklenmesi, büyük miktarlarda bellek tüketebileceği hizmet reddi tehditleri ortadan kaldırılır.</span><span class="sxs-lookup"><span data-stu-id="337af-165">This will not encumber your processing of XML documents, and at the same time it will mitigate denial of service threats where documents might be uploaded that would consume large amounts of memory.</span></span>

### <a name="avoid-excess-entity-expansion"></a><span data-ttu-id="337af-166">Aşırı varlık genişletmesinin önleyin</span><span class="sxs-lookup"><span data-stu-id="337af-166">Avoid excess entity expansion</span></span>

<span data-ttu-id="337af-167">DTD kullanırken bilinen hizmet reddi saldırılarına bir, aşırı varlık genişlemesine neden olan bir belgedir.</span><span class="sxs-lookup"><span data-stu-id="337af-167">One of the known denial of service attacks when using a DTD is a document that causes excessive entity expansion.</span></span> <span data-ttu-id="337af-168">Bunu engellemek için <xref:System.Xml.XmlReaderSettings.MaxCharactersFromEntities%2A?displayProperty=nameWithType> özelliğini ayarlayabilir ve daha sonra varlık genişletmesinden kaynaklanan karakter sayısında sınırlı bir okuyucu oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="337af-168">To prevent this, you can set the <xref:System.Xml.XmlReaderSettings.MaxCharactersFromEntities%2A?displayProperty=nameWithType> property, and create a reader that's then limited in the number of characters that result from entity expansion.</span></span> <span data-ttu-id="337af-169">Ardından, XML ağacı oluşturmak için okuyucuyu kullanın.</span><span class="sxs-lookup"><span data-stu-id="337af-169">You then use the reader to create the XML tree.</span></span>

### <a name="limit-the-depth-of-the-xml-hierarchy"></a><span data-ttu-id="337af-170">XML hiyerarşisinin derinliğini sınırlayın</span><span class="sxs-lookup"><span data-stu-id="337af-170">Limit the depth of the XML hierarchy</span></span>

<span data-ttu-id="337af-171">Olası bir hizmet reddi saldırısı, çok sayıda hiyerarşi içeren bir belge gönderildiğinde gönderilir.</span><span class="sxs-lookup"><span data-stu-id="337af-171">One possible denial of service attack is when a document is submitted that has excessive depth of hierarchy.</span></span> <span data-ttu-id="337af-172">Bunu engellemek için, <xref:System.Xml.XmlReader> öğelerin derinliğini sayan kendi sınıfınızla sardırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="337af-172">To prevent this, you can wrap an <xref:System.Xml.XmlReader> in your own class that counts the depth of elements.</span></span> <span data-ttu-id="337af-173">Derinlik önceden belirlenmiş makul bir düzeyi aşarsa, kötü amaçlı belgeyi işlemeyi sonlandırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="337af-173">If the depth exceeds a predetermined reasonable level, you can terminate the processing of the malicious document.</span></span>

### <a name="protect-against-untrusted-xmlreader-or-xmlwriter-implementations"></a><span data-ttu-id="337af-174">Güvenilmeyen XmlReader veya XmlWriter uygulamalarına karşı koruma</span><span class="sxs-lookup"><span data-stu-id="337af-174">Protect against untrusted XmlReader or XmlWriter implementations</span></span>

<span data-ttu-id="337af-175">Yöneticiler dışarıdan sağlanan <xref:System.Xml.XmlReader> veya <xref:System.Xml.XmlWriter> uygulamaların, güçlü adlara sahip olduğunu ve makine yapılandırmasında kayıtlı olduğunu doğrulamalıdır.</span><span class="sxs-lookup"><span data-stu-id="337af-175">Administrators should verify that any externally supplied <xref:System.Xml.XmlReader> or <xref:System.Xml.XmlWriter> implementations have strong names and have been registered in the machine configuration.</span></span> <span data-ttu-id="337af-176">Bu, kötü amaçlı kodun bir okuyucu veya yazıcının yüklenmesini önler.</span><span class="sxs-lookup"><span data-stu-id="337af-176">This prevents malicious code masquerading as a reader or writer from being loaded.</span></span>

### <a name="periodically-free-objects-that-reference-xname"></a><span data-ttu-id="337af-177">XName 'e başvuran düzenli olarak ücretsiz nesneler</span><span class="sxs-lookup"><span data-stu-id="337af-177">Periodically free objects that reference XName</span></span>

<span data-ttu-id="337af-178">Uygulama programcılarının belirli türlerde saldırılara karşı korunması için, <xref:System.Xml.Linq.XName> uygulama etki alanındaki bir nesneye düzenli olarak başvuran tüm nesneleri boşaltmalıdır.</span><span class="sxs-lookup"><span data-stu-id="337af-178">To protect against certain kinds of attacks, application programmers should free all objects that reference an <xref:System.Xml.Linq.XName> object in the application domain on a regular basis.</span></span>

### <a name="protect-against-random-xml-names"></a><span data-ttu-id="337af-179">Rastgele XML adlarına karşı koruma</span><span class="sxs-lookup"><span data-stu-id="337af-179">Protect against random XML names</span></span>

<span data-ttu-id="337af-180">Güvenilmeyen kaynaklardan veri alan uygulamalar <xref:System.Xml.XmlReader> , rastgele XML adları ve ad alanları olasılığını denetlemek için özel kodda Sarmalanan bir kullanmayı göz önünde bulundurmalıdır.</span><span class="sxs-lookup"><span data-stu-id="337af-180">Applications that take data from untrusted sources should consider using an <xref:System.Xml.XmlReader> that's wrapped in custom code to inspect for the possibility of random XML names and namespaces.</span></span> <span data-ttu-id="337af-181">Bu tür rastgele XML adları ve ad alanları algılanırsa, uygulama kötü amaçlı belgenin işlenmesini sonlandırabilir.</span><span class="sxs-lookup"><span data-stu-id="337af-181">If such random XML names and namespaces are detected, the application can then terminate the processing of the malicious document.</span></span>

<span data-ttu-id="337af-182">Belirli bir ad alanındaki (ad alanı olmayan adlar dahil) ad sayısını makul bir sınıra sınırlamak isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="337af-182">You might want to limit the number of names in any given namespace (including names in no namespace) to a reasonable limit.</span></span>

### <a name="serialize-linq-to-xml-objects-to-xml-text-before-passing-the-data-to-an-untrusted-component"></a><span data-ttu-id="337af-183">Verileri güvenilmeyen bir bileşene geçirmeden önce nesneleri XML metnine serileştirme LINQ to XML</span><span class="sxs-lookup"><span data-stu-id="337af-183">Serialize LINQ to XML objects to XML text before passing the data to an untrusted component</span></span>

<span data-ttu-id="337af-184">LINQ to XML, farklı uygulama bileşenlerinin XML ağaçları olarak bileşenler arasında geçirilen XML verilerini yükleme, doğrulama, sorgulama, dönüştürme, güncelleştirme ve kaydetme işlem hatlarını oluşturmak için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="337af-184">LINQ to XML could be used to build processing pipelines in which different application components load, validate, query, transform, update, and save XML data that's passed between components as XML trees.</span></span> <span data-ttu-id="337af-185">Bu, XML metnine nesne yükleme ve serileştirilmesinin yükü yalnızca işlem hattının sonunda yapıldığından performansı iyileştirmenize yardımcı olabilir.</span><span class="sxs-lookup"><span data-stu-id="337af-185">This can help optimize performance, because the overhead of loading and serializing objects to XML text is done only at the ends of the pipeline.</span></span> <span data-ttu-id="337af-186">Ancak geliştiriciler, bir bileşen tarafından oluşturulan tüm ek açıklamaların ve olay işleyicilerinin diğer bileşenler tarafından erişilebilir olduğunu bilmelidir.</span><span class="sxs-lookup"><span data-stu-id="337af-186">Developers must be aware, however, that all annotations and event handlers created by one component are accessible to other components.</span></span> <span data-ttu-id="337af-187">Bu, bileşenlerin farklı düzeylerde güven düzeyine sahip olması halinde bir dizi güvenlik açığı oluşturabilir.</span><span class="sxs-lookup"><span data-stu-id="337af-187">This can create a number of vulnerabilities if the components have different levels of trust.</span></span> <span data-ttu-id="337af-188">Daha az güvenilir bileşenlere güvenli işlem hatları oluşturmak için, verileri güvenilmeyen bir bileşene geçirmeden önce LINQ to XML nesneleri XML metnine serileştirmelidir.</span><span class="sxs-lookup"><span data-stu-id="337af-188">To build secure pipelines across less trusted components, you must serialize LINQ to XML objects to XML text before passing the data to an untrusted component.</span></span>

<span data-ttu-id="337af-189">Bazı güvenlik, ortak dil çalışma zamanı (CLR) tarafından sağlanır.</span><span class="sxs-lookup"><span data-stu-id="337af-189">Some security is provided by the common language runtime (CLR).</span></span> <span data-ttu-id="337af-190">Örneğin, özel bir sınıf içermeyen bir bileşen, bu sınıf tarafından anahtarlanan ek açıklamaların erişimine erişemez.</span><span class="sxs-lookup"><span data-stu-id="337af-190">For example, a component that doesn't include a private class can't access annotations keyed by that class.</span></span> <span data-ttu-id="337af-191">Ancak, ek açıklamalar bunları okuyamıyorum bileşenler tarafından silinebilir.</span><span class="sxs-lookup"><span data-stu-id="337af-191">However, annotations can be deleted by components that can't read them.</span></span> <span data-ttu-id="337af-192">Bu, bir izinsiz saldırı olarak kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="337af-192">This could be used as a tampering attack.</span></span>

## <a name="see-also"></a><span data-ttu-id="337af-193">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="337af-193">See also</span></span>

- [<span data-ttu-id="337af-194">LINQ to XML genel bakış</span><span class="sxs-lookup"><span data-stu-id="337af-194">LINQ to XML overview</span></span>](linq-xml-overview.md)
