---
title: Devamlılık Görevlerini Kullanarak Görevleri Birbirine Bağlama
ms.date: 02/11/2019
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- tasks, continuations
ms.assetid: 0b45e9a2-de28-46ce-8212-1817280ed42d
ms.openlocfilehash: 7de8c4e44e1866e3df36c666c9ecc210dc6a7d83
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/15/2020
ms.locfileid: "78159370"
---
# <a name="chaining-tasks-by-using-continuation-tasks"></a><span data-ttu-id="e510e-102">Devamlılık Görevlerini Kullanarak Görevleri Birbirine Bağlama</span><span class="sxs-lookup"><span data-stu-id="e510e-102">Chaining Tasks by Using Continuation Tasks</span></span>
<span data-ttu-id="e510e-103">Eşzamanlı programlamada, ikinci bir işlemi çağırmak ve verileri ona aktarmak için, tamamlandığında tek bir eşzamanlı işlem yaygındır.</span><span class="sxs-lookup"><span data-stu-id="e510e-103">In asynchronous programming, it is common for one asynchronous operation, on completion, to invoke a second operation and pass data to it.</span></span> <span data-ttu-id="e510e-104">Geleneksel olarak, devamı geri arama yöntemleri kullanılarak yapılmıştır.</span><span class="sxs-lookup"><span data-stu-id="e510e-104">Traditionally, continuations have been done by using callback methods.</span></span> <span data-ttu-id="e510e-105">Görev Paralel Kitaplığı'nda, aynı işlevsellik *devam görevleri*tarafından sağlanır.</span><span class="sxs-lookup"><span data-stu-id="e510e-105">In the Task Parallel Library, the same functionality is provided by *continuation tasks*.</span></span> <span data-ttu-id="e510e-106">Bir devam görevi (aynı zamanda bir devamı olarak da bilinir) öncül olarak bilinen başka *antecedent*bir görev tarafından çağrılan bir eşzamanlı görevdir, öncül bitirdiğinde.</span><span class="sxs-lookup"><span data-stu-id="e510e-106">A continuation task (also known just as a continuation) is an asynchronous task that is invoked by another task, which is known as the *antecedent*, when the antecedent finishes.</span></span>  
  
 <span data-ttu-id="e510e-107">Devamı nispeten kullanımı kolaydır, ancak yine de güçlü ve esnektir.</span><span class="sxs-lookup"><span data-stu-id="e510e-107">Continuations are relatively easy to use, but are nevertheless powerful and flexible.</span></span> <span data-ttu-id="e510e-108">Örneğin, şunları yapabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="e510e-108">For example, you can:</span></span>  
  
- <span data-ttu-id="e510e-109">Verileri öncülden devama aktarın.</span><span class="sxs-lookup"><span data-stu-id="e510e-109">Pass data from the antecedent to the continuation.</span></span>  
  
- <span data-ttu-id="e510e-110">Devamın çağrılacağı veya çağrılmayacağı kesin koşulları belirtin.</span><span class="sxs-lookup"><span data-stu-id="e510e-110">Specify the precise conditions under which the continuation will be invoked or not invoked.</span></span>  
  
- <span data-ttu-id="e510e-111">Başlamadan veya çalışırken işbirliği içinde devam etme iptal edin.</span><span class="sxs-lookup"><span data-stu-id="e510e-111">Cancel a continuation either before it starts or cooperatively as it is running.</span></span>  
  
- <span data-ttu-id="e510e-112">Devamı nasıl zamanlanması gerektiği hakkında ipuçları sağlayın.</span><span class="sxs-lookup"><span data-stu-id="e510e-112">Provide hints about how the continuation should be scheduled.</span></span>  
  
- <span data-ttu-id="e510e-113">Aynı öncülden birden çok devamı çağırın.</span><span class="sxs-lookup"><span data-stu-id="e510e-113">Invoke multiple continuations from the same antecedent.</span></span>  
  
- <span data-ttu-id="e510e-114">Birden çok öncülden biri tamamlandığında bir devamı çağırın.</span><span class="sxs-lookup"><span data-stu-id="e510e-114">Invoke one continuation when all or any one of multiple antecedents complete.</span></span>  
  
- <span data-ttu-id="e510e-115">Zincir herhangi bir rasgele uzunlukta birbiri ardına devam eder.</span><span class="sxs-lookup"><span data-stu-id="e510e-115">Chain continuations one after another to any arbitrary length.</span></span>  
  
- <span data-ttu-id="e510e-116">Öncül tarafından atılan özel durumları işlemek için bir devam kullanın.</span><span class="sxs-lookup"><span data-stu-id="e510e-116">Use a continuation to handle exceptions thrown by the antecedent.</span></span>  
  
## <a name="about-continuations"></a><span data-ttu-id="e510e-117">Devamları hakkında</span><span class="sxs-lookup"><span data-stu-id="e510e-117">About continuations</span></span>  
 <span data-ttu-id="e510e-118"><xref:System.Threading.Tasks.TaskStatus.WaitingForActivation> Devamı, durumda oluşturulan bir görevdir.</span><span class="sxs-lookup"><span data-stu-id="e510e-118">A continuation is a task that is created in the <xref:System.Threading.Tasks.TaskStatus.WaitingForActivation> state.</span></span> <span data-ttu-id="e510e-119">Öncül görevi veya görevleri tamamlandığında otomatik olarak etkinleştirilir.</span><span class="sxs-lookup"><span data-stu-id="e510e-119">It is activated automatically when its antecedent task or tasks complete.</span></span> <span data-ttu-id="e510e-120">Kullanıcı <xref:System.Threading.Tasks.Task.Start%2A?displayProperty=nameWithType> kodunda devam çağrısında bulunmanın bir <xref:System.InvalidOperationException?displayProperty=nameWithType> özel durum oluşturur.</span><span class="sxs-lookup"><span data-stu-id="e510e-120">Calling <xref:System.Threading.Tasks.Task.Start%2A?displayProperty=nameWithType> on a continuation in user code throws an <xref:System.InvalidOperationException?displayProperty=nameWithType> exception.</span></span>  
  
 <span data-ttu-id="e510e-121">Devamı kendisi birdir <xref:System.Threading.Tasks.Task> ve başlatıldıği iş parçacığı engellemez.</span><span class="sxs-lookup"><span data-stu-id="e510e-121">A continuation is itself a <xref:System.Threading.Tasks.Task> and does not block the thread on which it is started.</span></span> <span data-ttu-id="e510e-122">Devam <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> görevi bitene kadar engellemek için yöntemi çağırın.</span><span class="sxs-lookup"><span data-stu-id="e510e-122">Call the <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> method to block until the continuation task finishes.</span></span>  
  
## <a name="creating-a-continuation-for-a-single-antecedent"></a><span data-ttu-id="e510e-123">Tek bir öncül için bir devam oluşturma</span><span class="sxs-lookup"><span data-stu-id="e510e-123">Creating a continuation for a single antecedent</span></span>  
 <span data-ttu-id="e510e-124">Öncül yöntemi çağırarak <xref:System.Threading.Tasks.Task.ContinueWith%2A?displayProperty=nameWithType> tamamlandığında çalıştıran bir devamı oluşturursunuz.</span><span class="sxs-lookup"><span data-stu-id="e510e-124">You create a continuation that executes when its antecedent has completed by calling the <xref:System.Threading.Tasks.Task.ContinueWith%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="e510e-125">Aşağıdaki örnekte temel desen gösterilmektedir (netlik için, özel durum işleme atlanır).</span><span class="sxs-lookup"><span data-stu-id="e510e-125">The following example shows the basic pattern (for clarity, exception handling is omitted).</span></span> <span data-ttu-id="e510e-126">Haftanın geçerli gününün adını `taskA`gösteren bir <xref:System.DayOfWeek> nesneyi döndüren öncül bir görev yürütür.</span><span class="sxs-lookup"><span data-stu-id="e510e-126">It executes an antecedent task, `taskA`, that returns a <xref:System.DayOfWeek> object that indicates the name of the current day of the week.</span></span> <span data-ttu-id="e510e-127">Öncül tamamlandığında, devam görevi, `continuation`, öncül geçirilir ve sonucunu içeren bir dize görüntüler.</span><span class="sxs-lookup"><span data-stu-id="e510e-127">When the antecedent completes, the continuation task, `continuation`, is passed the antecedent and displays a string that includes its result.</span></span>

> [!NOTE]
> <span data-ttu-id="e510e-128">Bu makaledeki C# örnekleri yöntemüzerindeki `async` değiştiriciden `Main` yararlanır.</span><span class="sxs-lookup"><span data-stu-id="e510e-128">The C# samples in this article make use of the `async` modifier on the `Main` method.</span></span> <span data-ttu-id="e510e-129">Bu özellik C# 7.1 ve sonraki durumlarda kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="e510e-129">That feature is available in C# 7.1 and later.</span></span> <span data-ttu-id="e510e-130">Önceki sürümler, bu örnek kodu derlerken oluşturur. [`CS5001`](../../csharp/misc/cs5001.md)</span><span class="sxs-lookup"><span data-stu-id="e510e-130">Previous versions generate [`CS5001`](../../csharp/misc/cs5001.md) when compiling this sample code.</span></span> <span data-ttu-id="e510e-131">Dil sürümünü C# 7.1 veya daha yeni olarak ayarlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="e510e-131">You'll need to set the language version to C# 7.1 or newer.</span></span> <span data-ttu-id="e510e-132">Dil sürümünü yapılandırma makaledeki dil sürümünü nasıl [yapılandırabileceğinizi](../../csharp/language-reference/configure-language-version.md)öğrenebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e510e-132">You can learn how to configure the language version in the article on [configure language version](../../csharp/language-reference/configure-language-version.md).</span></span>
  
 [!code-csharp[TPL_Continuations#1](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/simple1.cs#1)]
 [!code-vb[TPL_Continuations#1](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/simple1.vb#1)]  
  
## <a name="creating-a-continuation-for-multiple-antecedents"></a><span data-ttu-id="e510e-133">Birden çok öncül için bir devam oluşturma</span><span class="sxs-lookup"><span data-stu-id="e510e-133">Creating a continuation for multiple antecedents</span></span>  
 <span data-ttu-id="e510e-134">Ayrıca, bir görev grubundan herhangi biri veya tümü tamamlandığında çalışacak bir devam oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e510e-134">You can also create a continuation that will run when any or all of a group of tasks has completed.</span></span> <span data-ttu-id="e510e-135">Tüm öncül görevler tamamlandığında bir devamı yürütmek için statik`Shared` (Visual Basic) <xref:System.Threading.Tasks.Task.WhenAll%2A?displayProperty=nameWithType> yöntemini <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAll%2A?displayProperty=nameWithType> veya örnek yöntemini çağırırsınız.</span><span class="sxs-lookup"><span data-stu-id="e510e-135">To execute a continuation when all antecedent tasks have completed, you call the static (`Shared` in Visual Basic) <xref:System.Threading.Tasks.Task.WhenAll%2A?displayProperty=nameWithType> method or the instance <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAll%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="e510e-136">Öncül görevlerden herhangi biri tamamlandığında bir devamı yürütmek için statik`Shared` (Visual <xref:System.Threading.Tasks.Task.WhenAny%2A?displayProperty=nameWithType> Basic) yöntemini veya örnek <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAny%2A?displayProperty=nameWithType> yöntemini çağırırsınız.</span><span class="sxs-lookup"><span data-stu-id="e510e-136">To execute a continuation when any of the antecedent tasks has completed, you call the static (`Shared` in Visual Basic) <xref:System.Threading.Tasks.Task.WhenAny%2A?displayProperty=nameWithType> method or the instance <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAny%2A?displayProperty=nameWithType> method.</span></span>  
  
 <span data-ttu-id="e510e-137">Aramaları <xref:System.Threading.Tasks.Task.WhenAll%2A?displayProperty=nameWithType> ve <xref:System.Threading.Tasks.Task.WhenAny%2A?displayProperty=nameWithType> aşırı yüklemeleri arama iş parçacığı engellemez unutmayın.</span><span class="sxs-lookup"><span data-stu-id="e510e-137">Note that calls to the <xref:System.Threading.Tasks.Task.WhenAll%2A?displayProperty=nameWithType> and <xref:System.Threading.Tasks.Task.WhenAny%2A?displayProperty=nameWithType> overloads do not block the calling thread.</span></span>  <span data-ttu-id="e510e-138">Ancak, genellikle arama iş <xref:System.Threading.Tasks.Task.WhenAll%28System.Collections.Generic.IEnumerable%7BSystem.Threading.Tasks.Task%7D%29?displayProperty=nameWithType> parçacığı <xref:System.Threading.Tasks.Task.WhenAll%28System.Threading.Tasks.Task%5B%5D%29?displayProperty=nameWithType> engellemez döndürülen <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> özelliği almak için tüm ama yöntemleri çağırır.</span><span class="sxs-lookup"><span data-stu-id="e510e-138">However, you typically call all but the <xref:System.Threading.Tasks.Task.WhenAll%28System.Collections.Generic.IEnumerable%7BSystem.Threading.Tasks.Task%7D%29?displayProperty=nameWithType> and  <xref:System.Threading.Tasks.Task.WhenAll%28System.Threading.Tasks.Task%5B%5D%29?displayProperty=nameWithType> methods to retrieve the returned  <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property, which does block the calling thread.</span></span>  
  
 <span data-ttu-id="e510e-139">Aşağıdaki örnek, <xref:System.Threading.Tasks.Task.WhenAll%28System.Collections.Generic.IEnumerable%7BSystem.Threading.Tasks.Task%7D%29?displayProperty=nameWithType> 10 öncül görevinin sonuçlarını yansıtan bir devam görevi oluşturma yöntemini çağırır.</span><span class="sxs-lookup"><span data-stu-id="e510e-139">The following example calls the <xref:System.Threading.Tasks.Task.WhenAll%28System.Collections.Generic.IEnumerable%7BSystem.Threading.Tasks.Task%7D%29?displayProperty=nameWithType> method to create a continuation task that reflects the results of its 10 antecedent tasks.</span></span> <span data-ttu-id="e510e-140">Her öncül görev, 1 ile 10 arasında değişen bir dizin değerini kareler.</span><span class="sxs-lookup"><span data-stu-id="e510e-140">Each antecedent task squares an index value that ranges from one to 10.</span></span> <span data-ttu-id="e510e-141">Öncüller başarıyla tamamlanırsa (onların <xref:System.Threading.Tasks.Task.Status%2A?displayProperty=nameWithType> özelliği), <xref:System.Threading.Tasks.TaskStatus.RanToCompletion?displayProperty=nameWithType> <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> devamı özelliği her öncül <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> tarafından döndürülen değerlerin bir dizi.</span><span class="sxs-lookup"><span data-stu-id="e510e-141">If the antecedents complete successfully (their <xref:System.Threading.Tasks.Task.Status%2A?displayProperty=nameWithType> property is <xref:System.Threading.Tasks.TaskStatus.RanToCompletion?displayProperty=nameWithType>), the <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property of the continuation is an array of the <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> values returned by each antecedent.</span></span> <span data-ttu-id="e510e-142">Örnek, bir ile 10 arasındaki tüm sayıların karelerinin toplamını hesaplamak için bunları ekler.</span><span class="sxs-lookup"><span data-stu-id="e510e-142">The example adds them to compute the sum of squares for all numbers between one and 10.</span></span>  
  
 [!code-csharp[TPL_Continuations#5](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/whenall1.cs#5)]
 [!code-vb[TPL_Continuations#5](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/whenall1.vb#5)]  
  
## <a name="continuation-options"></a><span data-ttu-id="e510e-143">Devam seçenekleri</span><span class="sxs-lookup"><span data-stu-id="e510e-143">Continuation options</span></span>  
 <span data-ttu-id="e510e-144">Tek görev devamı oluşturduğunuzda, devamın <xref:System.Threading.Tasks.Task.ContinueWith%2A> hangi koşullar <xref:System.Threading.Tasks.TaskContinuationOptions?displayProperty=nameWithType> altında başladığını belirtmek için numaralandırma değeri alan bir aşırı yük kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e510e-144">When you create a single-task continuation, you can use a <xref:System.Threading.Tasks.Task.ContinueWith%2A> overload that takes a <xref:System.Threading.Tasks.TaskContinuationOptions?displayProperty=nameWithType> enumeration value to specify the conditions under which the continuation starts.</span></span> <span data-ttu-id="e510e-145">Örneğin, devamın yalnızca öncül başarıyla tamamlanırsa veya yalnızca hatalı bir durumda tamamlanırsa çalışacak olduğunu belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e510e-145">For example, you can specify that the continuation is to run only if the antecedent completes successfully, or only if it completes in a faulted state.</span></span> <span data-ttu-id="e510e-146">Öncül devam çağırmaya hazır olduğunda koşul doğru değilse, devam doğrudan <xref:System.Threading.Tasks.TaskStatus.Canceled?displayProperty=nameWithType> duruma geçiş eder ve daha sonra başlatılamaz.</span><span class="sxs-lookup"><span data-stu-id="e510e-146">If the condition is not true when the antecedent is ready to invoke the continuation, the continuation transitions directly to the <xref:System.Threading.Tasks.TaskStatus.Canceled?displayProperty=nameWithType> state and subsequently cannot be started.</span></span>  
  
 <span data-ttu-id="e510e-147"><xref:System.Threading.Tasks.TaskFactory.ContinueWhenAll%2A?displayProperty=nameWithType> Yöntemin aşırı yüklemeleri gibi bir dizi çok görevli devam <xref:System.Threading.Tasks.TaskContinuationOptions?displayProperty=nameWithType> yöntemi de bir parametre içerir.</span><span class="sxs-lookup"><span data-stu-id="e510e-147">A number of multi-task continuation methods, such as overloads of the <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAll%2A?displayProperty=nameWithType> method, also include a <xref:System.Threading.Tasks.TaskContinuationOptions?displayProperty=nameWithType> parameter.</span></span> <span data-ttu-id="e510e-148">Ancak, yalnızca tüm <xref:System.Threading.Tasks.TaskContinuationOptions?displayProperty=nameWithType> numaralandırma üyelerinin bir alt kümesi geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="e510e-148">Only a subset of all <xref:System.Threading.Tasks.TaskContinuationOptions?displayProperty=nameWithType> enumeration members are valid, however.</span></span> <span data-ttu-id="e510e-149">Numaralandırmada <xref:System.Threading.Tasks.TaskContinuationOptions?displayProperty=nameWithType> <xref:System.Threading.Tasks.TaskCreationOptions?displayProperty=nameWithType> benzerleri olan değerleri belirtebilirsiniz, örneğin <xref:System.Threading.Tasks.TaskContinuationOptions.AttachedToParent?displayProperty=nameWithType>, <xref:System.Threading.Tasks.TaskContinuationOptions.LongRunning?displayProperty=nameWithType>, <xref:System.Threading.Tasks.TaskContinuationOptions.PreferFairness?displayProperty=nameWithType>ve .</span><span class="sxs-lookup"><span data-stu-id="e510e-149">You can specify <xref:System.Threading.Tasks.TaskContinuationOptions?displayProperty=nameWithType> values that have counterparts in the <xref:System.Threading.Tasks.TaskCreationOptions?displayProperty=nameWithType> enumeration, such as <xref:System.Threading.Tasks.TaskContinuationOptions.AttachedToParent?displayProperty=nameWithType>, <xref:System.Threading.Tasks.TaskContinuationOptions.LongRunning?displayProperty=nameWithType>, and <xref:System.Threading.Tasks.TaskContinuationOptions.PreferFairness?displayProperty=nameWithType>.</span></span> <span data-ttu-id="e510e-150">Çok görev devamı `NotOn` olan `OnlyOn` seçeneklerden herhangi birini belirtirseniz, çalışma zamanında bir <xref:System.ArgumentOutOfRangeException> özel durum atılır.</span><span class="sxs-lookup"><span data-stu-id="e510e-150">If you specify any of the `NotOn` or `OnlyOn` options with a multi-task continuation, an <xref:System.ArgumentOutOfRangeException> exception will be thrown at run time.</span></span>  
  
 <span data-ttu-id="e510e-151">Görev devam seçenekleri hakkında daha <xref:System.Threading.Tasks.TaskContinuationOptions> fazla bilgi için konuya bakın.</span><span class="sxs-lookup"><span data-stu-id="e510e-151">For more information on task continuation options, see the <xref:System.Threading.Tasks.TaskContinuationOptions> topic.</span></span>  
  
## <a name="passing-data-to-a-continuation"></a><span data-ttu-id="e510e-152">Verileri Bir Devama Aktarma</span><span class="sxs-lookup"><span data-stu-id="e510e-152">Passing Data to a Continuation</span></span>  
 <span data-ttu-id="e510e-153">Yöntem, <xref:System.Threading.Tasks.Task.ContinueWith%2A?displayProperty=nameWithType> bir bağımsız değişken olarak devamı kullanıcı temsilcisine öncül bir başvuru geçer.</span><span class="sxs-lookup"><span data-stu-id="e510e-153">The <xref:System.Threading.Tasks.Task.ContinueWith%2A?displayProperty=nameWithType> method passes a reference to the antecedent to the user delegate of the continuation as an argument.</span></span> <span data-ttu-id="e510e-154">Öncül bir <xref:System.Threading.Tasks.Task%601?displayProperty=nameWithType> nesneyse ve görev tamamlanana kadar çalıştırılırsa, devamı görevin <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> özelliğine erişebilir.</span><span class="sxs-lookup"><span data-stu-id="e510e-154">If the antecedent is a <xref:System.Threading.Tasks.Task%601?displayProperty=nameWithType> object, and the task ran until it was completed, then the continuation can access the <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property of the task.</span></span>  
  
 <span data-ttu-id="e510e-155">Görev <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> tamamlanana kadar özellik engeller.</span><span class="sxs-lookup"><span data-stu-id="e510e-155">The <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property blocks until the task has completed.</span></span> <span data-ttu-id="e510e-156">Ancak, görev iptal edildiyse veya hatalıysa, <xref:System.Threading.Tasks.Task%601.Result%2A> özelliğe erişmeye <xref:System.AggregateException> çalışmak bir özel durum oluşturur.</span><span class="sxs-lookup"><span data-stu-id="e510e-156">However, if the task was canceled or faulted, attempting to access the <xref:System.Threading.Tasks.Task%601.Result%2A> property throws an <xref:System.AggregateException> exception.</span></span> <span data-ttu-id="e510e-157">Aşağıdaki örnekte gösterildiği <xref:System.Threading.Tasks.TaskContinuationOptions.OnlyOnRanToCompletion> gibi, seçeneği kullanarak bu sorunu önleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e510e-157">You can avoid this problem by using the <xref:System.Threading.Tasks.TaskContinuationOptions.OnlyOnRanToCompletion> option, as shown in the following example.</span></span>  
  
 [!code-csharp[TPL_Continuations#2](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/result1.cs#2)]
 [!code-vb[TPL_Continuations#2](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/result1.vb#2)]  
  
 <span data-ttu-id="e510e-158">Öncül başarılı bir şekilde tamamlanmamış olsa bile devamın çalışmasını istiyorsanız, özel durum lara karşı korumanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="e510e-158">If you want the continuation to run even if the antecedent did not run to successful completion, you must guard against the exception.</span></span> <span data-ttu-id="e510e-159">Bir yaklaşım, öncül <xref:System.Threading.Tasks.Task.Status%2A?displayProperty=nameWithType> özelliğini sınamak ve yalnızca <xref:System.Threading.Tasks.Task%601.Result%2A> durum yoksa <xref:System.Threading.Tasks.TaskStatus.Faulted> veya <xref:System.Threading.Tasks.TaskStatus.Canceled>.</span><span class="sxs-lookup"><span data-stu-id="e510e-159">One approach is to test the <xref:System.Threading.Tasks.Task.Status%2A?displayProperty=nameWithType> property of the antecedent, and only attempt to access the <xref:System.Threading.Tasks.Task%601.Result%2A> property if the status is not <xref:System.Threading.Tasks.TaskStatus.Faulted> or <xref:System.Threading.Tasks.TaskStatus.Canceled>.</span></span> <span data-ttu-id="e510e-160">Ayrıca öncül <xref:System.Threading.Tasks.Task.Exception%2A> özelliğini inceleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e510e-160">You can also examine the <xref:System.Threading.Tasks.Task.Exception%2A> property of the antecedent.</span></span> <span data-ttu-id="e510e-161">Daha fazla bilgi için [bkz.](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md)</span><span class="sxs-lookup"><span data-stu-id="e510e-161">For more information, see [Exception Handling](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md).</span></span> <span data-ttu-id="e510e-162">Aşağıdaki örnek, öncül özelliğine <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> erişmek için önceki örneği yalnızca durumu <xref:System.Threading.Tasks.TaskStatus.RanToCompletion?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="e510e-162">The following example modifies the previous example to access antecedent's <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property only if its status is <xref:System.Threading.Tasks.TaskStatus.RanToCompletion?displayProperty=nameWithType>.</span></span>  
  
 [!code-csharp[TPL_Continuations#7](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/result2.cs#7)]
 [!code-vb[TPL_Continuations#7](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/result2.vb#7)]  
  
## <a name="canceling-a-continuation"></a><span data-ttu-id="e510e-163">Devamı İptal Etme</span><span class="sxs-lookup"><span data-stu-id="e510e-163">Canceling a Continuation</span></span>  
 <span data-ttu-id="e510e-164">Bir <xref:System.Threading.Tasks.Task.Status%2A?displayProperty=nameWithType> devam Özelliği aşağıdaki <xref:System.Threading.Tasks.TaskStatus.Canceled?displayProperty=nameWithType> durumlarda ayarlanır:</span><span class="sxs-lookup"><span data-stu-id="e510e-164">The <xref:System.Threading.Tasks.Task.Status%2A?displayProperty=nameWithType> property of a continuation is set to <xref:System.Threading.Tasks.TaskStatus.Canceled?displayProperty=nameWithType> in the following situations:</span></span>  
  
- <span data-ttu-id="e510e-165">İptal isteğine <xref:System.OperationCanceledException> yanıt olarak bir özel durum oluşturur.</span><span class="sxs-lookup"><span data-stu-id="e510e-165">It throws an <xref:System.OperationCanceledException> exception in response to a cancellation request.</span></span> <span data-ttu-id="e510e-166">Herhangi bir görevde olduğu gibi, istisna devamına geçirilen aynı belirteci içeriyorsa, kooperatif iptali bildirimi olarak kabul edilir.</span><span class="sxs-lookup"><span data-stu-id="e510e-166">As with any task, if the exception contains the same token that was passed to the continuation, it is treated as an acknowledgement of cooperative cancellation.</span></span>  
  
- <span data-ttu-id="e510e-167">Devamı olan <xref:System.Threading.CancellationToken?displayProperty=nameWithType> <xref:System.Threading.CancellationToken.IsCancellationRequested%2A> özelliği bir `true`geçirilir .</span><span class="sxs-lookup"><span data-stu-id="e510e-167">The continuation is passed a <xref:System.Threading.CancellationToken?displayProperty=nameWithType> whose <xref:System.Threading.CancellationToken.IsCancellationRequested%2A> property is `true`.</span></span> <span data-ttu-id="e510e-168">Bu durumda, devamı başlamaz ve <xref:System.Threading.Tasks.TaskStatus.Canceled?displayProperty=nameWithType> duruma geçiş yapar.</span><span class="sxs-lookup"><span data-stu-id="e510e-168">In this case, the continuation does not start, and it transitions to the <xref:System.Threading.Tasks.TaskStatus.Canceled?displayProperty=nameWithType> state.</span></span>  
  
- <span data-ttu-id="e510e-169"><xref:System.Threading.Tasks.TaskContinuationOptions> Bağımsız değişkentarafından ayarlanan koşul karşılanmadığından devamı asla çalışır.</span><span class="sxs-lookup"><span data-stu-id="e510e-169">The continuation never runs because the condition set by its <xref:System.Threading.Tasks.TaskContinuationOptions> argument was not met.</span></span> <span data-ttu-id="e510e-170">Örneğin, bir öncül bir <xref:System.Threading.Tasks.TaskStatus.Faulted?displayProperty=nameWithType> duruma geçerse, <xref:System.Threading.Tasks.TaskContinuationOptions.NotOnFaulted?displayProperty=nameWithType> geçirilen devamı seçeneği çalışmaz, <xref:System.Threading.Tasks.TaskStatus.Canceled> ancak duruma geçer.</span><span class="sxs-lookup"><span data-stu-id="e510e-170">For example, if an antecedent goes into a <xref:System.Threading.Tasks.TaskStatus.Faulted?displayProperty=nameWithType> state, its continuation that was passed the <xref:System.Threading.Tasks.TaskContinuationOptions.NotOnFaulted?displayProperty=nameWithType> option will not run but will transition to the <xref:System.Threading.Tasks.TaskStatus.Canceled> state.</span></span>  
  
 <span data-ttu-id="e510e-171">Bir görev ve devamı aynı mantıksal işlemin iki bölümünü temsil ediyorsa, aşağıdaki örnekte gösterildiği gibi aynı iptal belirtecinizi her iki göreve de geçirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e510e-171">If a task and its continuation represent two parts of the same logical operation, you can pass the same cancellation token to both tasks, as shown in the following example.</span></span> <span data-ttu-id="e510e-172">33 ile bölünebilen ve devamına geçen bir tamsayı listesi oluşturan bir öncülden oluşur.</span><span class="sxs-lookup"><span data-stu-id="e510e-172">It consists of an antecedent that generates a list of integers that are divisible by 33, which it passes to the continuation.</span></span> <span data-ttu-id="e510e-173">Devamı sırayla listegörüntüler.</span><span class="sxs-lookup"><span data-stu-id="e510e-173">The continuation in turn displays the list.</span></span> <span data-ttu-id="e510e-174">Hem öncül hem de devamı rasgele aralıklarla düzenli olarak duraklar.</span><span class="sxs-lookup"><span data-stu-id="e510e-174">Both the antecedent and the continuation pause regularly for random intervals.</span></span> <span data-ttu-id="e510e-175">Buna ek <xref:System.Threading.Timer?displayProperty=nameWithType> olarak, bir nesne `Elapsed` beş saniyelik zaman aralığı sonra yöntemi yürütmek için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="e510e-175">In addition, a <xref:System.Threading.Timer?displayProperty=nameWithType> object is used to execute the `Elapsed` method after a five-second timeout interval.</span></span> <span data-ttu-id="e510e-176">Bu örnek, <xref:System.Threading.CancellationTokenSource.Cancel%2A?displayProperty=nameWithType> şu anda yürütülen görevin <xref:System.Threading.CancellationToken.ThrowIfCancellationRequested%2A?displayProperty=nameWithType> yöntemi çağırmasına neden olan yöntemi çağırır.</span><span class="sxs-lookup"><span data-stu-id="e510e-176">This example calls the <xref:System.Threading.CancellationTokenSource.Cancel%2A?displayProperty=nameWithType> method, which causes the currently executing task to call the <xref:System.Threading.CancellationToken.ThrowIfCancellationRequested%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="e510e-177">Yöntemin <xref:System.Threading.CancellationTokenSource.Cancel%2A?displayProperty=nameWithType> öncül veya devamı yürütüldüğünde çağrılıp çağrılmadığı rasgele oluşturulan duraklamaların süresine bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="e510e-177">Whether the <xref:System.Threading.CancellationTokenSource.Cancel%2A?displayProperty=nameWithType> method is called when the antecedent or its continuation is executing depends on the duration of the randomly generated pauses.</span></span> <span data-ttu-id="e510e-178">Öncül iptal edilirse, devamı başlamaz.</span><span class="sxs-lookup"><span data-stu-id="e510e-178">If the antecedent is canceled, the continuation will not start.</span></span> <span data-ttu-id="e510e-179">Öncül iptal edilmezse, belirteç devamını iptal etmek için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="e510e-179">If the antecedent is not canceled, the token can still be used to cancel the continuation.</span></span>  
  
 [!code-csharp[TPL_Continuations#3](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/cancellation1.cs#3)]
 [!code-vb[TPL_Continuations#3](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/cancellation1.vb#3)]  
  
 <span data-ttu-id="e510e-180">Ayrıca, devamı oluştururken <xref:System.Threading.Tasks.TaskContinuationOptions.NotOnCanceled?displayProperty=nameWithType> seçeneği belirterek, bir iptal belirteci sağlamadan, öncülü iptal edilirse, devamın yürütülmesini de engelleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e510e-180">You can also prevent a continuation from executing if its antecedent is canceled without supplying the continuation a cancellation token by specifying the <xref:System.Threading.Tasks.TaskContinuationOptions.NotOnCanceled?displayProperty=nameWithType> option when you create the continuation.</span></span> <span data-ttu-id="e510e-181">Aşağıdaki basit bir örnektir.</span><span class="sxs-lookup"><span data-stu-id="e510e-181">The following is a simple example.</span></span>  
  
 [!code-csharp[TPL_Continuations#8](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/cancellation2.cs#8)]
 [!code-vb[TPL_Continuations#8](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/cancellation2.vb#8)]  
  
 <span data-ttu-id="e510e-182">Bir devamı <xref:System.Threading.Tasks.TaskStatus.Canceled> devlet gider sonra, bu devamı için belirtilen bağlı <xref:System.Threading.Tasks.TaskContinuationOptions> olarak, takip devamı etkileyebilir.</span><span class="sxs-lookup"><span data-stu-id="e510e-182">After a continuation goes into the <xref:System.Threading.Tasks.TaskStatus.Canceled> state, it may affect continuations that follow, depending on the <xref:System.Threading.Tasks.TaskContinuationOptions> that were specified for those continuations.</span></span>  
  
 <span data-ttu-id="e510e-183">Elden çıkarılan devamlar başlamaz.</span><span class="sxs-lookup"><span data-stu-id="e510e-183">Continuations that are disposed will not start.</span></span>  
  
## <a name="continuations-and-child-tasks"></a><span data-ttu-id="e510e-184">Devamı ve Alt Görevler</span><span class="sxs-lookup"><span data-stu-id="e510e-184">Continuations and Child Tasks</span></span>  
 <span data-ttu-id="e510e-185">Bir devam, öncül ve bağlı tüm alt görevleri tamamlanana kadar çalışmaz.</span><span class="sxs-lookup"><span data-stu-id="e510e-185">A continuation does not run until the antecedent and all of its attached child tasks have completed.</span></span> <span data-ttu-id="e510e-186">Devamı, ayrılmış alt görevlerin tamamlanmasını beklemez.</span><span class="sxs-lookup"><span data-stu-id="e510e-186">The continuation does not wait for detached child tasks to finish.</span></span> <span data-ttu-id="e510e-187">Aşağıdaki iki örnek, bir devamı oluşturan bir öncül'e eklenen ve ondan ayrılan alt görevleri göstermektedir.</span><span class="sxs-lookup"><span data-stu-id="e510e-187">The following two examples illustrate child tasks that are attached to and detached from an antecedent that creates a continuation.</span></span> <span data-ttu-id="e510e-188">Aşağıdaki örnekte, devam yalnızca tüm alt görevler tamamlandıktan sonra çalışır ve örneği birden çok kez çalıştırmak her seferinde aynı çıktıyı üretir.</span><span class="sxs-lookup"><span data-stu-id="e510e-188">In the following example, the continuation runs only after all child tasks have completed, and running the example multiple times produces identical output each time.</span></span> <span data-ttu-id="e510e-189">Varsayılan olarak <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=nameWithType> <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType> yöntem varsayılan görev oluşturma seçeneği olan bir üst görev oluşturur, çünkü örnek, <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType>yöntem çağırarak öncül başlattı.</span><span class="sxs-lookup"><span data-stu-id="e510e-189">The example launches the antecedent by calling the <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=nameWithType> method, since by default the <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType> method creates a parent task whose default task creation option is <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType>.</span></span>  
  
 [!code-csharp[TPL_Continuations#9](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/attached1.cs#9)]
 [!code-vb[TPL_Continuations#9](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/attached1.vb#9)]  
  
 <span data-ttu-id="e510e-190">Ancak, alt görevler öncülden ayrılmışsa, alt görevlerin durumu ne olursa olsun, sonlandırma sona erer bitmez devam çalışır.</span><span class="sxs-lookup"><span data-stu-id="e510e-190">If child tasks are detached from the antecedent, however, the continuation runs as soon as the antecedent has terminated, regardless of the state of the child tasks.</span></span> <span data-ttu-id="e510e-191">Sonuç olarak, aşağıdaki örnekten birden çok çalıştırma, görev zamanlayıcısının her alt görevi nasıl işleyiş ettiğine bağlı olarak değişken çıktı üretebilir.</span><span class="sxs-lookup"><span data-stu-id="e510e-191">As a result, multiple runs of the following example can produce variable output that depends on how the task scheduler handled each child task.</span></span>  
  
 [!code-csharp[TPL_Continuations#10](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/detached1.cs#10)]
 [!code-vb[TPL_Continuations#10](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/detached1.vb#10)]  
  
 <span data-ttu-id="e510e-192">Öncül görevin son durumu, ekli alt görevlerin son durumuna bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="e510e-192">The final status of the antecedent task depends on the final status of any attached child tasks.</span></span> <span data-ttu-id="e510e-193">Ayrılmış alt görevlerin durumu üst öğeyi etkilemez.</span><span class="sxs-lookup"><span data-stu-id="e510e-193">The status of detached child tasks does not affect the parent.</span></span> <span data-ttu-id="e510e-194">Daha fazla bilgi için [bkz.](../../../docs/standard/parallel-programming/attached-and-detached-child-tasks.md)</span><span class="sxs-lookup"><span data-stu-id="e510e-194">For more information, see [Attached and Detached Child Tasks](../../../docs/standard/parallel-programming/attached-and-detached-child-tasks.md).</span></span>  
  
## <a name="associating-state-with-continuations"></a><span data-ttu-id="e510e-195">Devlet'i Devamı ile Ilişkilendirme</span><span class="sxs-lookup"><span data-stu-id="e510e-195">Associating State with Continuations</span></span>  
 <span data-ttu-id="e510e-196">Rasgele durumu görev devamı ile ilişkilendirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e510e-196">You can associate arbitrary state with a task continuation.</span></span> <span data-ttu-id="e510e-197">Yöntem, <xref:System.Threading.Tasks.Task.ContinueWith%2A> her devamı durumunu temsil <xref:System.Object> eden bir değer almak aşırı yüklenen sürümleri sağlar.</span><span class="sxs-lookup"><span data-stu-id="e510e-197">The <xref:System.Threading.Tasks.Task.ContinueWith%2A> method provides overloaded versions that each take an <xref:System.Object> value that represents the state of the continuation.</span></span> <span data-ttu-id="e510e-198">Daha sonra özelliği kullanarak bu <xref:System.Threading.Tasks.Task.AsyncState%2A?displayProperty=nameWithType> durum nesnesi erişebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e510e-198">You can later access this state object by using the <xref:System.Threading.Tasks.Task.AsyncState%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="e510e-199">Bir değer `null` sağlamazsanız, bu durum nesnesidir.</span><span class="sxs-lookup"><span data-stu-id="e510e-199">This state object is `null` if you do not provide a value.</span></span>  
  
 <span data-ttu-id="e510e-200">Devam durumu, TPL'yi kullanmak için [Asynchronous Programming Model(APM)](../../../docs/standard/asynchronous-programming-patterns/asynchronous-programming-model-apm.md) kullanan varolan kodu dönüştürdüğünüzde yararlıdır.</span><span class="sxs-lookup"><span data-stu-id="e510e-200">Continuation state is useful when you convert existing code that uses the [Asynchronous Programming Model (APM)](../../../docs/standard/asynchronous-programming-patterns/asynchronous-programming-model-apm.md) to use the TPL.</span></span> <span data-ttu-id="e510e-201">APM'de, genellikle **Begin**_Method_ yönteminde nesne durumu sağlar ve daha <xref:System.IAsyncResult.AsyncState%2A?displayProperty=nameWithType> sonra özelliği kullanarak bu duruma erişin.</span><span class="sxs-lookup"><span data-stu-id="e510e-201">In the APM, you typically provide object state in the **Begin**_Method_ method and later access that state by using the <xref:System.IAsyncResult.AsyncState%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="e510e-202"><xref:System.Threading.Tasks.Task.ContinueWith%2A> Yöntemi kullanarak, TPL'yi kullanmak için APM kullanan kodu dönüştürdüğünüzde bu durumu koruyabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e510e-202">By using the <xref:System.Threading.Tasks.Task.ContinueWith%2A> method, you can preserve this state when you convert code that uses the APM to use the TPL.</span></span>  
  
 <span data-ttu-id="e510e-203">Devamı durumu, Visual Studio hata <xref:System.Threading.Tasks.Task> ayıkcısındaki nesnelerle çalışırken de yararlı olabilir.</span><span class="sxs-lookup"><span data-stu-id="e510e-203">Continuation state can also be useful when you work with <xref:System.Threading.Tasks.Task> objects in the Visual Studio debugger.</span></span> <span data-ttu-id="e510e-204">Örneğin, Paralel **Görevler** penceresinde, **Görev** sütunu her görev için durum nesnesinin dize gösterimini görüntüler.</span><span class="sxs-lookup"><span data-stu-id="e510e-204">For example, in the **Parallel Tasks** window, the **Task** column displays the string representation of the state object for each task.</span></span> <span data-ttu-id="e510e-205">**Paralel Görevler** penceresi hakkında daha fazla bilgi için [görevler penceresini kullanma'ya](/visualstudio/debugger/using-the-tasks-window)bakın.</span><span class="sxs-lookup"><span data-stu-id="e510e-205">For more information about the **Parallel Tasks** window, see [Using the Tasks Window](/visualstudio/debugger/using-the-tasks-window).</span></span>  
  
 <span data-ttu-id="e510e-206">Aşağıdaki örnek, devam durumunun nasıl kullanılacağını gösterir.</span><span class="sxs-lookup"><span data-stu-id="e510e-206">The following example shows how to use continuation state.</span></span> <span data-ttu-id="e510e-207">Bu devam görevleri zinciri oluşturur.</span><span class="sxs-lookup"><span data-stu-id="e510e-207">It creates a chain of continuation tasks.</span></span> <span data-ttu-id="e510e-208">Her görev, <xref:System.DateTime> `state` <xref:System.Threading.Tasks.Task.ContinueWith%2A> yöntemin parametresi için geçerli zamanı, nesneyi sağlar.</span><span class="sxs-lookup"><span data-stu-id="e510e-208">Each task provides the current time, a <xref:System.DateTime> object, for the `state` parameter of the <xref:System.Threading.Tasks.Task.ContinueWith%2A> method.</span></span> <span data-ttu-id="e510e-209">Her <xref:System.DateTime> nesne, devam görevinin oluşturulduğu zamanı temsil eder.</span><span class="sxs-lookup"><span data-stu-id="e510e-209">Each <xref:System.DateTime> object represents the time at which the continuation task is created.</span></span> <span data-ttu-id="e510e-210">Her görev, sonucu olarak <xref:System.DateTime> görevin bittiği zamanı temsil eden ikinci bir nesne üretir.</span><span class="sxs-lookup"><span data-stu-id="e510e-210">Each task produces as its result a second <xref:System.DateTime> object that represents the time at which the task finishes.</span></span> <span data-ttu-id="e510e-211">Tüm görevler tamamlandıktan sonra, bu örnek, oluşturma süresini ve her devam görevinin bittiği zamanı görüntüler.</span><span class="sxs-lookup"><span data-stu-id="e510e-211">After all tasks finish, this example displays the creation time and the time at which each continuation task finishes.</span></span>  
  
 [!code-csharp[TPL_ContinuationState#1](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuationstate/cs/continuationstate.cs#1)]
 [!code-vb[TPL_ContinuationState#1](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuationstate/vb/continuationstate.vb#1)]  
  
## <a name="handling-exceptions-thrown-from-continuations"></a><span data-ttu-id="e510e-212">Devamlardan Atılan Özel Durumları İşleme</span><span class="sxs-lookup"><span data-stu-id="e510e-212">Handling Exceptions Thrown from Continuations</span></span>  
 <span data-ttu-id="e510e-213">Öncül-devam ilişkisi bir ebeveyn-alt ilişkisi değildir.</span><span class="sxs-lookup"><span data-stu-id="e510e-213">An antecedent-continuation relationship is not a parent-child relationship.</span></span> <span data-ttu-id="e510e-214">Devamları tarafından atılan özel durumlar öncül için yayılmaz.</span><span class="sxs-lookup"><span data-stu-id="e510e-214">Exceptions thrown by continuations are not propagated to the antecedent.</span></span> <span data-ttu-id="e510e-215">Bu nedenle, başka bir görevde bunları işleyeceğiniz gibi, devamları tarafından atılan özel durumları aşağıdaki gibi işle:</span><span class="sxs-lookup"><span data-stu-id="e510e-215">Therefore, handle exceptions thrown by continuations as you would handle them in any other task, as follows:</span></span>  
  
- <span data-ttu-id="e510e-216">Devamı beklemek <xref:System.Threading.Tasks.Task.Wait%2A>için <xref:System.Threading.Tasks.Task.WaitAll%2A>, <xref:System.Threading.Tasks.Task.WaitAny%2A> veya yöntem veya genel muadili kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e510e-216">You can use the <xref:System.Threading.Tasks.Task.Wait%2A>, <xref:System.Threading.Tasks.Task.WaitAll%2A>, or <xref:System.Threading.Tasks.Task.WaitAny%2A> method, or its generic counterpart, to wait on the continuation.</span></span> <span data-ttu-id="e510e-217">Aşağıdaki örnekte gösterildiği gibi, öncül ve devamı `try` için aynı ifadede bekleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e510e-217">You can wait for an antecedent and its continuations in the same `try` statement, as shown in the following example.</span></span>  
  
     [!code-csharp[TPL_Continuations#6](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/exception1.cs#6)]
     [!code-vb[TPL_Continuations#6](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/exception1.vb#6)]  
  
- <span data-ttu-id="e510e-218">İlk devamının özelliğini <xref:System.Threading.Tasks.Task.Exception%2A> gözlemlemek için ikinci bir devamı kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e510e-218">You can use a second continuation to observe the <xref:System.Threading.Tasks.Task.Exception%2A> property of the first continuation.</span></span> <span data-ttu-id="e510e-219">Aşağıdaki örnekte, bir görev var olmayan bir dosyadan okumaya çalışır.</span><span class="sxs-lookup"><span data-stu-id="e510e-219">In the following example, a task attempts to read from a non-existent file.</span></span> <span data-ttu-id="e510e-220">Devamı daha sonra öncül görevde özel durum hakkında bilgi görüntüler.</span><span class="sxs-lookup"><span data-stu-id="e510e-220">The continuation then displays information about the exception in the antecedent task.</span></span>  
  
     [!code-csharp[TPL_Continuations#4](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/exception2.cs#4)]
     [!code-vb[TPL_Continuations#4](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/exception2.vb#4)]  
  
     <span data-ttu-id="e510e-221"><xref:System.Threading.Tasks.TaskContinuationOptions.OnlyOnFaulted?displayProperty=nameWithType> Seçenekle çalıştırıldığı için, devamı yalnızca öncülde bir özel durum oluşursa yürütülür ve bu nedenle öncül <xref:System.Threading.Tasks.Task.Exception%2A> özelliğinin . `null`</span><span class="sxs-lookup"><span data-stu-id="e510e-221">Because it was run with the <xref:System.Threading.Tasks.TaskContinuationOptions.OnlyOnFaulted?displayProperty=nameWithType> option, the continuation executes only if an exception occurs in the antecedent, and therefore it can assume that the antecedent's <xref:System.Threading.Tasks.Task.Exception%2A> property is not `null`.</span></span> <span data-ttu-id="e510e-222">Devamı, öncülde bir özel durum atılıp atılmadığını yürütürse, aşağıdaki kod parçasının <xref:System.Threading.Tasks.Task.Exception%2A> gösterdiği gibi, öncül özelliğinin özel durumu işlemeye çalışmadan önce olup `null` olmadığını denetlemesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="e510e-222">If the continuation executes whether or not an exception is thrown in the antecedent, it would have to check whether the antecedent's <xref:System.Threading.Tasks.Task.Exception%2A> property is not `null` before attempting to handle the exception, as the following code fragment shows.</span></span>  
  
     [!code-csharp[TPL_Continuations#11](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/exception2.cs#11)]
     [!code-vb[TPL_Continuations#11](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/exception2.vb#11)]  
  
     <span data-ttu-id="e510e-223">Daha fazla bilgi için [bkz.](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md)</span><span class="sxs-lookup"><span data-stu-id="e510e-223">For more information, see [Exception Handling](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md).</span></span>  
  
- <span data-ttu-id="e510e-224">Devamı <xref:System.Threading.Tasks.TaskContinuationOptions.AttachedToParent?displayProperty=nameWithType> seçeneği kullanılarak oluşturulan ekli bir alt görev ise, özel durumları diğer ekli alt oyunda olduğu gibi, üst tarafından çağrı iş parçacığına geri yayılır.</span><span class="sxs-lookup"><span data-stu-id="e510e-224">If the continuation is an attached child task that was created by using the <xref:System.Threading.Tasks.TaskContinuationOptions.AttachedToParent?displayProperty=nameWithType> option, its exceptions will be propagated by the parent back to the calling thread, as is the case in any other attached child.</span></span> <span data-ttu-id="e510e-225">Daha fazla bilgi için [bkz.](../../../docs/standard/parallel-programming/attached-and-detached-child-tasks.md)</span><span class="sxs-lookup"><span data-stu-id="e510e-225">For more information, see [Attached and Detached Child Tasks](../../../docs/standard/parallel-programming/attached-and-detached-child-tasks.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e510e-226">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="e510e-226">See also</span></span>

- [<span data-ttu-id="e510e-227">Görev Paralel Kitaplığı (TPL)</span><span class="sxs-lookup"><span data-stu-id="e510e-227">Task Parallel Library (TPL)</span></span>](../../../docs/standard/parallel-programming/task-parallel-library-tpl.md)
