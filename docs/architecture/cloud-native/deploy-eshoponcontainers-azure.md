---
title: eShopOnContainers'ı Azure'a dağıtma
description: Azure Kubernetes hizmeti, helk ve DevSpaces kullanarak eShopOnContainers uygulamasını dağıtma.
ms.date: 04/20/2020
ms.openlocfilehash: a3eacedac946cb25cf3cced305d7921e29f0d204
ms.sourcegitcommit: 957c49696eaf048c284ef8f9f8ffeb562357ad95
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 05/07/2020
ms.locfileid: "82895592"
---
# <a name="deploying-eshoponcontainers-to-azure"></a><span data-ttu-id="78eac-103">eShopOnContainers'ı Azure'a dağıtma</span><span class="sxs-lookup"><span data-stu-id="78eac-103">Deploying eShopOnContainers to Azure</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="78eac-104">EShopOnContainers uygulaması, çeşitli Azure platformlarına dağıtılabilir.</span><span class="sxs-lookup"><span data-stu-id="78eac-104">The eShopOnContainers application can be deployed to a variety of Azure platforms.</span></span> <span data-ttu-id="78eac-105">Önerilen yaklaşım, uygulamayı Azure Kubernetes hizmetlerine (AKS) dağıtmaktır.</span><span class="sxs-lookup"><span data-stu-id="78eac-105">The recommended approach is to deploy the application to Azure Kubernetes Services (AKS).</span></span> <span data-ttu-id="78eac-106">Bir Kubernetes dağıtım aracı olan helk, dağıtım karmaşıklığını azaltmak için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="78eac-106">Helm, a Kubernetes deployment tool, is available to reduce deployment complexity.</span></span> <span data-ttu-id="78eac-107">İsteğe bağlı olarak, geliştiriciler geliştirme sürecini kolaylaştırmak için Kubernetes için Azure Dev Spaces uygulayabilir.</span><span class="sxs-lookup"><span data-stu-id="78eac-107">Optionally, developers may implement Azure Dev Spaces for Kubernetes to streamline their development process.</span></span>

## <a name="azure-kubernetes-service"></a><span data-ttu-id="78eac-108">Azure Kubernetes Service</span><span class="sxs-lookup"><span data-stu-id="78eac-108">Azure Kubernetes Service</span></span>

<span data-ttu-id="78eac-109">AKS 'de eShop barındırmak için ilk adım bir AKS kümesi oluşturmaktır.</span><span class="sxs-lookup"><span data-stu-id="78eac-109">To host eShop in AKS, the first step is to create an AKS cluster.</span></span> <span data-ttu-id="78eac-110">Bunu yapmak için, gerekli adımlarda size yol gösterecek Azure portal kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="78eac-110">To do so, you might use the Azure portal, which will walk you through the required steps.</span></span> <span data-ttu-id="78eac-111">Ayrıca, rol tabanlı Access Control (RBAC) ve uygulama yönlendirmeyi etkinleştirmek için Azure CLı 'dan bir küme oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="78eac-111">You could also create a cluster from the Azure CLI, taking care to enable Role-Based Access Control (RBAC) and application routing.</span></span> <span data-ttu-id="78eac-112">EShopOnContainers ' belgeleri kendi AKS kümenizi oluşturmak için gereken adımları ayrıntılı olarak oluşturur.</span><span class="sxs-lookup"><span data-stu-id="78eac-112">The eShopOnContainers' documentation details the steps for creating your own AKS cluster.</span></span> <span data-ttu-id="78eac-113">Oluşturulduktan sonra, Kubernetes panosundan kümeye erişip yönetebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="78eac-113">Once created, you can access and manage the cluster from the Kubernetes dashboard.</span></span>

<span data-ttu-id="78eac-114">Artık eShop uygulamasını, Held ve Tiller kullanan kümeye dağıtabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="78eac-114">You can now deploy the eShop application to the cluster leveraging Helm and Tiller.</span></span>

## <a name="deploying-to-azure-kubernetes-service-using-helm"></a><span data-ttu-id="78eac-115">Held kullanarak Azure Kubernetes hizmetine dağıtma</span><span class="sxs-lookup"><span data-stu-id="78eac-115">Deploying to Azure Kubernetes Service using Helm</span></span>

<span data-ttu-id="78eac-116">Helk, doğrudan Kubernetes ile birlikte çalışarak bir uygulama paketi Yöneticisi aracıdır.</span><span class="sxs-lookup"><span data-stu-id="78eac-116">Helm is an application package manager tool that works directly with Kubernetes.</span></span> <span data-ttu-id="78eac-117">Kubernetes uygulamalarını tanımlamanıza, yüklemenize ve yükseltmenize yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="78eac-117">It helps you define, install, and upgrade Kubernetes applications.</span></span> <span data-ttu-id="78eac-118">Basit uygulamalar özel CLı betikleri veya basit dağıtım dosyaları ile AKS 'e dağıtılabilirken, karmaşık uygulamalar çok sayıda Kubernetes nesnesi içerebilir ve Held 'den faydalanabilir.</span><span class="sxs-lookup"><span data-stu-id="78eac-118">While simple apps can be deployed to AKS with custom CLI scripts or simple deployment files, complex apps can contain many Kubernetes objects and benefit from Helm.</span></span>

<span data-ttu-id="78eac-119">Held kullanarak uygulamalar, Held paketlerinde uygulamayı ve yapılandırmayı bildirimli olarak açıklayan, Held grafikleri adlı metin tabanlı yapılandırma dosyalarını içerir.</span><span class="sxs-lookup"><span data-stu-id="78eac-119">Using Helm, applications include text-based configuration files, called Helm charts, which declaratively describe the application and configuration in Helm packages.</span></span> <span data-ttu-id="78eac-120">Grafikler, ilgili bir Kubernetes kaynakları kümesini anlatmak için standart YAML biçimli dosyaları kullanır.</span><span class="sxs-lookup"><span data-stu-id="78eac-120">Charts use standard YAML-formatted files to describe a related set of Kubernetes resources.</span></span> <span data-ttu-id="78eac-121">Bunlar, tanımladıkları uygulama kodunun yanı sıra sürümlüdür.</span><span class="sxs-lookup"><span data-stu-id="78eac-121">They're versioned alongside the application code they describe.</span></span> <span data-ttu-id="78eac-122">Hele grafikleri, tanımladıkları yüklemenin gereksinimlerine bağlı olarak basit ile karmaşık arasında değişir.</span><span class="sxs-lookup"><span data-stu-id="78eac-122">Helm Charts range from simple to complex depending on the requirements of the installation they describe.</span></span>

<span data-ttu-id="78eac-123">Held, Held grafiklerini tüketen ve komutları, Tiller adlı bir sunucu bileşenine Başlatan bir komut satırı istemci aracından oluşur.</span><span class="sxs-lookup"><span data-stu-id="78eac-123">Helm is composed of a command-line client tool, which consumes helm charts and launches commands to a server component named, Tiller.</span></span> <span data-ttu-id="78eac-124">Tiller, Kapsayıcılı iş yüklerinizin doğru sağlamasını sağlamak için Kubernetes API 'siyle iletişim kurar.</span><span class="sxs-lookup"><span data-stu-id="78eac-124">Tiller communicates with the Kubernetes API to ensure the correct provisioning of your containerized workloads.</span></span> <span data-ttu-id="78eac-125">Held, bulut Yerel Bilgi Işlem altyapısı tarafından korunur.</span><span class="sxs-lookup"><span data-stu-id="78eac-125">Helm is maintained by the Cloud-native Computing Foundation.</span></span>

<span data-ttu-id="78eac-126">Aşağıdaki YAML dosyası bir Held şablonu sunar:</span><span class="sxs-lookup"><span data-stu-id="78eac-126">The following yaml file presents a Helm template:</span></span>

```yaml
apiVersion: v1
kind: Service
metadata:
  name: {{ .Values.app.svc.marketing }}
  labels:
    app: {{ template "marketing-api.name" . }}
    chart: {{ template "marketing-api.chart" . }}
    release: {{ .Release.Name }}
    heritage: {{ .Release.Service }}
spec:
  type: {{ .Values.service.type }}
  ports:
    - port: {{ .Values.service.port }}
      targetPort: http
      protocol: TCP
      name: http
  selector:
    app: {{ template "marketing-api.name" . }}
    release: {{ .Release.Name }}
```

<span data-ttu-id="78eac-127">Şablonun bir dinamik anahtar/değer çiftleri kümesini nasıl açıklayacağını aklınızda edin.</span><span class="sxs-lookup"><span data-stu-id="78eac-127">Note how the template describes a dynamic set of key/value pairs.</span></span> <span data-ttu-id="78eac-128">Şablon çağrıldığında, küme ayraçları içine alınmış değerler diğer YAML tabanlı yapılandırma dosyalarından çekilir.</span><span class="sxs-lookup"><span data-stu-id="78eac-128">When the template is invoked, values that enclosed in curly braces are pulled in from other yaml-based configuration files.</span></span>

<span data-ttu-id="78eac-129">EShopOnContainers Held grafiklerini/k8s/Held klasöründe bulabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="78eac-129">You'll find the eShopOnContainers helm charts in the /k8s/helm folder.</span></span> <span data-ttu-id="78eac-130">Şekil 2-6, uygulamanın farklı bileşenlerinin, Held tarafından yönetilen dağıtımlar tanımlamak için kullanılan bir klasör yapısına nasıl düzenlendiğini gösterir.</span><span class="sxs-lookup"><span data-stu-id="78eac-130">Figure 2-6 shows how the different components of the application are organized into a folder structure used by helm to define and managed deployments.</span></span>

<span data-ttu-id="78eac-131">![eshoponcontainers mimari](./media/eshoponcontainers-helm-folder.png)
**Şekil 2-6**.</span><span class="sxs-lookup"><span data-stu-id="78eac-131">![eShopOnContainers Architecture](./media/eshoponcontainers-helm-folder.png)
**Figure 2-6**.</span></span> <span data-ttu-id="78eac-132">EShopOnContainers Held klasörü.</span><span class="sxs-lookup"><span data-stu-id="78eac-132">The eShopOnContainers helm folder.</span></span>

<span data-ttu-id="78eac-133">Her bir bileşen, bir `helm install` komut kullanılarak yüklenir.</span><span class="sxs-lookup"><span data-stu-id="78eac-133">Each individual component is installed using a `helm install` command.</span></span> <span data-ttu-id="78eac-134">eShop, ilgili Held grafiklerini kullanarak bileşenleri döngüye sokma ve yükleyen bir "tümünü dağıt" betiği içerir.</span><span class="sxs-lookup"><span data-stu-id="78eac-134">eShop includes a "deploy all" script that loops through and installs the components using their respective helm charts.</span></span> <span data-ttu-id="78eac-135">Sonuç, kaynak denetimindeki uygulamayla sürümlü, ekip üzerindeki herkesin tek satırlık bir betik komutuyla bir AKS kümesine dağıtabileceği, tekrarlanabilir bir işlemdir.</span><span class="sxs-lookup"><span data-stu-id="78eac-135">The result is a repeatable process, versioned with the application in source control, that anyone on the team can deploy to an AKS cluster with a one-line script command.</span></span>

> <span data-ttu-id="78eac-136">Help 'nin 2. sürümünün, Tiller Server bileşenine yönelik ihtiyacı ortadan kaldırdığına unutmayın.</span><span class="sxs-lookup"><span data-stu-id="78eac-136">Note that version 3 of Helm officially removes the need for the Tiller server component.</span></span> <span data-ttu-id="78eac-137">Bu geliştirme hakkında daha fazla bilgiyi [burada](https://medium.com/better-programming/why-is-tiller-missing-in-helm-3-2347c446714)bulabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="78eac-137">More information on this enhancement can be found [here](https://medium.com/better-programming/why-is-tiller-missing-in-helm-3-2347c446714).</span></span>

## <a name="azure-dev-spaces"></a><span data-ttu-id="78eac-138">Azure Dev Spaces</span><span class="sxs-lookup"><span data-stu-id="78eac-138">Azure Dev Spaces</span></span>

<span data-ttu-id="78eac-139">Bulutta yerel uygulamalar hızlı bir şekilde büyük ve karmaşık bir şekilde büyüyerek önemli işlem kaynaklarının çalıştırılmasını gerektirir.</span><span class="sxs-lookup"><span data-stu-id="78eac-139">Cloud-native applications can quickly grow large and complex, requiring significant compute resources to run.</span></span> <span data-ttu-id="78eac-140">Bu senaryolarda, tüm uygulama bir geliştirme makinesinde (özellikle bir dizüstü bilgisayar) barındırılamaz.</span><span class="sxs-lookup"><span data-stu-id="78eac-140">In these scenarios, the entire application can't be hosted on a development machine (especially a laptop).</span></span> <span data-ttu-id="78eac-141">Azure Dev Spaces, AKS kullanarak bu sorunu gidermek için tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="78eac-141">Azure Dev Spaces is designed to address this problem using AKS.</span></span> <span data-ttu-id="78eac-142">Geliştiricilerin, bir AKS geliştirme kümesinde uygulamanın geri kalanını barındırırken hizmetlerinin yerel bir sürümüyle çalışmasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="78eac-142">It enables developers to work with a local version of their services while hosting the rest of the application in an AKS development cluster.</span></span>

<span data-ttu-id="78eac-143">Geliştiriciler, Kapsayıcılı uygulamanın tamamını içeren bir AKS kümesinde çalışan (geliştirme) örneği paylaşır.</span><span class="sxs-lookup"><span data-stu-id="78eac-143">Developers share a running (development) instance in an AKS cluster that contains the entire containerized application.</span></span> <span data-ttu-id="78eac-144">Ancak, hizmetlerini yerel olarak geliştirmek üzere makinesinde ayarlanan kişisel alanları kullanırlar.</span><span class="sxs-lookup"><span data-stu-id="78eac-144">But they use personal spaces set up on their machine to locally develop their services.</span></span> <span data-ttu-id="78eac-145">Hazırlık yapıldığında, bağımlılıklar çoğaltılmaksızın AKS kümesindeki uçtan uca test ederler.</span><span class="sxs-lookup"><span data-stu-id="78eac-145">When ready, they test from end-to-end in the AKS cluster - without replicating dependencies.</span></span> <span data-ttu-id="78eac-146">Azure Dev Spaces, yerel makineden AKS Hizmetleri ile kod birleştirir.</span><span class="sxs-lookup"><span data-stu-id="78eac-146">Azure Dev Spaces merges code from the local machine with services in AKS.</span></span> <span data-ttu-id="78eac-147">Ekip üyeleri, değişikliklerinin gerçek bir AKS ortamında nasıl davranacağını görebilir.</span><span class="sxs-lookup"><span data-stu-id="78eac-147">Team members can see how their changes will behave in a real AKS environment.</span></span> <span data-ttu-id="78eac-148">Geliştiriciler Visual Studio 2017 veya Visual Studio Code kullanarak doğrudan Kubernetes 'te kodu hızla yineleyebilir ve hata ayıklamanıza olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="78eac-148">Developers can rapidly iterate and debug code directly in Kubernetes using Visual Studio 2017 or Visual Studio Code.</span></span>

<span data-ttu-id="78eac-149">Şekil 2-7 ' de, geliştirici Susie ' nin, Bisiklet mikro hizmetinin güncelleştirilmiş bir sürümünü geliştirme alanına dağıttığdığını görebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="78eac-149">In Figure 2-7, you can see that Developer Susie has deployed an updated version of the Bikes microservice into her dev space.</span></span> <span data-ttu-id="78eac-150">Daha sonra kendi alan adı (susie.s.dev.myapp.eus.azds.io) ile başlayan özel bir URL 'YI kullanarak yaptığı değişiklikleri test edebilir.</span><span class="sxs-lookup"><span data-stu-id="78eac-150">She's then able to test her changes using a custom URL starting with the name of her space (susie.s.dev.myapp.eus.azds.io).</span></span>

<span data-ttu-id="78eac-151">![eshoponcontainers mimari](./media/azure-devspaces-one.png)
**Şekil 2-7**.</span><span class="sxs-lookup"><span data-stu-id="78eac-151">![eShopOnContainers Architecture](./media/azure-devspaces-one.png)
**Figure 2-7**.</span></span> <span data-ttu-id="78eac-152">Geliştirici Susie, Bisiklet mikro hizmetinin kendi sürümünü dağıtır ve test eder.</span><span class="sxs-lookup"><span data-stu-id="78eac-152">Developer Susie deploys her own version of the Bikes microservice and tests it.</span></span>

<span data-ttu-id="78eac-153">Aynı zamanda, geliştirici John, rezervasyonlar mikro hizmetini özelleştirip değişiklikleri test etmek için gereklidir.</span><span class="sxs-lookup"><span data-stu-id="78eac-153">At the same time, developer John is customizing the Reservations microservice and needs to test his changes.</span></span> <span data-ttu-id="78eac-154">Şekil 2-8 ' de gösterildiği gibi, Susie değişiklikleri ile çakışmadan kendi dev alanındaki değişiklikleri dağıtır.</span><span class="sxs-lookup"><span data-stu-id="78eac-154">He deploys his changes to his own dev space without conflicting with Susie's changes as shown in Figure 2-8.</span></span> <span data-ttu-id="78eac-155">John daha sonra yaptığı kendi URL 'sini kullanarak değişikliklerini test eder (john.s.dev.myapp.eus.azds.io).</span><span class="sxs-lookup"><span data-stu-id="78eac-155">John then tests his changes using his own URL that is prefixed with the name of his space (john.s.dev.myapp.eus.azds.io).</span></span>

<span data-ttu-id="78eac-156">![eshoponcontainers mimari](./media/azure-devspaces-two.png)
**Şekil 2-8**.</span><span class="sxs-lookup"><span data-stu-id="78eac-156">![eShopOnContainers Architecture](./media/azure-devspaces-two.png)
**Figure 2-8**.</span></span> <span data-ttu-id="78eac-157">Geliştirici John, rezervasyonlar mikro hizmetinin kendi sürümünü dağıtır ve diğer geliştiricilerle çakışmadan test eder.</span><span class="sxs-lookup"><span data-stu-id="78eac-157">Developer John deploys his own version of the Reservations microservice and tests it without conflicting with other developers.</span></span>

<span data-ttu-id="78eac-158">Azure Dev Spaces kullanarak takımlar, değişiklikleri bağımsız olarak değiştirirken, dağıttığınızda ve test ederken doğrudan AKS ile çalışabilir.</span><span class="sxs-lookup"><span data-stu-id="78eac-158">Using Azure Dev Spaces, teams can work directly with AKS while independently changing, deploying, and testing their changes.</span></span> <span data-ttu-id="78eac-159">Bu yaklaşım, her geliştiricinin kendi AKS ortamları etkin olduğundan, ayrı ayrı barındırılan ortamların gereksinimini azaltır.</span><span class="sxs-lookup"><span data-stu-id="78eac-159">This approach reduces the need for separate dedicated hosted environments since every developer effectively has their own AKS environment.</span></span> <span data-ttu-id="78eac-160">Geliştiriciler, CLı kullanarak Azure Dev Spaces çalışabilir veya doğrudan Visual Studio 'dan Azure Dev Spaces için uygulamasını başlatabilir.</span><span class="sxs-lookup"><span data-stu-id="78eac-160">Developers can work with Azure Dev Spaces using its CLI or launch their application to Azure Dev Spaces directly from Visual Studio.</span></span> [<span data-ttu-id="78eac-161">Azure Dev Spaces nasıl çalıştığı ve yapılandırıldığı hakkında daha fazla bilgi edinin.</span><span class="sxs-lookup"><span data-stu-id="78eac-161">Learn more about how Azure Dev Spaces works and is configured.</span></span>](https://docs.microsoft.com/azure/dev-spaces/how-dev-spaces-works)

## <a name="azure-functions-and-logic-apps-serverless"></a><span data-ttu-id="78eac-162">Azure Işlevleri ve Logic Apps (sunucusuz)</span><span class="sxs-lookup"><span data-stu-id="78eac-162">Azure Functions and Logic Apps (Serverless)</span></span>

<span data-ttu-id="78eac-163">EShopOnContainers örneği, çevrimiçi pazarlama kampanyalarının izlenmesi için destek içerir.</span><span class="sxs-lookup"><span data-stu-id="78eac-163">The eShopOnContainers sample includes support for tracking online marketing campaigns.</span></span> <span data-ttu-id="78eac-164">Belirli bir kampanya KIMLIĞI için pazarlama kampanyası ayrıntılarını izlemek üzere bir Azure Işlevi kullanılır.</span><span class="sxs-lookup"><span data-stu-id="78eac-164">An Azure Function is used to track marketing campaign details for a given campaign ID.</span></span> <span data-ttu-id="78eac-165">Tam bir mikro hizmet oluşturmak yerine, tek bir Azure Işlevi daha basit ve yeterlidir.</span><span class="sxs-lookup"><span data-stu-id="78eac-165">Rather than creating a full microservice, a single Azure Function is simpler and sufficient.</span></span> <span data-ttu-id="78eac-166">Azure Işlevleri, özellikle Kubernetes içinde çalışacak şekilde yapılandırıldığında basit bir derleme ve dağıtım modeline sahiptir.</span><span class="sxs-lookup"><span data-stu-id="78eac-166">Azure Functions have a simple build and deployment model, especially when configured to run in Kubernetes.</span></span> <span data-ttu-id="78eac-167">İşlevin dağıtımı Azure Resource Manager (ARM) şablonları ve Azure CLı kullanılarak komut dosyası oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="78eac-167">Deploying the function is scripted using Azure Resource Manager (ARM) templates and the Azure CLI.</span></span> <span data-ttu-id="78eac-168">Bu kampanya hizmeti müşteriye açık değildir ve tek bir işlemi çağırır ve Azure Işlevleri için harika bir aday yapar.</span><span class="sxs-lookup"><span data-stu-id="78eac-168">This campaign service isn't customer-facing and invokes a single operation, making it a great candidate for Azure Functions.</span></span> <span data-ttu-id="78eac-169">İşlev, veritabanı bağlantı dizesi verileri ve görüntü tabanı URI 'SI ayarları dahil olmak üzere en az yapılandırma gerektirir.</span><span class="sxs-lookup"><span data-stu-id="78eac-169">The function requires minimal configuration, including a database connection string data and image base URI settings.</span></span> <span data-ttu-id="78eac-170">Azure Işlevlerini Azure portal yapılandırırsınız.</span><span class="sxs-lookup"><span data-stu-id="78eac-170">You configure Azure Functions in the Azure portal.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="78eac-171">[Önceki](map-eshoponcontainers-azure-services.md)
>[İleri](centralized-configuration.md)</span><span class="sxs-lookup"><span data-stu-id="78eac-171">[Previous](map-eshoponcontainers-azure-services.md)
[Next](centralized-configuration.md)</span></span>
