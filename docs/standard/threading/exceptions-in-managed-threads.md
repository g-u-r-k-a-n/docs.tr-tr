---
title: Yönetilen İş Parçacıklarında Özel Durumlar
ms.date: 03/30/2017
ms.technology: dotnet-standard
helpviewer_keywords:
- unhandled exceptions,in managed threads
- threading [.NET Framework],unhandled exceptions
- threading [.NET Framework],exceptions in managed threads
- managed threading
ms.assetid: 11294769-2e89-43cb-890e-ad4ad79cfbee
ms.openlocfilehash: 6c14c60b30f8f70aa5e888ed45d6f867154e18d8
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/15/2020
ms.locfileid: "78159656"
---
# <a name="exceptions-in-managed-threads"></a><span data-ttu-id="631ea-102">Yönetilen İş Parçacıklarında Özel Durumlar</span><span class="sxs-lookup"><span data-stu-id="631ea-102">Exceptions in Managed Threads</span></span>
<span data-ttu-id="631ea-103">.NET Framework sürüm 2.0 ile başlayarak, ortak dil çalışma süresi işlenmemiş çoğu özel durum iş parçacığı doğal olarak devam sağlar.</span><span class="sxs-lookup"><span data-stu-id="631ea-103">Starting with the .NET Framework version 2.0, the common language runtime allows most unhandled exceptions in threads to proceed naturally.</span></span> <span data-ttu-id="631ea-104">Çoğu durumda bu, işlenmemiş özel durum uygulamanın sonlandırılmasına neden olduğu anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="631ea-104">In most cases this means that the unhandled exception causes the application to terminate.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="631ea-105">Bu, işlenmemiş birçok özel durum için bir stoper sağlayan .NET Framework sürümleri 1.0 ve 1.1'den önemli bir değişikliktir — örneğin, iş parçacığı havuzu iş parçacıklarındaki işlenmemiş özel durumlar.</span><span class="sxs-lookup"><span data-stu-id="631ea-105">This is a significant change from the .NET Framework versions 1.0 and 1.1, which provide a backstop for many unhandled exceptions — for example, unhandled exceptions in thread pool threads.</span></span> <span data-ttu-id="631ea-106">Bu konunun ilerleyen saatlerinde [Önceki Sürümlerden Değişiklik'e](#ChangeFromPreviousVersions) bakın.</span><span class="sxs-lookup"><span data-stu-id="631ea-106">See [Change from Previous Versions](#ChangeFromPreviousVersions) later in this topic.</span></span>  
  
 <span data-ttu-id="631ea-107">Ortak dil çalışma süresi, program akışını denetlemek için kullanılan bazı işlenmemiş özel durumlar için bir durak sağlar:</span><span class="sxs-lookup"><span data-stu-id="631ea-107">The common language runtime provides a backstop for certain unhandled exceptions that are used for controlling program flow:</span></span>  
  
- <span data-ttu-id="631ea-108">A <xref:System.Threading.ThreadAbortException> çağrıldığı için <xref:System.Threading.Thread.Abort%2A> bir iş parçacığı atılır.</span><span class="sxs-lookup"><span data-stu-id="631ea-108">A <xref:System.Threading.ThreadAbortException> is thrown in a thread because <xref:System.Threading.Thread.Abort%2A> was called.</span></span>  
  
- <span data-ttu-id="631ea-109">İş <xref:System.AppDomainUnloadedException> parçacığının yürütüldettiği uygulama etki alanı kaldırıldığından, iş parçacığına bir iş parçacığı atılır.</span><span class="sxs-lookup"><span data-stu-id="631ea-109">An <xref:System.AppDomainUnloadedException> is thrown in a thread because the application domain in which the thread is executing is being unloaded.</span></span>  
  
- <span data-ttu-id="631ea-110">Ortak dil çalışma süresi veya ana bilgisayar işlemi, iç özel durum atarak iş parçacığı sonlandırır.</span><span class="sxs-lookup"><span data-stu-id="631ea-110">The common language runtime or a host process terminates the thread by throwing an internal exception.</span></span>  
  
 <span data-ttu-id="631ea-111">Bu özel durumlardan herhangi biri ortak dil çalışma zamanı tarafından oluşturulan iş parçacıklarında işlenmemişse, özel durum iş parçacığı sonlandırır, ancak ortak dil çalışma süresi özel durum daha fazla devam etmesine izin vermez.</span><span class="sxs-lookup"><span data-stu-id="631ea-111">If any of these exceptions are unhandled in threads created by the common language runtime, the exception terminates the thread, but the common language runtime does not allow the exception to proceed further.</span></span>  
  
 <span data-ttu-id="631ea-112">Bu özel durumlar ana iş parçacığında veya yönetilmeyen koddan çalışma zamanı giren iş parçacıklarında işlenmemişse, normal olarak devam eder ve bu da uygulamanın sonlandırılmasıyla sonuçlanır.</span><span class="sxs-lookup"><span data-stu-id="631ea-112">If these exceptions are unhandled in the main thread, or in threads that entered the runtime from unmanaged code, they proceed normally, resulting in termination of the application.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="631ea-113">Yönetilen herhangi bir kodun bir özel durum işleyicisi yükleme şansı olmadan önce çalışma zamanının işlenmemiş bir özel durum atması mümkündür.</span><span class="sxs-lookup"><span data-stu-id="631ea-113">It is possible for the runtime to throw an unhandled exception before any managed code has had a chance to install an exception handler.</span></span> <span data-ttu-id="631ea-114">Yönetilen kodun böyle bir özel durumu işleme şansı olmamasına rağmen, özel durum doğal olarak devam etmesine izin verilir.</span><span class="sxs-lookup"><span data-stu-id="631ea-114">Even though managed code had no chance to handle such an exception, the exception is allowed to proceed naturally.</span></span>  
  
## <a name="exposing-threading-problems-during-development"></a><span data-ttu-id="631ea-115">Geliştirme Sırasında İş Parçacığı Sorunlarının Açığa Çıkarılması</span><span class="sxs-lookup"><span data-stu-id="631ea-115">Exposing Threading Problems During Development</span></span>  
 <span data-ttu-id="631ea-116">İş parçacıklarının uygulamayı sonlandırmadan sessizce başarısız olması izin verildiğinde, ciddi programlama sorunları algılanmadan gidebilir.</span><span class="sxs-lookup"><span data-stu-id="631ea-116">When threads are allowed to fail silently, without terminating the application, serious programming problems can go undetected.</span></span> <span data-ttu-id="631ea-117">Bu, uzun süre çalışan hizmetler ve diğer uygulamalar için özel bir sorundur.</span><span class="sxs-lookup"><span data-stu-id="631ea-117">This is a particular problem for services and other applications which run for extended periods.</span></span> <span data-ttu-id="631ea-118">İş parçacıkları başarısız olduğunda, program durumu yavaş yavaş bozulur.</span><span class="sxs-lookup"><span data-stu-id="631ea-118">As threads fail, program state gradually becomes corrupted.</span></span> <span data-ttu-id="631ea-119">Uygulama performansı bozulabilir veya uygulama yanıt vermese dönüşebilir.</span><span class="sxs-lookup"><span data-stu-id="631ea-119">Application performance may degrade, or the application might become unresponsive.</span></span>  
  
 <span data-ttu-id="631ea-120">İşletim sistemi programı sonlandırına kadar iş parçacıklarındaki işlenmemiş özel durumların doğal olarak ilerlemesine izin vermek, geliştirme ve sınama sırasında bu tür sorunları ortaya çıkarır.</span><span class="sxs-lookup"><span data-stu-id="631ea-120">Allowing unhandled exceptions in threads to proceed naturally, until the operating system terminates the program, exposes such problems during development and testing.</span></span> <span data-ttu-id="631ea-121">Program sonlandırmalarına ilişkin hata raporları hata ayıklamayı destekler.</span><span class="sxs-lookup"><span data-stu-id="631ea-121">Error reports on program terminations support debugging.</span></span>  
  
<a name="ChangeFromPreviousVersions"></a>
## <a name="change-from-previous-versions"></a><span data-ttu-id="631ea-122">Önceki Sürümlerden Değişiklik</span><span class="sxs-lookup"><span data-stu-id="631ea-122">Change from Previous Versions</span></span>  
 <span data-ttu-id="631ea-123">En önemli değişiklik yönetilen iş parçacıkları ile ilgilidir.</span><span class="sxs-lookup"><span data-stu-id="631ea-123">The most significant change pertains to managed threads.</span></span> <span data-ttu-id="631ea-124">.NET Framework sürümleri 1.0 ve 1.1'de, ortak dil çalışma süresi aşağıdaki durumlarda işlenmemiş özel durumlar için bir stoper sağlar:</span><span class="sxs-lookup"><span data-stu-id="631ea-124">In the .NET Framework versions 1.0 and 1.1, the common language runtime provides a backstop for unhandled exceptions in the following situations:</span></span>  
  
- <span data-ttu-id="631ea-125">İş parçacığı havuzu iş parçacığı üzerinde işlenmemiş bir özel durum olarak bir şey yoktur.</span><span class="sxs-lookup"><span data-stu-id="631ea-125">There is no such thing as an unhandled exception on a thread pool thread.</span></span> <span data-ttu-id="631ea-126">Bir görev işlemediği bir özel durum attığında, çalışma zamanı özel durum yığınını konsola yazdırır ve iş parçacığı havuzuna döndürür.</span><span class="sxs-lookup"><span data-stu-id="631ea-126">When a task throws an exception that it does not handle, the runtime prints the exception stack trace to the console and then returns the thread to the thread pool.</span></span>  
  
- <span data-ttu-id="631ea-127"><xref:System.Threading.Thread> Sınıfın <xref:System.Threading.Thread.Start%2A> yöntemi yle oluşturulan bir iş parçacığı üzerinde işlenmemiş özel durum diye bir şey yoktur.</span><span class="sxs-lookup"><span data-stu-id="631ea-127">There is no such thing as an unhandled exception on a thread created with the <xref:System.Threading.Thread.Start%2A> method of the <xref:System.Threading.Thread> class.</span></span> <span data-ttu-id="631ea-128">Böyle bir iş parçacığı üzerinde çalışan kod işlemediği bir özel durum attığında, çalışma zamanı özel durum yığını nı konsola yazdırır ve iş parçacığı düzgün bir şekilde sonlandırır.</span><span class="sxs-lookup"><span data-stu-id="631ea-128">When code running on such a thread throws an exception that it does not handle, the runtime prints the exception stack trace to the console and then gracefully terminates the thread.</span></span>  
  
- <span data-ttu-id="631ea-129">Sonlandırıcı iş parçacığı üzerinde işlenmemiş bir özel durum olarak bir şey yoktur.</span><span class="sxs-lookup"><span data-stu-id="631ea-129">There is no such thing as an unhandled exception on the finalizer thread.</span></span> <span data-ttu-id="631ea-130">Bir sonlandırıcı işlemediği bir özel durum attığında, çalışma zamanı özel durum yığınıizlemesini konsola yazdırır ve sonlandırıcı iş parçacığının sonlandırıcıları çalıştırmaya devam etmesine izin verir.</span><span class="sxs-lookup"><span data-stu-id="631ea-130">When a finalizer throws an exception that it does not handle, the runtime prints the exception stack trace to the console and then allows the finalizer thread to resume running finalizers.</span></span>  
  
 <span data-ttu-id="631ea-131">Yönetilen bir iş parçacığının ön plan veya arka plan durumu bu davranışı etkilemez.</span><span class="sxs-lookup"><span data-stu-id="631ea-131">The foreground or background status of a managed thread does not affect this behavior.</span></span>  
  
 <span data-ttu-id="631ea-132">Yönetilmeyen kod kaynaklı iş parçacıkları üzerinde işlenmemiş özel durumlar için fark daha ince.</span><span class="sxs-lookup"><span data-stu-id="631ea-132">For unhandled exceptions on threads originating in unmanaged code, the difference is more subtle.</span></span> <span data-ttu-id="631ea-133">Çalışma zamanı JIT ekleme iletişim kutusu, yerel koddan geçen iş parçacıklarındaki yönetilen özel durumlar veya yerel özel durumlar için işletim sistemi iletişim kutusunu önler.</span><span class="sxs-lookup"><span data-stu-id="631ea-133">The runtime JIT-attach dialog preempts the operating system dialog for managed exceptions or native exceptions on threads that have passed through native code.</span></span> <span data-ttu-id="631ea-134">İşlem her durumda sona erer.</span><span class="sxs-lookup"><span data-stu-id="631ea-134">The process terminates in all cases.</span></span>  
  
### <a name="migrating-code"></a><span data-ttu-id="631ea-135">Geçiş Kodu</span><span class="sxs-lookup"><span data-stu-id="631ea-135">Migrating Code</span></span>  
 <span data-ttu-id="631ea-136">Genel olarak, değişiklik, düzeltilebilmeleri için daha önce tanınmayan programlama sorunlarını ortaya çıkarır.</span><span class="sxs-lookup"><span data-stu-id="631ea-136">In general, the change will expose previously unrecognized programming problems so that they can be fixed.</span></span> <span data-ttu-id="631ea-137">Ancak bazı durumlarda, programcılar iş parçacıklarını sonlandırmak için çalışma süresi stop'undan yararlanmış olabilir.</span><span class="sxs-lookup"><span data-stu-id="631ea-137">In some cases, however, programmers might have taken advantage of the runtime backstop, for example to terminate threads.</span></span> <span data-ttu-id="631ea-138">Duruma bağlı olarak, aşağıdaki göç stratejilerinden birini göz önünde bulundurmalıdırlar:</span><span class="sxs-lookup"><span data-stu-id="631ea-138">Depending on the situation, they should consider one of the following migration strategies:</span></span>  
  
- <span data-ttu-id="631ea-139">Bir sinyal geldiğinde iş parçacığı nın zarif bir şekilde çıkması için kodu yeniden yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="631ea-139">Restructure the code so the thread exits gracefully when a signal is received.</span></span>  
  
- <span data-ttu-id="631ea-140">İş <xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType> parçacığı iptal etmek için yöntemi kullanın.</span><span class="sxs-lookup"><span data-stu-id="631ea-140">Use the <xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType> method to abort the thread.</span></span>  
  
- <span data-ttu-id="631ea-141">İşlem sonlandırma işleminin devam edilebilsin diye bir iş parçacığının durdurulması gerekiyorsa, işlem çıkışında otomatik olarak sonlandırılabilmesi için iş parçacığının bir arka plan iş parçacığı haline getirin.</span><span class="sxs-lookup"><span data-stu-id="631ea-141">If a thread must be stopped so that process termination can proceed, make the thread a background thread so that it is automatically terminated on process exit.</span></span>  
  
 <span data-ttu-id="631ea-142">Her durumda, strateji özel durumlar için tasarım yönergelerine uymalıdır.</span><span class="sxs-lookup"><span data-stu-id="631ea-142">In all cases, the strategy should follow the design guidelines for exceptions.</span></span> <span data-ttu-id="631ea-143">[Özel Durumlar için Tasarım Yönergeleri'ne](../../../docs/standard/design-guidelines/exceptions.md)bakın.</span><span class="sxs-lookup"><span data-stu-id="631ea-143">See [Design Guidelines for Exceptions](../../../docs/standard/design-guidelines/exceptions.md).</span></span>  
  
### <a name="application-compatibility-flag"></a><span data-ttu-id="631ea-144">Uygulama Uyumluluk Bayrağı</span><span class="sxs-lookup"><span data-stu-id="631ea-144">Application Compatibility Flag</span></span>  
 <span data-ttu-id="631ea-145">Geçici bir uyumluluk önlemi olarak, yöneticiler uygulama `<runtime>` yapılandırma dosyasının bölümüne bir uyumluluk bayrağı yerzesin.</span><span class="sxs-lookup"><span data-stu-id="631ea-145">As a temporary compatibility measure, administrators can place a compatibility flag in the `<runtime>` section of the application configuration file.</span></span> <span data-ttu-id="631ea-146">Bu, ortak dil çalışma zamanının 1.0 ve 1.1 sürümlerinin davranışına geri dönülmesine neden olur.</span><span class="sxs-lookup"><span data-stu-id="631ea-146">This causes the common language runtime to revert to the behavior of versions 1.0 and 1.1.</span></span>  
  
```xml  
<legacyUnhandledExceptionPolicy enabled="1"/>  
```  
  
## <a name="host-override"></a><span data-ttu-id="631ea-147">Ana Bilgisayar Geçersiz Kılma</span><span class="sxs-lookup"><span data-stu-id="631ea-147">Host Override</span></span>  
 <span data-ttu-id="631ea-148">.NET Framework sürüm 2.0'da, yönetilmeyen bir ana bilgisayar, ortak dil çalışma zamanının varsayılan işlenmemiş özel durum ilkesini geçersiz kılmak için Barındırma API'sindeki [ICLRPolicyManager](../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-interface.md) arabirimini kullanabilir.</span><span class="sxs-lookup"><span data-stu-id="631ea-148">In the .NET Framework version 2.0, an unmanaged host can use the [ICLRPolicyManager](../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-interface.md) interface in the Hosting API to override the default unhandled exception policy of the common language runtime.</span></span> <span data-ttu-id="631ea-149">[ICLRPolicyManager::SetUnhandledExceptionPolicy](../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-setunhandledexceptionpolicy-method.md) işlevi işlenmemiş özel durumlar için ilke ayarlamak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="631ea-149">The [ICLRPolicyManager::SetUnhandledExceptionPolicy](../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-setunhandledexceptionpolicy-method.md) function is used to set the policy for unhandled exceptions.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="631ea-150">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="631ea-150">See also</span></span>

- [<span data-ttu-id="631ea-151">Yönetilen İş Parçacığı Oluşturma Temelleri</span><span class="sxs-lookup"><span data-stu-id="631ea-151">Managed Threading Basics</span></span>](../../../docs/standard/threading/managed-threading-basics.md)
