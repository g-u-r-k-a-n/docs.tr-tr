---
description: 'Daha fazla bilgi edinin: akış Ileti aktarımı'
title: İleti Aktarma Akışı
ms.date: 03/30/2017
ms.assetid: 72a47a51-e5e7-4b76-b24a-299d51e0ae5a
ms.openlocfilehash: 282b16850e4babe73207e3f3e1a8bd5da24c70cf
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 02/06/2021
ms.locfileid: "99793395"
---
# <a name="streaming-message-transfer"></a><span data-ttu-id="daf77-103">İleti Aktarma Akışı</span><span class="sxs-lookup"><span data-stu-id="daf77-103">Streaming Message Transfer</span></span>

<span data-ttu-id="daf77-104">Windows Communication Foundation (WCF) aktarımları, iletileri aktarmaya yönelik iki modu destekler:</span><span class="sxs-lookup"><span data-stu-id="daf77-104">Windows Communication Foundation (WCF) transports support two modes for transferring messages:</span></span>  
  
- <span data-ttu-id="daf77-105">Arabelleğe alınan aktarımlar, aktarım tamamlanana kadar tüm iletiyi bir bellek arabelleğine tutar.</span><span class="sxs-lookup"><span data-stu-id="daf77-105">Buffered transfers hold the entire message in a memory buffer until the transfer is complete.</span></span> <span data-ttu-id="daf77-106">Bir alıcının okuyabilmesi için, arabelleğe alınmış bir iletinin tamamen teslim edilmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="daf77-106">A buffered message must be completely delivered before a receiver can read it.</span></span>  
  
- <span data-ttu-id="daf77-107">Akışlı aktarımlar, iletiyi bir akış olarak kullanıma sunar.</span><span class="sxs-lookup"><span data-stu-id="daf77-107">Streamed transfers expose the message as a stream.</span></span> <span data-ttu-id="daf77-108">Alıcı, tamamen teslim edilmeden önce iletiyi işlemeye başlar.</span><span class="sxs-lookup"><span data-stu-id="daf77-108">The receiver starts processing the message before it is completely delivered.</span></span>  
  
- <span data-ttu-id="daf77-109">Akışlı aktarımlar, büyük bellek arabelleklerinin gereksinimini ortadan kaldırarak bir hizmetin ölçeklenebilirliğini iyileştirebilir.</span><span class="sxs-lookup"><span data-stu-id="daf77-109">Streamed transfers can improve the scalability of a service by eliminating the requirement for large memory buffers.</span></span> <span data-ttu-id="daf77-110">Aktarım modunun değiştirilmesi, ölçeklenebilirliği artırmak için, aktarılmakta olan iletilerin boyutuna bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="daf77-110">Whether changing the transfer mode improves scalability depends on the size of the messages being transferred.</span></span> <span data-ttu-id="daf77-111">Büyük ileti boyutları akan aktarımları kullanmayı tercih eder.</span><span class="sxs-lookup"><span data-stu-id="daf77-111">Large message sizes favor using streamed transfers.</span></span>  
  
 <span data-ttu-id="daf77-112">Varsayılan olarak, HTTP, TCP/IP ve adlandırılmış kanal aktarımları, arabelleğe alınmış aktarımları kullanır.</span><span class="sxs-lookup"><span data-stu-id="daf77-112">By default, the HTTP, TCP/IP, and named pipe transports use buffered transfers.</span></span> <span data-ttu-id="daf77-113">Bu belgede, Bu aktarımların arabelleğe alınan aktarım modundan akışlı aktarım moduna nasıl değiştirileceği ve bunu yapmanın sonuçları açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="daf77-113">This document describes how to switch these transports from a buffered to streamed transfer mode and the consequences of doing so.</span></span>  
  
## <a name="enabling-streamed-transfers"></a><span data-ttu-id="daf77-114">Akışlı aktarımları etkinleştirme</span><span class="sxs-lookup"><span data-stu-id="daf77-114">Enabling Streamed Transfers</span></span>  

 <span data-ttu-id="daf77-115">Arabelleğe alınan ve akış aktarım modları arasında seçim yapmak, taşımanın bağlama öğesinde yapılır.</span><span class="sxs-lookup"><span data-stu-id="daf77-115">Selecting between buffered and streamed transfer modes is done on the binding element of the transport.</span></span> <span data-ttu-id="daf77-116">Binding öğesi,,, <xref:System.ServiceModel.TransferMode> veya olarak ayarlanabilir bir özelliğine sahiptir `Buffered` `Streamed` `StreamedRequest` `StreamedResponse` .</span><span class="sxs-lookup"><span data-stu-id="daf77-116">The binding element has a <xref:System.ServiceModel.TransferMode> property that can be set to `Buffered`, `Streamed`, `StreamedRequest`, or `StreamedResponse`.</span></span> <span data-ttu-id="daf77-117">Aktarım modunun, `Streamed` her iki yönde de akış iletişimini sağlamak üzere ayarlanması.</span><span class="sxs-lookup"><span data-stu-id="daf77-117">Setting the transfer mode to `Streamed` enables streaming communication in both directions.</span></span> <span data-ttu-id="daf77-118">Aktarım modunu `StreamedRequest` `StreamedResponse` yalnızca belirtilen yönde veya akış iletişimini için olarak ayarlama.</span><span class="sxs-lookup"><span data-stu-id="daf77-118">Setting the transfer mode to `StreamedRequest` or `StreamedResponse` enables streaming communication in the indicated direction only.</span></span>  
  
 <span data-ttu-id="daf77-119"><xref:System.ServiceModel.BasicHttpBinding>, <xref:System.ServiceModel.NetTcpBinding> Ve <xref:System.ServiceModel.NetNamedPipeBinding> bağlamaları özelliğini kullanıma sunar <xref:System.ServiceModel.TransferMode> .</span><span class="sxs-lookup"><span data-stu-id="daf77-119">The <xref:System.ServiceModel.BasicHttpBinding>, <xref:System.ServiceModel.NetTcpBinding>, and <xref:System.ServiceModel.NetNamedPipeBinding> bindings expose the <xref:System.ServiceModel.TransferMode> property.</span></span> <span data-ttu-id="daf77-120">Diğer aktarımlar için, aktarım modunu ayarlamak üzere özel bir bağlama oluşturmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="daf77-120">For other transports, you must create a custom binding to set the transfer mode.</span></span>  
  
 <span data-ttu-id="daf77-121">Ara belleğe alınmış veya akış aktarımları kullanma kararı, uç noktanın yerel bir karardır.</span><span class="sxs-lookup"><span data-stu-id="daf77-121">The decision to use either buffered or streamed transfers is a local decision of the endpoint.</span></span> <span data-ttu-id="daf77-122">HTTP aktarımları için, aktarım modu bir bağlantı veya sunuculara ve diğer aracılar arasında yayılmaz.</span><span class="sxs-lookup"><span data-stu-id="daf77-122">For HTTP transports, the transfer mode does not propagate across a connection, or to servers and other intermediaries.</span></span> <span data-ttu-id="daf77-123">Aktarım modunun ayarlanması, hizmet arabiriminin açıklamasına yansıtılmaz.</span><span class="sxs-lookup"><span data-stu-id="daf77-123">Setting the transfer mode is not reflected in the description of the service interface.</span></span> <span data-ttu-id="daf77-124">Bir hizmet için istemci sınıfı oluşturduktan sonra, modu ayarlamak için akışlı aktarımlarla kullanılması amaçlanan hizmetler için yapılandırma dosyasını düzenlemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="daf77-124">After generating a client class for a service, you must edit the configuration file for services intended to be used with streamed transfers to set the mode.</span></span> <span data-ttu-id="daf77-125">TCP ve adlandırılmış kanal aktarımları için, aktarım modu bir ilke onaylama işlemi olarak dağıtılır.</span><span class="sxs-lookup"><span data-stu-id="daf77-125">For TCP and named pipe transports, the transfer mode is propagated as a policy assertion.</span></span>  
  
 <span data-ttu-id="daf77-126">Kod örnekleri için bkz. [nasıl yapılır: akışı etkinleştirme](how-to-enable-streaming.md).</span><span class="sxs-lookup"><span data-stu-id="daf77-126">For code samples, see [How to: Enable Streaming](how-to-enable-streaming.md).</span></span>  
  
## <a name="enabling-asynchronous-streaming"></a><span data-ttu-id="daf77-127">Zaman uyumsuz akışı etkinleştirme</span><span class="sxs-lookup"><span data-stu-id="daf77-127">Enabling Asynchronous Streaming</span></span>  

 <span data-ttu-id="daf77-128">Zaman uyumsuz akışı etkinleştirmek için,  <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior> uç nokta davranışını hizmet konağına ekleyin ve <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior.AsynchronousSendEnabled%2A> özelliğini olarak ayarlayın `true` .</span><span class="sxs-lookup"><span data-stu-id="daf77-128">To enable asynchronous streaming, add the  <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior> endpoint behavior to the service host and set its <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior.AsynchronousSendEnabled%2A> property to `true`.</span></span>  
  
 <span data-ttu-id="daf77-129">WCF 'nin bu sürümü, gönderme tarafında gerçek zaman uyumsuz akış özelliğini de de de ektir.</span><span class="sxs-lookup"><span data-stu-id="daf77-129">This version of WCF also adde the capability of true asynchronous streaming on the send side.</span></span> <span data-ttu-id="daf77-130">Bu, hizmetin bir kısmını okurken yavaş olan birden çok istemciye akış yaptığı senaryolarda hizmetin ölçeklenebilirliğini geliştirir; büyük olasılıkla ağ tıkanıklığı nedeniyle veya hiç okunmayan.</span><span class="sxs-lookup"><span data-stu-id="daf77-130">This improves scalability of the service in scenarios where it is streaming messages to multiple clients some of which are slow in reading; possibly due to network congestion or are not reading at all.</span></span> <span data-ttu-id="daf77-131">Bu senaryolarda, WCF artık istemci başına hizmette bireysel iş parçacıklarını engeller.</span><span class="sxs-lookup"><span data-stu-id="daf77-131">In these scenarios WCF no longer blocks individual threads on the service per client.</span></span> <span data-ttu-id="daf77-132">Bu, hizmetin daha fazla istemciyi işleyebilmesini sağlar ve bu sayede hizmetin ölçeklenebilirliğini geliştirir.</span><span class="sxs-lookup"><span data-stu-id="daf77-132">This ensures that the service is able to process many more clients thereby improving the scalability of the service.</span></span>  
  
## <a name="restrictions-on-streamed-transfers"></a><span data-ttu-id="daf77-133">Akış aktarımları için kısıtlamalar</span><span class="sxs-lookup"><span data-stu-id="daf77-133">Restrictions on Streamed Transfers</span></span>  

 <span data-ttu-id="daf77-134">Akan aktarım modunun kullanılması, çalışma süresinin ek kısıtlamalar zorlamasına neden olur.</span><span class="sxs-lookup"><span data-stu-id="daf77-134">Using the streamed transfer mode causes the run time to enforce additional restrictions.</span></span>  
  
 <span data-ttu-id="daf77-135">Akışlı bir aktarımda oluşan işlemler, en fazla bir giriş veya çıkış parametresi olan bir sözleşmeye sahip olabilir.</span><span class="sxs-lookup"><span data-stu-id="daf77-135">Operations that occur across a streamed transport can have a contract with at most one input or output parameter.</span></span> <span data-ttu-id="daf77-136">Bu parametre ileti gövdesinin tamamına karşılık gelir ve bir <xref:System.ServiceModel.Channels.Message> , türetilmiş türü <xref:System.IO.Stream> veya bir uygulama olmalıdır <xref:System.Xml.Serialization.IXmlSerializable> .</span><span class="sxs-lookup"><span data-stu-id="daf77-136">That parameter corresponds to the entire body of the message and must be a <xref:System.ServiceModel.Channels.Message>, a derived type of <xref:System.IO.Stream>, or an <xref:System.Xml.Serialization.IXmlSerializable> implementation.</span></span> <span data-ttu-id="daf77-137">Bir işlem için dönüş değeri olması, çıkış parametresine sahip olmaya eşdeğerdir.</span><span class="sxs-lookup"><span data-stu-id="daf77-137">Having a return value for an operation is equivalent to having an output parameter.</span></span>  
  
 <span data-ttu-id="daf77-138">Güvenilir Mesajlaşma, işlemler ve SOAP ileti düzeyi güvenliği gibi bazı WCF özellikleri, iletimlere yönelik arabelleğe alma iletilerini kullanır.</span><span class="sxs-lookup"><span data-stu-id="daf77-138">Some WCF features, such as reliable messaging, transactions, and SOAP message-level security, rely on buffering messages for transmissions.</span></span> <span data-ttu-id="daf77-139">Bu özelliklerin kullanılması, akış kullanılarak kazanılan performans avantajlarını azaltabilir veya ortadan kaldırabilir.</span><span class="sxs-lookup"><span data-stu-id="daf77-139">Using these features may reduce or eliminate the performance benefits gained by using streaming.</span></span> <span data-ttu-id="daf77-140">Akışlı bir taşımanın güvenliğini sağlamak için yalnızca aktarım düzeyi güvenlik kullanın veya aktarım düzeyi güvenlik ' i ve yalnızca kimlik doğrulama iletisi güvenliği ' ni kullanın.</span><span class="sxs-lookup"><span data-stu-id="daf77-140">To secure a streamed transport, use transport-level security only or use transport-level security plus authentication-only message security.</span></span>  
  
 <span data-ttu-id="daf77-141">Aktarım modu akış olarak ayarlandığında bile SOAP üstbilgileri her zaman arabelleğe alınır.</span><span class="sxs-lookup"><span data-stu-id="daf77-141">SOAP headers are always buffered, even when the transfer mode is set to streamed.</span></span> <span data-ttu-id="daf77-142">İleti üstbilgileri, `MaxBufferSize` Aktarım kotasının boyutunu aşmamalıdır.</span><span class="sxs-lookup"><span data-stu-id="daf77-142">The headers for a message must not exceed the size of the `MaxBufferSize` transport quota.</span></span> <span data-ttu-id="daf77-143">Bu ayar hakkında daha fazla bilgi için bkz. [Aktarım kotaları](transport-quotas.md).</span><span class="sxs-lookup"><span data-stu-id="daf77-143">For more information about this setting, see [Transport Quotas](transport-quotas.md).</span></span>  
  
## <a name="differences-between-buffered-and-streamed-transfers"></a><span data-ttu-id="daf77-144">Arabellekli ve akışlı aktarımlar arasındaki farklılıklar</span><span class="sxs-lookup"><span data-stu-id="daf77-144">Differences Between Buffered and Streamed Transfers</span></span>  

 <span data-ttu-id="daf77-145">Aktarım modunun arabelleğe alınıp akışlı olarak değiştirilmesi, TCP ve adlandırılmış kanal taşımalarının yerel kanal şeklini de değiştirir.</span><span class="sxs-lookup"><span data-stu-id="daf77-145">Changing the transfer mode from buffered to streamed also changes the native channel shape of the TCP and named pipe transports.</span></span> <span data-ttu-id="daf77-146">Arabelleğe alınan aktarımlar için, yerel kanal şekli olur <xref:System.ServiceModel.Channels.IDuplexSessionChannel> .</span><span class="sxs-lookup"><span data-stu-id="daf77-146">For buffered transfers, the native channel shape is <xref:System.ServiceModel.Channels.IDuplexSessionChannel>.</span></span> <span data-ttu-id="daf77-147">Akışlı aktarımlar için, yerel kanallar ve ' <xref:System.ServiceModel.Channels.IRequestChannel> dir <xref:System.ServiceModel.Channels.IReplyChannel> .</span><span class="sxs-lookup"><span data-stu-id="daf77-147">For streamed transfers, the native channels are <xref:System.ServiceModel.Channels.IRequestChannel> and <xref:System.ServiceModel.Channels.IReplyChannel>.</span></span> <span data-ttu-id="daf77-148">Bu taşımaları doğrudan kullanan mevcut bir uygulamada (bir hizmet sözleşmesi aracılığıyla değil) aktarım modunun değiştirilmesi, kanal fabrikaları ve dinleyicileri için beklenen kanal şeklinin değiştirilmesini gerektirir.</span><span class="sxs-lookup"><span data-stu-id="daf77-148">Changing the transfer mode in an existing application that uses these transports directly (that is, not through a service contract) requires changing the expected channel shape for channel factories and listeners.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="daf77-149">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="daf77-149">See also</span></span>

- [<span data-ttu-id="daf77-150">Nasıl yapılır: Akışı Etkinleştirme</span><span class="sxs-lookup"><span data-stu-id="daf77-150">How to: Enable Streaming</span></span>](how-to-enable-streaming.md)
