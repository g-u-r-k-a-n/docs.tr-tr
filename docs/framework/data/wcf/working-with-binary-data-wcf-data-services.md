---
title: Ikili verilerle çalışma (WCF Veri Hizmetleri)
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, binary data
- WCF Data Services, streams
ms.assetid: aeccc45c-d5c5-4671-ad63-a492ac8043ac
ms.openlocfilehash: 3c391e641df52d9143630406a40e17c6bc853865
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 09/15/2020
ms.locfileid: "90551757"
---
# <a name="working-with-binary-data-wcf-data-services"></a><span data-ttu-id="4ad1a-102">Ikili verilerle çalışma (WCF Veri Hizmetleri)</span><span class="sxs-lookup"><span data-stu-id="4ad1a-102">Working with Binary Data (WCF Data Services)</span></span>

<span data-ttu-id="4ad1a-103">WCF Veri Hizmetleri istemci kitaplığı, aşağıdaki yollarla bir açık veri Protokolü (OData) akışından ikili verileri almanızı ve güncelleştirmenizi sağlar:</span><span class="sxs-lookup"><span data-stu-id="4ad1a-103">The WCF Data Services client library enables you to retrieve and update binary data from an Open Data Protocol (OData) feed in one of the following ways:</span></span>

- <span data-ttu-id="4ad1a-104">Bir varlığın ilkel tür özelliği olarak.</span><span class="sxs-lookup"><span data-stu-id="4ad1a-104">As a primitive type property of an entity.</span></span> <span data-ttu-id="4ad1a-105">Bu, belleğe kolayca yüklenebilen küçük ikili veri nesneleriyle çalışma için önerilen yöntemdir.</span><span class="sxs-lookup"><span data-stu-id="4ad1a-105">This is the recommended method for working with small binary data objects that can be easily loaded into memory.</span></span> <span data-ttu-id="4ad1a-106">Bu durumda, ikili özelliği, veri modeli tarafından kullanıma sunulan bir varlık özelliğidir ve veri hizmeti yanıt iletisinde temel 64 ikili kodlanmış XML olarak seri hale getirir.</span><span class="sxs-lookup"><span data-stu-id="4ad1a-106">In this case, the binary property is an entity property exposed by the data model, and the data service serializes the binary data as base-64 binary encoded XML in the response message.</span></span>

- <span data-ttu-id="4ad1a-107">Ayrı bir ikili kaynak akışı olarak.</span><span class="sxs-lookup"><span data-stu-id="4ad1a-107">As a separate binary resource stream.</span></span> <span data-ttu-id="4ad1a-108">Bu, bir fotoğrafı, videoyu veya herhangi bir tür ikili kodlu veriyi temsil eden ikili büyük nesne (BLOB) verilerine erişmek ve bunları değiştirmek için önerilen yöntemdir.</span><span class="sxs-lookup"><span data-stu-id="4ad1a-108">This is the recommended method for accessing and changing binary large object (BLOB) data that may represent a photo, video, or any other type of binary encoded data.</span></span>

<span data-ttu-id="4ad1a-109">WCF Veri Hizmetleri, OData 'de tanımlanan HTTP kullanarak ikili verilerin akışını uygular.</span><span class="sxs-lookup"><span data-stu-id="4ad1a-109">WCF Data Services implements the streaming of binary data by using HTTP as defined in the OData.</span></span> <span data-ttu-id="4ad1a-110">Bu mekanizmaya, ikili veriler, ancak medya bağlantı girişi olarak adlandırılan bir varlıkla ilişkili olan bir medya kaynağı olarak değerlendirilir.</span><span class="sxs-lookup"><span data-stu-id="4ad1a-110">In this mechanism, binary data is treated as a media resource that is separate from but related to an entity, which is called a media link entry.</span></span> <span data-ttu-id="4ad1a-111">Daha fazla bilgi için bkz. [Akış sağlayıcısı](streaming-provider-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="4ad1a-111">For more information, see [Streaming Provider](streaming-provider-wcf-data-services.md).</span></span>

> [!TIP]
> <span data-ttu-id="4ad1a-112">Fotoğrafları depolayan bir OData hizmetinden ikili görüntü dosyalarını yükleyen Windows Presentation Foundation (WPF) istemci uygulamasının nasıl oluşturulacağı hakkında adım adım bir örnek için bkz. Post [Data Services akış sağlayıcısı serisi-2. Bölüm: Istemciden medya kaynak akışına erişme](/archive/blogs/astoriateam/data-services-streaming-provider-series-part-2-accessing-a-media-resource-stream-from-the-client).</span><span class="sxs-lookup"><span data-stu-id="4ad1a-112">For a step-by-step example of how to create a Windows Presentation Foundation (WPF) client application that downloads binary image files from an OData service that stores photos, see the post [Data Services Streaming Provider Series-Part 2: Accessing a Media Resource Stream from the Client](/archive/blogs/astoriateam/data-services-streaming-provider-series-part-2-accessing-a-media-resource-stream-from-the-client).</span></span> <span data-ttu-id="4ad1a-113">Blog gönderisine özel akış fotoğrafı veri hizmeti için örnek kodu indirmek için bkz. GitHub 'da [akış fotoğrafı veri hizmeti örneği](https://github.com/microsoftarchive/msdn-code-gallery-community-s-z/tree/master/Streaming%20Photo%20OData%20Service%20Sample) .</span><span class="sxs-lookup"><span data-stu-id="4ad1a-113">To download the sample code for the stream photo data service featured in the blog post, see the [Streaming Photo Data Service Sample](https://github.com/microsoftarchive/msdn-code-gallery-community-s-z/tree/master/Streaming%20Photo%20OData%20Service%20Sample) in GitHub.</span></span>

## <a name="entity-metadata"></a><span data-ttu-id="4ad1a-114">Varlık meta verileri</span><span class="sxs-lookup"><span data-stu-id="4ad1a-114">Entity Metadata</span></span>

<span data-ttu-id="4ad1a-115">İlişkili bir medya kaynağı akışına sahip bir varlık, veri hizmeti meta verilerinde `HasStream` medya bağlantısı girişi olan bir varlık türüne uygulanan özniteliğe göre belirtilir.</span><span class="sxs-lookup"><span data-stu-id="4ad1a-115">An entity that has a related media resource stream is indicated in the data service metadata by the `HasStream` attribute applied to an entity type that is the media link entry.</span></span> <span data-ttu-id="4ad1a-116">Aşağıdaki örnekte, `PhotoInfo` varlık, ilişkili bir medya kaynağına sahip olan ve özniteliğiyle belirtilen bir medya bağlantı girişi `HasStream` .</span><span class="sxs-lookup"><span data-stu-id="4ad1a-116">In the following example, the `PhotoInfo` entity is a media link entry that has a related media resource, indicated by the `HasStream` attribute.</span></span>

[!code-xml[Astoria Photo Streaming Service#HasStream](../../../../samples/snippets/xml/VS_Snippets_Misc/astoria_photo_streaming_service/xml/photodata.edmx#hasstream)]

<span data-ttu-id="4ad1a-117">Bu konudaki geri kalan örneklerde, medya kaynağı akışına nasıl erişebileceğiniz ve değiştirileceği gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="4ad1a-117">The remaining examples in this topic show how to access and change the media resource stream.</span></span> <span data-ttu-id="4ad1a-118">WCF Veri Hizmetleri istemci kitaplığı 'nı kullanarak bir .NET Framework istemci uygulamasında medya kaynak akışının nasıl kullanılacağına ilişkin tüm bir örnek için, [Istemciden medya kaynak akışına erişme](/archive/blogs/astoriateam/data-services-streaming-provider-series-part-2-accessing-a-media-resource-stream-from-the-client)gönderisini inceleyin.</span><span class="sxs-lookup"><span data-stu-id="4ad1a-118">For a complete example of how to consume a media resource stream in a .NET Framework client application by using the WCF Data Services client library, see the post [Accessing a Media Resource Stream from the Client](/archive/blogs/astoriateam/data-services-streaming-provider-series-part-2-accessing-a-media-resource-stream-from-the-client).</span></span>

## <a name="accessing-the-binary-resource-stream"></a><span data-ttu-id="4ad1a-119">Ikili kaynak akışına erişme</span><span class="sxs-lookup"><span data-stu-id="4ad1a-119">Accessing the Binary Resource Stream</span></span>

<span data-ttu-id="4ad1a-120">WCF Veri Hizmetleri istemci kitaplığı, OData tabanlı bir veri hizmetinden ikili kaynak akışlarına erişmek için yöntemler sağlar.</span><span class="sxs-lookup"><span data-stu-id="4ad1a-120">The WCF Data Services client library provides methods for accessing binary resource streams from an OData-based data service.</span></span> <span data-ttu-id="4ad1a-121">Bir medya kaynağı indirilirken, Medya kaynağının URI 'sini kullanabilir veya medya kaynağı verilerinin kendisini içeren bir ikili akış alabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4ad1a-121">When downloading a media resource, you can either use the URI of the media resource or you can get a binary stream that contains the media resource data itself.</span></span> <span data-ttu-id="4ad1a-122">Ayrıca, medya kaynağı verilerini ikili akış olarak karşıya yükleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4ad1a-122">You can also upload media resource data as a binary stream.</span></span>

> [!TIP]
> <span data-ttu-id="4ad1a-123">Fotoğrafları depolayan bir OData hizmetinden ikili görüntü dosyalarını yükleyen Windows Presentation Foundation (WPF) istemci uygulamasının nasıl oluşturulacağı hakkında adım adım bir örnek için bkz. Post [Data Services akış sağlayıcısı serisi-2. Bölüm: Istemciden medya kaynak akışına erişme](/archive/blogs/astoriateam/data-services-streaming-provider-series-part-2-accessing-a-media-resource-stream-from-the-client).</span><span class="sxs-lookup"><span data-stu-id="4ad1a-123">For a step-by-step example of how to create a Windows Presentation Foundation (WPF) client application that downloads binary image files from an OData service that stores photos, see the post [Data Services Streaming Provider Series-Part 2: Accessing a Media Resource Stream from the Client](/archive/blogs/astoriateam/data-services-streaming-provider-series-part-2-accessing-a-media-resource-stream-from-the-client).</span></span> <span data-ttu-id="4ad1a-124">Blog gönderisine özel akış fotoğrafı veri hizmeti için örnek kodu indirmek için bkz. GitHub 'da [akış fotoğrafı veri hizmeti örneği](https://github.com/microsoftarchive/msdn-code-gallery-community-s-z/tree/master/Streaming%20Photo%20OData%20Service%20Sample) .</span><span class="sxs-lookup"><span data-stu-id="4ad1a-124">To download the sample code for the stream photo data service featured in the blog post, see the [Streaming Photo Data Service Sample](https://github.com/microsoftarchive/msdn-code-gallery-community-s-z/tree/master/Streaming%20Photo%20OData%20Service%20Sample) in GitHub.</span></span>

### <a name="getting-the-uri-of-the-binary-stream"></a><span data-ttu-id="4ad1a-125">Ikili akışın URI 'sini alma</span><span class="sxs-lookup"><span data-stu-id="4ad1a-125">Getting the URI of the Binary Stream</span></span>

<span data-ttu-id="4ad1a-126">Görüntüler ve diğer medya dosyaları gibi belirli medya kaynağı türlerini alırken, uygulamanızda, ikili veri akışının kendisini işlemeye kıyasla Medya kaynağının URI 'sini kullanmak genellikle daha kolay olur.</span><span class="sxs-lookup"><span data-stu-id="4ad1a-126">When retrieving certain types of media resources, such as images and other media files, it is often easier to use the URI of the media resource in your application than handling the binary data stream itself.</span></span> <span data-ttu-id="4ad1a-127">Medya verme bağlantı girdisiyle ilişkili bir kaynak akışının URI 'sini almak için, <xref:System.Data.Services.Client.DataServiceContext.GetReadStreamUri%2A> <xref:System.Data.Services.Client.DataServiceContext> varlığı izleyen örnekte yöntemini çağırmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="4ad1a-127">To get the URI of a resource stream associated with a give media link entry, you must call the <xref:System.Data.Services.Client.DataServiceContext.GetReadStreamUri%2A> method on the <xref:System.Data.Services.Client.DataServiceContext> instance that is tracking the entity.</span></span> <span data-ttu-id="4ad1a-128">Aşağıdaki örnek, <xref:System.Data.Services.Client.DataServiceContext.GetReadStreamUri%2A> istemcisinde yeni bir görüntü oluşturmak için kullanılan bir medya kaynak AKıŞıNıN URI 'sini almak için yönteminin nasıl çağrılacağını göstermektedir:</span><span class="sxs-lookup"><span data-stu-id="4ad1a-128">The following example shows how to call the <xref:System.Data.Services.Client.DataServiceContext.GetReadStreamUri%2A> method to get the URI of a media resource stream that is used to create a new image on the client:</span></span>

[!code-csharp[Astoria Photo Streaming Client#GetReadStreamUri](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_photo_streaming_client/cs/photowindow.xaml.cs#getreadstreamuri)]
[!code-vb[Astoria Photo Streaming Client#GetReadStreamUri](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_photo_streaming_client/vb/photowindow.xaml.vb#getreadstreamuri)]

### <a name="downloading-the-binary-resource-stream"></a><span data-ttu-id="4ad1a-129">Ikili kaynak akışı indiriliyor</span><span class="sxs-lookup"><span data-stu-id="4ad1a-129">Downloading the Binary Resource Stream</span></span>

<span data-ttu-id="4ad1a-130">Bir ikili kaynak akışı alınırken, <xref:System.Data.Services.Client.DataServiceContext.GetReadStream%2A> <xref:System.Data.Services.Client.DataServiceContext> Medya bağlantı girişini izleyen örnekte yöntemini çağırmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="4ad1a-130">When retrieving a binary resource stream, you must call the <xref:System.Data.Services.Client.DataServiceContext.GetReadStream%2A> method on the <xref:System.Data.Services.Client.DataServiceContext> instance that is tracking the media link entry.</span></span> <span data-ttu-id="4ad1a-131">Bu yöntem <xref:System.Data.Services.Client.DataServiceStreamResponse> , kaynağı içeren akışa bir başvuru içeren bir nesne döndüren veri hizmetine bir istek gönderir.</span><span class="sxs-lookup"><span data-stu-id="4ad1a-131">This method sends a request to the data service that returns a <xref:System.Data.Services.Client.DataServiceStreamResponse> object, which has a reference to the stream that contains the resource.</span></span> <span data-ttu-id="4ad1a-132">Uygulamanız ikili kaynağı bir olarak gerektirdiğinde bu yöntemi kullanın <xref:System.IO.Stream> .</span><span class="sxs-lookup"><span data-stu-id="4ad1a-132">Use this method when your application requires the binary resource as a <xref:System.IO.Stream>.</span></span> <span data-ttu-id="4ad1a-133">Aşağıdaki örnek, <xref:System.Data.Services.Client.DataServiceContext.GetReadStream%2A> istemcisinde yeni bir görüntü oluşturmak için kullanılan bir akışı almak için yönteminin nasıl çağrılacağını göstermektedir:</span><span class="sxs-lookup"><span data-stu-id="4ad1a-133">The following example shows how to call the <xref:System.Data.Services.Client.DataServiceContext.GetReadStream%2A> method to retrieve a stream that is used to create a new image on the client:</span></span>

[!code-csharp[Astoria Streaming Client#GetReadStreamClient](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_streaming_client/cs/customerphotowindow.xaml.cs#getreadstreamclient)]
[!code-vb[Astoria Streaming Client#GetReadStreamClient](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_streaming_client/vb/customerphotowindow.xaml.vb#getreadstreamclient)]

> [!NOTE]
> <span data-ttu-id="4ad1a-134">Yanıt iletisindeki Içerik uzunluğu üst bilgisi, buhar ikilisini içeren veri hizmeti tarafından ayarlanmadı.</span><span class="sxs-lookup"><span data-stu-id="4ad1a-134">The Content-Length header in the response message that contains the binary steam is not set by the data service.</span></span> <span data-ttu-id="4ad1a-135">Bu değer, ikili veri akışının gerçek uzunluğunu yansıtmayabilir.</span><span class="sxs-lookup"><span data-stu-id="4ad1a-135">This value may not reflect the actual length of the binary data stream.</span></span>

### <a name="uploading-a-media-resource-as-a-stream"></a><span data-ttu-id="4ad1a-136">Medya kaynağını akış olarak karşıya yükleme</span><span class="sxs-lookup"><span data-stu-id="4ad1a-136">Uploading a Media Resource as a Stream</span></span>

<span data-ttu-id="4ad1a-137">Bir medya kaynağı eklemek veya güncelleştirmek için, <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> <xref:System.Data.Services.Client.DataServiceContext> varlığı izleyen örnekte yöntemi çağırın.</span><span class="sxs-lookup"><span data-stu-id="4ad1a-137">To insert or update a media resource, call the <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> method on the <xref:System.Data.Services.Client.DataServiceContext> instance that is tracking the entity.</span></span> <span data-ttu-id="4ad1a-138">Bu yöntem, sağlanan akıştan okunan medya kaynağını içeren veri hizmetine bir istek gönderir.</span><span class="sxs-lookup"><span data-stu-id="4ad1a-138">This method sends a request to the data service that contains the media resource read from the supplied stream.</span></span> <span data-ttu-id="4ad1a-139">Aşağıdaki örnek, <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> veri hizmetine görüntü göndermek için yönteminin nasıl çağrılacağını göstermektedir:</span><span class="sxs-lookup"><span data-stu-id="4ad1a-139">The following example shows how to call the <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> method to send an image to the data service:</span></span>

[!code-csharp[Astoria Photo Streaming Client#SetSaveStream](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_photo_streaming_client/cs/photodetailswindow.xaml.cs#setsavestream)]
[!code-vb[Astoria Photo Streaming Client#SetSaveStream](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_photo_streaming_client/vb/photodetailswindow.xaml.vb#setsavestream)]

<span data-ttu-id="4ad1a-140">Bu örnekte, <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> yöntemi parametresi için bir değer sağlayarak çağrılır `true` `closeStream` .</span><span class="sxs-lookup"><span data-stu-id="4ad1a-140">In this example, the <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> method is called by supplying a value of `true` for the `closeStream` parameter.</span></span> <span data-ttu-id="4ad1a-141">Bu, <xref:System.Data.Services.Client.DataServiceContext> ikili veriler veri hizmetine yüklendikten sonra akışın kapandığına güvence sağlar.</span><span class="sxs-lookup"><span data-stu-id="4ad1a-141">This guarantees that the <xref:System.Data.Services.Client.DataServiceContext> closes the stream after the binary data is uploaded to the data service.</span></span>

> [!NOTE]
> <span data-ttu-id="4ad1a-142"><xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A>' İ çağırdığınızda, bu akış veri hizmetine <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> çağrılana kadar gönderilmez.</span><span class="sxs-lookup"><span data-stu-id="4ad1a-142">When you call <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A>, the stream is not sent to the data service until <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> is called.</span></span>

## <a name="see-also"></a><span data-ttu-id="4ad1a-143">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="4ad1a-143">See also</span></span>

- [<span data-ttu-id="4ad1a-144">WCF Veri Hizmetleri İstemci Kitaplığı</span><span class="sxs-lookup"><span data-stu-id="4ad1a-144">WCF Data Services Client Library</span></span>](wcf-data-services-client-library.md)
- [<span data-ttu-id="4ad1a-145">Veriyi Denetimlere Bağlama</span><span class="sxs-lookup"><span data-stu-id="4ad1a-145">Binding Data to Controls</span></span>](binding-data-to-controls-wcf-data-services.md)
