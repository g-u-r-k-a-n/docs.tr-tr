---
title: Oturumları Kullanma
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- sessions [WCF]
ms.assetid: 864ba12f-3331-4359-a359-6d6d387f1035
ms.openlocfilehash: a879e90aeab7b40529df1f1a60cd1f879c39720a
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/12/2020
ms.locfileid: "79143180"
---
# <a name="using-sessions"></a><span data-ttu-id="de107-102">Oturumları Kullanma</span><span class="sxs-lookup"><span data-stu-id="de107-102">Using Sessions</span></span>
<span data-ttu-id="de107-103">Windows Communication Foundation (WCF) uygulamalarında, *oturum* bir ileti grubunu bir konuşmayla ilişkilendirer.</span><span class="sxs-lookup"><span data-stu-id="de107-103">In Windows Communication Foundation (WCF) applications, a *session* correlates a group of messages into a conversation.</span></span> <span data-ttu-id="de107-104">WCF oturumları, ASP.NET uygulamalarında kullanılabilen oturum nesnesinden farklıdır, farklı davranışları destekler ve farklı şekillerde denetlenir.</span><span class="sxs-lookup"><span data-stu-id="de107-104">WCF sessions are different than the session object available in ASP.NET applications, support different behaviors, and are controlled in different ways.</span></span> <span data-ttu-id="de107-105">Bu konu, oturumların WCF uygulamalarında etkinleştirmek özellikleri ve bunları nasıl kullanılacağını açıklar.</span><span class="sxs-lookup"><span data-stu-id="de107-105">This topic describes the features that sessions enable in WCF applications and how to use them.</span></span>  
  
## <a name="sessions-in-windows-communication-foundation-applications"></a><span data-ttu-id="de107-106">Windows Communication Foundation Applications Oturumları</span><span class="sxs-lookup"><span data-stu-id="de107-106">Sessions in Windows Communication Foundation Applications</span></span>  
 <span data-ttu-id="de107-107">Bir hizmet sözleşmesi bir oturum gerektirdiğini belirttiğinde, söz konusu sözleşme tüm çağrıların (diğer bir şekilde çağrıları destekleyen temel ileti alışverişi) aynı konuşmanın bir parçası olması gerektiğini belirtir.</span><span class="sxs-lookup"><span data-stu-id="de107-107">When a service contract specifies that it requires a session, that contract is specifying that all calls (that is, the underlying message exchanges that support the calls) must be part of the same conversation.</span></span> <span data-ttu-id="de107-108">Bir sözleşme, oturumlara izin verdiğini, ancak bir oturum gerektirmediğini belirtirse, istemciler bağlanabilir ve bir oturum kurabilir veya oturum oluşturamaz.</span><span class="sxs-lookup"><span data-stu-id="de107-108">If a contract specifies that it allows sessions but does not require one, clients can connect and either establish a session or not establish a session.</span></span> <span data-ttu-id="de107-109">Oturum sona erer ve aynı kanalüzerinden bir ileti gönderilirse bir özel durum atılır.</span><span class="sxs-lookup"><span data-stu-id="de107-109">If the session ends and a message is sent through the same channel an exception is thrown.</span></span>  
  
 <span data-ttu-id="de107-110">WCF oturumları aşağıdaki temel kavramsal özelliklere sahiptir:</span><span class="sxs-lookup"><span data-stu-id="de107-110">WCF sessions have the following main conceptual features:</span></span>  
  
- <span data-ttu-id="de107-111">Bunlar açıkça başlatılır ve arama uygulaması (WCF istemcisi) tarafından sonlandırılır.</span><span class="sxs-lookup"><span data-stu-id="de107-111">They are explicitly initiated and terminated by the calling application (the WCF client).</span></span>  
  
- <span data-ttu-id="de107-112">Oturum sırasında iletilen iletiler, alındıkları sırayla işlenir.</span><span class="sxs-lookup"><span data-stu-id="de107-112">Messages delivered during a session are processed in the order in which they are received.</span></span>  
  
- <span data-ttu-id="de107-113">Oturumlar, bir ileti grubunu bir konuşmaya ilişkilendirer.</span><span class="sxs-lookup"><span data-stu-id="de107-113">Sessions correlate a group of messages into a conversation.</span></span> <span data-ttu-id="de107-114">Farklı türde korelasyon mümkündür.</span><span class="sxs-lookup"><span data-stu-id="de107-114">Different types of correlation are possible.</span></span> <span data-ttu-id="de107-115">Örneğin, oturum tabanlı bir kanal paylaşılan ağ bağlantısına dayalı iletileri ilişkilendirebilirken, başka bir oturum tabanlı kanal ileti gövdesindeki paylaşılan etikete dayalı iletileri ilişkilendirebilir.</span><span class="sxs-lookup"><span data-stu-id="de107-115">For instance, one session-based channel may correlate messages based on a shared network connection while another session-based channel may correlate messages based on a shared tag in the message body.</span></span> <span data-ttu-id="de107-116">Oturumdan türetilebilen özellikler bağıntının doğasına bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="de107-116">The features that can be derived from the session depend on the nature of the correlation.</span></span>  
  
- <span data-ttu-id="de107-117">WCF oturumuyla ilişkili genel bir veri deposu yoktur.</span><span class="sxs-lookup"><span data-stu-id="de107-117">There is no general data store associated with a WCF session.</span></span>  
  
 <span data-ttu-id="de107-118">ASP.NET uygulamalarda <xref:System.Web.SessionState.HttpSessionState?displayProperty=nameWithType> sınıfa ve sağladığı işlevselliği biliyorsanız, bu tür oturumlarla WCF oturumları arasındaki aşağıdaki farkları fark edebilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="de107-118">If you are familiar with the <xref:System.Web.SessionState.HttpSessionState?displayProperty=nameWithType> class in ASP.NET applications and the functionality it provides, you might notice the following differences between that kind of session and WCF sessions:</span></span>  
  
- <span data-ttu-id="de107-119">ASP.NET oturumları her zaman sunucu tarafından başlatılır.</span><span class="sxs-lookup"><span data-stu-id="de107-119">ASP.NET sessions are always server-initiated.</span></span>  
  
- <span data-ttu-id="de107-120">ASP.NET oturumlar dolaylı olarak sırasızdır.</span><span class="sxs-lookup"><span data-stu-id="de107-120">ASP.NET sessions are implicitly unordered.</span></span>  
  
- <span data-ttu-id="de107-121">ASP.NET oturumları istekler arasında genel bir veri depolama mekanizması sağlar.</span><span class="sxs-lookup"><span data-stu-id="de107-121">ASP.NET sessions provide a general data storage mechanism across requests.</span></span>  
  
 <span data-ttu-id="de107-122">Bu konu açıklar:</span><span class="sxs-lookup"><span data-stu-id="de107-122">This topic describes:</span></span>  
  
- <span data-ttu-id="de107-123">Hizmet modeli katmanında oturum tabanlı bağlamaları kullanırken varsayılan yürütme davranışı.</span><span class="sxs-lookup"><span data-stu-id="de107-123">The default execution behavior when using session-based bindings in the service model layer.</span></span>  
  
- <span data-ttu-id="de107-124">WCF oturum tabanlı, sistem tarafından sağlanan bağlamaların sağladığı özellik türleri.</span><span class="sxs-lookup"><span data-stu-id="de107-124">The types of features that the WCF session-based, system-provided bindings provide.</span></span>  
  
- <span data-ttu-id="de107-125">Oturum gereksinimini bildiren bir sözleşme oluşturma.</span><span class="sxs-lookup"><span data-stu-id="de107-125">How to create a contract that declares a session requirement.</span></span>  
  
- <span data-ttu-id="de107-126">Oturumun oluşturulması ve sonlandırılması ile oturumun hizmet örneğiyle ilişkisinin nasıl anlaşılır ve denetler.</span><span class="sxs-lookup"><span data-stu-id="de107-126">How to understand and control the creation and termination of the session and the relationship of the session to the service instance.</span></span>  
  
## <a name="default-execution-behavior-using-sessions"></a><span data-ttu-id="de107-127">Oturumları Kullanarak Varsayılan Yürütme Davranışı</span><span class="sxs-lookup"><span data-stu-id="de107-127">Default Execution Behavior Using Sessions</span></span>  
 <span data-ttu-id="de107-128">Oturum başlatmaya çalışan bağlayıcıya oturum *tabanlı* bağlama denir.</span><span class="sxs-lookup"><span data-stu-id="de107-128">A binding that attempts to initiate a session is called a *session-based* binding.</span></span> <span data-ttu-id="de107-129">Hizmet sözleşmeleri, <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> özelliği hizmet sözleşmesi arabiriminde (veya sınıf) numaralandırma değerlerinden <xref:System.ServiceModel.SessionMode?displayProperty=nameWithType> birine ayarlayarak oturum tabanlı bağlamalar gerektirdiğini, izin verdiklerini veya reddetmelerini belirtir.</span><span class="sxs-lookup"><span data-stu-id="de107-129">Service contracts specify that they require, permit, or refuse session-based bindings by setting the <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> property on the service contract interface (or class) to one of the <xref:System.ServiceModel.SessionMode?displayProperty=nameWithType> enumeration values.</span></span> <span data-ttu-id="de107-130">Varsayılan olarak, bu özelliğin <xref:System.ServiceModel.SessionMode.Allowed>değeri , yani bir istemci WCF hizmeti uygulaması yla oturum tabanlı bir bağlama kullanırsa, hizmet sağlanan oturumu kurar ve kullanır.</span><span class="sxs-lookup"><span data-stu-id="de107-130">By default, the value of this property is <xref:System.ServiceModel.SessionMode.Allowed>, which means that if a client uses a session-based binding with a WCF service implementation, the service establishes and uses the session provided.</span></span>  
  
 <span data-ttu-id="de107-131">Bir WCF hizmeti istemci oturumunu kabul ettiğinde, aşağıdaki özellikler varsayılan olarak etkinleştirilir:</span><span class="sxs-lookup"><span data-stu-id="de107-131">When a WCF service accepts a client session, the following features are enabled by default:</span></span>  
  
1. <span data-ttu-id="de107-132">WCF istemci nesnesi arasındaki tüm aramalar aynı hizmet örneği tarafından işlenir.</span><span class="sxs-lookup"><span data-stu-id="de107-132">All calls between a WCF client object are handled by the same service instance.</span></span>  
  
2. <span data-ttu-id="de107-133">Farklı oturum tabanlı bağlamalar ek özellikler sağlar.</span><span class="sxs-lookup"><span data-stu-id="de107-133">Different session-based bindings provide additional features.</span></span>  
  
## <a name="system-provided-session-types"></a><span data-ttu-id="de107-134">Sistem Destekli Oturum Türleri</span><span class="sxs-lookup"><span data-stu-id="de107-134">System-Provided Session Types</span></span>  
 <span data-ttu-id="de107-135">Oturum tabanlı bağlama, belirli bir oturumla hizmet örneğinin varsayılan ilişkisini destekler.</span><span class="sxs-lookup"><span data-stu-id="de107-135">A session-based binding supports the default association of a service instance with a particular session.</span></span> <span data-ttu-id="de107-136">Ancak, farklı oturum tabanlı bağlamalar, daha önce açıklanan oturum tabanlı instancing denetimini etkinleştirmenin yanı sıra farklı özellikleri destekler.</span><span class="sxs-lookup"><span data-stu-id="de107-136">However, different session-based bindings support different features in addition to enabling the session-based instancing control previously described.</span></span>  
  
 <span data-ttu-id="de107-137">WCF aşağıdaki oturum tabanlı uygulama davranışı türlerini sağlar:</span><span class="sxs-lookup"><span data-stu-id="de107-137">WCF provides the following types of session-based application behavior:</span></span>  
  
- <span data-ttu-id="de107-138">Destek, <xref:System.ServiceModel.Channels.SecurityBindingElement?displayProperty=nameWithType> iletişimin her iki ucunun da belirli bir güvenli görüşme üzerinde anlaştığı güvenlik tabanlı oturumları destekler.</span><span class="sxs-lookup"><span data-stu-id="de107-138">The <xref:System.ServiceModel.Channels.SecurityBindingElement?displayProperty=nameWithType> supports security-based sessions, in which both ends of communication have agreed upon a specific secure conversation.</span></span> <span data-ttu-id="de107-139">Daha fazla bilgi için [Bkz. Güvenlik Hizmetleri.](securing-services.md)</span><span class="sxs-lookup"><span data-stu-id="de107-139">For more information, see [Securing Services](securing-services.md).</span></span> <span data-ttu-id="de107-140">Örneğin, varsayılan <xref:System.ServiceModel.WSHttpBinding?displayProperty=nameWithType> olarak, hem güvenlik oturumları hem de güvenilir oturumlar için destek içeren bağlama, yalnızca iletileri şifreleyen ve dijital olarak imzalayan güvenli bir oturum kullanır.</span><span class="sxs-lookup"><span data-stu-id="de107-140">For example, the <xref:System.ServiceModel.WSHttpBinding?displayProperty=nameWithType> binding, which contains support for both security sessions and reliable sessions, by default uses only a secure session that encrypts and digitally signs messages.</span></span>  
  
- <span data-ttu-id="de107-141">Bağlama, <xref:System.ServiceModel.NetTcpBinding?displayProperty=nameWithType> tüm iletilerin soket düzeyindeki bağlantıyla ilişkilendirilmesini sağlamak için TCP/IP tabanlı oturumları destekler.</span><span class="sxs-lookup"><span data-stu-id="de107-141">The <xref:System.ServiceModel.NetTcpBinding?displayProperty=nameWithType> binding supports TCP/IP-based sessions to ensure that all messages are correlated by the connection at the socket level.</span></span>  
  
- <span data-ttu-id="de107-142">WS-ReliableMessaging belirtimini uygulayan <xref:System.ServiceModel.Channels.ReliableSessionBindingElement?displayProperty=nameWithType> öğe, iletilerin sırayla ve tam olarak bir kez teslim edilecek şekilde yapılandırılabildiği güvenilir oturumlar için destek sağlayarak, iletilerin konuşma sırasında birden fazla düğüm arasında seyahat ederken bile iletilerin alınmasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="de107-142">The <xref:System.ServiceModel.Channels.ReliableSessionBindingElement?displayProperty=nameWithType> element, which implements the WS-ReliableMessaging specification, provides support for reliable sessions in which messages can be configured to be delivered in order and exactly once, ensuring messages are received even when messages travel across multiple nodes during the conversation.</span></span> <span data-ttu-id="de107-143">Daha fazla bilgi için [Güvenilir Oturumlar'a](./feature-details/reliable-sessions.md)bakın.</span><span class="sxs-lookup"><span data-stu-id="de107-143">For more information, see [Reliable Sessions](./feature-details/reliable-sessions.md).</span></span>  
  
- <span data-ttu-id="de107-144">Bağlama, <xref:System.ServiceModel.NetMsmqBinding?displayProperty=nameWithType> MSMQ datagram oturumları sağlar.</span><span class="sxs-lookup"><span data-stu-id="de107-144">The <xref:System.ServiceModel.NetMsmqBinding?displayProperty=nameWithType> binding provides MSMQ datagram sessions.</span></span> <span data-ttu-id="de107-145">Daha fazla bilgi için [WCF'deki Kuyruklar'a](./feature-details/queues-in-wcf.md)bakın.</span><span class="sxs-lookup"><span data-stu-id="de107-145">For more information, see [Queues in WCF](./feature-details/queues-in-wcf.md).</span></span>  
  
 <span data-ttu-id="de107-146">Özelliğiayarlamak, <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A> sözleşmenin gerektirdiği oturum türünü belirtmez, yalnızca bir oturum gerektirdiğini belirtir.</span><span class="sxs-lookup"><span data-stu-id="de107-146">Setting the <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A> property does not specify the type of session the contract requires, only that it requires one.</span></span>  
  
## <a name="creating-a-contract-that-requires-a-session"></a><span data-ttu-id="de107-147">Oturum Gerektiren Bir Sözleşme Oluşturma</span><span class="sxs-lookup"><span data-stu-id="de107-147">Creating a Contract That Requires a Session</span></span>  
 <span data-ttu-id="de107-148">Oturum gerektiren bir sözleşme oluşturmak, hizmet sözleşmesinin bildirdiği işlem grubunun hepsinin aynı oturum içinde yürütülmesi ve iletilerin sırayla teslim edilmesi gerektiğini belirtir.</span><span class="sxs-lookup"><span data-stu-id="de107-148">Creating a contract that requires a session states that the group of operations that the service contract declares must all be executed within the same session and that messages must be delivered in order.</span></span> <span data-ttu-id="de107-149">Bir hizmet sözleşmesinin gerektirdiği oturum desteği düzeyini <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> belirlemek için, hizmet sözleşmesi arabiriminizdeki <xref:System.ServiceModel.SessionMode?displayProperty=nameWithType> veya sınıfınızdaki özelliği, sözleşmenin olup olmadığını belirtmek için numaralandırmanın değerine ayarlayın:</span><span class="sxs-lookup"><span data-stu-id="de107-149">To assert the level of session support that a service contract requires, set the <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> property on your service contract interface or class to the value of the <xref:System.ServiceModel.SessionMode?displayProperty=nameWithType> enumeration to specify whether the contract:</span></span>  
  
- <span data-ttu-id="de107-150">Bir oturum gerektirir.</span><span class="sxs-lookup"><span data-stu-id="de107-150">Requires a session.</span></span>  
  
- <span data-ttu-id="de107-151">İstemci bir oturum kurmak için izin verir.</span><span class="sxs-lookup"><span data-stu-id="de107-151">Allows a client to establish a session.</span></span>  
  
- <span data-ttu-id="de107-152">Oturumu yasaklar.</span><span class="sxs-lookup"><span data-stu-id="de107-152">Prohibits a session.</span></span>  
  
 <span data-ttu-id="de107-153"><xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A> Ancak özelliği ayarlamak, sözleşmenin gerektirdiği oturum tabanlı davranış türünü belirtmez.</span><span class="sxs-lookup"><span data-stu-id="de107-153">Setting the <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A> property does not, however, specify the type of session-based behavior the contract requires.</span></span> <span data-ttu-id="de107-154">WCF'ye, hizmet için yapılandırılan bağlamanın (iletişim kanalını oluşturan) bir hizmeti uygularken bir oturum oluşturduğunu, oluşturmadığını veya oluşturabileceğini çalışma zamanında onaylamasını emreder.</span><span class="sxs-lookup"><span data-stu-id="de107-154">It instructs WCF to confirm at runtime that the configured binding (which creates the communication channel) for the service does, does not, or can establish a session when implementing a service.</span></span> <span data-ttu-id="de107-155">Yine, bağlama, bu gereksinimi seçtiği oturum tabanlı davranış türüyle (güvenlik, aktarım, güvenilir veya bazı kombinasyonlar) karşılayabilir.</span><span class="sxs-lookup"><span data-stu-id="de107-155">Again, the binding can satisfy that requirement with any type of session-based behavior it chooses—security, transport, reliable, or some combination.</span></span> <span data-ttu-id="de107-156">Tam davranış seçilen değere <xref:System.ServiceModel.SessionMode?displayProperty=nameWithType> bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="de107-156">The exact behavior depends on the <xref:System.ServiceModel.SessionMode?displayProperty=nameWithType> value selected.</span></span> <span data-ttu-id="de107-157">Hizmetin yapılandırılan bağlama değerine uygun <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A>değilse, bir özel durum atılır.</span><span class="sxs-lookup"><span data-stu-id="de107-157">If the configured binding of the service does not conform to the value of <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A>, an exception is thrown.</span></span> <span data-ttu-id="de107-158">Bağlamalar ve destek oturumları oluşturduğu kanallar oturum tabanlı olduğu söyleniyor.</span><span class="sxs-lookup"><span data-stu-id="de107-158">Bindings and the channels they create that support sessions are said to be session-based.</span></span>  
  
 <span data-ttu-id="de107-159">Aşağıdaki hizmet sözleşmesi, oturum daki tüm `ICalculatorSession` işlemlerin bir oturum içinde değiştirilmesi gerektiğini belirtir.</span><span class="sxs-lookup"><span data-stu-id="de107-159">The following service contract specifies that all operations in the `ICalculatorSession` must be exchanged within a session.</span></span> <span data-ttu-id="de107-160">İşlemlerin hiçbiri `Equals` yöntem dışında arayana bir değer döndürür.</span><span class="sxs-lookup"><span data-stu-id="de107-160">None of the operations returns a value to the caller except the `Equals` method.</span></span> <span data-ttu-id="de107-161">Ancak, `Equals` yöntem hiçbir parametre almaz ve bu nedenle, yalnızca verilerin zaten diğer işlemlere geçirildiği bir oturum içinde sıfır olmayan bir değer döndürebilir.</span><span class="sxs-lookup"><span data-stu-id="de107-161">However, the `Equals` method takes no parameters and, therefore, can only return a non-zero value inside a session in which data has already been passed to the other operations.</span></span> <span data-ttu-id="de107-162">Bu sözleşme düzgün çalışması için bir oturum gerektirir.</span><span class="sxs-lookup"><span data-stu-id="de107-162">This contract requires a session to function properly.</span></span> <span data-ttu-id="de107-163">Belirli bir istemciyle ilişkili bir oturum olmadan, hizmet örneğinin bu istemcinin hangi önceki verileri gönderdiğini bilmenin bir yolu yoktur.</span><span class="sxs-lookup"><span data-stu-id="de107-163">Without a session associated with a specific client, the service instance has no way of knowing what previous data this client has sent.</span></span>  
  
 [!code-csharp[S_Service_Session#1](../../../samples/snippets/csharp/VS_Snippets_CFX/s_service_session/cs/service.cs#1)]
 [!code-vb[S_Service_Session#1](../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_service_session/vb/service.vb#1)]  
  
 <span data-ttu-id="de107-164">Bir hizmet oturuma izin veriyorsa, istemci oturum uyguluyorsa bir oturum kurulur ve kullanılır; aksi takdirde oturum kurulamaz.</span><span class="sxs-lookup"><span data-stu-id="de107-164">If a service allows a session, then a session is established and used if the client initiates one; otherwise, no session is established.</span></span>  
  
## <a name="sessions-and-service-instances"></a><span data-ttu-id="de107-165">Oturumlar ve Hizmet Örnekleri</span><span class="sxs-lookup"><span data-stu-id="de107-165">Sessions and Service Instances</span></span>  
 <span data-ttu-id="de107-166">WCF'de varsayılan instancing davranışını kullanırsanız, WCF istemci nesnesi arasındaki tüm çağrılar aynı hizmet örneği tarafından işlenir.</span><span class="sxs-lookup"><span data-stu-id="de107-166">If you use the default instancing behavior in WCF, all calls between a WCF client object are handled by the same service instance.</span></span> <span data-ttu-id="de107-167">Bu nedenle, uygulama düzeyinde, bir oturumu yerel arama davranışına benzer uygulama davranışını etkinleştirmek olarak düşünebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="de107-167">Therefore, at the application level, you can think of a session as enabling application behavior similar to local call behavior.</span></span> <span data-ttu-id="de107-168">Örneğin, yerel bir nesne oluşturduğunuzda:</span><span class="sxs-lookup"><span data-stu-id="de107-168">For example, when you create a local object:</span></span>  
  
- <span data-ttu-id="de107-169">Bir yapıcı denir.</span><span class="sxs-lookup"><span data-stu-id="de107-169">A constructor is called.</span></span>  
  
- <span data-ttu-id="de107-170">WCF istemci nesnesi başvurusuna yapılan sonraki tüm aramalar aynı nesne örneği tarafından işlenir.</span><span class="sxs-lookup"><span data-stu-id="de107-170">All subsequent calls made to the WCF client object reference are processed by the same object instance.</span></span>  
  
- <span data-ttu-id="de107-171">Nesne başvurusu yok edildiğinde bir yıkıcı çağrılır.</span><span class="sxs-lookup"><span data-stu-id="de107-171">A destructor is called when the object reference is destroyed.</span></span>  
  
 <span data-ttu-id="de107-172">Varsayılan hizmet örneği davranışı kullanıldığı sürece, oturumlar istemciler ve hizmetler arasında benzer bir davranışı etkinleştirin.</span><span class="sxs-lookup"><span data-stu-id="de107-172">Sessions enable a similar behavior between clients and services as long as the default service instance behavior is used.</span></span> <span data-ttu-id="de107-173">Bir hizmet sözleşmesi oturumları gerektiriyor veya destekliyorsa, bir veya daha fazla sözleşme işlemi, <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A> <xref:System.ServiceModel.OperationContractAttribute.IsTerminating%2A> bir oturumu ve özellikleri ayarlayarak oturumu başlatmak veya sonlandırmaolarak işaretlenebilir.</span><span class="sxs-lookup"><span data-stu-id="de107-173">If a service contract requires or supports sessions, one or more contract operations can be marked as initiating or terminating a session by setting the <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A> and <xref:System.ServiceModel.OperationContractAttribute.IsTerminating%2A> properties.</span></span>  
  
 <span data-ttu-id="de107-174">*Başlatma işlemleri,* yeni bir oturumun ilk işlemi olarak adlandırılması gereken işlemlerdir.</span><span class="sxs-lookup"><span data-stu-id="de107-174">*Initiating operations* are those that must be called as the first operation of a new session.</span></span> <span data-ttu-id="de107-175">Başlatmama işlemleri yalnızca en az bir başlatma işlemi çağrıldıktan sonra çağrılabilir.</span><span class="sxs-lookup"><span data-stu-id="de107-175">Non-initiating operations can be called only after at least one initiating operation has been called.</span></span> <span data-ttu-id="de107-176">Bu nedenle, hizmet örneğinin başına uygun istemcilerden giriş almak üzere tasarlanmış başlatma işlemleri bildirerek hizmetiniz için bir tür oturum oluşturucu oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="de107-176">You can therefore create a kind of session constructor for your service by declaring initiating operations designed to take input from clients appropriate to the beginning of the service instance.</span></span> <span data-ttu-id="de107-177">(Durum, ancak, hizmet nesnesi değil, oturum ile ilişkilidir.)</span><span class="sxs-lookup"><span data-stu-id="de107-177">(The state is associated with the session, however, and not the service object.)</span></span>  
  
 <span data-ttu-id="de107-178">*Sonlandırma işlemleri*, tersine, varolan bir oturumdaki son ileti olarak çağrılması gereken işlemlerdir.</span><span class="sxs-lookup"><span data-stu-id="de107-178">*Terminating operations*, conversely, are those that must be called as the last message in an existing session.</span></span> <span data-ttu-id="de107-179">Varsayılan durumda, WCF hizmet nesnesini ve bağlamını, hizmetin ilişkili olduğu oturum kapatıldıktan sonra geri dönüştürür.</span><span class="sxs-lookup"><span data-stu-id="de107-179">In the default case, WCF recycles the service object and its context after the session with which the service was associated is closed.</span></span> <span data-ttu-id="de107-180">Bu nedenle, hizmet örneğinin sonuna uygun bir işlevi gerçekleştirmek üzere tasarlanmış sonlandırıcı işlemleri bildirerek bir tür yıkıcı oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="de107-180">You can, therefore, create a kind of destructor by declaring terminating operations designed to perform a function appropriate to the end of the service instance.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="de107-181">Varsayılan davranış yerel yapıcılar ve yıkıcılar için bir benzerlik taşısa da, sadece bir benzerlik.</span><span class="sxs-lookup"><span data-stu-id="de107-181">Although the default behavior bears a resemblance to local constructors and destructors, it is only a resemblance.</span></span> <span data-ttu-id="de107-182">Herhangi bir WCF hizmet işlemi, başlatma veya sonlandırma işlemi olabilir veya her ikisi de aynı anda olabilir.</span><span class="sxs-lookup"><span data-stu-id="de107-182">Any WCF service operation can be an initiating or terminating operation, or both at the same time.</span></span> <span data-ttu-id="de107-183">Buna ek olarak, varsayılan durumda, başlatma işlemleri herhangi bir sırada herhangi bir sayıda çağrılabilir; <xref:System.ServiceModel.InstanceContext?displayProperty=nameWithType> (nesneyi manipüle ederek) hizmet örneğinin ömrünü açıkça denetlemediğiniz sürece, oturum oluşturulduktan ve bir örnekle ilişkilendirildikten sonra ek oturumlar oluşturulmaz.</span><span class="sxs-lookup"><span data-stu-id="de107-183">In addition, in the default case, initiating operations can be called any number of times in any order; no additional sessions are created once the session is established and associated with an instance unless you explicitly control the lifetime of the service instance (by manipulating the <xref:System.ServiceModel.InstanceContext?displayProperty=nameWithType> object).</span></span> <span data-ttu-id="de107-184">Son olarak, durum hizmet nesnesi ile değil, oturum ile ilişkilidir.</span><span class="sxs-lookup"><span data-stu-id="de107-184">Finally, the state is associated with the session and not the service object.</span></span>  
  
 <span data-ttu-id="de107-185">Örneğin, önceki `ICalculatorSession` örnekte kullanılan sözleşme, WCF istemci nesnesinin `Clear` önce işlemi başka bir işlemden önce çağırmasını ve bu WCF `Equals` istemci nesnesi ile oturumun işlemi çağırdığında sona erdirmesini gerektirir.</span><span class="sxs-lookup"><span data-stu-id="de107-185">For example, the `ICalculatorSession` contract used in the preceding example requires that the WCF client object first call the `Clear` operation prior to any other operation and that the session with this WCF client object should terminate when it calls the `Equals` operation.</span></span> <span data-ttu-id="de107-186">Aşağıdaki kod örneği, bu gereksinimleri zorlayan bir sözleşme gösterir.</span><span class="sxs-lookup"><span data-stu-id="de107-186">The following code example shows a contract that enforces these requirements.</span></span> <span data-ttu-id="de107-187">`Clear`oturumu başlatmak için önce çağrılması gerekir ve `Equals` bu oturum çağrıldığında sona erer.</span><span class="sxs-lookup"><span data-stu-id="de107-187">`Clear` must be called first to initiate a session, and that session ends when `Equals` is called.</span></span>  
  
 [!code-csharp[SCA.IsInitiatingIsTerminating#1](../../../samples/snippets/csharp/VS_Snippets_CFX/sca.isinitiatingisterminating/cs/service.cs#1)]
 [!code-vb[SCA.IsInitiatingIsTerminating#1](../../../samples/snippets/visualbasic/VS_Snippets_CFX/sca.isinitiatingisterminating/vb/service.vb#1)]  
  
 <span data-ttu-id="de107-188">Hizmetler istemcilerle oturum başlatmaz.</span><span class="sxs-lookup"><span data-stu-id="de107-188">Services do not start sessions with clients.</span></span> <span data-ttu-id="de107-189">WCF istemci uygulamalarında, oturum tabanlı kanalın ömrü ile oturumun ömrü arasında doğrudan bir ilişki vardır.</span><span class="sxs-lookup"><span data-stu-id="de107-189">In WCF client applications, a direct relationship exists between the lifetime of the session-based channel and the lifetime of the session itself.</span></span> <span data-ttu-id="de107-190">Bu nedenle, istemciler yeni oturum tabanlı kanallar oluşturarak yeni oturumlar oluşturur ve oturum tabanlı kanalları incelikle kapatarak varolan oturumları yıkar.</span><span class="sxs-lookup"><span data-stu-id="de107-190">As such, clients create new sessions by creating new session-based channels and tear down existing sessions by closing session-based channels gracefully.</span></span> <span data-ttu-id="de107-191">İstemci aşağıdakilerden birini arayarak bir hizmet bitiş noktası ile bir oturum başlatır:</span><span class="sxs-lookup"><span data-stu-id="de107-191">A client starts a session with a service endpoint by calling one of the following:</span></span>  
  
- <span data-ttu-id="de107-192"><xref:System.ServiceModel.ICommunicationObject.Open%2A?displayProperty=nameWithType>kanalda bir çağrı ile <xref:System.ServiceModel.ChannelFactory%601.CreateChannel%2A?displayProperty=nameWithType>döndürülen .</span><span class="sxs-lookup"><span data-stu-id="de107-192"><xref:System.ServiceModel.ICommunicationObject.Open%2A?displayProperty=nameWithType> on the channel returned by a call to <xref:System.ServiceModel.ChannelFactory%601.CreateChannel%2A?displayProperty=nameWithType>.</span></span>  
  
- <span data-ttu-id="de107-193"><xref:System.ServiceModel.ClientBase%601.Open%2A?displayProperty=nameWithType>[ServiceModel Metadata Utility Tool (Svcutil.exe)](servicemodel-metadata-utility-tool-svcutil-exe.md)tarafından oluşturulan WCF istemci nesnesinde.</span><span class="sxs-lookup"><span data-stu-id="de107-193"><xref:System.ServiceModel.ClientBase%601.Open%2A?displayProperty=nameWithType> on the WCF client object generated by the [ServiceModel Metadata Utility Tool (Svcutil.exe)](servicemodel-metadata-utility-tool-svcutil-exe.md).</span></span>  
  
- <span data-ttu-id="de107-194">WCF istemci nesnesi (varsayılan olarak, tüm işlemler başlatılıyor) her iki türde bir başlatma işlemi.</span><span class="sxs-lookup"><span data-stu-id="de107-194">An initiating operation on either type of WCF client object (by default, all operations are initiating).</span></span> <span data-ttu-id="de107-195">İlk işlem çağrıldığında, WCF istemci nesnesi kanalı otomatik olarak açar ve bir oturum başlatır.</span><span class="sxs-lookup"><span data-stu-id="de107-195">When the first operation is called, the WCF client object automatically opens the channel and initiates a session.</span></span>  
  
 <span data-ttu-id="de107-196">Genellikle bir istemci aşağıdakilerden birini arayarak bir hizmet bitiş noktası ile oturumu sona erdirer:</span><span class="sxs-lookup"><span data-stu-id="de107-196">Typically a client ends a session with a service endpoint by calling one of the following:</span></span>  
  
- <span data-ttu-id="de107-197"><xref:System.ServiceModel.ICommunicationObject.Close%2A?displayProperty=nameWithType>kanalda bir çağrı ile <xref:System.ServiceModel.ChannelFactory%601.CreateChannel%2A?displayProperty=nameWithType>döndürülen .</span><span class="sxs-lookup"><span data-stu-id="de107-197"><xref:System.ServiceModel.ICommunicationObject.Close%2A?displayProperty=nameWithType> on the channel returned by a call to <xref:System.ServiceModel.ChannelFactory%601.CreateChannel%2A?displayProperty=nameWithType>.</span></span>  
  
- <span data-ttu-id="de107-198"><xref:System.ServiceModel.ClientBase%601.Close%2A?displayProperty=nameWithType>Svcutil.exe tarafından oluşturulan WCF istemci nesnesi üzerinde.</span><span class="sxs-lookup"><span data-stu-id="de107-198"><xref:System.ServiceModel.ClientBase%601.Close%2A?displayProperty=nameWithType> on the WCF client object generated by Svcutil.exe.</span></span>  
  
- <span data-ttu-id="de107-199">WCF istemci nesnesi türünde sonlandırıcı bir işlem (varsayılan olarak, hiçbir işlem sona erdirmiyor; sözleşme açıkça bir sonlandırma işlemi belirtmelidir).</span><span class="sxs-lookup"><span data-stu-id="de107-199">A terminating operation on either type of WCF client object (by default, no operations are terminating; the contract must explicitly specify a terminating operation).</span></span> <span data-ttu-id="de107-200">İlk işlem çağrıldığında, WCF istemci nesnesi kanalı otomatik olarak açar ve bir oturum başlatır.</span><span class="sxs-lookup"><span data-stu-id="de107-200">When the first operation is called, the WCF client object automatically opens the channel and initiates a session.</span></span>  
  
 <span data-ttu-id="de107-201">Örnekler için [bkz: Oturumlar gerektiren bir Hizmet oluşturmanın](./feature-details/how-to-create-a-service-that-requires-sessions.md) yanı sıra [Varsayılan Hizmet Davranışı](./samples/default-service-behavior.md) ve Örnekleri Ara [verme.](./samples/instancing.md)</span><span class="sxs-lookup"><span data-stu-id="de107-201">For examples, see [How to: Create a Service That Requires Sessions](./feature-details/how-to-create-a-service-that-requires-sessions.md) as well as the [Default Service Behavior](./samples/default-service-behavior.md) and [Instancing](./samples/instancing.md) samples.</span></span>  
  
 <span data-ttu-id="de107-202">İstemciler ve oturumlar hakkında daha fazla bilgi için [WCF İstemci Kullanarak Hizmetlere Erişim'e](./feature-details/accessing-services-using-a-client.md)bakın.</span><span class="sxs-lookup"><span data-stu-id="de107-202">For more information about clients and sessions, see [Accessing Services Using a WCF Client](./feature-details/accessing-services-using-a-client.md).</span></span>  
  
## <a name="sessions-interact-with-instancecontext-settings"></a><span data-ttu-id="de107-203">Oturumlar ÖrnekBağlam Ayarlarıyla Etkileşimde</span><span class="sxs-lookup"><span data-stu-id="de107-203">Sessions Interact with InstanceContext Settings</span></span>  
 <span data-ttu-id="de107-204">Bir sözleşmedeki <xref:System.ServiceModel.SessionMode> numaralandırma ile kanallar ve belirli <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> hizmet nesneleri arasındaki ilişkiyi kontrol eden özellik arasında bir etkileşim vardır.</span><span class="sxs-lookup"><span data-stu-id="de107-204">There is an interaction between the <xref:System.ServiceModel.SessionMode> enumeration in a contract and the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> property, which controls the association between channels and specific service objects.</span></span> <span data-ttu-id="de107-205">Daha fazla bilgi için [Oturumlar, Instancing ve Concurrency'e](./feature-details/sessions-instancing-and-concurrency.md)bakın.</span><span class="sxs-lookup"><span data-stu-id="de107-205">For more information, see [Sessions, Instancing, and Concurrency](./feature-details/sessions-instancing-and-concurrency.md).</span></span>  
  
### <a name="sharing-instancecontext-objects"></a><span data-ttu-id="de107-206">Örnek Bağlam Nesnelerini Paylaşma</span><span class="sxs-lookup"><span data-stu-id="de107-206">Sharing InstanceContext Objects</span></span>  
 <span data-ttu-id="de107-207">Ayrıca, bu ilişkilendirmeyi kendiniz gerçekleştirerek hangi <xref:System.ServiceModel.InstanceContext> oturum tabanlı kanalın veya çağrının hangi nesneyle ilişkili olduğunu da denetleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="de107-207">You can also control which session-based channel or call is associated with which <xref:System.ServiceModel.InstanceContext> object by performing that association yourself.</span></span>
  
## <a name="sessions-and-streaming"></a><span data-ttu-id="de107-208">Oturumlar ve Akış</span><span class="sxs-lookup"><span data-stu-id="de107-208">Sessions and Streaming</span></span>  
 <span data-ttu-id="de107-209">Aktarım için büyük miktarda veri varsa, WCF'deki akış aktarım modu, iletileri bellekte tümüyle arabelleğe alma ve işleme varsayılan davranışına uygun bir alternatiftir.</span><span class="sxs-lookup"><span data-stu-id="de107-209">When you have a large amount of data to transfer, the streaming transfer mode in WCF is a feasible alternative to the default behavior of buffering and processing messages in memory in their entirety.</span></span> <span data-ttu-id="de107-210">Oturum tabanlı bağlama yla çağrıları akışa aktarırken beklenmeyen davranışlar alabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="de107-210">You may get unexpected behavior when streaming calls with a session-based binding.</span></span> <span data-ttu-id="de107-211">Tüm akış çağrıları, kullanılan bağlama oturumları kullanmak üzere yapılandırılan olsa bile oturumları desteklemeyen tek bir kanal (datagram kanalı) üzerinden yapılır.</span><span class="sxs-lookup"><span data-stu-id="de107-211">All streaming calls are made through a single channel (the datagram channel) that does not support sessions even if the binding being used is configured to use sessions.</span></span> <span data-ttu-id="de107-212">Birden çok istemci oturum tabanlı bağlama üzerinden aynı hizmet nesnesine akış çağrıları yaparsa ve hizmet nesnesinin eşzamanlılık modu `PerSession`tek olarak ayarlanırsa ve örnek bağlam modu ayarlanırsa, tüm aramalar veri gramı kanalından geçmelidir ve bu nedenle aynı anda yalnızca bir arama işlenir.</span><span class="sxs-lookup"><span data-stu-id="de107-212">If multiple clients make streaming calls to the same service object over a session-based binding, and the service object's concurrency mode is set to single and its instance context mode is set to `PerSession`, all calls must go through the datagram channel and so only one call is processed at a time.</span></span> <span data-ttu-id="de107-213">Bir veya daha fazla istemci daha sonra zaman dışarı olabilir. Bu sorunu, hizmet nesnesinin veya Concurrency'in `InstanceContextMode` `PerCall` birden çok olarak ayarlayarak çözebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="de107-213">One or more clients may then time out. You can work around this issue by either setting the service object's `InstanceContextMode` to `PerCall` or Concurrency to multiple.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="de107-214">Yalnızca bir "oturum" olduğundan MaxConcurrentSessions bu durumda hiçbir etkisi yoktur.</span><span class="sxs-lookup"><span data-stu-id="de107-214">MaxConcurrentSessions have no effect in this case because there is only one "session" available.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="de107-215">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="de107-215">See also</span></span>

- <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A>
- <xref:System.ServiceModel.OperationContractAttribute.IsTerminating%2A>
