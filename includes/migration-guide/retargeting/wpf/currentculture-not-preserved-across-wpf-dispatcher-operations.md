---
ms.openlocfilehash: bd656478a55856e676853e57f3e7386ea0aa0211
ms.sourcegitcommit: e02d17b2cf9c1258dadda4810a5e6072a0089aee
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 07/01/2020
ms.locfileid: "85614828"
---
### <a name="currentculture-is-not-preserved-across-wpf-dispatcher-operations"></a><span data-ttu-id="b4a64-101">CurrentCulture, WPF dağıtıcı işlemleri arasında korunmaz</span><span class="sxs-lookup"><span data-stu-id="b4a64-101">CurrentCulture is not preserved across WPF Dispatcher operations</span></span>

#### <a name="details"></a><span data-ttu-id="b4a64-102">Ayrıntılar</span><span class="sxs-lookup"><span data-stu-id="b4a64-102">Details</span></span>

<span data-ttu-id="b4a64-103">.NET Framework 4,6 ' den başlayarak, <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=fullName> <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=fullName> Bu dağıtıcı işleminin sonunda, bir içinde yapılan veya yapılan değişiklikler <xref:System.Windows.Threading.Dispatcher?displayProperty=fullName> kaybedilir.</span><span class="sxs-lookup"><span data-stu-id="b4a64-103">Beginning in the .NET Framework 4.6, changes to <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=fullName> or <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=fullName> made within a <xref:System.Windows.Threading.Dispatcher?displayProperty=fullName> will be lost at the end of that dispatcher operation.</span></span> <span data-ttu-id="b4a64-104">Benzer şekilde, <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=fullName> <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=fullName> bir dağıtıcı işleminin dışında yapılan değişiklikler veya bu işlem yürütüldüğünde yansıtılmayabilir. Bu şekilde, bu durum <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=fullName> ve değişikliklerin WPF <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=fullName> uygulamasındaki WPF Kullanıcı arabirimi geri çağırmaları ve diğer kodlar arasında akamayacağı anlamına gelir. Bunun nedeni, bu <xref:System.Threading.ExecutionContext?displayProperty=fullName> Sebepteki bir değişiklikten <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=fullName> ve .NET Framework 4,6 ' i <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=fullName> hedefleyen uygulamalarla başlayan yürütme bağlamında depolanmasıdır.</span><span class="sxs-lookup"><span data-stu-id="b4a64-104">Similarly, changes to <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=fullName> or <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=fullName> made outside of a Dispatcher operation may not be reflected when that operation executes.Practically speaking, this means that <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=fullName> and <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=fullName> changes may not flow between WPF UI callbacks and other code in a WPF application.This is due to a change in <xref:System.Threading.ExecutionContext?displayProperty=fullName> that causes <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=fullName> and <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=fullName> to be stored in the execution context beginning with apps targeting the .NET Framework 4.6.</span></span> <span data-ttu-id="b4a64-105">WPF dağıtıcı işlemleri, işlemi başlatmak için kullanılan yürütme bağlamını depolar ve işlem tamamlandığında önceki bağlamı geri yükler.</span><span class="sxs-lookup"><span data-stu-id="b4a64-105">WPF dispatcher operations store the execution context used to begin the operation and restore the previous context when the operation is completed.</span></span> <span data-ttu-id="b4a64-106"><xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=fullName>Ve <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=fullName> artık bu bağlamın bir parçası olduğundan, bir dağıtıcı işleminin içindeki değişiklikler işlem dışında kalıcı olmaz.</span><span class="sxs-lookup"><span data-stu-id="b4a64-106">Because <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=fullName> and <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=fullName> are now part of that context, changes to them within a dispatcher operation are not persisted outside of the operation.</span></span>

#### <a name="suggestion"></a><span data-ttu-id="b4a64-107">Öneri</span><span class="sxs-lookup"><span data-stu-id="b4a64-107">Suggestion</span></span>

<span data-ttu-id="b4a64-108">Bu değişiklikten etkilenen uygulamalar, istenen <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=fullName> veya <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=fullName> bir alana depolayarak ve doğru ve ayarlanmış tüm dağıtıcı işlem <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=fullName> GÖVDELERININ (UI olay geri çağırma işleyicileri dahil) iade edilirken soruna geçici bir çözüm alabilir <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=fullName> .</span><span class="sxs-lookup"><span data-stu-id="b4a64-108">Apps affected by this change may work around it by storing the desired <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=fullName> or <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=fullName> in a field and checking in all Dispatcher operation bodies (including UI event callback handlers) that the correct <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=fullName> and <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=fullName> are set.</span></span> <span data-ttu-id="b4a64-109">Alternatif olarak, bu WPF 'in temelindeki ExecutionContext değişikliği yalnızca .NET Framework 4,6 veya daha yeni bir sürümü hedefleyen uygulamaları etkilediği için, .NET Framework 4.5.2 hedefleyerek bu kesmeyi önlenebilir. .NET Framework 4,6 veya üzeri hedeflenen uygulamalar, aşağıdaki uyumluluk anahtarını ayarlayarak bu sorunu geçici olarak da gerçekleştirebilir:</span><span class="sxs-lookup"><span data-stu-id="b4a64-109">Alternatively, because the ExecutionContext change underlying this WPF change only affects apps targeting the .NET Framework 4.6 or newer, this break can be avoided by targeting the .NET Framework 4.5.2.Apps that target .NET Framework 4.6 or later can also work around this by setting the following compatibility switch:</span></span>

<pre><code class="lang-csharp">AppContext.SetSwitch(&quot;Switch.System.Globalization.NoAsyncCurrentCulture&quot;, true);&#13;&#10;</code></pre>

<span data-ttu-id="b4a64-110">Bu sorun WPF tarafından .NET Framework 4.6.2 içinde düzeltildi.</span><span class="sxs-lookup"><span data-stu-id="b4a64-110">This issue has been fixed by WPF in .NET Framework 4.6.2.</span></span> <span data-ttu-id="b4a64-111">Ayrıca, .NET Framework 4,6 ' de 4.6.1 ile [KB 3139549](https://support.microsoft.com/kb/3139549)arasında düzeltilmiştir.</span><span class="sxs-lookup"><span data-stu-id="b4a64-111">It has also been fixed in .NET Frameworks 4.6, 4.6.1 through [KB 3139549](https://support.microsoft.com/kb/3139549).</span></span> <span data-ttu-id="b4a64-112">.NET Framework 4,6 veya sonraki bir sürümü hedefleyen uygulamalar, otomatik olarak WPF uygulamalarında doğru davranış alır- <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=fullName> / <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=fullName> ) dağıtıcı işlemleri genelinde korunacaktır.</span><span class="sxs-lookup"><span data-stu-id="b4a64-112">Applications targeting .NET Framework 4.6 or later will automatically get the right behavior in WPF applications - <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=fullName>/<xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=fullName>) would be preserved across Dispatcher operations.</span></span>

| <span data-ttu-id="b4a64-113">Name</span><span class="sxs-lookup"><span data-stu-id="b4a64-113">Name</span></span>    | <span data-ttu-id="b4a64-114">Değer</span><span class="sxs-lookup"><span data-stu-id="b4a64-114">Value</span></span>       |
|:--------|:------------|
| <span data-ttu-id="b4a64-115">Kapsam</span><span class="sxs-lookup"><span data-stu-id="b4a64-115">Scope</span></span>   | <span data-ttu-id="b4a64-116">İkincil</span><span class="sxs-lookup"><span data-stu-id="b4a64-116">Minor</span></span>       |
| <span data-ttu-id="b4a64-117">Sürüm</span><span class="sxs-lookup"><span data-stu-id="b4a64-117">Version</span></span> | <span data-ttu-id="b4a64-118">4.6</span><span class="sxs-lookup"><span data-stu-id="b4a64-118">4.6</span></span>         |
| <span data-ttu-id="b4a64-119">Tür</span><span class="sxs-lookup"><span data-stu-id="b4a64-119">Type</span></span>    | <span data-ttu-id="b4a64-120">Yeniden Hedefleme</span><span class="sxs-lookup"><span data-stu-id="b4a64-120">Retargeting</span></span> |
