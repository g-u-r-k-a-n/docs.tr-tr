---
title: .NET Core bağımsız uygulama dağıtımları için çalışma zamanı ileri sarma.
description: Bağımsız dağıtımlar için dotnet yayımlama değişiklikleri hakkında bilgi edinin.
author: KathleenDollard
ms.date: 05/31/2018
ms.openlocfilehash: 22385c7b5d2bf87755fd51cd6268d21fe3431c74
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/14/2020
ms.locfileid: "75740789"
---
# <a name="self-contained-deployment-runtime-roll-forward"></a><span data-ttu-id="a5c8b-103">Kendi içinde dağıtım çalışma zamanını ileri sarma</span><span class="sxs-lookup"><span data-stu-id="a5c8b-103">Self-contained deployment runtime roll forward</span></span>

<span data-ttu-id="a5c8b-104">.NET Core [bağımsız uygulama dağıtımları](index.md) hem .NET Core kitaplıklarını hem de .NET Core çalışma süresini içerir.</span><span class="sxs-lookup"><span data-stu-id="a5c8b-104">.NET Core [self-contained application deployments](index.md) include both the .NET Core libraries and the .NET Core runtime.</span></span> <span data-ttu-id="a5c8b-105">.NET Core 2.1 SDK'dan (sürüm 2.1.300) başlayarak, bağımsız bir uygulama dağıtımı [makinenizdeki en yüksek yama çalışma süresini yayımlar.](https://github.com/dotnet/designs/pull/36)</span><span class="sxs-lookup"><span data-stu-id="a5c8b-105">Starting in .NET Core 2.1 SDK (version 2.1.300), a self-contained application deployment [publishes the highest patch runtime on your machine](https://github.com/dotnet/designs/pull/36).</span></span> <span data-ttu-id="a5c8b-106">Varsayılan olarak, [`dotnet publish`](../tools/dotnet-publish.md) bağımsız bir dağıtım için yayımlama makinesinde SDK'nın bir parçası olarak yüklenen en son sürümü seçer.</span><span class="sxs-lookup"><span data-stu-id="a5c8b-106">By default, [`dotnet publish`](../tools/dotnet-publish.md) for a self-contained deployment selects the latest version installed as part of the SDK on the publishing machine.</span></span> <span data-ttu-id="a5c8b-107">Bu, dağıtılmış uygulamanızın `publish`sırasında kullanılabilen güvenlik düzeltmeleri (ve diğer düzeltmeler) ile çalışmasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="a5c8b-107">This enables your deployed application to run with security fixes (and other fixes) available during `publish`.</span></span> <span data-ttu-id="a5c8b-108">Yeni bir yama edinmek için uygulamanın yeniden yayımlanmış olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="a5c8b-108">The application must be republished to obtain a new patch.</span></span> <span data-ttu-id="a5c8b-109">Bağımsız uygulamalar `-r <RID>` `dotnet publish` komutüzerinde belirterek veya proje dosyasında (csproj / vbproj) veya komut satırında çalışma zamanı [tanımlayıcısı (RID)](../rid-catalog.md) belirtilmek suretiyle oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="a5c8b-109">Self-contained applications are created by specifying `-r <RID>` on the `dotnet publish` command or by specifying the [runtime identifier (RID)](../rid-catalog.md) in the project file (csproj / vbproj) or on the command line.</span></span>

## <a name="patch-version-roll-forward-overview"></a><span data-ttu-id="a5c8b-110">Yama sürümü roll forward genel bakış</span><span class="sxs-lookup"><span data-stu-id="a5c8b-110">Patch version roll forward overview</span></span>

<span data-ttu-id="a5c8b-111">[`restore`](../tools/dotnet-restore.md)ve [`build`](../tools/dotnet-build.md) [`publish`](../tools/dotnet-publish.md) ayrı `dotnet` ayrı çalıştırılabilen komutlardır.</span><span class="sxs-lookup"><span data-stu-id="a5c8b-111">[`restore`](../tools/dotnet-restore.md), [`build`](../tools/dotnet-build.md) and [`publish`](../tools/dotnet-publish.md) are `dotnet` commands that can run separately.</span></span> <span data-ttu-id="a5c8b-112">Çalışma zamanı seçimi işlemin `restore` bir parçasıdır, değil `publish` veya `build`.</span><span class="sxs-lookup"><span data-stu-id="a5c8b-112">The runtime choice is part of the `restore` operation, not `publish` or `build`.</span></span> <span data-ttu-id="a5c8b-113">Ararsanız, `publish`en son yama sürümü seçilir.</span><span class="sxs-lookup"><span data-stu-id="a5c8b-113">If you call `publish`, the latest patch version will be chosen.</span></span> <span data-ttu-id="a5c8b-114">Bağımsız değişkenle birlikte ararsanız, `publish` önceki bir önce `restore` yeni bağımsız uygulama yayımlama ilkesiyle yürütülmemiş olabileceğinden, istenen yama sürümünü alamayabilirsiniz. `--no-restore`</span><span class="sxs-lookup"><span data-stu-id="a5c8b-114">If you call `publish` with the `--no-restore` argument, then you may not get the desired patch version because a prior `restore` may not have been executed with the new self-contained application publishing policy.</span></span> <span data-ttu-id="a5c8b-115">Bu durumda, aşağıdakilere benzer bir metinle bir yapı hatası oluşturulur:</span><span class="sxs-lookup"><span data-stu-id="a5c8b-115">In this case, a build error is generated with text similar to the following:</span></span>

  <span data-ttu-id="a5c8b-116">"Proje Microsoft.NETCore.App sürüm 2.0.0 kullanılarak geri yüklendi, ancak geçerli ayarları ile, sürüm 2.0.6 yerine kullanılacak.</span><span class="sxs-lookup"><span data-stu-id="a5c8b-116">"The project was restored using Microsoft.NETCore.App version 2.0.0, but with current settings, version 2.0.6 would be used instead.</span></span> <span data-ttu-id="a5c8b-117">Bu sorunu gidermek için, aynı ayarların geri yükleme ve yapı veya yayımlama gibi sonraki işlemler için kullanıldığından emin olun.</span><span class="sxs-lookup"><span data-stu-id="a5c8b-117">To resolve this issue, make sure the same settings are used for restore and for subsequent operations such as build or publish.</span></span> <span data-ttu-id="a5c8b-118">RuntimeIdentifier özelliği yapı veya yayımlama sırasında ayarlanır, ancak geri yükleme sırasında değil, genellikle bu sorun oluşabilir."</span><span class="sxs-lookup"><span data-stu-id="a5c8b-118">Typically this issue can occur if the RuntimeIdentifier property is set during build or publish but not during restore."</span></span>

> [!NOTE]
> <span data-ttu-id="a5c8b-119">`restore`gibi `build` başka bir komutun parçası olarak `publish`dolaylı olarak çalıştırılabilir.</span><span class="sxs-lookup"><span data-stu-id="a5c8b-119">`restore` and `build` can be run implicitly as part of another command, like `publish`.</span></span> <span data-ttu-id="a5c8b-120">Başka bir komutun parçası olarak dolaylı olarak çalıştırıldığında, doğru yapılar üretilebilmek için ek bağlam sağlanır.</span><span class="sxs-lookup"><span data-stu-id="a5c8b-120">When run implicitly as part of another command, they are provided with additional context so that the right artifacts are produced.</span></span> <span data-ttu-id="a5c8b-121">Bir `publish` çalışma zamanı ile (örneğin, `dotnet publish -r linux-x64`), `restore` örtülü linux-x64 çalışma zamanı için paketleri geri yükler.</span><span class="sxs-lookup"><span data-stu-id="a5c8b-121">When you `publish` with a runtime (for example, `dotnet publish -r linux-x64`), the implicit `restore` restores packages for the linux-x64 runtime.</span></span> <span data-ttu-id="a5c8b-122">Açıkça ararsanız, `restore` bu içeriğe sahip olmadığından, varsayılan olarak çalışma zamanı paketlerini geri yüklemez.</span><span class="sxs-lookup"><span data-stu-id="a5c8b-122">If you call `restore` explicitly, it does not restore runtime packages by default, because it doesn't have that context.</span></span>

## <a name="how-to-avoid-restore-during-publish"></a><span data-ttu-id="a5c8b-123">Yayımlama sırasında geri yüklemeden nasıl kaçınıla</span><span class="sxs-lookup"><span data-stu-id="a5c8b-123">How to avoid restore during publish</span></span>

<span data-ttu-id="a5c8b-124">İşlemin bir `restore` `publish` parçası olarak çalıştırmak senaryonuz için istenmeyen bir şey olabilir.</span><span class="sxs-lookup"><span data-stu-id="a5c8b-124">Running `restore` as part of the `publish` operation may be undesirable for your scenario.</span></span> <span data-ttu-id="a5c8b-125">Bağımsız `restore` uygulamalar `publish` oluştururken kaçınmak için aşağıdakileri yapın:</span><span class="sxs-lookup"><span data-stu-id="a5c8b-125">To avoid `restore` during `publish` while creating self-contained applications, do the following:</span></span>

- <span data-ttu-id="a5c8b-126">`RuntimeIdentifiers` Özelliği, yayımlanacak tüm [RID'lerin](../rid-catalog.md) yarı sütunlu ayrılmış listesine ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="a5c8b-126">Set the `RuntimeIdentifiers` property to a semicolon-separated list of all the [RIDs](../rid-catalog.md) to be published.</span></span>
- <span data-ttu-id="a5c8b-127">Özelliği `TargetLatestRuntimePatch` ' `true`ye ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="a5c8b-127">Set the `TargetLatestRuntimePatch` property to `true`.</span></span>

## <a name="no-restore-argument-with-dotnet-publish-options"></a><span data-ttu-id="a5c8b-128">dotnet yayımlama seçenekleriyle geri yükleme bağımsız değişkeni yok</span><span class="sxs-lookup"><span data-stu-id="a5c8b-128">No-restore argument with dotnet publish options</span></span>

<span data-ttu-id="a5c8b-129">Aynı proje dosyasıyla hem bağımsız uygulamalar hem de [çerçevebağımlı uygulamalar](index.md) oluşturmak istiyorsanız ve bağımsız `--no-restore` değişkeni kullanmak `dotnet publish`istiyorsanız, aşağıdakilerden birini seçin:</span><span class="sxs-lookup"><span data-stu-id="a5c8b-129">If you want to create both self-contained applications and [framework-dependent applications](index.md) with the same project file, and you want to use the `--no-restore` argument with `dotnet publish`, then choose one of the following:</span></span>

1. <span data-ttu-id="a5c8b-130">Çerçeveye bağımlı davranışı tercih edin.</span><span class="sxs-lookup"><span data-stu-id="a5c8b-130">Prefer the framework-dependent behavior.</span></span> <span data-ttu-id="a5c8b-131">Uygulama çerçeveye bağlıysa, bu varsayılan davranıştır.</span><span class="sxs-lookup"><span data-stu-id="a5c8b-131">If the application is framework-dependent, this is the default behavior.</span></span> <span data-ttu-id="a5c8b-132">Uygulama bağımsızsa ve yamasız 2.1.0 yerel çalışma saatini kullanabiliyorsa, proje dosyasında `TargetLatestRuntimePatch` ayarlayın. `false`</span><span class="sxs-lookup"><span data-stu-id="a5c8b-132">If the application is self-contained, and can use an unpatched 2.1.0 local runtime, set the `TargetLatestRuntimePatch` to `false` in the project file.</span></span>

2. <span data-ttu-id="a5c8b-133">Kendi kendine yeten davranışı tercih edin.</span><span class="sxs-lookup"><span data-stu-id="a5c8b-133">Prefer the self-contained behavior.</span></span> <span data-ttu-id="a5c8b-134">Uygulama bağımsızsa, bu varsayılan davranıştır.</span><span class="sxs-lookup"><span data-stu-id="a5c8b-134">If the application is self-contained, this is the default behavior.</span></span> <span data-ttu-id="a5c8b-135">Uygulama çerçeveye bağlıysa ve proje `TargetLatestRuntimePatch` `true` dosyasında ayarlanan en son yama yüklüyse.</span><span class="sxs-lookup"><span data-stu-id="a5c8b-135">If the application is framework-dependent, and requires the latest patch installed, set `TargetLatestRuntimePatch` to `true` in the project file.</span></span>

3. <span data-ttu-id="a5c8b-136">Proje dosyasındaki belirli yama sürümüne ayarlayarak `RuntimeFrameworkVersion` çalışma zamanı çerçeve sürümü üzerinde açık denetim edin.</span><span class="sxs-lookup"><span data-stu-id="a5c8b-136">Take explicit control of the runtime framework version by setting `RuntimeFrameworkVersion` to the specific patch version in the project file.</span></span>
