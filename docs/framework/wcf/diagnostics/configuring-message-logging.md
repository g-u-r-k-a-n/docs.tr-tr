---
title: İleti Günlüğe Kaydetmeyi Yapılandırma
description: Günlüğe kaydetmenin nasıl etkinleştirileceği, günlüğe kaydetme düzeylerinin, ileti filtrelerinin ve WCF 'de özel bir dinleyicinin nasıl yapılandırılacağı dahil olmak üzere ileti günlüğe kaydetmeyi nasıl yapılandıracağınızı öğrenin.
ms.date: 03/30/2017
helpviewer_keywords:
- message logging [WCF]
ms.assetid: 0ff4c857-8f09-4b85-9dc0-89084706e4c9
ms.openlocfilehash: 5203f19a18e5fa6b0ed7f68e1d1de0447da41abd
ms.sourcegitcommit: 358a28048f36a8dca39a9fe6e6ac1f1913acadd5
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 06/23/2020
ms.locfileid: "85247668"
---
# <a name="configuring-message-logging"></a><span data-ttu-id="e55b6-103">İleti Günlüğe Kaydetmeyi Yapılandırma</span><span class="sxs-lookup"><span data-stu-id="e55b6-103">Configuring Message Logging</span></span>

<span data-ttu-id="e55b6-104">Bu konu, farklı senaryolar için ileti günlüğe kaydetmeyi nasıl yapılandırabileceğinizi açıklamaktadır.</span><span class="sxs-lookup"><span data-stu-id="e55b6-104">This topic describes how you can configure message logging for different scenarios.</span></span>

## <a name="enabling-message-logging"></a><span data-ttu-id="e55b6-105">Ileti günlüğe kaydetmeyi etkinleştirme</span><span class="sxs-lookup"><span data-stu-id="e55b6-105">Enabling Message Logging</span></span>

<span data-ttu-id="e55b6-106">Windows Communication Foundation (WCF) varsayılan olarak iletileri günlüğe eklemez.</span><span class="sxs-lookup"><span data-stu-id="e55b6-106">Windows Communication Foundation (WCF) does not log messages by default.</span></span> <span data-ttu-id="e55b6-107">İleti günlüğe kaydetmeyi etkinleştirmek için izleme kaynağına bir izleme dinleyicisi eklemeniz `System.ServiceModel.MessageLogging` ve `<messagelogging>` yapılandırma dosyasındaki öğenin özniteliklerini ayarlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-107">To activate message logging, you must add a trace listener to the `System.ServiceModel.MessageLogging` trace source and set attributes for the `<messagelogging>` element in the configuration file.</span></span>

<span data-ttu-id="e55b6-108">Aşağıdaki örnek, günlüğü nasıl etkinleştireceğinizi ve ek seçenekler belirtmenizi gösterir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-108">The following example shows how to enable logging and specify additional options.</span></span>

```xml
<system.diagnostics>
  <sources>
    <source name="System.ServiceModel.MessageLogging">
      <listeners>
         <add name="messages"
              type="System.Diagnostics.XmlWriterTraceListener"
              initializeData="c:\logs\messages.svclog" />
        </listeners>
    </source>
  </sources>
</system.diagnostics>

<system.serviceModel>
  <diagnostics>
    <messageLogging
         logEntireMessage="true"
         logMalformedMessages="false"
         logMessagesAtServiceLevel="true"
         logMessagesAtTransportLevel="false"
         maxMessagesToLog="3000"
         maxSizeOfMessageToLog="2000"/>
  </diagnostics>
</system.serviceModel>
```

<span data-ttu-id="e55b6-109">İleti günlüğe kaydetme ayarları hakkında daha fazla bilgi için bkz. [izleme ve Ileti günlüğe kaydetme Için önerilen ayarlar](./tracing/recommended-settings-for-tracing-and-message-logging.md).</span><span class="sxs-lookup"><span data-stu-id="e55b6-109">For more information about message logging settings, see [Recommended Settings for Tracing and Message Logging](./tracing/recommended-settings-for-tracing-and-message-logging.md).</span></span>

<span data-ttu-id="e55b6-110">`add`Kullanmak istediğiniz dinleyicinin adını ve türünü belirtmek için ' i kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e55b6-110">You can use `add` to specify the name and type of the listener you want to use.</span></span> <span data-ttu-id="e55b6-111">Örnek yapılandırmada, dinleyici "Messages" olarak adlandırılır ve standart .NET Framework İzleme dinleyicisini ( `System.Diagnostics.XmlWriterTraceListener` ) kullanılacak tür olarak ekler.</span><span class="sxs-lookup"><span data-stu-id="e55b6-111">In the example configuration, the Listener is named "messages" and adds the standard .NET Framework trace listener (`System.Diagnostics.XmlWriterTraceListener`) as the type to use.</span></span> <span data-ttu-id="e55b6-112">Kullanıyorsanız `System.Diagnostics.XmlWriterTraceListener` , yapılandırma dosyasında çıkış dosyasının konumunu ve adını belirtmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-112">If you use `System.Diagnostics.XmlWriterTraceListener`, you must specify the output file location and name in the configuration file.</span></span> <span data-ttu-id="e55b6-113">Bu, `initializeData` günlük dosyasının adı ayarlanarak yapılır.</span><span class="sxs-lookup"><span data-stu-id="e55b6-113">This is done by setting `initializeData` to the name of the log file.</span></span> <span data-ttu-id="e55b6-114">Aksi takdirde, sistem bir özel durum oluşturur.</span><span class="sxs-lookup"><span data-stu-id="e55b6-114">Otherwise, the system throws an exception.</span></span> <span data-ttu-id="e55b6-115">Günlükleri varsayılan bir dosyaya yayan özel bir dinleyici da uygulayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e55b6-115">You can also implement a custom listener that emits logs to a default file.</span></span>

> [!NOTE]
> <span data-ttu-id="e55b6-116">İleti günlüğe kaydetme disk alanına eriştiği için belirli bir hizmet için diske yazılan ileti sayısını sınırlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-116">Because message logging accesses disk space, you should limit the number of messages that are written to disk for a particular service.</span></span> <span data-ttu-id="e55b6-117">İleti sınırına ulaşıldığında, bilgi düzeyindeki bir izleme oluşturulur ve tüm ileti günlüğü etkinlikleri durur.</span><span class="sxs-lookup"><span data-stu-id="e55b6-117">When the message limit is reached, a trace at the Information level is produced and all message logging activities stop.</span></span>

<span data-ttu-id="e55b6-118">Günlüğe kaydetme düzeyi ve ek seçenekler, günlük düzeyi ve seçenekler bölümünde ele alınmıştır.</span><span class="sxs-lookup"><span data-stu-id="e55b6-118">The logging level, as well as the additional options, are discussed in the Logging Level and Options section.</span></span>

<span data-ttu-id="e55b6-119">`switchValue`Öğesinin özniteliği `source` yalnızca izleme için geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-119">The `switchValue` attribute of a `source` is only valid for tracing.</span></span> <span data-ttu-id="e55b6-120">`switchValue` `System.ServiceModel.MessageLogging` İzleme kaynağı için aşağıdaki gibi bir öznitelik belirtirseniz, hiçbir etkisi olmaz.</span><span class="sxs-lookup"><span data-stu-id="e55b6-120">If you specify a `switchValue` attribute for the `System.ServiceModel.MessageLogging` trace source as follows, it has no effect.</span></span>

```xml
<source name="System.ServiceModel.MessageLogging" switchValue="Verbose">
</source>
```

<span data-ttu-id="e55b6-121">İzleme kaynağını devre dışı bırakmak istiyorsanız, `logMessagesAtServiceLevel` `logMalformedMessages` `logMessagesAtTransportLevel` bunun yerine öğesinin, ve özniteliklerini kullanmanız gerekir `messageLogging` .</span><span class="sxs-lookup"><span data-stu-id="e55b6-121">If you want to disable the trace source, you should use the `logMessagesAtServiceLevel`, `logMalformedMessages`, and `logMessagesAtTransportLevel` attributes of the `messageLogging` element instead.</span></span> <span data-ttu-id="e55b6-122">Tüm bu öznitelikleri olarak ayarlamanız gerekir `false` .</span><span class="sxs-lookup"><span data-stu-id="e55b6-122">You should set all these attributes to `false`.</span></span> <span data-ttu-id="e55b6-123">Bu, önceki kod örnekteki yapılandırma dosyası kullanılarak, yapılandırma Düzenleyicisi Kullanıcı arabirimi arabiriminden veya WMI kullanılarak yapılabilir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-123">This can be done by using the configuration file in the previous code example, through the Configuration Editor UI interface, or using WMI.</span></span> <span data-ttu-id="e55b6-124">Yapılandırma Düzenleyicisi aracı hakkında daha fazla bilgi için bkz. [yapılandırma Düzenleyicisi aracı (SvcConfigEditor.exe)](../configuration-editor-tool-svcconfigeditor-exe.md).</span><span class="sxs-lookup"><span data-stu-id="e55b6-124">For more information about the Configuration Editor tool, see [Configuration Editor Tool (SvcConfigEditor.exe)](../configuration-editor-tool-svcconfigeditor-exe.md).</span></span> <span data-ttu-id="e55b6-125">WMI hakkında daha fazla bilgi için bkz. [Tanılama için Windows Yönetim araçları kullanma](./wmi/index.md).</span><span class="sxs-lookup"><span data-stu-id="e55b6-125">For more information about WMI, see [Using Windows Management Instrumentation for Diagnostics](./wmi/index.md).</span></span>

## <a name="logging-levels-and-options"></a><span data-ttu-id="e55b6-126">Günlük düzeyleri ve Seçenekler</span><span class="sxs-lookup"><span data-stu-id="e55b6-126">Logging Levels and Options</span></span>

<span data-ttu-id="e55b6-127">Gelen iletilerde, ileti oluşturulduktan hemen sonra ileti, hizmet düzeyindeki Kullanıcı koduna girmeden ve hatalı biçimlendirilmiş iletiler algılandığında anında gerçekleşir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-127">For incoming messages, logging happens immediately after the message is formed, immediately before the message gets to user code in the service level, and when malformed messages are detected.</span></span>

<span data-ttu-id="e55b6-128">Giden iletiler için günlüğe kaydetme, ileti, kullanıcı kodundan ayrıldıktan hemen sonra ve ileti kablodan geçmeden hemen önce gerçekleşir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-128">For outgoing messages, logging happens immediately after the message leaves user code and immediately before the message goes on the wire.</span></span>

<span data-ttu-id="e55b6-129">WCF, iletileri iki farklı düzeyde, hizmette ve aktarımda günlüğe kaydeder.</span><span class="sxs-lookup"><span data-stu-id="e55b6-129">WCF logs messages at two different levels, service and transport.</span></span> <span data-ttu-id="e55b6-130">Hatalı biçimlendirilmiş iletiler de günlüğe kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-130">Malformed messages are also logged.</span></span> <span data-ttu-id="e55b6-131">Üç kategori birbirinden bağımsızdır ve yapılandırmada ayrı olarak etkinleştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-131">The three categories are independent from each other and can be activated separately in configuration.</span></span>

<span data-ttu-id="e55b6-132">`logMessagesAtServiceLevel` `logMalformedMessages` Öğesinin, ve özniteliklerini ayarlayarak günlüğe kaydetme düzeyini kontrol edebilirsiniz `logMessagesAtTransportLevel` `messageLogging` .</span><span class="sxs-lookup"><span data-stu-id="e55b6-132">You can control the logging level by setting the `logMessagesAtServiceLevel`, `logMalformedMessages`, and `logMessagesAtTransportLevel` attributes of the `messageLogging` element.</span></span>

### <a name="service-level"></a><span data-ttu-id="e55b6-133">Hizmet düzeyi</span><span class="sxs-lookup"><span data-stu-id="e55b6-133">Service Level</span></span>

<span data-ttu-id="e55b6-134">Bu katmanda günlüğe kaydedilen iletiler, Kullanıcı kodu girmek için (alma sırasında) veya ayrılmaya (gönderme sırasında).</span><span class="sxs-lookup"><span data-stu-id="e55b6-134">Messages logged at this layer are about to enter (on receiving) or leave (on sending) user code.</span></span> <span data-ttu-id="e55b6-135">Filtreler tanımlanmışsa, yalnızca filtrelerle eşleşen iletiler günlüğe kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-135">If filters have been defined, only messages that match the filters are logged.</span></span> <span data-ttu-id="e55b6-136">Aksi takdirde, hizmet düzeyindeki tüm iletiler günlüğe kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-136">Otherwise, all messages at the service level are logged.</span></span> <span data-ttu-id="e55b6-137">Altyapı iletileri (işlemler, eş kanal ve güvenlik), güvenilir mesajlaşma iletileri dışında bu düzeyde de günlüğe kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-137">Infrastructure messages (transactions, peer channel, and security) are also logged at this level, except for Reliable Messaging messages.</span></span> <span data-ttu-id="e55b6-138">Akışlı iletilerde yalnızca üstbilgiler günlüğe kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-138">On streamed messages, only the headers are logged.</span></span> <span data-ttu-id="e55b6-139">Ayrıca, güvenli iletilerin şifresi bu düzeyde çözülür.</span><span class="sxs-lookup"><span data-stu-id="e55b6-139">In addition, secure messages are logged decrypted at this level.</span></span>

### <a name="transport-level"></a><span data-ttu-id="e55b6-140">Aktarım düzeyi</span><span class="sxs-lookup"><span data-stu-id="e55b6-140">Transport Level</span></span>

<span data-ttu-id="e55b6-141">Bu katmanda günlüğe kaydedilen iletiler, hattaki taşıma için veya sonrasında kodlanacak veya kodu çözülecek şekilde hazırlanmaya yöneliktir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-141">Messages logged at this layer are ready to be encoded or decoded for or after transportation on the wire.</span></span> <span data-ttu-id="e55b6-142">Filtreler tanımlanmışsa, yalnızca filtrelerle eşleşen iletiler günlüğe kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-142">If filters have been defined, only messages that match the filters are logged.</span></span> <span data-ttu-id="e55b6-143">Aksi halde, aktarım katmanındaki tüm iletiler günlüğe kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-143">Otherwise, all messages at the transport layer are logged.</span></span> <span data-ttu-id="e55b6-144">Tüm altyapı iletileri, güvenilir mesajlaşma iletileri de dahil olmak üzere bu katmanda günlüğe kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-144">All infrastructure messages are logged at this layer, including reliable messaging messages.</span></span> <span data-ttu-id="e55b6-145">Akışlı iletilerde yalnızca üstbilgiler günlüğe kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-145">On streamed messages, only the headers are logged.</span></span> <span data-ttu-id="e55b6-146">Ayrıca, HTTPS gibi güvenli bir aktarım kullanılması dışında, güvenli iletiler bu düzeyde şifreli olarak kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-146">In addition, secure messages are logged as encrypted at this level, except if a secure transport such as HTTPS is used.</span></span>

### <a name="malformed-level"></a><span data-ttu-id="e55b6-147">Hatalı biçimlendirilmiş düzey</span><span class="sxs-lookup"><span data-stu-id="e55b6-147">Malformed Level</span></span>

<span data-ttu-id="e55b6-148">Hatalı biçimlendirilmiş iletiler, herhangi bir işleme aşamasında WCF yığını tarafından reddedilen iletilerdir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-148">Malformed messages are messages that are rejected by the WCF stack at any stage of processing.</span></span> <span data-ttu-id="e55b6-149">Hatalı biçimlendirilmiş iletiler, olarak kaydedilir: Bu durumda, uygun olmayan XML ile, vb. için şifrelenir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-149">Malformed messages are logged as-is: encrypted if they are so, with non-proper XML, and so on.</span></span> <span data-ttu-id="e55b6-150">`maxSizeOfMessageToLog`CDATA olarak günlüğe kaydedilecek iletinin boyutu tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="e55b6-150">`maxSizeOfMessageToLog` defined the size of the message to be logged as CDATA.</span></span> <span data-ttu-id="e55b6-151">Varsayılan olarak, `maxSizeOfMessageToLog` 256k ' e eşittir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-151">By default, `maxSizeOfMessageToLog` is equal to 256K.</span></span> <span data-ttu-id="e55b6-152">Bu öznitelik hakkında daha fazla bilgi için diğer seçenekler bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="e55b6-152">For more information about this attribute, see the Other Options section.</span></span>

### <a name="other-options"></a><span data-ttu-id="e55b6-153">Diğer seçenekler</span><span class="sxs-lookup"><span data-stu-id="e55b6-153">Other Options</span></span>

<span data-ttu-id="e55b6-154">Kullanıcı, günlük düzeylerine ek olarak aşağıdaki seçenekleri belirtebilir:</span><span class="sxs-lookup"><span data-stu-id="e55b6-154">In addition to the logging levels, the user can specify the following options:</span></span>

- <span data-ttu-id="e55b6-155">Tüm Iletiyi Kaydet ( `logEntireMessage` öznitelik): Bu değer, iletinin tamamının (ileti üst bilgisi ve gövdesi) günlüğe kaydedilip kaydedilmeyeceğini belirtir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-155">Log Entire Message (`logEntireMessage` attribute): This value specifies whether the entire message (message header and body) is logged.</span></span> <span data-ttu-id="e55b6-156">Varsayılan değer, `false` yani yalnızca üstbilginin günlüğe kaydedildiği anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-156">The default value is `false`, meaning that only the header is logged.</span></span> <span data-ttu-id="e55b6-157">Bu ayar, hizmet ve aktarım iletisi günlük düzeylerini etkiler.</span><span class="sxs-lookup"><span data-stu-id="e55b6-157">This setting affects service and transport message logging levels..</span></span>

- <span data-ttu-id="e55b6-158">Günlüğe kaydedilecek en fazla ileti ( `maxMessagesToLog` öznitelik): Bu değer günlüğe kaydedilecek en fazla ileti sayısını belirtir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-158">Max messages to log (`maxMessagesToLog` attribute): This value specifies the maximum number of messages to log.</span></span> <span data-ttu-id="e55b6-159">Tüm iletiler (hizmet, aktarım ve hatalı biçimlendirilmiş iletiler) bu kotanın altında sayılır.</span><span class="sxs-lookup"><span data-stu-id="e55b6-159">All messages (service, transport, and malformed messages) are counted towards this quota.</span></span> <span data-ttu-id="e55b6-160">Kotaya ulaşıldığında, bir izleme yayınlanır ve başka bir ileti günlüğe kaydedilmez.</span><span class="sxs-lookup"><span data-stu-id="e55b6-160">When the quota is reached, a trace is emitted and no additional message is logged.</span></span> <span data-ttu-id="e55b6-161">Varsayılan değer 10000 ' dir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-161">The default value is 10000.</span></span>

- <span data-ttu-id="e55b6-162">Günlüğe kaydedilecek iletinin en büyük boyutu ( `maxSizeOfMessageToLog` öznitelik): Bu değer, bayt cinsinden oturum açmak için en fazla ileti boyutunu belirtir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-162">Max size of message to log (`maxSizeOfMessageToLog` attribute): This value specifies the maximum size of messages to log in bytes.</span></span> <span data-ttu-id="e55b6-163">Boyut sınırını aşan iletiler günlüğe kaydedilmez ve bu ileti için başka bir etkinlik gerçekleştirilmez.</span><span class="sxs-lookup"><span data-stu-id="e55b6-163">Messages that exceed the size limit are not logged, and no other activity is performed for that message.</span></span> <span data-ttu-id="e55b6-164">Bu ayar tüm izleme düzeylerini etkiler.</span><span class="sxs-lookup"><span data-stu-id="e55b6-164">This setting affects all trace levels.</span></span> <span data-ttu-id="e55b6-165">ServiceModel izleme açık ise, kullanıcıya bildirimde bulunan ilk günlük noktasında (ServiceModelSend \* veya TransportReceive) bir uyarı düzeyi izleme yayınlanır.</span><span class="sxs-lookup"><span data-stu-id="e55b6-165">If ServiceModel tracing is on, a Warning level trace is emitted at the first logging point (ServiceModelSend\* or TransportReceive) to notify the user.</span></span> <span data-ttu-id="e55b6-166">Hizmet düzeyi ve aktarım düzeyi iletileri için varsayılan değer 256K, ancak hatalı biçimlendirilmiş iletiler için varsayılan değer 4K olur.</span><span class="sxs-lookup"><span data-stu-id="e55b6-166">The default value for service level and transport level messages is 256K, while the default value for malformed messages is 4K.</span></span>

  > [!CAUTION]
  > <span data-ttu-id="e55b6-167">Karşılaştırma için hesaplanan ileti boyutu, `maxSizeOfMessageToLog` Serileştirmeden önce bellekteki ileti boyutudur.</span><span class="sxs-lookup"><span data-stu-id="e55b6-167">The message size that is computed to compare against `maxSizeOfMessageToLog` is the message size in memory before serialization.</span></span> <span data-ttu-id="e55b6-168">Bu boyut, günlüğe kaydedilen ileti dizesinin gerçek uzunluğundan farklı olabilir ve birçok durumda gerçek boyuttan daha büyük olur.</span><span class="sxs-lookup"><span data-stu-id="e55b6-168">This size can differ from the actual length of the message string that is being logged, and in many occasions is bigger than the actual size.</span></span> <span data-ttu-id="e55b6-169">Sonuç olarak, iletiler günlüğe kaydedilmez.</span><span class="sxs-lookup"><span data-stu-id="e55b6-169">As a result, messages may not be logged.</span></span> <span data-ttu-id="e55b6-170">Bu olguyu, `maxSizeOfMessageToLog` beklenen ileti boyutundan %10 daha büyük olacak özniteliği belirterek yapabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e55b6-170">You can account for this fact by specifying the `maxSizeOfMessageToLog` attribute to be 10% larger than the expected message size.</span></span> <span data-ttu-id="e55b6-171">Ayrıca, hatalı biçimlendirilmiş iletiler günlüğe kaydedilir, ileti günlükleri tarafından kullanılan gerçek disk alanı, tarafından belirtilen değerin boyutunun 5 katı olabilir `maxSizeOfMessageToLog` .</span><span class="sxs-lookup"><span data-stu-id="e55b6-171">In addition, if malformed messages are logged, the actual disk space utilized by the message logs can be up to 5 times the size of the value specified by `maxSizeOfMessageToLog`.</span></span>

<span data-ttu-id="e55b6-172">Yapılandırma dosyasında bir izleme dinleyicisi tanımlanmazsa, belirtilen günlüğe kaydetme düzeyinden bağımsız olarak günlüğe kaydetme çıkışı oluşturulmaz.</span><span class="sxs-lookup"><span data-stu-id="e55b6-172">If no trace listener is defined in the configuration file, no logging output is generated regardless of the specified logging level.</span></span>

<span data-ttu-id="e55b6-173">Bu bölümde açıklanan öznitelikler gibi ileti günlüğü seçenekleri, Windows Yönetim Araçları (WMI) kullanılarak çalışma zamanında değiştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-173">Message logging options, such as the attributes described in this section, can be changed at runtime using Windows Management Instrumentation (WMI).</span></span> <span data-ttu-id="e55b6-174">Bu, bu Boole özelliklerini sunan [AppDomainInfo](./wmi/appdomaininfo.md) örneğine erişerek yapılabilir: `LogMessagesAtServiceLevel` , `LogMessagesAtTransportLevel` ve `LogMalformedMessages` .</span><span class="sxs-lookup"><span data-stu-id="e55b6-174">This can be done by accessing the [AppDomainInfo](./wmi/appdomaininfo.md) instance, which exposes these Boolean properties: `LogMessagesAtServiceLevel`, `LogMessagesAtTransportLevel`, and `LogMalformedMessages`.</span></span> <span data-ttu-id="e55b6-175">Bu nedenle, ileti günlüğe kaydetme için bir izleme dinleyicisi yapılandırırsanız, ancak bu seçenekleri `false` yapılandırma bölümünde ayarlarsanız, daha sonra `true` uygulamanın çalıştığı zaman olarak değiştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e55b6-175">Therefore, if you configure a trace listener for message logging, but set these options to `false` in configuration, you can later change them to `true` when the application is running.</span></span> <span data-ttu-id="e55b6-176">Bu, çalışma zamanında ileti günlüğe kaydetmeyi etkili bir şekilde sunar.</span><span class="sxs-lookup"><span data-stu-id="e55b6-176">This effectively enables message logging at runtime.</span></span> <span data-ttu-id="e55b6-177">Benzer şekilde, yapılandırma dosyanızda ileti günlüğünü etkinleştirirseniz, WMI kullanarak çalışma zamanında devre dışı bırakabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e55b6-177">Similarly, if you enable message logging in your configuration file, you can disable it at runtime using WMI.</span></span> <span data-ttu-id="e55b6-178">Daha fazla bilgi için bkz. [Tanılama için Windows Yönetim araçları kullanma](./wmi/index.md).</span><span class="sxs-lookup"><span data-stu-id="e55b6-178">For more information, see [Using Windows Management Instrumentation for Diagnostics](./wmi/index.md).</span></span>

<span data-ttu-id="e55b6-179">`source`İleti günlüğündeki alan, iletinin hangi bağlamda günlüğe kaydedileceğini belirtir: istek iletisi gönderirken/alırken, istek-yanıt veya 1 yönlü istek, hizmet modeli veya aktarım katmanında veya hatalı biçimlendirilmiş bir ileti durumunda.</span><span class="sxs-lookup"><span data-stu-id="e55b6-179">The `source` field in a message log specifies in which context the message is logged: when sending/receiving a request message, for a request-reply or 1-way request, at service model or transport layer, or in the case of a malformed message.</span></span>

<span data-ttu-id="e55b6-180">Hatalı biçimlendirilmiş iletilerde `source` eşittir `Malformed` .</span><span class="sxs-lookup"><span data-stu-id="e55b6-180">For malformed messages, `source`  is equal to `Malformed`.</span></span> <span data-ttu-id="e55b6-181">Aksi takdirde, kaynak, bağlamı temel alarak aşağıdaki değerlere sahiptir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-181">Otherwise, source has the following values based on the context.</span></span>

<span data-ttu-id="e55b6-182">Istek/yanıt için</span><span class="sxs-lookup"><span data-stu-id="e55b6-182">For Request/Reply</span></span>

||<span data-ttu-id="e55b6-183">Istek gönder</span><span class="sxs-lookup"><span data-stu-id="e55b6-183">Send Request</span></span>|<span data-ttu-id="e55b6-184">Istek al</span><span class="sxs-lookup"><span data-stu-id="e55b6-184">Receive Request</span></span>|<span data-ttu-id="e55b6-185">Yanıt gönder</span><span class="sxs-lookup"><span data-stu-id="e55b6-185">Send Reply</span></span>|<span data-ttu-id="e55b6-186">Yanıt al</span><span class="sxs-lookup"><span data-stu-id="e55b6-186">Receive Reply</span></span>|
|-|------------------|---------------------|----------------|-------------------|
|<span data-ttu-id="e55b6-187">Hizmet modeli katmanı</span><span class="sxs-lookup"><span data-stu-id="e55b6-187">Service Model layer</span></span>|<span data-ttu-id="e55b6-188">Hizmet</span><span class="sxs-lookup"><span data-stu-id="e55b6-188">Service</span></span><br /><br /> <span data-ttu-id="e55b6-189">Düzey</span><span class="sxs-lookup"><span data-stu-id="e55b6-189">Level</span></span><br /><br /> <span data-ttu-id="e55b6-190">Gönder</span><span class="sxs-lookup"><span data-stu-id="e55b6-190">Send</span></span><br /><br /> <span data-ttu-id="e55b6-191">İstek</span><span class="sxs-lookup"><span data-stu-id="e55b6-191">Request</span></span>|<span data-ttu-id="e55b6-192">Hizmet</span><span class="sxs-lookup"><span data-stu-id="e55b6-192">Service</span></span><br /><br /> <span data-ttu-id="e55b6-193">Düzey</span><span class="sxs-lookup"><span data-stu-id="e55b6-193">Level</span></span><br /><br /> <span data-ttu-id="e55b6-194">Al</span><span class="sxs-lookup"><span data-stu-id="e55b6-194">Receive</span></span><br /><br /> <span data-ttu-id="e55b6-195">İstek</span><span class="sxs-lookup"><span data-stu-id="e55b6-195">Request</span></span>|<span data-ttu-id="e55b6-196">Hizmet</span><span class="sxs-lookup"><span data-stu-id="e55b6-196">Service</span></span><br /><br /> <span data-ttu-id="e55b6-197">Düzey</span><span class="sxs-lookup"><span data-stu-id="e55b6-197">Level</span></span><br /><br /> <span data-ttu-id="e55b6-198">Gönder</span><span class="sxs-lookup"><span data-stu-id="e55b6-198">Send</span></span><br /><br /> <span data-ttu-id="e55b6-199">Yanıtla</span><span class="sxs-lookup"><span data-stu-id="e55b6-199">Reply</span></span>|<span data-ttu-id="e55b6-200">Hizmet</span><span class="sxs-lookup"><span data-stu-id="e55b6-200">Service</span></span><br /><br /> <span data-ttu-id="e55b6-201">Düzey</span><span class="sxs-lookup"><span data-stu-id="e55b6-201">Level</span></span><br /><br /> <span data-ttu-id="e55b6-202">Al</span><span class="sxs-lookup"><span data-stu-id="e55b6-202">Receive</span></span><br /><br /> <span data-ttu-id="e55b6-203">Yanıtla</span><span class="sxs-lookup"><span data-stu-id="e55b6-203">Reply</span></span>|
|<span data-ttu-id="e55b6-204">Aktarım katmanı</span><span class="sxs-lookup"><span data-stu-id="e55b6-204">Transport layer</span></span>|<span data-ttu-id="e55b6-205">Aktarım</span><span class="sxs-lookup"><span data-stu-id="e55b6-205">Transport</span></span><br /><br /> <span data-ttu-id="e55b6-206">Gönder</span><span class="sxs-lookup"><span data-stu-id="e55b6-206">Send</span></span>|<span data-ttu-id="e55b6-207">Aktarım</span><span class="sxs-lookup"><span data-stu-id="e55b6-207">Transport</span></span><br /><br /> <span data-ttu-id="e55b6-208">Al</span><span class="sxs-lookup"><span data-stu-id="e55b6-208">Receive</span></span>|<span data-ttu-id="e55b6-209">Aktarım</span><span class="sxs-lookup"><span data-stu-id="e55b6-209">Transport</span></span><br /><br /> <span data-ttu-id="e55b6-210">Gönder</span><span class="sxs-lookup"><span data-stu-id="e55b6-210">Send</span></span>|<span data-ttu-id="e55b6-211">Aktarım</span><span class="sxs-lookup"><span data-stu-id="e55b6-211">Transport</span></span><br /><br /> <span data-ttu-id="e55b6-212">Al</span><span class="sxs-lookup"><span data-stu-id="e55b6-212">Receive</span></span>|

<span data-ttu-id="e55b6-213">Tek yönlü Istek için</span><span class="sxs-lookup"><span data-stu-id="e55b6-213">For One-way Request</span></span>

||<span data-ttu-id="e55b6-214">Istek gönder</span><span class="sxs-lookup"><span data-stu-id="e55b6-214">Send Request</span></span>|<span data-ttu-id="e55b6-215">Istek al</span><span class="sxs-lookup"><span data-stu-id="e55b6-215">Receive Request</span></span>|
|-|------------------|---------------------|
|<span data-ttu-id="e55b6-216">Hizmet modeli katmanı</span><span class="sxs-lookup"><span data-stu-id="e55b6-216">Service Model layer</span></span>|<span data-ttu-id="e55b6-217">Hizmet</span><span class="sxs-lookup"><span data-stu-id="e55b6-217">Service</span></span><br /><br /> <span data-ttu-id="e55b6-218">Düzey</span><span class="sxs-lookup"><span data-stu-id="e55b6-218">Level</span></span><br /><br /> <span data-ttu-id="e55b6-219">Gönder</span><span class="sxs-lookup"><span data-stu-id="e55b6-219">Send</span></span><br /><br /> <span data-ttu-id="e55b6-220">Inın</span><span class="sxs-lookup"><span data-stu-id="e55b6-220">Datagram</span></span>|<span data-ttu-id="e55b6-221">Hizmet</span><span class="sxs-lookup"><span data-stu-id="e55b6-221">Service</span></span><br /><br /> <span data-ttu-id="e55b6-222">Düzey</span><span class="sxs-lookup"><span data-stu-id="e55b6-222">Level</span></span><br /><br /> <span data-ttu-id="e55b6-223">Al</span><span class="sxs-lookup"><span data-stu-id="e55b6-223">Receive</span></span><br /><br /> <span data-ttu-id="e55b6-224">Inın</span><span class="sxs-lookup"><span data-stu-id="e55b6-224">Datagram</span></span>|
|<span data-ttu-id="e55b6-225">Aktarım katmanı</span><span class="sxs-lookup"><span data-stu-id="e55b6-225">Transport layer</span></span>|<span data-ttu-id="e55b6-226">Aktarım</span><span class="sxs-lookup"><span data-stu-id="e55b6-226">Transport</span></span><br /><br /> <span data-ttu-id="e55b6-227">Gönder</span><span class="sxs-lookup"><span data-stu-id="e55b6-227">Send</span></span>|<span data-ttu-id="e55b6-228">Aktarım</span><span class="sxs-lookup"><span data-stu-id="e55b6-228">Transport</span></span><br /><br /> <span data-ttu-id="e55b6-229">Al</span><span class="sxs-lookup"><span data-stu-id="e55b6-229">Receive</span></span>|

## <a name="message-filters"></a><span data-ttu-id="e55b6-230">İleti Filtreleri</span><span class="sxs-lookup"><span data-stu-id="e55b6-230">Message Filters</span></span>

<span data-ttu-id="e55b6-231">İleti filtreleri `messageLogging` yapılandırma bölümünün yapılandırma öğesinde tanımlanmıştır `diagnostics` .</span><span class="sxs-lookup"><span data-stu-id="e55b6-231">Message filters are defined in the `messageLogging` configuration element of the `diagnostics` configuration section.</span></span> <span data-ttu-id="e55b6-232">Bunlar hizmet ve Aktarım düzeyinde uygulanır.</span><span class="sxs-lookup"><span data-stu-id="e55b6-232">They are applied at the service and transport level.</span></span> <span data-ttu-id="e55b6-233">Bir veya daha fazla filtre tanımlandığında yalnızca filtrelerden en az biriyle eşleşen mesajlar günlüğe kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-233">When one or more filters are defined, only messages that match at least one of the filters are logged.</span></span> <span data-ttu-id="e55b6-234">Hiçbir filtre tanımlanmamışsa, tüm iletiler geçer.</span><span class="sxs-lookup"><span data-stu-id="e55b6-234">If no filter is defined, all messages pass through.</span></span>

<span data-ttu-id="e55b6-235">Filtreler tam XPath söz dizimini destekler ve yapılandırma dosyasında göründükleri sırada uygulanır.</span><span class="sxs-lookup"><span data-stu-id="e55b6-235">Filters support the full XPath syntax and are applied in the order they appear in the configuration file.</span></span> <span data-ttu-id="e55b6-236">Sözdizimi yanlış bir filtre, yapılandırma özel durumuyla sonuçlanır.</span><span class="sxs-lookup"><span data-stu-id="e55b6-236">A syntactically incorrect filter results in a configuration exception.</span></span>

<span data-ttu-id="e55b6-237">Filtreler ayrıca, `nodeQuota` XPath Dom içindeki filtreyle eşleşecek şekilde incelenebilir maksimum düğüm sayısını sınırlayan özniteliği kullanarak bir güvenlik özelliği de sağlar.</span><span class="sxs-lookup"><span data-stu-id="e55b6-237">Filters also provide a safety feature using the `nodeQuota` attribute, which limits the maximum number of nodes in the XPath DOM that can be examined to match the filter.</span></span>

<span data-ttu-id="e55b6-238">Aşağıdaki örnek, yalnızca bir SOAP üstbilgisi bölümüne sahip iletileri kaydeden bir filtrenin nasıl yapılandırılacağını gösterir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-238">The following example shows how to configure a filter that records only messages that have a SOAP header section.</span></span>

```xml
<messageLogging logEntireMessage="true"
    logMalformedMessages="true"
    logMessagesAtServiceLevel="true"
    logMessagesAtTransportLevel="true"
    maxMessagesToLog="420">
    <filters>
        <add nodeQuota="10" xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
                 /soap:Envelope/soap:Header
        </add>
     </filters>
</messageLogging>
```

<span data-ttu-id="e55b6-239">Filtreler bir iletinin gövdesine uygulanamaz.</span><span class="sxs-lookup"><span data-stu-id="e55b6-239">Filters cannot be applied to the body of a message.</span></span> <span data-ttu-id="e55b6-240">Bir iletinin gövdesini işlemeyi deneyen filtreler, filtreler listesinden kaldırılır.</span><span class="sxs-lookup"><span data-stu-id="e55b6-240">Filters that attempt to manipulate the body of a message are removed from the list of filters.</span></span> <span data-ttu-id="e55b6-241">Bunu belirten bir olay da yayılır.</span><span class="sxs-lookup"><span data-stu-id="e55b6-241">An event is also emitted that indicates this.</span></span> <span data-ttu-id="e55b6-242">Örneğin, aşağıdaki filtre filtre tablosundan kaldırılacak.</span><span class="sxs-lookup"><span data-stu-id="e55b6-242">For example, the following filter would be removed from the filter table.</span></span>

```xml
<add xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">/s:Envelope/s:Body[contains(text(), "Hello")]</add>
```

## <a name="configuring-a-custom-listener"></a><span data-ttu-id="e55b6-243">Özel bir dinleyici yapılandırma</span><span class="sxs-lookup"><span data-stu-id="e55b6-243">Configuring a Custom Listener</span></span>

<span data-ttu-id="e55b6-244">Ayrıca, ek seçeneklerle özel bir dinleyici de yapılandırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e55b6-244">You can also configure a custom listener with additional options.</span></span> <span data-ttu-id="e55b6-245">Özel bir dinleyici, günlüğe kaydedilmeden önce iletilerden uygulamaya özgü PII öğelerini filtrelemede yararlı olabilir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-245">A custom listener can be useful in filtering application-specific PII elements from messages before logging.</span></span> <span data-ttu-id="e55b6-246">Aşağıdaki örnek, özel bir dinleyici yapılandırmasını gösterir.</span><span class="sxs-lookup"><span data-stu-id="e55b6-246">The following example demonstrates a custom listener configuration.</span></span>

```xml
<system.diagnostics>
   <sources>
     <source name="System.ServiceModel.MessageLogging">
           <listeners>
             <add name="MyListener"
                    type="YourCustomListener"
                    initializeData="c:\logs\messages.svclog"
                    maxDiskSpace="1000"/>
           </listeners>
     </source>
   </sources>
</system.diagnostics>
```

<span data-ttu-id="e55b6-247">`type`Özniteliğin, türün nitelenmiş derleme adına ayarlanması gerektiğini bilmelisiniz.</span><span class="sxs-lookup"><span data-stu-id="e55b6-247">You should be aware that the `type` attribute should be set to a qualified assembly name of the type.</span></span>

## <a name="see-also"></a><span data-ttu-id="e55b6-248">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="e55b6-248">See also</span></span>

- [\<messageLogging>](../../configure-apps/file-schema/wcf/messagelogging.md)
- [<span data-ttu-id="e55b6-249">Günlüğe İleti Kaydetme</span><span class="sxs-lookup"><span data-stu-id="e55b6-249">Message Logging</span></span>](message-logging.md)
- [<span data-ttu-id="e55b6-250">İzleme ve İletileri Günlüğe Kaydetme için Önerilen Ayarlar</span><span class="sxs-lookup"><span data-stu-id="e55b6-250">Recommended Settings for Tracing and Message Logging</span></span>](./tracing/recommended-settings-for-tracing-and-message-logging.md)
