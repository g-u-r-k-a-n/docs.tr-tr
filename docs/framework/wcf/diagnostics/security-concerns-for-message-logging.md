---
title: İleti Günlüğe Kaydetme ile İlgili Güvenlik Konuları
ms.date: 03/30/2017
ms.assetid: 21f513f2-815b-47f3-85a6-03c008510038
ms.openlocfilehash: bb1a6ab84ceba27b398d397b4407a55aa02c4cae
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/12/2020
ms.locfileid: "79185769"
---
# <a name="security-concerns-for-message-logging"></a><span data-ttu-id="2295a-102">İleti Günlüğe Kaydetme ile İlgili Güvenlik Konuları</span><span class="sxs-lookup"><span data-stu-id="2295a-102">Security Concerns for Message Logging</span></span>
<span data-ttu-id="2295a-103">Bu konu, hassas verilerin ileti günlüklerinde açığa çıkarılmasını nasıl koruyabileceğinizi ve ileti günlüğe kaydetmenin oluşturduğu olayları açıklar.</span><span class="sxs-lookup"><span data-stu-id="2295a-103">This topic describes how you can protect sensitive data from being exposed in message logs, as well as events generated by message logging.</span></span>  
  
## <a name="security-concerns"></a><span data-ttu-id="2295a-104">Güvenlik Endişeleri</span><span class="sxs-lookup"><span data-stu-id="2295a-104">Security Concerns</span></span>  
  
### <a name="logging-sensitive-information"></a><span data-ttu-id="2295a-105">Hassas Bilgileri Günlüğe Kaydetme</span><span class="sxs-lookup"><span data-stu-id="2295a-105">Logging Sensitive Information</span></span>  
 <span data-ttu-id="2295a-106">Windows Communication Foundation (WCF), uygulamaya özgü üstbilgiler ve gövdedeki verileri değiştirmez.</span><span class="sxs-lookup"><span data-stu-id="2295a-106">Windows Communication Foundation (WCF) does not modify any data in application-specific headers and body.</span></span> <span data-ttu-id="2295a-107">WCF ayrıca uygulamaya özel üstbilgilerdeki veya gövde verilerindeki kişisel bilgileri izlemez.</span><span class="sxs-lookup"><span data-stu-id="2295a-107">WCF also does not track personal information in application-specific headers or body data.</span></span>  
  
 <span data-ttu-id="2295a-108">İleti günlüğe kaydetme etkinleştirildiğinde, sorgu dizesi gibi uygulamaya özgü üstbilgilerdeki kişisel bilgiler; ve kredi kartı numarası gibi gövde bilgileri günlüklerde görülebilir.</span><span class="sxs-lookup"><span data-stu-id="2295a-108">When message logging is enabled, personal information in application-specific headers, such as, a query string; and body information, such as, a credit card number, can become visible in the logs.</span></span> <span data-ttu-id="2295a-109">Uygulama dağıtıcı, yapılandırma ve günlük dosyaları üzerinde erişim denetimini zorlamakiçin sorumludur.</span><span class="sxs-lookup"><span data-stu-id="2295a-109">The application deployer is responsible for enforcing access control on the configuration and log files.</span></span> <span data-ttu-id="2295a-110">Bu tür bilgilerin görünür olmasını istemiyorsanız, günlükleri paylaşmak istiyorsanız günlüğe kaydetmeyi devre dışı kesmeniz veya verilerin bir kısmını filtrelemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="2295a-110">If you do not want this kind of information to be visible, you should disable logging, or filter out part of the data if you want to share the logs.</span></span>  
  
 <span data-ttu-id="2295a-111">Aşağıdaki ipuçları, günlük dosyasının içeriğinin istemeden açığa çıkarOlmasını önlemenize yardımcı olabilir:</span><span class="sxs-lookup"><span data-stu-id="2295a-111">The following tips can help you to prevent the content of a log file from being exposed unintentionally:</span></span>  
  
- <span data-ttu-id="2295a-112">Günlük dosyalarının hem Web barındırma hem de kendi barındırma senaryolarında Erişim Denetim Listeleri (ACL) tarafından korunduğundan emin olun.</span><span class="sxs-lookup"><span data-stu-id="2295a-112">Ensure that the log files are protected by Access Control Lists (ACL) both in Web-host and self-host scenarios.</span></span>  
  
- <span data-ttu-id="2295a-113">Web isteği kullanılarak kolayca sunulamayan bir dosya uzantısı seçin.</span><span class="sxs-lookup"><span data-stu-id="2295a-113">Choose a file extension that cannot be easily served using a Web request.</span></span> <span data-ttu-id="2295a-114">Örneğin, .xml dosya uzantısı güvenli bir seçim değildir.</span><span class="sxs-lookup"><span data-stu-id="2295a-114">For example, the .xml file extension is not a safe choice.</span></span> <span data-ttu-id="2295a-115">Sunulabilecek uzantıların listesini görmek için Internet Information Services (IIS) yönetim kılavuzuna bakabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2295a-115">You can check the Internet Information Services (IIS) administration guide to see a list of extensions that can be served.</span></span>  
  
- <span data-ttu-id="2295a-116">Bir Web tarayıcısı kullanarak harici bir taraf tarafından erişmesini önlemek için Web ana bilgisayar vroot genel dizininin dışında olması gereken günlük dosyası konumu için mutlak bir yol belirtin.</span><span class="sxs-lookup"><span data-stu-id="2295a-116">Specify an absolute path for the log file location, which should be outside of the Web host vroot public directory to prevent it from being accessed by an external party using a Web browser.</span></span>  
  
 <span data-ttu-id="2295a-117">Varsayılan olarak, kullanıcı adı ve parola gibi anahtarlar ve kişisel olarak tanımlanabilir bilgiler (PII) izlemelerde ve günlüğe kaydedilmiş iletilerde günlüğe kaydedilmez.</span><span class="sxs-lookup"><span data-stu-id="2295a-117">By default, keys and personally identifiable information (PII) such as username and password are not logged in traces and logged messages.</span></span> <span data-ttu-id="2295a-118">Ancak bir makine yöneticisi, `enableLoggingKnownPII` Machine.config `machineSettings` dosyasının öğesindeki özniteliği, bilinen kişisel olarak tanımlanabilir bilgileri (PII) günlüğe kaydetmek için makinede çalışan uygulamalara izin vermek için kullanabilir.</span><span class="sxs-lookup"><span data-stu-id="2295a-118">A machine administrator, however, can use the `enableLoggingKnownPII` attribute in the `machineSettings` element of the Machine.config file to permit applications running on the machine to log known personally identifiable information (PII).</span></span> <span data-ttu-id="2295a-119">Aşağıdaki yapılandırma bunu nasıl yapacağız gösterir:</span><span class="sxs-lookup"><span data-stu-id="2295a-119">The following configuration demonstrates how to do this:</span></span>  
  
```xml  
<configuration>  
   <system.serviceModel>  
      <machineSettings enableLoggingKnownPii="true"/>  
   </system.serviceModel>  
</configuration>
```  
  
 <span data-ttu-id="2295a-120">Bir uygulama dağıtıcısı `logKnownPii` daha sonra aşağıdaki gibi KIŞISEL günlüğe kaydetmeyi etkinleştirmek için App.config veya Web.config dosyasındaki özniteliği kullanabilir:</span><span class="sxs-lookup"><span data-stu-id="2295a-120">An application deployer can then use the `logKnownPii` attribute in either the App.config or Web.config file to enable PII logging as follows:</span></span>  
  
```xml  
<system.diagnostics>  
  <sources>  
      <source name="System.ServiceModel.MessageLogging"  
        logKnownPii="true">  
        <listeners>  
                 <add name="messages"  
                 type="System.Diagnostics.XmlWriterTraceListener"  
                 initializeData="c:\logs\messages.svclog" />  
          </listeners>  
      </source>  
    </sources>  
</system.diagnostics>  
```  
  
 <span data-ttu-id="2295a-121">Yalnızca her iki `true` ayar da KIŞISEL olarak günlüğe kaydetme etkin olduğunda.</span><span class="sxs-lookup"><span data-stu-id="2295a-121">Only when both settings are `true` is PII logging enabled.</span></span> <span data-ttu-id="2295a-122">İki anahtarın birleşimi, her uygulama için bilinen KIŞISEL Bilgiler'i günlüğe kaydetme esnekliğisağlar.</span><span class="sxs-lookup"><span data-stu-id="2295a-122">The combination of two switches allows the flexibility to log known PII for each application.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="2295a-123">`logEntireMessage` Ve [!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)] `logKnownPii` bayraklar da Web.config `true` dosyasında veya App.config dosyasında pii günlüğe etkinleştirmek için `<system.serviceModel><messageLogging logEntireMessage="true" logKnownPii="true" …`ayarlanmalıdır, aşağıdaki örnekte gösterdiği gibi .</span><span class="sxs-lookup"><span data-stu-id="2295a-123">In [!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)] the `logEntireMessage` and `logKnownPii` flags must also be set to `true` in the Web.config file or the App.config file to enable PII logging, as show in the following example `<system.serviceModel><messageLogging logEntireMessage="true" logKnownPii="true" …`.</span></span>  
  
 <span data-ttu-id="2295a-124">Bir yapılandırma dosyasında iki veya daha fazla özel kaynak belirtirseniz, yalnızca ilk kaynağın özniteliklerinin okunduğunu unutmayın.</span><span class="sxs-lookup"><span data-stu-id="2295a-124">You should be aware that if you specify two or more custom sources in a configuration file, only the attributes of the first source are read.</span></span> <span data-ttu-id="2295a-125">Diğerleri yok sayılır.</span><span class="sxs-lookup"><span data-stu-id="2295a-125">The others are ignored.</span></span> <span data-ttu-id="2295a-126">Bu, aşağıdaki App.config, dosya için, kişisel bilgiler ikinci kaynak için açıkça etkin olsa bile, her iki kaynak için de günlüğe kaydedilmez anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="2295a-126">This means that, for the following App.config, file, PII is not logged for both sources even though PII logging is explicitly enabled for the second source.</span></span>  
  
```xml  
<system.diagnostics>  
   <sources>  
      <source name="System.ServiceModel.MessageLogging"  
              logKnownPii="false">  
              <listeners>  
                 <add name="messages"  
                      type="System.Diagnostics.XmlWriterTraceListener"  
                      initializeData="c:\logs\messages.svclog" />  
              </listeners>  
            </source>  
      <source name="System.ServiceModel"
              logKnownPii="true">  
              <listeners>  
                 <add name="traces"  
                      type="System.Diagnostics.XmlWriterTraceListener"  
                      initializeData="c:\logs\traces.svclog" />  
              </listeners>  
      </source>  
   </sources>  
</system.diagnostics>  
```  
  
 <span data-ttu-id="2295a-127">`<machineSettings enableLoggingKnownPii="Boolean"/>` Öğe Machine.config dosyasının dışında varsa, sistem <xref:System.Configuration.ConfigurationErrorsException>bir .</span><span class="sxs-lookup"><span data-stu-id="2295a-127">If the `<machineSettings enableLoggingKnownPii="Boolean"/>` element exists outside the Machine.config file, the system throws a <xref:System.Configuration.ConfigurationErrorsException>.</span></span>  
  
 <span data-ttu-id="2295a-128">Değişiklikler yalnızca uygulama başlatıldığında veya yeniden başlatıldığında etkili dir.</span><span class="sxs-lookup"><span data-stu-id="2295a-128">The changes are effective only when the application starts or restarts.</span></span> <span data-ttu-id="2295a-129">Her iki öznitelik de `true`'' de ayarlandığında, bir olay başlangıçta günlüğe kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="2295a-129">An event is logged at startup when both attributes are set to `true`.</span></span> <span data-ttu-id="2295a-130">Bir olay, ayarlanmış `logKnownPii` `true` ancak `enableLoggingKnownPii` . `false`</span><span class="sxs-lookup"><span data-stu-id="2295a-130">An event is also logged if `logKnownPii` is set to `true` but `enableLoggingKnownPii` is `false`.</span></span>  
  
 <span data-ttu-id="2295a-131">Makine yöneticisi ve uygulama dağıtıcı, bu iki anahtarı kullanırken çok dikkatli olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="2295a-131">The machine administrator and application deployer should exercise extreme caution when using these two switches.</span></span> <span data-ttu-id="2295a-132">Kişisel günlük etkinse, güvenlik anahtarları ve KIŞISEL bilgiler günlüğe kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="2295a-132">If PII logging is enabled, security keys and PII are logged.</span></span> <span data-ttu-id="2295a-133">Devre dışı bırakılmışsa, duyarlı ve uygulamaya özgü veriler ileti üstbilgileri ve gövdelerinde günlüğe kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="2295a-133">If it is disabled, sensitive and application-specific data is still logged in message headers and bodies.</span></span> <span data-ttu-id="2295a-134">Gizlilik hakkında daha ayrıntılı bir tartışma ve kişisel bilgilerin açığa çıkarılmaktan korunması için [Bkz. Kullanıcı Gizliliği.](https://docs.microsoft.com/previous-versions/dotnet/articles/aa480490(v=msdn.10))</span><span class="sxs-lookup"><span data-stu-id="2295a-134">For a more thorough discussion about privacy and protecting PII from being exposed, see [User Privacy](https://docs.microsoft.com/previous-versions/dotnet/articles/aa480490(v=msdn.10)).</span></span>  
  
> [!CAUTION]
> <span data-ttu-id="2295a-135">Kişisel bilgiler yanlış biçimlendirilmiş iletilerde gizli değildir.</span><span class="sxs-lookup"><span data-stu-id="2295a-135">PII is not hidden in malformed messages.</span></span> <span data-ttu-id="2295a-136">Bu tür iletiler herhangi bir değişiklik yapılmadan olduğu gibi günlüğe kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="2295a-136">Such messaged are logged as-is without any modification.</span></span> <span data-ttu-id="2295a-137">Daha önce bahsedilen özniteliklerin bu konuda hiçbir etkisi yoktur.</span><span class="sxs-lookup"><span data-stu-id="2295a-137">Attributes mentioned previously have no effect on this.</span></span>  
  
### <a name="custom-trace-listener"></a><span data-ttu-id="2295a-138">Özel İzleme Dinleyicisi</span><span class="sxs-lookup"><span data-stu-id="2295a-138">Custom Trace Listener</span></span>  
 <span data-ttu-id="2295a-139">İleti Günlüğü izleme kaynağına özel bir izleme dinleyicisi eklemek, yöneticiyle sınırlandırılması gereken bir ayrıcalıktır.</span><span class="sxs-lookup"><span data-stu-id="2295a-139">Adding a custom trace listener on the Message Logging trace source is a privilege that should be restricted to the administrator.</span></span> <span data-ttu-id="2295a-140">Bunun nedeni, kötü amaçlı özel dinleyicilerin iletileri uzaktan gönderecek şekilde yapılandırılabiliyor ve bu da hassas bilgilerin açığa çıkmasına yol açabiliyor.</span><span class="sxs-lookup"><span data-stu-id="2295a-140">This is because malicious custom listeners can be configured to send messages remotely, which leads to sensitive information disclosure.</span></span> <span data-ttu-id="2295a-141">Ayrıca, kabloya ileti gönderecek özel bir dinleyiciyi (örneğin, uzak bir veritabanına) yapılandırıyorsanız, uzak makinedeki ileti günlükleri üzerinde uygun erişim denetimini zorlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="2295a-141">In addition, if you configure a custom listener to send messages on the wire, such as, to a remote database, you should enforce proper access control on the message logs in the remote machine.</span></span>  
  
## <a name="events-triggered-by-message-logging"></a><span data-ttu-id="2295a-142">İleti Günlüğe Kaydetmenin Tetiklediği Olaylar</span><span class="sxs-lookup"><span data-stu-id="2295a-142">Events Triggered by Message Logging</span></span>  
 <span data-ttu-id="2295a-143">Aşağıda, ileti günlüğe kaydetme nin yaydığı tüm olaylar listelenir.</span><span class="sxs-lookup"><span data-stu-id="2295a-143">The following lists all the events emitted by message logging.</span></span>  
  
- <span data-ttu-id="2295a-144">İleti oturumu açma: İleti günlüğe kaydetme yapılandırmada veya WMI aracılığıyla etkinleştirildiğinde bu olay yayımlanır.</span><span class="sxs-lookup"><span data-stu-id="2295a-144">Message logging on: This event is emitted when message logging is enabled in configuration, or through WMI.</span></span> <span data-ttu-id="2295a-145">Etkinliğin içeriği "İleti günlüğe kaydetme açık.</span><span class="sxs-lookup"><span data-stu-id="2295a-145">The content of the event is "Message logging has been turned on.</span></span> <span data-ttu-id="2295a-146">Hassas bilgiler, örneğin ileti gövdeleri gibi, telüzerinde şifrelenmiş olsalar bile, açık metin olarak günlüğe kaydedilebilir."</span><span class="sxs-lookup"><span data-stu-id="2295a-146">Sensitive information may be logged in clear text, even if they were encrypted on the wire, for example, message bodies."</span></span>  
  
- <span data-ttu-id="2295a-147">İleti oturumu kapatma: İleti günlüğe kaydetme WMI üzerinden devre dışı bırakıldığında bu olay yayımlanır.</span><span class="sxs-lookup"><span data-stu-id="2295a-147">Message logging off: This event is emitted when message logging is disabled through WMI.</span></span> <span data-ttu-id="2295a-148">Etkinliğin içeriği "İleti günlüğe kaydetme kapatıldı."</span><span class="sxs-lookup"><span data-stu-id="2295a-148">The content of the event is "Message logging has been turned off."</span></span>  
  
- <span data-ttu-id="2295a-149">Günlük Bilinen Kişisel Bilgiler: Bilinen KIŞISEL'lerin günlüğe kaydedilmesi etkinleştirildiğinde bu olay yayılır.</span><span class="sxs-lookup"><span data-stu-id="2295a-149">Log Known PII On: This event is emitted when logging of known PII is enabled.</span></span> <span data-ttu-id="2295a-150">`enableLoggingKnownPii` Bu, Machine.config `machineSettings` dosyasının öğesindeki öznitelik ayarlandığında `true`ve `logKnownPii` App.config `source` veya Web.config dosyasındaki öğenin özniteliği `true`.</span><span class="sxs-lookup"><span data-stu-id="2295a-150">This happens when the `enableLoggingKnownPii` attribute in the `machineSettings` element of the Machine.config file is set to `true`, and the `logKnownPii` attribute of the `source` element in either the App.config or Web.config file is set to `true`.</span></span>  
  
- <span data-ttu-id="2295a-151">Günlük Bilinen Kişisel Bilgiler'e Izin Verilmez: Bilinen KIŞISEL'in günlüğe kaydedilmesine izin verilmediğinde bu olay yayımlanır.</span><span class="sxs-lookup"><span data-stu-id="2295a-151">Log Known PII Not Allowed: This event is emitted when logging of known PII is not allowed.</span></span> <span data-ttu-id="2295a-152">Bu, App.config `source` veya Web.config dosyasındaki öğenin `true`özniteliği ayarlandığında `enableLoggingKnownPii` `machineSettings` `false` `logKnownPii` olur, ancak Machine.config dosyasının öğesindeki öznitelik .</span><span class="sxs-lookup"><span data-stu-id="2295a-152">This happens when the `logKnownPii` attribute of the `source` element in either the App.config or Web.config file is set to `true`, but the `enableLoggingKnownPii` attribute in the `machineSettings` element of the Machine.config file is set to `false`.</span></span> <span data-ttu-id="2295a-153">Özel durum oluşturulmaz.</span><span class="sxs-lookup"><span data-stu-id="2295a-153">No exception is thrown.</span></span>  
  
 <span data-ttu-id="2295a-154">Bu olaylar, Windows ile birlikte gelen Olay Görüntüleyici aracında görüntülenebilir.</span><span class="sxs-lookup"><span data-stu-id="2295a-154">These events can be viewed in the Event Viewer tool that comes with Windows.</span></span> <span data-ttu-id="2295a-155">Bu konuda daha fazla bilgi için [Olay Günlüğü'ne](./event-logging/index.md)bakın.</span><span class="sxs-lookup"><span data-stu-id="2295a-155">For more information on this, see [Event Logging](./event-logging/index.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2295a-156">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="2295a-156">See also</span></span>

- [<span data-ttu-id="2295a-157">Günlüğe İleti Kaydetme</span><span class="sxs-lookup"><span data-stu-id="2295a-157">Message Logging</span></span>](message-logging.md)
- [<span data-ttu-id="2295a-158">İzleme için Güvenlikle İlgili Noktalar ve Faydalı İpuçları</span><span class="sxs-lookup"><span data-stu-id="2295a-158">Security Concerns and Useful Tips for Tracing</span></span>](./tracing/security-concerns-and-useful-tips-for-tracing.md)
