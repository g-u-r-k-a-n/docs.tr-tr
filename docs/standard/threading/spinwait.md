---
title: SpinWait
ms.date: 03/30/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- synchronization primitives, SpinWait
ms.assetid: 36012f42-34e5-4f86-adf4-973f433ed6c6
ms.openlocfilehash: fb70697fd14f9f8734ca1a7896fc06c6bca5a71d
ms.sourcegitcommit: 7588b1f16b7608bc6833c05f91ae670c22ef56f8
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 11/02/2020
ms.locfileid: "93188932"
---
# <a name="spinwait"></a><span data-ttu-id="be3d9-102">SpinWait</span><span class="sxs-lookup"><span data-stu-id="be3d9-102">SpinWait</span></span>

<span data-ttu-id="be3d9-103"><xref:System.Threading.SpinWait?displayProperty=nameWithType> , çekirdek olaylar için gereken pahalı bağlam anahtarları ve çekirdek geçişleri önlemek üzere alt düzey senaryolarda kullanabileceğiniz basit bir eşitleme türüdür.</span><span class="sxs-lookup"><span data-stu-id="be3d9-103"><xref:System.Threading.SpinWait?displayProperty=nameWithType> is a lightweight synchronization type that you can use in low-level scenarios to avoid the expensive context switches and kernel transitions that are required for kernel events.</span></span> <span data-ttu-id="be3d9-104">Birden çok yerinde bilgisayarda, bir kaynağın uzun süreler boyunca tutulması beklenmiyorsa, bir bekleyen iş parçacığının birkaç düzine veya birkaç yüz döngüsü için Kullanıcı modunda dönmesi daha verimli olabilir ve sonra kaynağı edinmeyi yeniden dener.</span><span class="sxs-lookup"><span data-stu-id="be3d9-104">On multicore computers, when a resource is not expected to be held for long periods of time, it can be more efficient for a waiting thread to spin in user mode for a few dozen or a few hundred cycles, and then retry to acquire the resource.</span></span> <span data-ttu-id="be3d9-105">Kaynak çağrıldıktan sonra kullanılabiliyorsa, birkaç bin döngü kaydettiniz.</span><span class="sxs-lookup"><span data-stu-id="be3d9-105">If the resource is available after spinning, then you have saved several thousand cycles.</span></span> <span data-ttu-id="be3d9-106">Kaynak hala kullanılamıyorsa yalnızca birkaç döngü kullanmış ve yine de çekirdek tabanlı bekleme moduna girebiliyor olabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="be3d9-106">If the resource is still not available, then you have spent only a few cycles and can still enter a kernel-based wait.</span></span> <span data-ttu-id="be3d9-107">Bu dönen ve daha sonra bekleyen birleşim bazen *iki aşamalı bir bekleme işlemi* olarak adlandırılır.</span><span class="sxs-lookup"><span data-stu-id="be3d9-107">This spinning-then-waiting combination is sometimes referred to as a *two-phase wait operation* .</span></span>  
  
 <span data-ttu-id="be3d9-108"><xref:System.Threading.SpinWait> , gibi çekirdek olaylarını sarması gereken .NET türleriyle birlikte kullanılmak üzere tasarlanmıştır <xref:System.Threading.ManualResetEvent> .</span><span class="sxs-lookup"><span data-stu-id="be3d9-108"><xref:System.Threading.SpinWait> is designed to be used in conjunction with the .NET types that wrap kernel events such as <xref:System.Threading.ManualResetEvent>.</span></span> <span data-ttu-id="be3d9-109"><xref:System.Threading.SpinWait> , tek bir programdaki temel dönen işlevsellik için kendisi tarafından da kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="be3d9-109"><xref:System.Threading.SpinWait> can also be used by itself for basic spinning functionality in just one program.</span></span>  
  
 <span data-ttu-id="be3d9-110"><xref:System.Threading.SpinWait> yalnızca boş bir döngüden daha fazla.</span><span class="sxs-lookup"><span data-stu-id="be3d9-110"><xref:System.Threading.SpinWait> is more than just an empty loop.</span></span> <span data-ttu-id="be3d9-111">Genel durum için doğru bir dönme davranışı sağlamak üzere dikkatli bir şekilde uygulanır ve yeterince uzun sürirse (yaklaşık olarak bir çekirdek geçişi için gereken süre), içerik anahtarları başlatılır.</span><span class="sxs-lookup"><span data-stu-id="be3d9-111">It is carefully implemented to provide correct spinning behavior for the general case, and will itself initiate context switches if it spins long enough (roughly the length of time required for a kernel transition).</span></span> <span data-ttu-id="be3d9-112">Örneğin, tek çekirdekli bilgisayarlarda, <xref:System.Threading.SpinWait> dönen blok tüm iş parçacıklarında ilerleme yaptığından, iş parçacığının zaman dilimini hemen oluşturur.</span><span class="sxs-lookup"><span data-stu-id="be3d9-112">For example, on single-core computers, <xref:System.Threading.SpinWait> yields the time slice of the thread immediately because spinning blocks forward progress on all threads.</span></span> <span data-ttu-id="be3d9-113"><xref:System.Threading.SpinWait> Ayrıca, bekleyen iş parçacığının daha yüksek öncelikli iş parçacıklarını veya çöp toplayıcıyı engellemesini engellemek için çok çekirdekli makinelerde bile.</span><span class="sxs-lookup"><span data-stu-id="be3d9-113"><xref:System.Threading.SpinWait> also yields even on multi-core machines to prevent the waiting thread from blocking higher-priority threads or the garbage collector.</span></span> <span data-ttu-id="be3d9-114">Bu nedenle, <xref:System.Threading.SpinWait> iki aşamalı bekleme işleminde bir kullanıyorsanız, <xref:System.Threading.SpinWait> kendisi bir bağlam anahtarı başlatmadan önce çekirdek beklemeyi çağırmanız önerilir.</span><span class="sxs-lookup"><span data-stu-id="be3d9-114">Therefore, if you are using a <xref:System.Threading.SpinWait> in a two-phase wait operation, we recommend that you invoke the kernel wait before the <xref:System.Threading.SpinWait> itself initiates a context switch.</span></span> <span data-ttu-id="be3d9-115"><xref:System.Threading.SpinWait><xref:System.Threading.SpinWait.NextSpinWillYield%2A>, ' a her çağrıdan önce kontrol edebilirsiniz özelliğini sağlar <xref:System.Threading.SpinWait.SpinOnce%2A> .</span><span class="sxs-lookup"><span data-stu-id="be3d9-115"><xref:System.Threading.SpinWait> provides the <xref:System.Threading.SpinWait.NextSpinWillYield%2A> property, which you can check before every call to <xref:System.Threading.SpinWait.SpinOnce%2A>.</span></span> <span data-ttu-id="be3d9-116">Özelliği döndüğünde `true` , kendi bekleme işleminizi başlatın.</span><span class="sxs-lookup"><span data-stu-id="be3d9-116">When the property returns `true`, initiate your own Wait operation.</span></span> <span data-ttu-id="be3d9-117">Bir örnek için bkz. [nasıl yapılır: Two-Phase bir bekleme Işlemini uygulamak Için SpinWait kullanma](how-to-use-spinwait-to-implement-a-two-phase-wait-operation.md).</span><span class="sxs-lookup"><span data-stu-id="be3d9-117">For an example, see [How to: Use SpinWait to Implement a Two-Phase Wait Operation](how-to-use-spinwait-to-implement-a-two-phase-wait-operation.md).</span></span>  
  
 <span data-ttu-id="be3d9-118">İki aşamalı bir bekleme işlemi gerçekleştirmemekle kalmaz ancak bazı koşullar doğru olana kadar yalnızca, <xref:System.Threading.SpinWait> Windows işletim sistemi ortamında iyi bir vatandaşlık olması için bağlam anahtarlarını gerçekleştirmeye olanak sağlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="be3d9-118">If you are not performing a two-phase wait operation but are just spinning until some condition is true, you can enable <xref:System.Threading.SpinWait> to perform its context switches so that it is a good citizen in the Windows operating system environment.</span></span> <span data-ttu-id="be3d9-119">Aşağıdaki temel örnek, bir <xref:System.Threading.SpinWait> kilit boş yığında bir gösterir.</span><span class="sxs-lookup"><span data-stu-id="be3d9-119">The following basic example shows a <xref:System.Threading.SpinWait> in a lock-free stack.</span></span> <span data-ttu-id="be3d9-120">Yüksek performanslı, iş parçacığı açısından güvenli bir yığına ihtiyacınız varsa, kullanmayı göz önünde bulundurun <xref:System.Collections.Concurrent.ConcurrentStack%601?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="be3d9-120">If you require a high-performance, thread-safe stack, consider using <xref:System.Collections.Concurrent.ConcurrentStack%601?displayProperty=nameWithType>.</span></span>  
  
 [!code-csharp[CDS_SpinWait#05](../../../samples/snippets/csharp/VS_Snippets_Misc/cds_spinwait/cs/spinwait.cs#05)]
 [!code-vb[CDS_SpinWait#05](../../../samples/snippets/visualbasic/VS_Snippets_Misc/cds_spinwait/vb/cds_spinwait1.vb#05)]  
  
## <a name="see-also"></a><span data-ttu-id="be3d9-121">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="be3d9-121">See also</span></span>

- <xref:System.Threading.Thread.SpinWait%2A>
- [<span data-ttu-id="be3d9-122">İş parçacığı nesneleri ve özellikleri</span><span class="sxs-lookup"><span data-stu-id="be3d9-122">Threading Objects and Features</span></span>](threading-objects-and-features.md)
