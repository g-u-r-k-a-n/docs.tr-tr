---
title: Temsilciler için Ortak Desenler
description: Bileşenleriniz arasında güçlü bir kuponu önlemek için kodunuzda temsilcilerin kullanılmasına yönelik yaygın desenler hakkında bilgi edinin.
ms.date: 06/20/2016
ms.assetid: 0ff8fdfd-6a11-4327-b061-0f2526f35b43
ms.openlocfilehash: 22ab88e5b139381e3a8921baa20df035f1405146
ms.sourcegitcommit: 67ebdb695fd017d79d9f1f7f35d145042d5a37f7
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/20/2020
ms.locfileid: "92223686"
---
# <a name="common-patterns-for-delegates"></a><span data-ttu-id="7adff-103">Temsilciler için Ortak Desenler</span><span class="sxs-lookup"><span data-stu-id="7adff-103">Common Patterns for Delegates</span></span>

[<span data-ttu-id="7adff-104">Önceki</span><span class="sxs-lookup"><span data-stu-id="7adff-104">Previous</span></span>](delegates-strongly-typed.md)

<span data-ttu-id="7adff-105">Temsilciler, bileşenler arasında çok az sayıda bağlantısı olan yazılım tasarımlarını sağlayan bir mekanizma sağlar.</span><span class="sxs-lookup"><span data-stu-id="7adff-105">Delegates provide a mechanism that enables software designs involving minimal coupling between components.</span></span>

<span data-ttu-id="7adff-106">Bu tür bir tasarıma yönelik harika bir örnek LINQ 'dir.</span><span class="sxs-lookup"><span data-stu-id="7adff-106">One excellent example for this kind of design is LINQ.</span></span> <span data-ttu-id="7adff-107">LINQ sorgu Ifade deseninin tüm özellikleri için temsilcileri temel alır.</span><span class="sxs-lookup"><span data-stu-id="7adff-107">The LINQ Query Expression Pattern relies on delegates for all of its features.</span></span> <span data-ttu-id="7adff-108">Şu basit örneği göz önünde bulundurun:</span><span class="sxs-lookup"><span data-stu-id="7adff-108">Consider this simple example:</span></span>

```csharp
var smallNumbers = numbers.Where(n => n < 10);
```

<span data-ttu-id="7adff-109">Bu, sayı dizisini yalnızca 10 ' dan küçük bir değere filtreler.</span><span class="sxs-lookup"><span data-stu-id="7adff-109">This filters the sequence of numbers to only those less than the value 10.</span></span>
<span data-ttu-id="7adff-110">`Where`Yöntemi, bir dizinin hangi öğelerinin filtreyi geçiğini belirleyen bir temsilci kullanır.</span><span class="sxs-lookup"><span data-stu-id="7adff-110">The `Where` method uses a delegate that determines which elements of a sequence pass the filter.</span></span> <span data-ttu-id="7adff-111">Bir LINQ sorgusu oluşturduğunuzda, bu belirli amaçla temsilci uygulamasını sağlarsınız.</span><span class="sxs-lookup"><span data-stu-id="7adff-111">When you create a LINQ query, you supply the implementation of the delegate for this specific purpose.</span></span>

<span data-ttu-id="7adff-112">WHERE yönteminin prototipi:</span><span class="sxs-lookup"><span data-stu-id="7adff-112">The prototype for the Where method is:</span></span>

```csharp
public static IEnumerable<TSource> Where<TSource> (this IEnumerable<TSource> source, Func<TSource, bool> predicate);
```

<span data-ttu-id="7adff-113">Bu örnek, LINQ 'ın parçası olan tüm yöntemlerle yinelenir.</span><span class="sxs-lookup"><span data-stu-id="7adff-113">This example is repeated with all the methods that are part of LINQ.</span></span> <span data-ttu-id="7adff-114">Bunlar, belirli sorguyu yöneten kod için temsilcileri kullanır.</span><span class="sxs-lookup"><span data-stu-id="7adff-114">They all rely on delegates for the code that manages the specific query.</span></span> <span data-ttu-id="7adff-115">Bu API tasarım deseninin öğrenilmesinde ve anlaşılması çok güçlü bir araçtır.</span><span class="sxs-lookup"><span data-stu-id="7adff-115">This API design pattern is a very powerful one to learn and understand.</span></span>

<span data-ttu-id="7adff-116">Bu basit örnek, temsilcilerin bileşenler arasında çok az eşlenme gerektirdiğini gösterir.</span><span class="sxs-lookup"><span data-stu-id="7adff-116">This simple example illustrates how delegates require very little coupling between components.</span></span> <span data-ttu-id="7adff-117">Belirli bir taban sınıftan türetilen bir sınıf oluşturmanız gerekmez.</span><span class="sxs-lookup"><span data-stu-id="7adff-117">You don't need to create a class that derives from a particular base class.</span></span> <span data-ttu-id="7adff-118">Belirli bir arabirim uygulamanız gerekmez.</span><span class="sxs-lookup"><span data-stu-id="7adff-118">You don't need to implement a specific interface.</span></span>
<span data-ttu-id="7adff-119">Tek gereksinim, her seferinde görev için temel olan bir yöntemin uygulanmasını sağlamaktır.</span><span class="sxs-lookup"><span data-stu-id="7adff-119">The only requirement is to provide the implementation of one method that is fundamental to the task at hand.</span></span>

## <a name="building-your-own-components-with-delegates"></a><span data-ttu-id="7adff-120">Temsilcilerle kendi bileşenlerinizi oluşturma</span><span class="sxs-lookup"><span data-stu-id="7adff-120">Building Your Own Components with Delegates</span></span>

<span data-ttu-id="7adff-121">Temsilcilere dayalı bir tasarım kullanarak bir bileşen oluşturarak bu örneği oluşturalım.</span><span class="sxs-lookup"><span data-stu-id="7adff-121">Let's build on that example by creating a component using a design that relies on delegates.</span></span>

<span data-ttu-id="7adff-122">Büyük bir sistemde günlük iletilerinde kullanılabilecek bir bileşen tanımlayalim.</span><span class="sxs-lookup"><span data-stu-id="7adff-122">Let's define a component that could be used for log messages in a large system.</span></span> <span data-ttu-id="7adff-123">Kitaplık bileşenleri, birden çok farklı platformda birçok farklı ortamda kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="7adff-123">The library components could be used in many different environments, on multiple different platforms.</span></span> <span data-ttu-id="7adff-124">Bileşende günlükleri yöneten çok sayıda ortak özellik vardır.</span><span class="sxs-lookup"><span data-stu-id="7adff-124">There are a lot of common features in the component that manages the logs.</span></span> <span data-ttu-id="7adff-125">Sistemdeki herhangi bir bileşenden iletileri kabul etmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="7adff-125">It will need to accept messages from any component in the system.</span></span> <span data-ttu-id="7adff-126">Bu iletiler, çekirdek bileşenin yönetebileceği farklı önceliklere sahip olacaktır.</span><span class="sxs-lookup"><span data-stu-id="7adff-126">Those messages will have different priorities, which the core component can manage.</span></span> <span data-ttu-id="7adff-127">İletilerde, son Arşivlenen form zamandamgaları olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="7adff-127">The messages should have timestamps in their final archived form.</span></span> <span data-ttu-id="7adff-128">Daha gelişmiş senaryolar için, iletileri kaynak bileşene göre filtreleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7adff-128">For more advanced scenarios, you could filter messages by the source component.</span></span>

<span data-ttu-id="7adff-129">Özelliğin her zaman değiştirecek bir özelliği vardır: iletiler yazıldığı yer.</span><span class="sxs-lookup"><span data-stu-id="7adff-129">There is one aspect of the feature that will change often: where messages are written.</span></span> <span data-ttu-id="7adff-130">Bazı ortamlarda, bunlar hata konsoluna yazılabilir.</span><span class="sxs-lookup"><span data-stu-id="7adff-130">In some environments, they may be written to the error console.</span></span> <span data-ttu-id="7adff-131">Diğer bir deyişle, bir dosya.</span><span class="sxs-lookup"><span data-stu-id="7adff-131">In others, a file.</span></span> <span data-ttu-id="7adff-132">Diğer olanaklar veritabanı depolama, işletim sistemi olay günlükleri veya diğer belge depolama alanı içerir.</span><span class="sxs-lookup"><span data-stu-id="7adff-132">Other possibilities include database storage, OS event logs, or other document storage.</span></span>

<span data-ttu-id="7adff-133">Ayrıca, farklı senaryolarda kullanılabilecek çıkış bileşimleri de vardır.</span><span class="sxs-lookup"><span data-stu-id="7adff-133">There are also combinations of output that might be used in different scenarios.</span></span> <span data-ttu-id="7adff-134">Konsola ve bir dosyaya ileti yazmak isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7adff-134">You may want to write messages to the console and to a file.</span></span>

<span data-ttu-id="7adff-135">Temsilcilere dayalı bir tasarım harika bir esneklik sağlar ve gelecekte eklenebilecek depolama mekanizmalarını desteklemeyi kolaylaştırır.</span><span class="sxs-lookup"><span data-stu-id="7adff-135">A design based on delegates will provide a great deal of flexibility, and make it easy to support storage mechanisms that may be added in the future.</span></span>

<span data-ttu-id="7adff-136">Bu tasarımın altında, birincil günlük bileşeni sanal olmayan, hatta kapalı bir sınıf olabilir.</span><span class="sxs-lookup"><span data-stu-id="7adff-136">Under this design, the primary log component can be a non-virtual, even sealed class.</span></span> <span data-ttu-id="7adff-137">İletileri farklı depolama medyasına yazmak için herhangi bir temsilci kümesini takabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7adff-137">You can plug in any set of delegates to write the messages to different storage media.</span></span> <span data-ttu-id="7adff-138">Çok noktaya yayın temsilcileri için yerleşik destek, iletilerin birden çok konuma (bir dosya ve bir konsol) yazılması gerektiği senaryoları desteklemeyi kolaylaştırır.</span><span class="sxs-lookup"><span data-stu-id="7adff-138">The built in support for multicast delegates makes it easy to support scenarios where messages must be written to multiple locations (a file, and a console).</span></span>

## <a name="a-first-implementation"></a><span data-ttu-id="7adff-139">Ilk uygulama</span><span class="sxs-lookup"><span data-stu-id="7adff-139">A First Implementation</span></span>

<span data-ttu-id="7adff-140">Küçük bir başlangıç: ilk uygulama yeni iletileri kabul edecek ve ekli temsilciden yazacak.</span><span class="sxs-lookup"><span data-stu-id="7adff-140">Let's start small: the initial implementation will accept new messages, and write them using any attached delegate.</span></span> <span data-ttu-id="7adff-141">Konsola ileti yazan bir temsilciyle başlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7adff-141">You can start with one delegate that writes messages to the console.</span></span>

[!code-csharp[LoggerImplementation](../../samples/snippets/csharp/delegates-and-events/Logger.cs#FirstImplementation "A first Logger implementation.")]

<span data-ttu-id="7adff-142">Yukarıdaki statik sınıf, kullanılabilecek en basit şeydir.</span><span class="sxs-lookup"><span data-stu-id="7adff-142">The static class above is the simplest thing that can work.</span></span> <span data-ttu-id="7adff-143">Konsola ileti yazan Yöntem için tek bir uygulama yazmaları gerekir:</span><span class="sxs-lookup"><span data-stu-id="7adff-143">We need to write the single implementation for the method that writes messages to the console:</span></span>

[!code-csharp[LogToConsole](../../samples/snippets/csharp/delegates-and-events/LoggingMethods.cs#LogToConsole "A Console logger.")]

<span data-ttu-id="7adff-144">Son olarak, bir temsilciyi, günlükçü içinde belirtilen WriteMessage temsilcisine ekleyerek yedeklemeniz gerekir:</span><span class="sxs-lookup"><span data-stu-id="7adff-144">Finally, you need to hook up the delegate by attaching it to the WriteMessage delegate declared in the logger:</span></span>

[!code-csharp[ConnectDelegate](../../samples/snippets/csharp/delegates-and-events/Program.cs#ConnectDelegate "Connect to the delegate")]

## <a name="practices"></a><span data-ttu-id="7adff-145">Uygulamalarından</span><span class="sxs-lookup"><span data-stu-id="7adff-145">Practices</span></span>

<span data-ttu-id="7adff-146">Bizim örneğimiz oldukça basittir, ancak temsilcilerin bulunduğu tasarımların bazı önemli yönergelerinden bazılarını göstermektedir.</span><span class="sxs-lookup"><span data-stu-id="7adff-146">Our sample so far is fairly simple, but it still demonstrates some of the important guidelines for designs involving delegates.</span></span>

<span data-ttu-id="7adff-147">Çekirdek çerçevede tanımlanan temsilci türlerinin kullanılması, kullanıcıların temsilcilerle çalışmasını kolaylaştırır.</span><span class="sxs-lookup"><span data-stu-id="7adff-147">Using the delegate types defined in the Core Framework makes it easier for users to work with the delegates.</span></span> <span data-ttu-id="7adff-148">Yeni türler tanımlamanız gerekmez ve kitaplığınızı kullanan geliştiricilerin yeni, özelleştirilmiş temsilci türleri öğrenmelerine gerek yoktur.</span><span class="sxs-lookup"><span data-stu-id="7adff-148">You don't need to define new types, and developers using your library do not need to learn new, specialized delegate types.</span></span>

<span data-ttu-id="7adff-149">Kullanılan arabirimler olabildiğince az ve esnek olarak kullanılabilir: yeni bir çıktı günlükçüsü oluşturmak Için bir yöntem oluşturmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="7adff-149">The interfaces used are as minimal and as flexible as possible: To create a new output logger, you must create one method.</span></span> <span data-ttu-id="7adff-150">Bu yöntem bir statik yöntem veya bir örnek yöntemi olabilir.</span><span class="sxs-lookup"><span data-stu-id="7adff-150">That method may be a static method, or an instance method.</span></span> <span data-ttu-id="7adff-151">Herhangi bir erişim sahibi olabilir.</span><span class="sxs-lookup"><span data-stu-id="7adff-151">It may have any access.</span></span>

## <a name="formatting-output"></a><span data-ttu-id="7adff-152">Çıktıyı biçimlendirme</span><span class="sxs-lookup"><span data-stu-id="7adff-152">Formatting Output</span></span>

<span data-ttu-id="7adff-153">Bu ilk sürümü biraz daha sağlam hale gedelim ve ardından diğer günlük mekanizmalarını oluşturmaya başlayalim.</span><span class="sxs-lookup"><span data-stu-id="7adff-153">Let's make this first version a bit more robust, and then start creating other logging mechanisms.</span></span>

<span data-ttu-id="7adff-154">Daha sonra, `LogMessage()` günlük sınıfınızın daha yapılandırılmış iletiler oluşturması için yönteme birkaç bağımsız değişken ekleyelim:</span><span class="sxs-lookup"><span data-stu-id="7adff-154">Next, let's add a few arguments to the `LogMessage()` method so that your log class creates more structured messages:</span></span>

[!code-csharp[Severity](../../samples/snippets/csharp/delegates-and-events/Logger.cs#Severity "Define severities")]
[!code-csharp[NextLogger](../../samples/snippets/csharp/delegates-and-events/Logger.cs#LoggerTwo "Refine the Logger")]

<span data-ttu-id="7adff-155">Daha sonra, `Severity` günlük çıktısına gönderilen iletileri filtrelemek için bu bağımsız değişkeni kullanalım.</span><span class="sxs-lookup"><span data-stu-id="7adff-155">Next, let's make use of that `Severity` argument to filter the messages that are sent to the log's output.</span></span>

[!code-csharp[FinalLogger](../../samples/snippets/csharp/delegates-and-events/Logger.cs#LoggerFinal "Finish the Logger")]

## <a name="practices"></a><span data-ttu-id="7adff-156">Uygulamalarından</span><span class="sxs-lookup"><span data-stu-id="7adff-156">Practices</span></span>

<span data-ttu-id="7adff-157">Günlük altyapısına yeni özellikler eklediniz.</span><span class="sxs-lookup"><span data-stu-id="7adff-157">You've added new features to the logging infrastructure.</span></span> <span data-ttu-id="7adff-158">Günlükçü bileşeni herhangi bir çıkış mekanizmasına çok esnek bir şekilde bağlanmış olduğundan, bu yeni özellikler, günlükçü temsilcisini uygulayan kodun herhangi bir etkisi olmadan eklenebilir.</span><span class="sxs-lookup"><span data-stu-id="7adff-158">Because the logger component is very loosely coupled to any output mechanism, these new features can be added with no impact on any of the code implementing the logger delegate.</span></span>

<span data-ttu-id="7adff-159">Bunu oluştururken, bu gevşek bir şekilde, diğer konumlarda herhangi bir değişiklik yapmadan sitenin parçalarını güncelleştirme konusunda daha fazla esneklik sağlayabilme hakkında daha fazla örnek görürsünüz.</span><span class="sxs-lookup"><span data-stu-id="7adff-159">As you keep building this, you'll see more examples of how this loose coupling enables greater flexibility in updating parts of the site without any changes to other locations.</span></span> <span data-ttu-id="7adff-160">Aslında daha büyük bir uygulamada, günlükçü çıkış sınıfları farklı bir derlemede olabilir, hatta yeniden oluşturulması gerekmez.</span><span class="sxs-lookup"><span data-stu-id="7adff-160">In fact, in a larger application, the logger output classes might be in a different assembly, and not even need to be rebuilt.</span></span>

## <a name="building-a-second-output-engine"></a><span data-ttu-id="7adff-161">Ikinci bir çıkış altyapısı oluşturma</span><span class="sxs-lookup"><span data-stu-id="7adff-161">Building a Second Output Engine</span></span>

<span data-ttu-id="7adff-162">Günlük bileşeni de birlikte geliyor.</span><span class="sxs-lookup"><span data-stu-id="7adff-162">The Log component is coming along well.</span></span> <span data-ttu-id="7adff-163">İletileri bir dosyaya kaydeden bir çıkış altyapısı ekleyelim.</span><span class="sxs-lookup"><span data-stu-id="7adff-163">Let's add one more output engine that logs messages to a file.</span></span> <span data-ttu-id="7adff-164">Bu, biraz daha ilgili çıkış altyapısı olacaktır.</span><span class="sxs-lookup"><span data-stu-id="7adff-164">This will be a slightly more involved output engine.</span></span> <span data-ttu-id="7adff-165">Dosya işlemlerini kapsülleyen bir sınıf olur ve her yazma işleminden sonra dosyanın her zaman kapatılmasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="7adff-165">It will be a class that encapsulates the file operations, and ensures that the file is always closed after each write.</span></span> <span data-ttu-id="7adff-166">Bu, her ileti oluşturulduktan sonra tüm verilerin diske temizlendiğinden emin olmanızı sağlar.</span><span class="sxs-lookup"><span data-stu-id="7adff-166">That ensures that all the data is flushed to disk after each message is generated.</span></span>

<span data-ttu-id="7adff-167">Dosya tabanlı günlükçü şu şekildedir:</span><span class="sxs-lookup"><span data-stu-id="7adff-167">Here is that file based logger:</span></span>

[!code-csharp[FileLogger](../../samples/snippets/csharp/delegates-and-events/FileLogger.cs#FileLogger "Log to files")]

<span data-ttu-id="7adff-168">Bu sınıfı oluşturduktan sonra, onu örnekleyebilirsiniz ve LogMessage metodunu günlükçü bileşenine iliştirir:</span><span class="sxs-lookup"><span data-stu-id="7adff-168">Once you've created this class, you can instantiate it and it attaches its LogMessage method to the Logger component:</span></span>

[!code-csharp[FileLogger](../../samples/snippets/csharp/delegates-and-events/Program.cs#FileLogger "Log to files")]

<span data-ttu-id="7adff-169">Bu ikisi birbirini dışlamalı değildir.</span><span class="sxs-lookup"><span data-stu-id="7adff-169">These two are not mutually exclusive.</span></span> <span data-ttu-id="7adff-170">Her iki günlük yöntemini iliştirebilir ve konsola ve bir dosyaya ileti oluşturabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="7adff-170">You could attach both log methods and generate messages to the console and a file:</span></span>

```csharp
var fileOutput = new FileLogger("log.txt");
Logger.WriteMessage += LoggingMethods.LogToConsole; // LoggingMethods is the static class we utilized earlier
```

<span data-ttu-id="7adff-171">Daha sonra aynı uygulamada bile, temsilcilerden birini sisteme başka herhangi bir sorun olmadan kaldırabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="7adff-171">Later, even in the same application, you can remove one of the delegates without any other issues to the system:</span></span>

```csharp
Logger.WriteMessage -= LoggingMethods.LogToConsole;
```

## <a name="practices"></a><span data-ttu-id="7adff-172">Uygulamalarından</span><span class="sxs-lookup"><span data-stu-id="7adff-172">Practices</span></span>

<span data-ttu-id="7adff-173">Şimdi günlüğe kaydetme alt sistemi için ikinci bir çıkış işleyicisi eklediniz.</span><span class="sxs-lookup"><span data-stu-id="7adff-173">Now, you've added a second output handler for the logging sub-system.</span></span>
<span data-ttu-id="7adff-174">Bu, dosya sistemini doğru şekilde desteklemeye yönelik bir bit daha daha altyapı gerektirir.</span><span class="sxs-lookup"><span data-stu-id="7adff-174">This one needs a bit more infrastructure to correctly support the file system.</span></span> <span data-ttu-id="7adff-175">Temsilci bir örnek yöntemidir.</span><span class="sxs-lookup"><span data-stu-id="7adff-175">The delegate is an instance method.</span></span> <span data-ttu-id="7adff-176">Aynı zamanda özel bir yöntemdir.</span><span class="sxs-lookup"><span data-stu-id="7adff-176">It's also a private method.</span></span>
<span data-ttu-id="7adff-177">Temsilci altyapısı temsilcileri bağlayabildiğinden, daha fazla erişilebilirlik gerekmez.</span><span class="sxs-lookup"><span data-stu-id="7adff-177">There's no need for greater accessibility because the delegate infrastructure can connect the delegates.</span></span>

<span data-ttu-id="7adff-178">İkinci olarak, temsilci tabanlı tasarım, ek kod olmadan birden çok çıktı yöntemi sunar.</span><span class="sxs-lookup"><span data-stu-id="7adff-178">Second, the delegate-based design enables multiple output methods without any extra code.</span></span> <span data-ttu-id="7adff-179">Birden çok çıkış yöntemini desteklemek için ek altyapı oluşturmanız gerekmez.</span><span class="sxs-lookup"><span data-stu-id="7adff-179">You don't need to build any additional infrastructure to support multiple output methods.</span></span> <span data-ttu-id="7adff-180">Bunlar, çağırma listesinde yalnızca başka bir yöntem haline gelir.</span><span class="sxs-lookup"><span data-stu-id="7adff-180">They simply become another method on the invocation list.</span></span>

<span data-ttu-id="7adff-181">Dosya günlüğü çıkış yönteminde koda özel bir dikkat ödeyin.</span><span class="sxs-lookup"><span data-stu-id="7adff-181">Pay special attention to the code in the file logging output method.</span></span> <span data-ttu-id="7adff-182">Özel durum oluşturmadığından emin olmak için kodlanır.</span><span class="sxs-lookup"><span data-stu-id="7adff-182">It is coded to ensure that it does not throw any exceptions.</span></span> <span data-ttu-id="7adff-183">Her zaman kesinlikle gerekli olmasa da, genellikle iyi bir uygulamadır.</span><span class="sxs-lookup"><span data-stu-id="7adff-183">While this isn't always strictly necessary, it's often a good practice.</span></span> <span data-ttu-id="7adff-184">Temsilci yöntemlerinden biri bir özel durum oluşturursa, Çağrılı kalan temsilciler çağrılmaz.</span><span class="sxs-lookup"><span data-stu-id="7adff-184">If either of the delegate methods throws an exception, the remaining delegates that are on the invocation won't be invoked.</span></span>

<span data-ttu-id="7adff-185">Son bir notta, dosya günlükçüsü, her günlük iletisindeki dosyayı açıp kapatarak kaynaklarını yönetmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="7adff-185">As a last note, the file logger must manage its resources by opening and closing the file on each log message.</span></span> <span data-ttu-id="7adff-186">Dosyayı açık tutmayı ve siz bitirdiğinizde dosyayı kapatmak için IDisposable 'yi uygulamayı seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7adff-186">You could choose to keep the file open and implement IDisposable to close the file when you are completed.</span></span>
<span data-ttu-id="7adff-187">Her iki yöntemin da avantajları ve dezavantajları vardır.</span><span class="sxs-lookup"><span data-stu-id="7adff-187">Either method has its advantages and disadvantages.</span></span> <span data-ttu-id="7adff-188">Her ikisi de sınıflar arasında biraz daha fazla eşlenme oluşturur.</span><span class="sxs-lookup"><span data-stu-id="7adff-188">Both do create a bit more coupling between the classes.</span></span>

<span data-ttu-id="7adff-189">Her iki senaryoyu desteklemek için günlükçü sınıfındaki kodların hiçbirinin güncellenmesi gerekmez.</span><span class="sxs-lookup"><span data-stu-id="7adff-189">None of the code in the Logger class would need to be updated in order to support either scenario.</span></span>

## <a name="handling-null-delegates"></a><span data-ttu-id="7adff-190">Null temsilcileri işleme</span><span class="sxs-lookup"><span data-stu-id="7adff-190">Handling Null Delegates</span></span>

<span data-ttu-id="7adff-191">Son olarak, LogMessage yöntemini, hiçbir çıkış mekanizması seçili olmadığında bu durumlar için sağlam olacak şekilde güncelleştirlim.</span><span class="sxs-lookup"><span data-stu-id="7adff-191">Finally, let's update the LogMessage method so that it is robust for those cases when no output mechanism is selected.</span></span> <span data-ttu-id="7adff-192">`NullReferenceException` `WriteMessage` Temsilciye bağlı bir çağırma listesi olmadığında geçerli uygulama bir oluşturacak.</span><span class="sxs-lookup"><span data-stu-id="7adff-192">The current implementation will throw a `NullReferenceException` when the `WriteMessage` delegate does not have an invocation list attached.</span></span>
<span data-ttu-id="7adff-193">Hiçbir yöntem ekli olmadığında sessizce devam eden bir tasarım tercih edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7adff-193">You may prefer a design that silently continues when no methods have been attached.</span></span> <span data-ttu-id="7adff-194">Bu, yöntemi ile birlikte boş koşullu işleç kullanılarak kolaydır `Delegate.Invoke()` :</span><span class="sxs-lookup"><span data-stu-id="7adff-194">This is easy using the null conditional operator, combined with the `Delegate.Invoke()` method:</span></span>

```csharp
public static void LogMessage(string msg)
{
    WriteMessage?.Invoke(msg);
}
```

<span data-ttu-id="7adff-195">`?.`Sol işlenen (Bu örnekte) null olan null koşullu işleç (), `WriteMessage` bir iletiyi günlüğe kaydetmek için bir deneme yapılmayacağı anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="7adff-195">The null conditional operator (`?.`) short-circuits when the left operand (`WriteMessage` in this case) is null, which means no attempt is made to log a message.</span></span>

<span data-ttu-id="7adff-196">`Invoke()`Veya belgelerinde listelenen yöntemi bulamayamayacağız `System.Delegate` `System.MulticastDelegate` .</span><span class="sxs-lookup"><span data-stu-id="7adff-196">You won't find the `Invoke()` method listed in the documentation for `System.Delegate` or `System.MulticastDelegate`.</span></span> <span data-ttu-id="7adff-197">Derleyici, `Invoke` belirtilen herhangi bir temsilci türü için tür güvenli bir yöntem oluşturur.</span><span class="sxs-lookup"><span data-stu-id="7adff-197">The compiler generates a type safe `Invoke` method for any delegate type declared.</span></span> <span data-ttu-id="7adff-198">Bu örnekte, bu anlamı `Invoke` tek bir `string` bağımsız değişken alır ve void dönüş türüne sahiptir.</span><span class="sxs-lookup"><span data-stu-id="7adff-198">In this example, that means `Invoke` takes a single `string` argument, and has a void return type.</span></span>

## <a name="summary-of-practices"></a><span data-ttu-id="7adff-199">Uygulamaların Özeti</span><span class="sxs-lookup"><span data-stu-id="7adff-199">Summary of Practices</span></span>

<span data-ttu-id="7adff-200">Diğer yazarlar ve diğer özelliklerle genişletilebilen bir günlük bileşeni Beginnings ' yi gördünüz.</span><span class="sxs-lookup"><span data-stu-id="7adff-200">You've seen the beginnings of a log component that could be expanded with other writers, and other features.</span></span> <span data-ttu-id="7adff-201">Tasarımdaki temsilcileri kullanarak bu farklı bileşenler çok esnek bir şekilde bağlanmış.</span><span class="sxs-lookup"><span data-stu-id="7adff-201">By using delegates in the design these different components are very loosely coupled.</span></span> <span data-ttu-id="7adff-202">Bu, çeşitli avantajlar sağlar.</span><span class="sxs-lookup"><span data-stu-id="7adff-202">This provides several advantages.</span></span> <span data-ttu-id="7adff-203">Yeni çıkış mekanizmaları oluşturmak ve bunları sisteme eklemek çok kolaydır.</span><span class="sxs-lookup"><span data-stu-id="7adff-203">It's very easy to create new output mechanisms and attach them to the system.</span></span> <span data-ttu-id="7adff-204">Bu diğer mekanizmaların yalnızca bir yöntemi olmalıdır: günlük iletisini yazan yöntem.</span><span class="sxs-lookup"><span data-stu-id="7adff-204">These other mechanisms only need one method: the method that writes the log message.</span></span> <span data-ttu-id="7adff-205">Yeni özellikler eklendiğinde çok dayanıklı bir tasarımdır.</span><span class="sxs-lookup"><span data-stu-id="7adff-205">It's a design that is very resilient when new features are added.</span></span> <span data-ttu-id="7adff-206">Herhangi bir yazıcı için gereken sözleşme, bir yöntemi uygulamaktır.</span><span class="sxs-lookup"><span data-stu-id="7adff-206">The contract required for any writer is to implement one method.</span></span> <span data-ttu-id="7adff-207">Bu yöntem bir statik veya örnek yöntemi olabilir.</span><span class="sxs-lookup"><span data-stu-id="7adff-207">That method could be a static or instance method.</span></span> <span data-ttu-id="7adff-208">Ortak, özel veya başka bir yasal erişim olabilir.</span><span class="sxs-lookup"><span data-stu-id="7adff-208">It could be public, private, or any other legal access.</span></span>

<span data-ttu-id="7adff-209">Günlükçü sınıfı, önemli değişikliklere bildirmeden herhangi bir sayıda geliştirme veya değişiklik yapabilir.</span><span class="sxs-lookup"><span data-stu-id="7adff-209">The Logger class can make any number of enhancements or changes without introducing breaking changes.</span></span> <span data-ttu-id="7adff-210">Her sınıf gibi, değişiklikleri bozmadan genel API 'yi değiştiremezsiniz.</span><span class="sxs-lookup"><span data-stu-id="7adff-210">Like any class, you cannot modify the public API without the risk of breaking changes.</span></span> <span data-ttu-id="7adff-211">Ancak, günlükçü ve herhangi bir çıkış motoru arasındaki kuponu yalnızca temsilci aracılığıyla aldığından, başka hiçbir tür (arabirimler veya temel sınıflar gibi) dahil değildir.</span><span class="sxs-lookup"><span data-stu-id="7adff-211">But, because the coupling between the logger and any output engines is only through the delegate, no other types (like interfaces or base classes) are involved.</span></span> <span data-ttu-id="7adff-212">Kuponu mümkün olduğunca küçük.</span><span class="sxs-lookup"><span data-stu-id="7adff-212">The coupling is as small as possible.</span></span>

[<span data-ttu-id="7adff-213">Sonraki</span><span class="sxs-lookup"><span data-stu-id="7adff-213">Next</span></span>](events-overview.md)
