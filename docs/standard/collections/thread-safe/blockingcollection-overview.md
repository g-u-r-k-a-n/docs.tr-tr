---
title: BlockingCollection Genel Bakışı
ms.date: 03/30/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- BlockingCollection, overview
ms.assetid: 987ea3d7-0ad5-4238-8b64-331ce4eb3f0b
ms.openlocfilehash: fb01d29c723962e28d8ec4afc984cb4d6c48f9b5
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/15/2020
ms.locfileid: "75711330"
---
# <a name="blockingcollection-overview"></a><span data-ttu-id="211ee-102">BlockingCollection Genel Bakışı</span><span class="sxs-lookup"><span data-stu-id="211ee-102">BlockingCollection Overview</span></span>
<span data-ttu-id="211ee-103"><xref:System.Collections.Concurrent.BlockingCollection%601>aşağıdaki özellikleri sağlayan iş parçacığı güvenli bir koleksiyon sınıfıdır:</span><span class="sxs-lookup"><span data-stu-id="211ee-103"><xref:System.Collections.Concurrent.BlockingCollection%601> is a thread-safe collection class that provides the following features:</span></span>  
  
- <span data-ttu-id="211ee-104">Üretici-Tüketici modelinin uygulanması.</span><span class="sxs-lookup"><span data-stu-id="211ee-104">An implementation of the Producer-Consumer pattern.</span></span>  
  
- <span data-ttu-id="211ee-105">Eş zamanlı ekleme ve birden çok iş parçacığı öğeleri alma.</span><span class="sxs-lookup"><span data-stu-id="211ee-105">Concurrent adding and taking of items from multiple threads.</span></span>  
  
- <span data-ttu-id="211ee-106">İsteğe bağlı maksimum kapasite.</span><span class="sxs-lookup"><span data-stu-id="211ee-106">Optional maximum capacity.</span></span>  
  
- <span data-ttu-id="211ee-107">Toplama boş veya dolu olduğunda engelleyen ekleme ve kaldırma işlemleri.</span><span class="sxs-lookup"><span data-stu-id="211ee-107">Insertion and removal operations that block when collection is empty or full.</span></span>  
  
- <span data-ttu-id="211ee-108">Belirli bir süreyi engellemeyen veya engellemeyen "try" işlemleri ekleme ve kaldırma.</span><span class="sxs-lookup"><span data-stu-id="211ee-108">Insertion and removal "try" operations that do not block or that block up to a specified period of time.</span></span>  
  
- <span data-ttu-id="211ee-109">Uygulayan herhangi bir toplama türünü kapsüller<xref:System.Collections.Concurrent.IProducerConsumerCollection%601></span><span class="sxs-lookup"><span data-stu-id="211ee-109">Encapsulates any collection type that implements <xref:System.Collections.Concurrent.IProducerConsumerCollection%601></span></span>  
  
- <span data-ttu-id="211ee-110">İptal jetonları ile iptal.</span><span class="sxs-lookup"><span data-stu-id="211ee-110">Cancellation with cancellation tokens.</span></span>  
  
- <span data-ttu-id="211ee-111">İki tür numaralandırma ile `foreach` `For Each` (Visual Basic'te):</span><span class="sxs-lookup"><span data-stu-id="211ee-111">Two kinds of enumeration with `foreach` (`For Each` in Visual Basic):</span></span>  
  
    1. <span data-ttu-id="211ee-112">Salt okunur numaralandırma.</span><span class="sxs-lookup"><span data-stu-id="211ee-112">Read-only enumeration.</span></span>  
  
    2. <span data-ttu-id="211ee-113">Numaralandırılınırken öğeleri kaldıran numaralandırma.</span><span class="sxs-lookup"><span data-stu-id="211ee-113">Enumeration that removes items as they are enumerated.</span></span>  
  
## <a name="bounding-and-blocking-support"></a><span data-ttu-id="211ee-114">Sınırlama ve Engelleme Desteği</span><span class="sxs-lookup"><span data-stu-id="211ee-114">Bounding and Blocking Support</span></span>  
 <span data-ttu-id="211ee-115"><xref:System.Collections.Concurrent.BlockingCollection%601>sınırlandırma ve engellemeyi destekler.</span><span class="sxs-lookup"><span data-stu-id="211ee-115"><xref:System.Collections.Concurrent.BlockingCollection%601> supports bounding and blocking.</span></span> <span data-ttu-id="211ee-116">Sınırlama, koleksiyonun maksimum kapasitesini ayarlayabileceğiniz anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="211ee-116">Bounding means you can set the maximum capacity of the collection.</span></span> <span data-ttu-id="211ee-117">Sınırlama, bellekteki koleksiyonun en büyük boyutunu denetlemenize olanak sağladığından ve üreten iş parçacıklarının tüketen iş parçacıklarının çok ilerisine taşınmasını önlediği için belirli senaryolarda önemlidir.</span><span class="sxs-lookup"><span data-stu-id="211ee-117">Bounding is important in certain scenarios because it enables you to control the maximum size of the collection in memory, and it prevents the producing threads from moving too far ahead of the consuming threads.</span></span>  
  
 <span data-ttu-id="211ee-118">Birden çok iş parçacığı veya görev koleksiyona aynı anda öğe ekleyebilir ve koleksiyon belirtilen maksimum kapasiteye ulaşırsa, bir öğe kaldırılana kadar üretim iş parçacıkları engellenir.</span><span class="sxs-lookup"><span data-stu-id="211ee-118">Multiple threads or tasks can add items to the collection concurrently, and if the collection reaches its specified maximum capacity, the producing threads will block until an item is removed.</span></span> <span data-ttu-id="211ee-119">Birden çok tüketici öğeleri aynı anda kaldırabilir ve koleksiyon boşalırsa, tüketen iş parçacıkları üretici bir öğe ekleyene kadar engellenir.</span><span class="sxs-lookup"><span data-stu-id="211ee-119">Multiple consumers can remove items concurrently, and if the collection becomes empty, the consuming threads will block until a producer adds an item.</span></span> <span data-ttu-id="211ee-120">Üreten bir iş <xref:System.Collections.Concurrent.BlockingCollection%601.CompleteAdding%2A> parçacığı, başka öğe eklenmeyeceğini belirtmek için arayabilir.</span><span class="sxs-lookup"><span data-stu-id="211ee-120">A producing thread can call <xref:System.Collections.Concurrent.BlockingCollection%601.CompleteAdding%2A> to indicate that no more items will be added.</span></span> <span data-ttu-id="211ee-121">Tüketiciler, <xref:System.Collections.Concurrent.BlockingCollection%601.IsCompleted%2A> koleksiyonun ne zaman boş olduğunu ve başka öğe eklenmeyeceğini bilmek için özelliği izler.</span><span class="sxs-lookup"><span data-stu-id="211ee-121">Consumers monitor the <xref:System.Collections.Concurrent.BlockingCollection%601.IsCompleted%2A> property to know when the collection is empty and no more items will be added.</span></span> <span data-ttu-id="211ee-122">Aşağıdaki örnekte, sınırlı kapasitesi 100 olan basit bir Engelleme Koleksiyonu gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="211ee-122">The following example shows a simple BlockingCollection with a bounded capacity of 100.</span></span> <span data-ttu-id="211ee-123">Üretici görevi, bazı dış koşullar doğru olduğu sürece koleksiyona <xref:System.Collections.Concurrent.BlockingCollection%601.CompleteAdding%2A>öğeler ekler ve sonra çağırır.</span><span class="sxs-lookup"><span data-stu-id="211ee-123">A producer task adds items to the collection as long as some external condition is true, and then calls <xref:System.Collections.Concurrent.BlockingCollection%601.CompleteAdding%2A>.</span></span> <span data-ttu-id="211ee-124">Tüketici görevi, özellik <xref:System.Collections.Concurrent.BlockingCollection%601.IsCompleted%2A> doğru olana kadar öğeleri alır.</span><span class="sxs-lookup"><span data-stu-id="211ee-124">The consumer task takes items until the <xref:System.Collections.Concurrent.BlockingCollection%601.IsCompleted%2A> property is true.</span></span>  
  
 [!code-csharp[CDS_BlockingCollection#04](../../../../samples/snippets/csharp/VS_Snippets_Misc/cds_blockingcollection/cs/blockingcollection.cs#04)]
 [!code-vb[CDS_BlockingCollection#04](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/cds_blockingcollection/vb/introsnippetsbc.vb#04)]  
  
 <span data-ttu-id="211ee-125">Tam bir örnek için [bkz: Engelleme Koleksiyonundan Tek tek Öğe Ekleme ve Alma.](../../../../docs/standard/collections/thread-safe/how-to-add-and-take-items.md)</span><span class="sxs-lookup"><span data-stu-id="211ee-125">For a complete example, see [How to: Add and Take Items Individually from a BlockingCollection](../../../../docs/standard/collections/thread-safe/how-to-add-and-take-items.md).</span></span>  
  
## <a name="timed-blocking-operations"></a><span data-ttu-id="211ee-126">Zamanlı Engelleme İşlemleri</span><span class="sxs-lookup"><span data-stu-id="211ee-126">Timed Blocking Operations</span></span>  
 <span data-ttu-id="211ee-127">Zamanlanmış engelleme <xref:System.Collections.Concurrent.BlockingCollection%601.TryAdd%2A> ve <xref:System.Collections.Concurrent.BlockingCollection%601.TryTake%2A> sınırlanmış koleksiyonlar üzerindeki işlemlerde, yöntem bir öğe eklemeye veya almaya çalışır.</span><span class="sxs-lookup"><span data-stu-id="211ee-127">In timed blocking <xref:System.Collections.Concurrent.BlockingCollection%601.TryAdd%2A> and <xref:System.Collections.Concurrent.BlockingCollection%601.TryTake%2A> operations on bounded collections, the method tries to add or take an item.</span></span> <span data-ttu-id="211ee-128">Bir öğe varsa, başvuru tarafından geçirilen değişkene yerleştirilir ve yöntem doğru döndürür.</span><span class="sxs-lookup"><span data-stu-id="211ee-128">If an item is available it is placed into the variable that was passed in by reference, and the method returns true.</span></span> <span data-ttu-id="211ee-129">Belirtilen bir zaman uzatma döneminden sonra hiçbir öğe alınmazsa yöntem yanlış döndürür.</span><span class="sxs-lookup"><span data-stu-id="211ee-129">If no item is retrieved after a specified time-out period the method returns false.</span></span> <span data-ttu-id="211ee-130">İş parçacığı daha sonra koleksiyona erişmek için yeniden denemeden önce başka yararlı işler yapmak için ücretsizdir.</span><span class="sxs-lookup"><span data-stu-id="211ee-130">The thread is then free to do some other useful work before trying again to access the collection.</span></span> <span data-ttu-id="211ee-131">Zamanlanmış engelleme erişimi örneği için, [Nasıl Olur: BlokingKoleksiyonundan Tek tek Öğe Ekleme ve Alma'daki](../../../../docs/standard/collections/thread-safe/how-to-add-and-take-items.md)ikinci örneğe bakın.</span><span class="sxs-lookup"><span data-stu-id="211ee-131">For an example of timed blocking access, see the second example in [How to: Add and Take Items Individually from a BlockingCollection](../../../../docs/standard/collections/thread-safe/how-to-add-and-take-items.md).</span></span>  
  
## <a name="cancelling-add-and-take-operations"></a><span data-ttu-id="211ee-132">Ekle ve Alma İşlemlerini İptal Etme</span><span class="sxs-lookup"><span data-stu-id="211ee-132">Cancelling Add and Take Operations</span></span>  
 <span data-ttu-id="211ee-133">Ekle ve Al işlemleri genellikle bir döngü içinde gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="211ee-133">Add and Take operations are typically performed in a loop.</span></span> <span data-ttu-id="211ee-134">Bir döngüyü <xref:System.Threading.CancellationToken> a <xref:System.Collections.Concurrent.BlockingCollection%601.TryAdd%2A> veya <xref:System.Collections.Concurrent.BlockingCollection%601.TryTake%2A> yönteme geçirerek ve sonra her yinelemede belirteç <xref:System.Threading.CancellationToken.IsCancellationRequested%2A> özelliğinin değerini denetleyerek iptal edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="211ee-134">You can cancel a loop by passing in a <xref:System.Threading.CancellationToken> to the <xref:System.Collections.Concurrent.BlockingCollection%601.TryAdd%2A> or <xref:System.Collections.Concurrent.BlockingCollection%601.TryTake%2A> method, and then checking the value of the token's <xref:System.Threading.CancellationToken.IsCancellationRequested%2A> property on each iteration.</span></span> <span data-ttu-id="211ee-135">Değer doğruysa, iptal isteğini herhangi bir kaynağı temizleyerek ve döngüden çıkararak yanıtlamak size kılır.</span><span class="sxs-lookup"><span data-stu-id="211ee-135">If the value is true, then it is up to you to respond the cancellation request by cleaning up any resources and exiting the loop.</span></span> <span data-ttu-id="211ee-136">Aşağıdaki örnek, iptal jetonu alan aşırı <xref:System.Collections.Concurrent.BlockingCollection%601.TryAdd%2A> yüklemeyi ve onu kullanan kodu gösterir:</span><span class="sxs-lookup"><span data-stu-id="211ee-136">The following example shows an overload of <xref:System.Collections.Concurrent.BlockingCollection%601.TryAdd%2A> that takes a cancellation token, and the code that uses it:</span></span>  
  
 [!code-csharp[CDS_BlockingCollection#05](../../../../samples/snippets/csharp/VS_Snippets_Misc/cds_blockingcollection/cs/blockingcollection.cs#05)]
 [!code-vb[CDS_BlockingCollection#05](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/cds_blockingcollection/vb/introsnippetsbc.vb#05)]  
  
 <span data-ttu-id="211ee-137">İptal desteği ekleme nin bir örneği için, [engelleme koleksiyonundan öğeleri tek tek ekleme ve alma](../../../../docs/standard/collections/thread-safe/how-to-add-and-take-items.md)işlemi nin ikinci örneğine bakın.</span><span class="sxs-lookup"><span data-stu-id="211ee-137">For an example of how to add cancellation support, see the second example in [How to: Add and Take Items Individually from a BlockingCollection](../../../../docs/standard/collections/thread-safe/how-to-add-and-take-items.md).</span></span>  
  
## <a name="specifying-the-collection-type"></a><span data-ttu-id="211ee-138">Tahsilat Türünü Belirtme</span><span class="sxs-lookup"><span data-stu-id="211ee-138">Specifying the Collection Type</span></span>  
 <span data-ttu-id="211ee-139">Bir <xref:System.Collections.Concurrent.BlockingCollection%601>, oluşturduğunuzda yalnızca sınırlanmış kapasiteyi değil, aynı zamanda kullanılacak koleksiyon türünü de belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="211ee-139">When you create a <xref:System.Collections.Concurrent.BlockingCollection%601>, you can specify not only the bounded capacity but also the type of collection to use.</span></span> <span data-ttu-id="211ee-140">Örneğin, ilk ilk <xref:System.Collections.Concurrent.ConcurrentQueue%601> in-first out (FIFO) davranışı veya <xref:System.Collections.Concurrent.ConcurrentStack%601> son ilk çıkış (LIFO) davranışı için bir belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="211ee-140">For example, you could specify a <xref:System.Collections.Concurrent.ConcurrentQueue%601> for first in-first out (FIFO) behavior, or a <xref:System.Collections.Concurrent.ConcurrentStack%601> for last in-first out (LIFO) behavior.</span></span> <span data-ttu-id="211ee-141"><xref:System.Collections.Concurrent.IProducerConsumerCollection%601> Arabirimi uygulayan herhangi bir koleksiyon sınıfı kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="211ee-141">You can use any collection class that implements the <xref:System.Collections.Concurrent.IProducerConsumerCollection%601> interface.</span></span> <span data-ttu-id="211ee-142">Varsayılan toplama <xref:System.Collections.Concurrent.BlockingCollection%601> <xref:System.Collections.Concurrent.ConcurrentQueue%601>türü.</span><span class="sxs-lookup"><span data-stu-id="211ee-142">The default collection type for <xref:System.Collections.Concurrent.BlockingCollection%601> is <xref:System.Collections.Concurrent.ConcurrentQueue%601>.</span></span> <span data-ttu-id="211ee-143">Aşağıdaki kod örneği, 1000 kapasiteye sahip bir <xref:System.Collections.Concurrent.BlockingCollection%601> dize oluşturmanın <xref:System.Collections.Concurrent.ConcurrentBag%601>nasıl yapılacağını gösterir ve aşağıdakileri kullanır:</span><span class="sxs-lookup"><span data-stu-id="211ee-143">The following code example shows how to create a <xref:System.Collections.Concurrent.BlockingCollection%601> of strings that has a capacity of 1000 and uses a <xref:System.Collections.Concurrent.ConcurrentBag%601>:</span></span>  
  
```vb  
Dim bc = New BlockingCollection(Of String)(New ConcurrentBag(Of String()), 1000)  
```  
  
```csharp  
BlockingCollection<string> bc = new BlockingCollection<string>(new ConcurrentBag<string>(), 1000 );  
```  
  
 <span data-ttu-id="211ee-144">Daha fazla bilgi için [bkz: Koleksiyona Bağlama ve Engelleme İşlevselliği Ekleme.](../../../../docs/standard/collections/thread-safe/how-to-add-bounding-and-blocking.md)</span><span class="sxs-lookup"><span data-stu-id="211ee-144">For more information, see [How to: Add Bounding and Blocking Functionality to a Collection](../../../../docs/standard/collections/thread-safe/how-to-add-bounding-and-blocking.md).</span></span>  
  
## <a name="ienumerable-support"></a><span data-ttu-id="211ee-145">Tümevarım Desteği</span><span class="sxs-lookup"><span data-stu-id="211ee-145">IEnumerable Support</span></span>  
 <span data-ttu-id="211ee-146"><xref:System.Collections.Concurrent.BlockingCollection%601>tüketicilerin <xref:System.Collections.Concurrent.BlockingCollection%601.GetConsumingEnumerable%2A> koleksiyon tamamlanana kadar `foreach` öğeleri`For Each` kaldırmak için (Visual Basic'te) kullanmalarını sağlayan bir yöntem sağlar, bu da boş olduğu ve başka öğe eklenmeyeceğini anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="211ee-146"><xref:System.Collections.Concurrent.BlockingCollection%601> provides a <xref:System.Collections.Concurrent.BlockingCollection%601.GetConsumingEnumerable%2A> method that enables consumers to use `foreach` (`For Each` in Visual Basic) to remove items until the collection is completed, which means it is empty and no more items will be added.</span></span> <span data-ttu-id="211ee-147">Daha fazla bilgi için [bkz: Engelleme Koleksiyonundaki Öğeleri Kaldırmak için ForEach'i kullanın.](../../../../docs/standard/collections/thread-safe/how-to-use-foreach-to-remove.md)</span><span class="sxs-lookup"><span data-stu-id="211ee-147">For more information, see [How to: Use ForEach to Remove Items in a BlockingCollection](../../../../docs/standard/collections/thread-safe/how-to-use-foreach-to-remove.md).</span></span>  
  
## <a name="using-many-blockingcollections-as-one"></a><span data-ttu-id="211ee-148">Birçok Engelleme Koleksiyonlarını Tek Olarak Kullanma</span><span class="sxs-lookup"><span data-stu-id="211ee-148">Using Many BlockingCollections As One</span></span>  
 <span data-ttu-id="211ee-149">Bir tüketicinin aynı anda birden çok koleksiyondan öğe alması gereken senaryolar için, dizideki koleksiyonlardan herhangi birini <xref:System.Collections.Concurrent.BlockingCollection%601> ekleyecek veya alacak statik yöntemlerdizileri <xref:System.Collections.Concurrent.BlockingCollection%601.TakeFromAny%2A> <xref:System.Collections.Concurrent.BlockingCollection%601.AddToAny%2A> oluşturabilir ve kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="211ee-149">For scenarios in which a consumer needs to take items from multiple collections simultaneously, you can create arrays of <xref:System.Collections.Concurrent.BlockingCollection%601> and use the static methods such as <xref:System.Collections.Concurrent.BlockingCollection%601.TakeFromAny%2A> and <xref:System.Collections.Concurrent.BlockingCollection%601.AddToAny%2A> that will add to or take from any of the collections in the array.</span></span> <span data-ttu-id="211ee-150">Bir koleksiyon engelleyiciyse, yöntem işlemi gerçekleştirebilecek bir koleksiyon bulana kadar hemen başka bir yöntem dener.</span><span class="sxs-lookup"><span data-stu-id="211ee-150">If one collection is blocking, the method immediately tries another until it finds one that can perform the operation.</span></span> <span data-ttu-id="211ee-151">Daha fazla bilgi için [bkz: Engelleyici Koleksiyon Dizilerini Bir Ardışık Düzen'de kullanın.](../../../../docs/standard/collections/thread-safe/how-to-use-arrays-of-blockingcollections.md)</span><span class="sxs-lookup"><span data-stu-id="211ee-151">For more information, see [How to: Use Arrays of Blocking Collections in a Pipeline](../../../../docs/standard/collections/thread-safe/how-to-use-arrays-of-blockingcollections.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="211ee-152">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="211ee-152">See also</span></span>

- <xref:System.Collections.Concurrent?displayProperty=nameWithType>
- [<span data-ttu-id="211ee-153">Koleksiyonlar ve Veri Yapıları</span><span class="sxs-lookup"><span data-stu-id="211ee-153">Collections and Data Structures</span></span>](../../../../docs/standard/collections/index.md)
- [<span data-ttu-id="211ee-154">İş Parçacığı Koleksiyonları</span><span class="sxs-lookup"><span data-stu-id="211ee-154">Thread-Safe Collections</span></span>](../../../../docs/standard/collections/thread-safe/index.md)
