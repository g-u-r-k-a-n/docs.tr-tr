---
title: Dış Kural Kümesi Araç Seti
ms.date: 03/30/2017
ms.assetid: a306d283-a031-475e-aa01-9ae86e7adcb0
ms.openlocfilehash: eb59b02d469788b23126f4e02c5b7ae5a63081f0
ms.sourcegitcommit: 011314e0c8eb4cf4a11d92078f58176c8c3efd2d
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 02/09/2020
ms.locfileid: "77094676"
---
# <a name="external-ruleset-toolkit"></a><span data-ttu-id="d129a-102">Dış Kural Kümesi Araç Seti</span><span class="sxs-lookup"><span data-stu-id="d129a-102">External Ruleset Toolkit</span></span>

<span data-ttu-id="d129a-103">Normalde, kurallar bir iş akışı uygulaması içinde kullanıldığında, kurallar derlemenin bir parçasıdır.</span><span class="sxs-lookup"><span data-stu-id="d129a-103">Normally when rules are used within a workflow application, the rules are part of the assembly.</span></span> <span data-ttu-id="d129a-104">Bazı senaryolarda, RuleSets 'i derlemeden ayrı tutmak isteyebilirsiniz, böylece iş akışı derlemesini yeniden oluşturma ve dağıtma işlemi yapılmadan güncelleştirilebilirler.</span><span class="sxs-lookup"><span data-stu-id="d129a-104">In some scenarios, you may want to maintain the RuleSets separately from the assembly so that they can be updated without rebuilding and deploying the workflow assembly.</span></span> <span data-ttu-id="d129a-105">Bu örnek, bir veritabanında RuleSets 'i yönetmenizi ve düzenlemenizi ve çalışma zamanındaki bir iş akışından bu RuleSets 'e erişmenize olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="d129a-105">This sample allows you to manage and edit RuleSets in a database and access those RuleSets from a workflow at runtime.</span></span> <span data-ttu-id="d129a-106">Bu, kural kümesi değişikliklerini otomatik olarak birleştirmek için çalışan iş akışı örneklerinin kullanılmasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="d129a-106">This enables running workflow instances to automatically incorporate RuleSet changes.</span></span>

<span data-ttu-id="d129a-107">Dış RuleSet Toolkit örneği, bir veritabanında RuleSet sürümlerini yönetmek ve düzenlemek için kullanabileceğiniz Windows Forms tabanlı bir araç içerir.</span><span class="sxs-lookup"><span data-stu-id="d129a-107">The External RuleSet Toolkit sample contains a Windows Forms-based tool that you can use to manage and edit RuleSet versions in a database.</span></span> <span data-ttu-id="d129a-108">Ayrıca, bu kuralları yürütmek için bir etkinlik ve bir konak hizmeti içerir.</span><span class="sxs-lookup"><span data-stu-id="d129a-108">It also includes an activity and a host service for executing those rules.</span></span>

> [!NOTE]
> <span data-ttu-id="d129a-109">Bu örnek [Microsoft SQL Server](/sql)gerektirir.</span><span class="sxs-lookup"><span data-stu-id="d129a-109">This sample requires [Microsoft SQL Server](/sql).</span></span>

<span data-ttu-id="d129a-110">Visual Studio, Windows Workflow Foundation (WF) bir parçası olarak bir RuleSet Düzenleyicisi sağlar.</span><span class="sxs-lookup"><span data-stu-id="d129a-110">Visual Studio provides a RuleSet editor as part of the Windows Workflow Foundation (WF).</span></span> <span data-ttu-id="d129a-111">Bu düzenleyiciyi bir iş akışındaki `Policy` etkinliğine çift tıklayarak başlatabilirsiniz. tanımlanan RuleSet nesnesini iş akışıyla ilişkili. Rules dosyasına seri hale getirir (bir `Policy` etkinlik iş akışında bir RuleSet örneği çalıştırır).</span><span class="sxs-lookup"><span data-stu-id="d129a-111">You can start this editor by double-clicking the `Policy` activity in a workflow; it serializes the defined RuleSet object to the .rules file associated with the workflow (a `Policy` activity runs a RuleSet instance against the workflow).</span></span> <span data-ttu-id="d129a-112">. Rules dosyası, iş akışı projesi oluşturduğunuzda bir kaynak olarak derlemeye derlenir.</span><span class="sxs-lookup"><span data-stu-id="d129a-112">The .rules file is compiled into the assembly as a resource when you build the workflow project.</span></span>

<span data-ttu-id="d129a-113">Bu örneğin bileşenleri şunlardır:</span><span class="sxs-lookup"><span data-stu-id="d129a-113">The components of this sample include:</span></span>

- <span data-ttu-id="d129a-114">Veritabanındaki RuleSet sürümlerini düzenlemek ve yönetmek için kullanabileceğiniz bir RuleSet grafik kullanıcı arabirimi aracı.</span><span class="sxs-lookup"><span data-stu-id="d129a-114">A RuleSet graphical user interface tool that you can use to edit and manage RuleSet versions in the database.</span></span>

- <span data-ttu-id="d129a-115">Konak uygulamasında yapılandırılan ve kural kümelerine veritabanından erişen bir RuleSet hizmeti.</span><span class="sxs-lookup"><span data-stu-id="d129a-115">A RuleSet service that is configured on the host application and accesses RuleSets from the database.</span></span>

- <span data-ttu-id="d129a-116">RuleSet hizmetinden bir RuleSet isteyen ve RuleSet 'i iş akışı ile çalıştıran `ExternalPolicy` etkinlik.</span><span class="sxs-lookup"><span data-stu-id="d129a-116">An `ExternalPolicy` activity that requests a RuleSet from the RuleSet service and runs the RuleSet against the workflow.</span></span>

<span data-ttu-id="d129a-117">Bileşenlerin etkileşimi aşağıdaki görüntüde gösterilmiştir.</span><span class="sxs-lookup"><span data-stu-id="d129a-117">The interaction of the components is shown in the following image.</span></span> <span data-ttu-id="d129a-118">Aşağıdaki bölümlerde her bir bileşen açıklanır.</span><span class="sxs-lookup"><span data-stu-id="d129a-118">The sections that follow describe each component.</span></span>

![Dış RuleSet araç seti örneğine genel bakış gösteren diyagram.](./media/external-ruleset-toolkit/ruleset-toolkit-overview.gif)

> [!IMPORTANT]
> <span data-ttu-id="d129a-120">Örnekler makinenizde zaten yüklü olabilir.</span><span class="sxs-lookup"><span data-stu-id="d129a-120">The samples may already be installed on your machine.</span></span> <span data-ttu-id="d129a-121">Devam etmeden önce aşağıdaki (varsayılan) dizini denetleyin.</span><span class="sxs-lookup"><span data-stu-id="d129a-121">Check for the following (default) directory before continuing.</span></span>
>
> `<InstallDrive>:\WF_WCF_Samples`
>
> <span data-ttu-id="d129a-122">Bu dizin yoksa, tüm Windows Communication Foundation (WCF) ve [!INCLUDE[wf1](../../../../includes/wf1-md.md)] örneklerini indirmek üzere [.NET Framework 4 için Windows Communication Foundation (WCF) ve Windows Workflow Foundation (WF) örneklerine](https://www.microsoft.com/download/details.aspx?id=21459) gidin.</span><span class="sxs-lookup"><span data-stu-id="d129a-122">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://www.microsoft.com/download/details.aspx?id=21459) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="d129a-123">Bu örnek, aşağıdaki dizinde bulunur.</span><span class="sxs-lookup"><span data-stu-id="d129a-123">This sample is located in the following directory.</span></span>
>
> `<InstallDrive>:\WF_WCF_Samples\WF\Scenario\ExternalRuleSetToolKit`

## <a name="ruleset-tool"></a><span data-ttu-id="d129a-124">RuleSet aracı</span><span class="sxs-lookup"><span data-stu-id="d129a-124">RuleSet Tool</span></span>

<span data-ttu-id="d129a-125">Aşağıdaki görüntü, RuleSet aracının bir ekran görüntüsüdür.</span><span class="sxs-lookup"><span data-stu-id="d129a-125">The following image is a screenshot of the RuleSet tool.</span></span> <span data-ttu-id="d129a-126">**Kural deposu** menüsünde, kullanılabilir kural kümelerini veritabanından yükleyebilir ve değiştirilen RuleSets 'i depoya geri kaydedebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d129a-126">From the **Rule Store** menu, you can load the available RuleSets from the database and save modified RuleSets back to the store.</span></span> <span data-ttu-id="d129a-127">Bir uygulama yapılandırma dosyası RuleSet veritabanı için bir veritabanı bağlantı dizesi sağlar.</span><span class="sxs-lookup"><span data-stu-id="d129a-127">An application configuration file provides a database connection string for the RuleSet database.</span></span> <span data-ttu-id="d129a-128">Aracı başlattığınızda, kural kümelerini yapılandırılmış veritabanından otomatik olarak yükler.</span><span class="sxs-lookup"><span data-stu-id="d129a-128">When you start the tool, it automatically loads the RuleSets from the configured database.</span></span>

![RuleSet tarayıcısını gösteren ekran görüntüsü.](./media/external-ruleset-toolkit/ruleset-browser-dialog.gif)

<span data-ttu-id="d129a-130">RuleSet Aracı, kural kümelerine büyük ve küçük sürüm numaraları uygular ve birden çok sürümü aynı anda korumanıza ve depolamanıza olanak tanır (araç, sürüm oluşturma özelliğine ek olarak hiçbir kilitleme veya diğer yapılandırma yönetimi özelliği sağlamaz).</span><span class="sxs-lookup"><span data-stu-id="d129a-130">The RuleSet tool applies major and minor version numbers to the RuleSets, allowing you to simultaneously maintain and store multiple versions (the tool provides no locking or other configuration management features in addition to the versioning capability).</span></span> <span data-ttu-id="d129a-131">Aracı kullanarak yeni RuleSet sürümleri oluşturabilir veya var olan sürümleri silebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d129a-131">Using the tool, you can create new RuleSet versions or delete existing versions.</span></span> <span data-ttu-id="d129a-132">**Yeni**' ye tıkladığınızda araç yeni bir RuleSet adı oluşturur ve 1,0 sürümünü uygular.</span><span class="sxs-lookup"><span data-stu-id="d129a-132">When you click **New**, the tool creates a new RuleSet name and applies version 1.0.</span></span> <span data-ttu-id="d129a-133">Bir sürümü kopyaladığınızda, araç, içerilen kurallar dahil olmak üzere seçili RuleSet sürümünün bir kopyasını oluşturur ve yeni, benzersiz sürüm numaraları atar.</span><span class="sxs-lookup"><span data-stu-id="d129a-133">When you copy a version, the tool creates a copy of the selected RuleSet version, including the contained rules, and assigns new, unique version numbers.</span></span> <span data-ttu-id="d129a-134">Bu sürüm numaraları, var olan RuleSets 'in sürüm numaralarına göre yapılır.</span><span class="sxs-lookup"><span data-stu-id="d129a-134">These version numbers are based on the version numbers of existing RuleSets.</span></span> <span data-ttu-id="d129a-135">Kural kümesi adını ve sürüm numaralarını formdaki ilişkili alanları kullanarak değiştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d129a-135">You can change the RuleSet name and version numbers using the associated fields on the form.</span></span>

<span data-ttu-id="d129a-136">**Kuralları Düzenle**' ye tıkladığınızda, aşağıdaki görüntüde gösterildiği gibi RuleSet Düzenleyicisi başlar:</span><span class="sxs-lookup"><span data-stu-id="d129a-136">When you click **Edit Rules**, the RuleSet editor starts, as shown in the following image:</span></span>

![RuleSet düzenleyicisini gösteren ekran görüntüsü.](./media/external-ruleset-toolkit/ruleset-editor-dialog.gif)

<span data-ttu-id="d129a-138">Bu, Visual Studio eklentisinin Windows Workflow Foundation bir parçası olan Düzenleyici iletişim kutusunun yeniden barındırılması.</span><span class="sxs-lookup"><span data-stu-id="d129a-138">This is a re-hosting of the editor dialog that is part of the Windows Workflow Foundation Visual Studio add-in.</span></span> <span data-ttu-id="d129a-139">IntelliSense desteği de dahil olmak üzere aynı işlevselliği sağlar.</span><span class="sxs-lookup"><span data-stu-id="d129a-139">It provides the same functionality, including Intellisense support.</span></span> <span data-ttu-id="d129a-140">Kurallar, araç içindeki RuleSet ile ilişkili bir hedef türe (örneğin, bir iş akışı) göre yazılır; Ana araç iletişim kutusunda **Araştır** ' a tıkladığınızda, Şekil 4 ' te gösterildiği gibi **Iş akışı/tür Seçicisi** iletişim kutusu görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="d129a-140">The rules are authored against a target type (such as a workflow) that is associated with the RuleSet in the tool; when you click **Browse** in the main tool dialog, the **Workflow/Type Selector** dialog appears, as shown in Figure 4.</span></span>

<span data-ttu-id="d129a-141">![İş &#47;akışı türü seçimi](./media/71f08d57-e8f2-499e-8151-ece2cbdcabfd.gif "71f08d57-e8f2-499e-8151-ece2cbdcabfd")</span><span class="sxs-lookup"><span data-stu-id="d129a-141">![Workflow &#47;Type Selection](./media/71f08d57-e8f2-499e-8151-ece2cbdcabfd.gif "71f08d57-e8f2-499e-8151-ece2cbdcabfd")</span></span>

<span data-ttu-id="d129a-142">Şekil 4: Iş akışı/tür Seçici</span><span class="sxs-lookup"><span data-stu-id="d129a-142">Figure 4: Workflow/Type Selector</span></span>

<span data-ttu-id="d129a-143">Bir derlemeyi ve bu derleme içindeki belirli bir türü belirtmek için **Iş akışı/tür Seçicisi** iletişim kutusunu kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d129a-143">You can use the **Workflow/Type Selector** dialog to specify an assembly and a specific type within that assembly.</span></span> <span data-ttu-id="d129a-144">Bu tür, kuralların yazıldığı (ve çalıştırıldığı hedef türüdür).</span><span class="sxs-lookup"><span data-stu-id="d129a-144">This type is the target type against which the rules are authored (and run).</span></span> <span data-ttu-id="d129a-145">Çoğu durumda, hedef türü bir iş akışı veya başka bir etkinlik türüdür.</span><span class="sxs-lookup"><span data-stu-id="d129a-145">In many cases, the target type is a workflow or some other activity type.</span></span> <span data-ttu-id="d129a-146">Ancak, herhangi bir .NET türü için bir RuleSet çalıştırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d129a-146">However, you can run a RuleSet against any .NET type.</span></span>

<span data-ttu-id="d129a-147">Derleme dosyasının yolu ve veritabanı `name are stored with the` RuleSet, bu sayede RuleSet veritabanından alındığında, araç otomatik olarak hedef türünü yüklemeye çalışır.</span><span class="sxs-lookup"><span data-stu-id="d129a-147">The path to the assembly file and the type `name are stored with the` RuleSet in the database, so that when the RuleSet is retrieved from the database, the tool attempts to automatically load the target type.</span></span>

<span data-ttu-id="d129a-148">**Iş akışı/tür Seçicisi** Iletişim kutusunda **Tamam** ' a tıkladığınızda, hedef türün kuralların başvurduğu tüm üyelere sahip olduğundan emin olmak Için seçilen türü RuleSet 'e göre doğrular.</span><span class="sxs-lookup"><span data-stu-id="d129a-148">When you click **OK** in the **Workflow/Type Selector** dialog, it validates the selected type against the RuleSet, to ensure that the target type has all the members referenced by the rules.</span></span> <span data-ttu-id="d129a-149">Hatalar **doğrulama hataları** iletişim kutusunda gösterilir.</span><span class="sxs-lookup"><span data-stu-id="d129a-149">Errors are shown in a **Validation Errors** dialog.</span></span> <span data-ttu-id="d129a-150">Hatalara karşın değişikliğe devam etmeyi seçebilirsiniz veya **iptal**' e tıklayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d129a-150">You can choose to continue with the change despite the errors, or click **Cancel**.</span></span> <span data-ttu-id="d129a-151">Ana araç iletişim kutusundaki **Araçlar** menüsünde, kural kümesi sürümünü hedef etkinliğe göre yeniden doğrulamak için **Doğrula** ' ya tıklayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d129a-151">From the **Tools** menu in the main tool dialog, you can click **Validate** to re-validate the RuleSet version against the target activity.</span></span>

![Doğrulama hataları iletişim kutusunu gösteren ekran görüntüsü.](./media/external-ruleset-toolkit/validation-errors-dialog.png)

<span data-ttu-id="d129a-153">Araçtaki **veri** menüsünde, RuleSets 'i içeri ve dışarı aktarabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d129a-153">From the **Data** menu in the tool, you can import and export RuleSets.</span></span> <span data-ttu-id="d129a-154">**Içeri aktar**' a tıkladığınızda, bir. Rules dosyası seçebileceğiniz bir dosya Seçici iletişim kutusu görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="d129a-154">When you click **Import**, a file-chooser dialog appears, from which you can select a .rules file.</span></span> <span data-ttu-id="d129a-155">Bu, başlangıçta Visual Studio 'da oluşturulmuş bir dosya olabilir veya olmayabilir.</span><span class="sxs-lookup"><span data-stu-id="d129a-155">This may or may not be a file initially created in Visual Studio.</span></span> <span data-ttu-id="d129a-156">. Rules dosyası bir koşul koleksiyonu ve RuleSets koleksiyonu içeren serileştirilmiş bir `RuleDefinitions` örneği içermelidir.</span><span class="sxs-lookup"><span data-stu-id="d129a-156">The .rules file should contain a serialized `RuleDefinitions` instance that contains a collection of conditions and a collection of RuleSets.</span></span> <span data-ttu-id="d129a-157">Araç, koşullar koleksiyonunu kullanmaz, ancak Visual Studio ortamıyla etkileşime izin vermek için `RuleDefinitions`. Rules biçimini kullanır.</span><span class="sxs-lookup"><span data-stu-id="d129a-157">The tool does not use the conditions collection, but it does use the `RuleDefinitions` .rules format to allow interaction with the Visual Studio environment.</span></span>

<span data-ttu-id="d129a-158">Bir. Rules dosyası seçildikten sonra bir **RuleSet Seçicisi** iletişim kutusu görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="d129a-158">After selecting a .rules file, a **RuleSet Selector** dialog appears.</span></span> <span data-ttu-id="d129a-159">İletişim kutusunu, içe aktarmak istediğiniz dosyadan RuleSets ' i seçmek için kullanabilirsiniz (varsayılan olarak tüm RuleSets 'ler belirtilir).</span><span class="sxs-lookup"><span data-stu-id="d129a-159">You can use the dialog to select the RuleSets from the file that you want to import (the default specifies all RuleSets).</span></span> <span data-ttu-id="d129a-160">. Rules dosyasındaki RuleSets 'in sürüm numaraları yoktur, çünkü bir WF projesi içindeki sürümleriniz derleme sürümüyle aynı.</span><span class="sxs-lookup"><span data-stu-id="d129a-160">RuleSets in the .rules file do not have version numbers, because their versioning within a WF project is the same as the version of the assembly.</span></span> <span data-ttu-id="d129a-161">İçeri aktarma işlemi sırasında araç otomatik olarak bir sonraki kullanılabilir ana sürüm numarasını (içeri aktardıktan sonra değiştirebilirsiniz) atar; atanan sürüm numaralarını **RuleSet Seçicisi** listesinde görebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d129a-161">During the importing process, the tool automatically assigns the next available major version number (which you can change after importing); you can see the assigned version numbers in the **RuleSet Selector** list.</span></span>

<span data-ttu-id="d129a-162">İçeri aktardığı her RuleSet için araç, kural kümesinde kullanılan üyelere göre. Rules dosyasının (varsa) konumu altında bulunan bin\Debug klasöründen ilişkili türü bulmaya çalışır.</span><span class="sxs-lookup"><span data-stu-id="d129a-162">For each RuleSet it imports, the tool attempts to locate the associated type from the bin\Debug folder under the location of the .rules file (if it exists), based on the members used in the RuleSet.</span></span> <span data-ttu-id="d129a-163">Araç birden çok eşleşen tür bulursa,. Rules dosya adı ve tür adı arasındaki eşleşmeyi temel alan bir tür seçme girişiminde bulunur (örneğin, `Workflow1` türü Workflow1. Rules öğesine karşılık gelir).</span><span class="sxs-lookup"><span data-stu-id="d129a-163">If the tool finds multiple matching types, it attempts to choose a type based on a match between the .rules file name and the type name (for example, the `Workflow1` type corresponds to Workflow1.rules).</span></span> <span data-ttu-id="d129a-164">Birden çok eşleşme mevcutsa, türü seçmeniz istenir.</span><span class="sxs-lookup"><span data-stu-id="d129a-164">If multiple matches exist, you are prompted to select the type.</span></span> <span data-ttu-id="d129a-165">Bu otomatik tanımlama mekanizması eşleşen bir derlemeyi veya türü bulamazsa, içeri aktardıktan sonra ana araç iletişim kutusunda, ilişkili türe gitmek için **Git ' e** tıklayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d129a-165">If this auto-identification mechanism fails to locate a matching assembly or type, then after importing you can click **Browse** on the main tool dialog to navigate to the associated type.</span></span> <span data-ttu-id="d129a-166">Aşağıdaki görüntüde RuleSet Seçicisi gösterilmektedir:</span><span class="sxs-lookup"><span data-stu-id="d129a-166">The following image shows the RuleSet Selector:</span></span>

![RuleSet Seçicisi iletişim kutusunu gösteren ekran görüntüsü.](./media/external-ruleset-toolkit/ruleset-selector-dialog.gif)

<span data-ttu-id="d129a-168">Ana araç menüsünden **veri-dışarı aktar** ' a tıkladığınızda, **kural kümesi Seçicisi** iletişim kutusu yeniden görünür ve bu, dışarı aktarılması gereken veritabanından RuleSets 'i belirleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d129a-168">When you click **Data-Export** from the main tool menu, the **RuleSet Selector** dialog appears again, from which you can determine the RuleSets from the database that should be exported.</span></span> <span data-ttu-id="d129a-169">**Tamam**' a tıkladığınızda, bir **dosyayı kaydet** iletişim kutusu görünür ve burada elde edilen. Rules dosyasının adını ve konumunu belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d129a-169">When you click **OK**, a **Save File** dialog appears, in which you can specify the name and location of the resulting .rules file.</span></span> <span data-ttu-id="d129a-170">. Rules dosyası sürüm bilgisi içermediğinden, yalnızca belirli bir RuleSet adına sahip bir RuleSet sürümü seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d129a-170">Because the .rules file does not contain version information, you can only select one RuleSet version with a given RuleSet name.</span></span>

## <a name="policyfromservice-activity"></a><span data-ttu-id="d129a-171">PolicyFromService etkinliği</span><span class="sxs-lookup"><span data-stu-id="d129a-171">PolicyFromService Activity</span></span>

<span data-ttu-id="d129a-172">`PolicyFromService` etkinliğinin kodu basittir.</span><span class="sxs-lookup"><span data-stu-id="d129a-172">The code for the `PolicyFromService` activity is straightforward.</span></span> <span data-ttu-id="d129a-173">WF ile sunulan `Policy` etkinliği çok benzer, ancak. Rules dosyasından hedef RuleSet 'i almak yerine, RuleSet örneğini almak için bir konak hizmeti çağırır.</span><span class="sxs-lookup"><span data-stu-id="d129a-173">It works much like the `Policy` activity provided with WF, but instead of retrieving the target RuleSet from the .rules file, it calls a host service to obtain the RuleSet instance.</span></span> <span data-ttu-id="d129a-174">Ardından, kural kümesini kök iş akışı etkinlik örneğine göre çalıştırır.</span><span class="sxs-lookup"><span data-stu-id="d129a-174">It then runs the RuleSet against the root workflow activity instance.</span></span>

<span data-ttu-id="d129a-175">Etkinliğini bir iş akışında kullanmak için, iş akışı projenizden `PolicyActivities` ve `RuleSetService` derlemeler için bir başvuru ekleyin.</span><span class="sxs-lookup"><span data-stu-id="d129a-175">To use the activity in a workflow, add a reference to the `PolicyActivities` and `RuleSetService` assemblies from your workflow project.</span></span> <span data-ttu-id="d129a-176">Etkinliği araç kutusuna ekleme hakkında bir tartışma için bu konunun sonundaki yordama bakın.</span><span class="sxs-lookup"><span data-stu-id="d129a-176">See the procedure at the end of this topic for a discussion of how to add the activity to the toolbox.</span></span>

<span data-ttu-id="d129a-177">Etkinlik iş akışınıza yerleştirdikten sonra, çalıştırılacak RuleSet 'in adını sağlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="d129a-177">After placing the activity in your workflow, you must provide the name of the RuleSet to be run.</span></span> <span data-ttu-id="d129a-178">Adı bir sabit değer olarak girebilir veya başka bir etkinliğin iş akışı değişkenine veya özelliğine bağlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d129a-178">You can enter the name as a literal value, or bind to a workflow variable or property of another activity.</span></span> <span data-ttu-id="d129a-179">İsteğe bağlı olarak, çalıştırılması gereken belirli bir RuleSet için sürüm numaralarını girebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d129a-179">Optionally, you can enter version numbers for the specific RuleSet that should be run.</span></span> <span data-ttu-id="d129a-180">Birincil ve ikincil sürüm numaraları için varsayılan değer olan 0 ' ı bıraktığınızda, etkinlik için veritabanındaki en son sürüm numarası otomatik olarak sağlanır.</span><span class="sxs-lookup"><span data-stu-id="d129a-180">If you leave the default value of 0 for the major and minor version numbers, the latest version number in the database is automatically provided for the activity.</span></span>

## <a name="ruleset-service"></a><span data-ttu-id="d129a-181">RuleSet hizmeti</span><span class="sxs-lookup"><span data-stu-id="d129a-181">RuleSet Service</span></span>

<span data-ttu-id="d129a-182">Hizmet, belirtilen RuleSet sürümünü veritabanından almaktan ve çağrı etkinliğine döndürmekten sorumludur.</span><span class="sxs-lookup"><span data-stu-id="d129a-182">The service is responsible for retrieving the specified RuleSet version from the database and returning it to the calling activity.</span></span> <span data-ttu-id="d129a-183">Daha önce anlatıldığı gibi, `GetRuleSet` çağrısında geçirilen büyük ve küçük sürüm değerlerinin ikisi de 0 ise, hizmet en son sürümü alır.</span><span class="sxs-lookup"><span data-stu-id="d129a-183">As previously discussed, if the major and minor version values passed in the `GetRuleSet` call are both 0, the service retrieves the latest version.</span></span> <span data-ttu-id="d129a-184">Bu noktada, RuleSet tanımlarının veya örneklerinin önbelleğe alınması yoktur; benzer şekilde, kural kümesi sürümlerini, devam eden RuleSets 'ler olarak ayırt etmek için "dağıtılmış" olarak işaretlemek için bir özellik yoktur.</span><span class="sxs-lookup"><span data-stu-id="d129a-184">At this point, there is no caching of RuleSet definitions or instances; similarly, there are no features for marking RuleSet versions as "deployed" to differentiate them from in-progress RuleSets.</span></span>

<span data-ttu-id="d129a-185">Hizmet tarafından erişilecek veritabanının bir uygulama yapılandırma dosyası kullanılarak konakta yapılandırılması gerekir.</span><span class="sxs-lookup"><span data-stu-id="d129a-185">The database to be accessed by the service should be configured on the host using an application configuration file.</span></span>

#### <a name="to-run-the-tool"></a><span data-ttu-id="d129a-186">Aracı çalıştırmak için</span><span class="sxs-lookup"><span data-stu-id="d129a-186">To run the tool</span></span>

1. <span data-ttu-id="d129a-187">Araç ve hizmet tarafından kullanılan RuleSet tablosunu ayarlayan klasör bir Setup. SQL dosyası içerir.</span><span class="sxs-lookup"><span data-stu-id="d129a-187">The folder that sets up the RuleSet table used by the tool and the service contains a Setup.sql file.</span></span> <span data-ttu-id="d129a-188">SQL Express üzerinde Rules veritabanını oluşturmak ve RuleSet tablosunu ayarlamak için Setup. cmd toplu iş dosyasını çalıştırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d129a-188">You can run the Setup.cmd batch file to create the Rules database on SQL Express and to set up the RuleSet table.</span></span>

2. <span data-ttu-id="d129a-189">Toplu iş dosyasını veya Setup. SQL ' i düzenleyin ve SQL Express 'ı kullanmayı ya da tabloyu `Rules`dışında bir veritabanına yerleştirmek için, RuleSet aracında ve `UsageSample` projelerindeki uygulama yapılandırma dosyaları aynı bilgilerle düzenlenmelidir.</span><span class="sxs-lookup"><span data-stu-id="d129a-189">If you edit the batch file or Setup.sql and specify not to use SQL Express or to place the table in a database named something other than `Rules`, the application configuration files in the RuleSet tool and `UsageSample` projects should be edited with the same information.</span></span>

3. <span data-ttu-id="d129a-190">Setup. SQL betiğini çalıştırdıktan sonra, `ExternalRuleSetToolkit` çözümü oluşturabilir ve ardından ExternalRuleSetTool projesinden RuleSet aracını başlatabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d129a-190">After you run the Setup.sql script, you can build the `ExternalRuleSetToolkit` solution and then launch the RuleSet tool from the ExternalRuleSetTool project.</span></span>

4. <span data-ttu-id="d129a-191">`RuleSetToolkitUsageSample` sıralı Iş akışı konsol uygulaması çözümü, örnek bir iş akışı içerir.</span><span class="sxs-lookup"><span data-stu-id="d129a-191">The `RuleSetToolkitUsageSample` Sequential Workflow Console Application solution includes a sample workflow.</span></span> <span data-ttu-id="d129a-192">İş akışı, hedef RuleSet 'in çalıştırıldığı `PolicyFromService` etkinlik ve iki değişkenden oluşur `orderValue` ve `discount`.</span><span class="sxs-lookup"><span data-stu-id="d129a-192">The workflow consists of a `PolicyFromService` activity and two variables, `orderValue` and `discount`, against which the target RuleSet runs.</span></span>

5. <span data-ttu-id="d129a-193">Örneği kullanmak için `RuleSetToolkitUsageSample` çözümü oluşturun.</span><span class="sxs-lookup"><span data-stu-id="d129a-193">To use the sample, build the `RuleSetToolkitUsageSample` solution.</span></span> <span data-ttu-id="d129a-194">Ardından RuleSet aracı ana menüsünde, **veri-Içeri aktar** ' a tıklayın ve RuleSetToolkitUsageSample klasöründeki Discountrutaset. Rules dosyasına gelin.</span><span class="sxs-lookup"><span data-stu-id="d129a-194">Then from the RuleSet tool main menu, click **Data-Import** and point to the DiscountRuleSet.rules file in the RuleSetToolkitUsageSample folder.</span></span> <span data-ttu-id="d129a-195">İçeri aktarılan RuleSet 'i veritabanına kaydetmek için **kural deposu-kaydet** menü seçeneğine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d129a-195">Click the **Rule Store-Save** menu option to save the imported RuleSet to the database.</span></span>

6. <span data-ttu-id="d129a-196">`PolicyActivities` derlemesine örnek iş akışı projesinden başvurulduğundan, iş akışında `PolicyFromService` etkinliği görünür.</span><span class="sxs-lookup"><span data-stu-id="d129a-196">Because the `PolicyActivities` assembly is referenced from the sample workflow project, the `PolicyFromService` activity appears in the workflow.</span></span> <span data-ttu-id="d129a-197">Ancak, araç kutusunda varsayılan olarak görünmez.</span><span class="sxs-lookup"><span data-stu-id="d129a-197">It does not, however, appear in the toolbox by default.</span></span> <span data-ttu-id="d129a-198">Araç kutusuna eklemek için aşağıdakileri yapın:</span><span class="sxs-lookup"><span data-stu-id="d129a-198">To add it to the toolbox, do the following:</span></span>

    - <span data-ttu-id="d129a-199">Araç kutusuna sağ tıklayın ve **öğeleri seç** ' i seçin (Bu işlem biraz zaman alabilir).</span><span class="sxs-lookup"><span data-stu-id="d129a-199">Right-click the toolbox and select **Choose Items** (this may take a while).</span></span>

    - <span data-ttu-id="d129a-200">**Araç kutusu öğelerini Seç** iletişim kutusu göründüğünde, **Etkinlikler** sekmesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d129a-200">When the **Choose Toolbox Items** dialog appears, click the **Activities** tab.</span></span>

    - <span data-ttu-id="d129a-201">`ExternalRuleSetToolkit` çözümünde `PolicyActivities` derlemesine gidin ve **Aç**' a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d129a-201">Browse to the `PolicyActivities` assembly in the `ExternalRuleSetToolkit` solution and click **Open**.</span></span>

    - <span data-ttu-id="d129a-202">**Araç kutusu öğelerini Seç** iletişim kutusunda `PolicyFromService` etkinliğinin seçildiğinden emin olun ve ardından **Tamam**' a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d129a-202">Ensure that the `PolicyFromService` activity is selected in the **Choose Toolbox Items** dialog and then click **OK**.</span></span>

    - <span data-ttu-id="d129a-203">Etkinlik artık **Rulesettoolkitusagesample Components** kategorisindeki araç kutusunda görünmelidir.</span><span class="sxs-lookup"><span data-stu-id="d129a-203">The activity should now appear in the toolbox in the **RuleSetToolkitUsageSample Components** category.</span></span>

7. <span data-ttu-id="d129a-204">RuleSet hizmeti, Program.cs içinde aşağıdaki deyimden yararlanarak konsol uygulama ana bilgisayarında zaten yapılandırılmış.</span><span class="sxs-lookup"><span data-stu-id="d129a-204">The RuleSet service is already configured on the console application host using the following statement in Program.cs.</span></span>

    ```csharp
    workflowRuntime.AddService(new RuleSetService());
    ```

8. <span data-ttu-id="d129a-205">Ayrıca, bir yapılandırma dosyası kullanarak konakta hizmeti yapılandırabilirsiniz; Ayrıntılar için SDK belgelerine bakın.</span><span class="sxs-lookup"><span data-stu-id="d129a-205">You can also configure the service on the host using a configuration file; see the SDK documentation for details.</span></span>

9. <span data-ttu-id="d129a-206">Hizmet tarafından kullanılacak veritabanına yönelik bağlantı dizesini belirtmek için iş akışı projesine bir uygulama yapılandırma dosyası eklenir.</span><span class="sxs-lookup"><span data-stu-id="d129a-206">An application configuration file is added to the workflow project to specify the connection string for the database to be used by the service.</span></span> <span data-ttu-id="d129a-207">Bu, RuleSet aracı tarafından kural kümesi tablosunu içeren veritabanına işaret eden aynı bağlantı dizesi olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="d129a-207">This should be the same connection string used by the RuleSet tool, which points to the database that contains the RuleSet table.</span></span>

10. <span data-ttu-id="d129a-208">Artık `RuleSetToolkitUsageSample` projeyi diğer iş akışı konsol uygulamaları gibi çalıştırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d129a-208">You can now run the `RuleSetToolkitUsageSample` project as you would any other workflow console application.</span></span> <span data-ttu-id="d129a-209">Visual Studio 'da F5 veya CTRL + F5 tuşlarına basın veya RuleSetToolkitUsageSample. exe dosyasını doğrudan çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="d129a-209">Press F5 or Ctrl+F5 within Visual Studio or run the RuleSetToolkitUsageSample.exe file directly.</span></span>

    > [!NOTE]
    > <span data-ttu-id="d129a-210">Kullanım örneğini yeniden derlemek için RuleSet aracını kapatmanız gerekir, çünkü araç kullanım örneği derlemesini yükler.</span><span class="sxs-lookup"><span data-stu-id="d129a-210">You must close the RuleSet tool to recompile the usage sample, because the tool loads the usage sample assembly.</span></span>
