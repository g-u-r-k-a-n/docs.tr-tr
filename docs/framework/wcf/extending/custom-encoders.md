---
title: Özel Kodlayıcılar
ms.date: 03/30/2017
ms.assetid: fa0e1d7f-af36-4bf4-aac9-cd4eab95bc4f
ms.openlocfilehash: c2ad0c947afd293d0923faa3e9d914b6911ce941
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 11/26/2020
ms.locfileid: "96254785"
---
# <a name="custom-encoders"></a><span data-ttu-id="937a9-102">Özel Kodlayıcılar</span><span class="sxs-lookup"><span data-stu-id="937a9-102">Custom Encoders</span></span>

<span data-ttu-id="937a9-103">Bu konu başlığında özel kodlayıcılar oluşturma konusu ele alınmaktadır.</span><span class="sxs-lookup"><span data-stu-id="937a9-103">This topic discusses how to create custom encoders.</span></span>  
  
 <span data-ttu-id="937a9-104">Windows Communication Foundation (WCF) ' de, bir ağ üzerinden uç noktalar arasında veri aktarımını belirtmek için bir *bağlama* kullanırsınız.</span><span class="sxs-lookup"><span data-stu-id="937a9-104">In Windows Communication Foundation (WCF), you use a *binding* to specify how to transfer data across a network between endpoints.</span></span> <span data-ttu-id="937a9-105">Bağlama *öğelerinden* oluşan bir sıralama oluşur.</span><span class="sxs-lookup"><span data-stu-id="937a9-105">A binding is made up of a sequence of *binding elements*.</span></span> <span data-ttu-id="937a9-106">Bağlama, güvenlik, gerekli bir *Ileti Kodlayıcısı* bağlama öğesi ve gerekli bir aktarım bağlama öğesi gibi isteğe bağlı protokol bağlama öğelerini içerir.</span><span class="sxs-lookup"><span data-stu-id="937a9-106">A binding includes optional protocol binding elements such as security, a required *Message Encoder* binding element, and a required transport binding element.</span></span> <span data-ttu-id="937a9-107">İleti Kodlayıcısı bir ileti kodlama bağlama öğesiyle temsil edilir.</span><span class="sxs-lookup"><span data-stu-id="937a9-107">A message encoder is represented by a message encoding binding element.</span></span> <span data-ttu-id="937a9-108">WCF 'de üç ileti kodlayıcıları bulunur: Ikili, Ileti Iletimi Iyileştirme mekanizması (MTOM) ve metin.</span><span class="sxs-lookup"><span data-stu-id="937a9-108">Three message encoders are included in WCF: Binary, Message Transmission Optimization Mechanism (MTOM), and Text.</span></span>  
  
 <span data-ttu-id="937a9-109">Bir ileti kodlama bağlama öğesi, bir bağlantıyı serileştirir <xref:System.ServiceModel.Channels.Message> ve aktarıma geçirir ya da aktarımdan bir iletinin seri hale getirilmiş formunu alır ve varsa bunu, varsa protokol katmanına geçirir.</span><span class="sxs-lookup"><span data-stu-id="937a9-109">A message encoding binding element serializes an outgoing <xref:System.ServiceModel.Channels.Message> and passes it to the transport, or receives the serialized form of a message from the transport and passes it to the protocol layer if present, or to the application, if not present.</span></span>  
  
 <span data-ttu-id="937a9-110">İleti kodlayıcıları <xref:System.ServiceModel.Channels.Message> , bir tel gösterimden ve bu örneklere örnek dönüştürür.</span><span class="sxs-lookup"><span data-stu-id="937a9-110">Message encoders transform <xref:System.ServiceModel.Channels.Message> instances to and from a wire representation.</span></span> <span data-ttu-id="937a9-111">Kodlayıcılar kanal yığınındaki aktarım katmanının üzerinde oturmuş gibi açıklansa da, bunlar aktarım katmanının içinde yer alır.</span><span class="sxs-lookup"><span data-stu-id="937a9-111">Although encoders are described as sitting above the transport layer in the channel stack, they reside inside the transport layer.</span></span> <span data-ttu-id="937a9-112">Aktarımlar (örneğin, HTTP), aktarım standardının gereksinimlerine göre iletiyi biçimlendirir.</span><span class="sxs-lookup"><span data-stu-id="937a9-112">Transports (for example HTTP) format the message according to the requirements of the transport standard.</span></span> <span data-ttu-id="937a9-113">Kodlayıcılar (örneğin, metin XML) yalnızca iletiyi kodlayın.</span><span class="sxs-lookup"><span data-stu-id="937a9-113">Encoders (for example Text Xml) just encode the message.</span></span>  
  
 <span data-ttu-id="937a9-114">Önceden var olan bir istemciye veya sunucuya bağlanırken, belirli bir ileti kodlamasının kullanılmasıyla ilgili bir seçeneğe sahip olmayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="937a9-114">When connecting to a preexisting client or server, you may not have a choice about using a particular message encoding.</span></span> <span data-ttu-id="937a9-115">Ancak, WCF Hizmetleri, her biri farklı ileti Kodlayıcısı olan birden fazla uç nokta aracılığıyla erişilebilir hale getirilebilir.</span><span class="sxs-lookup"><span data-stu-id="937a9-115">However, WCF services can be made accessible through multiple endpoints, each with a different message encoder.</span></span> <span data-ttu-id="937a9-116">Tek bir kodlayıcı hizmetinize ilişkin tüm hedef kitlesini kapsamadığı zaman, hizmetinizi birden fazla uç nokta üzerinden kullanıma sunar.</span><span class="sxs-lookup"><span data-stu-id="937a9-116">When a single encoder does not cover the entire audience for your service, consider exposing your service over multiple endpoints.</span></span> <span data-ttu-id="937a9-117">İstemci uygulamaları daha sonra kendileri için en iyi uç noktayı seçebilir.</span><span class="sxs-lookup"><span data-stu-id="937a9-117">Client applications can then choose the endpoint that is best for them.</span></span> <span data-ttu-id="937a9-118">Birden çok bitiş noktası kullanmak, farklı ileti Kodlayıcılarının avantajlarını diğer bağlama öğeleriyle birleştirmenize olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="937a9-118">Using multiple endpoints allows you to combine the advantages of different message encoders with other binding elements.</span></span>  
  
## <a name="system-provided-encoders"></a><span data-ttu-id="937a9-119">System-Provided kodlayıcılar</span><span class="sxs-lookup"><span data-stu-id="937a9-119">System-Provided Encoders</span></span>  

 <span data-ttu-id="937a9-120">WCF, en yaygın uygulama senaryolarını kapsayacak şekilde tasarlanan çeşitli sistem tarafından sağlanan bağlamalar sağlar.</span><span class="sxs-lookup"><span data-stu-id="937a9-120">WCF provides several system-provided bindings that are designed to cover the most common application scenarios.</span></span> <span data-ttu-id="937a9-121">Bu bağlamalardan her biri bir aktarım, ileti Kodlayıcısı ve diğer seçenekleri (örneğin, güvenlik) birleştirir.</span><span class="sxs-lookup"><span data-stu-id="937a9-121">Each of these bindings combine a transport, message encoder, and other options (security, for example).</span></span> <span data-ttu-id="937a9-122">Bu konuda, WCF 'ye dahil edilen `Text` , `Binary` , ve `MTOM` ileti kodlayıcıların nasıl genişletileceği veya kendi özel kodlayıcılarınızın nasıl oluşturulduğu açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="937a9-122">This topic describes how to extend the `Text`, `Binary`, and `MTOM` message encoders that are included in WCF, or create your own custom encoder.</span></span> <span data-ttu-id="937a9-123">Kısa mesaj Kodlayıcısı hem düz XML kodlamasının hem de SOAP kodlamaları destekler.</span><span class="sxs-lookup"><span data-stu-id="937a9-123">The text message encoder supports both a plain XML encoding as well as SOAP encodings.</span></span> <span data-ttu-id="937a9-124">Metin iletisi kodlayıcısından düz XML kodlama moduna, metin tabanlı SOAP kodlamadan ayırt etmek için POX ("düz eski XML") kodlayıcı adı verilir.</span><span class="sxs-lookup"><span data-stu-id="937a9-124">The plain XML encoding mode of the text message encoder is called the POX ("Plain Old XML") encoder to distinguish it from the text-based SOAP encoding.</span></span>  
  
 <span data-ttu-id="937a9-125">Sistem tarafından belirtilen bağlamalar tarafından sunulan bağlama öğelerinin birleşimleri hakkında daha fazla bilgi için, [Taşıma Seçme](../feature-details/choosing-a-transport.md)konusunun ilgili bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="937a9-125">For more information about the combinations of binding elements provided by the system-provided bindings, see the corresponding section in [Choosing a Transport](../feature-details/choosing-a-transport.md).</span></span>  
  
## <a name="how-to-work-with-system-provided-encoders"></a><span data-ttu-id="937a9-126">System-Provided kodlayıcılarıyla çalışma</span><span class="sxs-lookup"><span data-stu-id="937a9-126">How to Work with System-Provided Encoders</span></span>  

 <span data-ttu-id="937a9-127">Bir kodlama, öğesinden türetilmiş bir sınıf kullanılarak bağlamaya eklenir <xref:System.ServiceModel.Channels.MessageEncodingBindingElement> .</span><span class="sxs-lookup"><span data-stu-id="937a9-127">An encoding is added to a binding using a class derived from <xref:System.ServiceModel.Channels.MessageEncodingBindingElement>.</span></span>  
  
 <span data-ttu-id="937a9-128">WCF, <xref:System.ServiceModel.Channels.MessageEncodingBindingElement> metin, ikili ve Ileti Iletimi Iyileştirme mekanizması (MTOM) kodlaması için sağlayabileceğiniz sınıftan türetilmiş aşağıdaki bağlama öğesi türlerini sağlar:</span><span class="sxs-lookup"><span data-stu-id="937a9-128">WCF provides the following types of binding elements derived from the <xref:System.ServiceModel.Channels.MessageEncodingBindingElement> class that can provide for text, binary and Message Transmission Optimization Mechanism (MTOM) encoding:</span></span>  
  
- <span data-ttu-id="937a9-129"><xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>: En çok çalışabilen, ancak XML iletileri için en az verimli kodlayıcı.</span><span class="sxs-lookup"><span data-stu-id="937a9-129"><xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>: The most interoperable, but the least efficient encoder for XML messages.</span></span> <span data-ttu-id="937a9-130">Bir Web hizmeti veya Web hizmeti istemcisi, genellikle metinsel XML 'i anlayabilir.</span><span class="sxs-lookup"><span data-stu-id="937a9-130">A Web service or Web service client can generally understand textual XML.</span></span> <span data-ttu-id="937a9-131">Ancak, büyük ikili veri bloklarını metin olarak iletmek verimli değildir.</span><span class="sxs-lookup"><span data-stu-id="937a9-131">However, transmitting large blocks of binary data as text is not efficient.</span></span>  
  
- <span data-ttu-id="937a9-132"><xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>: İkili tabanlı XML iletileri için kullanılan karakter kodlamasını ve ileti sürüm oluşturmayı belirten bağlama öğesini temsil eder.</span><span class="sxs-lookup"><span data-stu-id="937a9-132"><xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>: Represents the binding element that specifies the character encoding and message versioning used for binary-based XML messages.</span></span> <span data-ttu-id="937a9-133">Bu, kodlama seçeneklerinin en etkilidir, ancak yalnızca WCF uç noktaları tarafından desteklendiğinden, en az birlikte kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="937a9-133">This is most efficient of the encoding options, but the least interoperable, because it is only supported by WCF endpoints.</span></span>  
  
- <span data-ttu-id="937a9-134"><xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement>: Ileti Iletimi Iyileştirme mekanizması (MTOM) kodlaması kullanarak bir ileti için kullanılan karakter kodlamasını ve ileti sürüm oluşturmayı belirten bağlama öğesini temsil eder.</span><span class="sxs-lookup"><span data-stu-id="937a9-134"><xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement>: Represents the binding element that specifies the character encoding and message versioning used for a message using a Message Transmission Optimization Mechanism (MTOM) encoding.</span></span> <span data-ttu-id="937a9-135">MTOM, WCF iletilerindeki ikili verileri iletmek için etkili bir teknolojidir.</span><span class="sxs-lookup"><span data-stu-id="937a9-135">MTOM is an efficient technology for transmitting binary data in WCF messages.</span></span> <span data-ttu-id="937a9-136">MTOM Kodlayıcısı verimlilik ve birlikte çalışabilirlik arasında denge kurmaya çalışır.</span><span class="sxs-lookup"><span data-stu-id="937a9-136">The MTOM encoder attempts to balance between efficiency and interoperability.</span></span> <span data-ttu-id="937a9-137">MTOM kodlaması çoğu XML 'i metinsel biçimde iletir, ancak bu verileri,, metne dönüştürülmeksizin olduğu gibi ileterek büyük ikili veri bloklarını iyileştirir.</span><span class="sxs-lookup"><span data-stu-id="937a9-137">The MTOM encoding transmits most XML in textual form, but optimizes large blocks of binary data by transmitting them as-is, without conversion to text.</span></span>  
  
 <span data-ttu-id="937a9-138">Binding öğesi bir ikili, MTOM veya metin oluşturur <xref:System.ServiceModel.Channels.MessageEncoderFactory> .</span><span class="sxs-lookup"><span data-stu-id="937a9-138">The binding element creates a binary, MTOM, or text <xref:System.ServiceModel.Channels.MessageEncoderFactory>.</span></span> <span data-ttu-id="937a9-139">Fabrika bir ikili, MTOM veya metin <xref:System.ServiceModel.Channels.MessageEncoderFactory> örneği oluşturur.</span><span class="sxs-lookup"><span data-stu-id="937a9-139">The factory creates a binary, MTOM, or text <xref:System.ServiceModel.Channels.MessageEncoderFactory> instance.</span></span> <span data-ttu-id="937a9-140">Genellikle yalnızca tek bir örnek vardır.</span><span class="sxs-lookup"><span data-stu-id="937a9-140">Typically, there is only a single instance.</span></span> <span data-ttu-id="937a9-141">Ancak oturumlar kullanılıyorsa, her oturuma farklı bir kodlayıcı istenebilir.</span><span class="sxs-lookup"><span data-stu-id="937a9-141">However if sessions are used, a different encoder may be provided to each session.</span></span> <span data-ttu-id="937a9-142">Ikili kodlayıcı, dinamik sözlükleri koordine etmek için bunu kullanır (bkz. XML altyapısı).</span><span class="sxs-lookup"><span data-stu-id="937a9-142">The Binary encoder makes use of this to coordinate dynamic dictionaries (see XML Infrastructure).</span></span>  
  
 <span data-ttu-id="937a9-143"><xref:System.ServiceModel.Channels.MessageEncoder.ReadMessage%2A>Ve <xref:System.ServiceModel.Channels.MessageEncoder.WriteMessage%2A> yöntemleri, kodlayıcıların çekirdekleridir.</span><span class="sxs-lookup"><span data-stu-id="937a9-143">The <xref:System.ServiceModel.Channels.MessageEncoder.ReadMessage%2A> and <xref:System.ServiceModel.Channels.MessageEncoder.WriteMessage%2A> methods are the core of the encoders.</span></span> <span data-ttu-id="937a9-144">Yöntemler bir akıştan veya bir diziden bir ileti okumayı sağlar <xref:System.Byte> .</span><span class="sxs-lookup"><span data-stu-id="937a9-144">The methods provide for reading a message from a stream or from a <xref:System.Byte> array.</span></span> <span data-ttu-id="937a9-145">Aktarım, arabelleğe alınmış modda çalışırken bayt dizileri kullanılır.</span><span class="sxs-lookup"><span data-stu-id="937a9-145">Byte arrays are used when the transport is operating in buffered mode.</span></span> <span data-ttu-id="937a9-146">Mesajlar her zaman akışlara yazılır.</span><span class="sxs-lookup"><span data-stu-id="937a9-146">Messages are always written to streams.</span></span> <span data-ttu-id="937a9-147">Taşıma iletiyi arabelleğe alıyorsa, arabelleğe alma yapan bir akış sağlar.</span><span class="sxs-lookup"><span data-stu-id="937a9-147">If the transport must buffer the message, it provides a stream that does the buffering.</span></span>  
  
 <span data-ttu-id="937a9-148">Üyelerin geri kalanı destek içeriği, medya türleri ve desteğiyle çalışır <xref:System.ServiceModel.Channels.MessageEncoder.MessageVersion%2A> .</span><span class="sxs-lookup"><span data-stu-id="937a9-148">The rest of the members work with support content, media types, and <xref:System.ServiceModel.Channels.MessageEncoder.MessageVersion%2A>.</span></span> <span data-ttu-id="937a9-149">Taşıma bu kodlayıcı yöntemlerini, gelen iletinin onun tarafından çözülip çözülmeyeceğini test etmek veya giden iletinin bu kodlayıcı için geçerli olup olmadığını anlamak için çağırır.</span><span class="sxs-lookup"><span data-stu-id="937a9-149">The transport calls these encoder methods to test whether the incoming message can be decoded by it, or to determine if the outgoing message is valid for this encoder.</span></span>  
  
 <span data-ttu-id="937a9-150">Üç kodlayıcı uygulamasının her biri, belirli kodlayıcılara uygun özellikleri ekler ve tamamen yapılandırılabilir.</span><span class="sxs-lookup"><span data-stu-id="937a9-150">Each of the three encoder implementations adds properties that are relevant to the specific encodings and is fully configurable.</span></span> <span data-ttu-id="937a9-151">Kodlayıcılar Ayrıca güvenli varsayılanlara sahip okuyucu kotaları sunar.</span><span class="sxs-lookup"><span data-stu-id="937a9-151">The encoders also expose reader quotas that have secure defaults.</span></span> <span data-ttu-id="937a9-152">Kotaların bir tartışması için bkz. XML altyapısı.</span><span class="sxs-lookup"><span data-stu-id="937a9-152">See XML Infrastructure for a discussion of the quotas.</span></span>  
  
## <a name="features-of-system-provided-encoders"></a><span data-ttu-id="937a9-153">System-Provided kodlayıcılara ait özellikler</span><span class="sxs-lookup"><span data-stu-id="937a9-153">Features of System-Provided Encoders</span></span>  

 <span data-ttu-id="937a9-154">Sistem tarafından sunulan kodlayıcılar tarafından sunulan birçok özellik vardır.</span><span class="sxs-lookup"><span data-stu-id="937a9-154">There are a number of features provided by the system-provided encoders.</span></span>  
  
### <a name="pooling"></a><span data-ttu-id="937a9-155">Biriktirme</span><span class="sxs-lookup"><span data-stu-id="937a9-155">Pooling</span></span>  

 <span data-ttu-id="937a9-156">Kodlayıcı uygulamalarının her biri, mümkün olduğunca çok havuzu oluşturmaya çalışır.</span><span class="sxs-lookup"><span data-stu-id="937a9-156">Each of the encoder implementations tries to pool as much as possible.</span></span> <span data-ttu-id="937a9-157">Ayırmaları azaltmak, yönetilen kodun performansını artırmanın önemli bir yoludur.</span><span class="sxs-lookup"><span data-stu-id="937a9-157">Reducing allocations is a key way to improve the performance of managed code.</span></span> <span data-ttu-id="937a9-158">Bu havuzlamayı başarmak için uygulamalar `SynchronizedPool` sınıfını kullanır.</span><span class="sxs-lookup"><span data-stu-id="937a9-158">To accomplish this pooling, the implementations use the `SynchronizedPool` class.</span></span> <span data-ttu-id="937a9-159">C# dosyası, bu sınıf tarafından kullanılan ek iyileştirmelerin açıklamasını içerir.</span><span class="sxs-lookup"><span data-stu-id="937a9-159">The C# file contains a description of the additional optimizations used by this class.</span></span>  
  
 <span data-ttu-id="937a9-160"><xref:System.Xml.XmlDictionaryReader> ve <xref:System.Xml.XmlDictionaryWriter> örnekleri havuza alınır ve her ileti için yeni bir ayırma yapılmasını engellemek için yeniden başlatılır.</span><span class="sxs-lookup"><span data-stu-id="937a9-160"><xref:System.Xml.XmlDictionaryReader> and <xref:System.Xml.XmlDictionaryWriter> instances are pooled and reinitialized to prevent allocating new ones for each message.</span></span> <span data-ttu-id="937a9-161">Okuyucular için, `OnClose` çağrıldığında okuyucu geri kazanır bir geri çağırma `Close()` işlemi.</span><span class="sxs-lookup"><span data-stu-id="937a9-161">For the readers, an `OnClose` callback reclaims the reader when `Close()` is called.</span></span> <span data-ttu-id="937a9-162">Kodlayıcı Ayrıca ileti oluştururken kullanılan bazı ileti durum nesnelerini de geri dönüştürür.</span><span class="sxs-lookup"><span data-stu-id="937a9-162">The encoder also recycles some message state objects used when constructing messages.</span></span> <span data-ttu-id="937a9-163">Bu havuzların boyutları, `MaxReadPoolSize` `MaxWritePoolSize` öğesinden türetilmiş üç sınıfın her birinde ve özellikleri tarafından yapılandırılabilir <xref:System.ServiceModel.Channels.MessageEncodingBindingElement> .</span><span class="sxs-lookup"><span data-stu-id="937a9-163">The sizes of these pools are configurable by the `MaxReadPoolSize` and `MaxWritePoolSize` properties on each of the three classes derived from <xref:System.ServiceModel.Channels.MessageEncodingBindingElement>.</span></span>  
  
### <a name="binary-encoding"></a><span data-ttu-id="937a9-164">İkili kodlama</span><span class="sxs-lookup"><span data-stu-id="937a9-164">Binary Encoding</span></span>  

 <span data-ttu-id="937a9-165">İkili kodlama oturumları kullandığında, dinamik sözlük dizesinin ileti alıcısına bildirilmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="937a9-165">When binary encoding uses sessions, the dynamic dictionary string must be communicated to the receiver of the message.</span></span> <span data-ttu-id="937a9-166">Bu, iletiyi dinamik sözlük dizelerine önek olarak çağırarak yapılır.</span><span class="sxs-lookup"><span data-stu-id="937a9-166">This is done by prefixing the message with the dynamic dictionary strings.</span></span> <span data-ttu-id="937a9-167">Alıcı dizelerin dışına şeritler, bunları oturuma ekler ve iletiyi işler.</span><span class="sxs-lookup"><span data-stu-id="937a9-167">The receiver strips off the strings, adds them to the session, and processes the message.</span></span> <span data-ttu-id="937a9-168">Sözlük dizelerini doğru şekilde geçirmek, taşımanın arabelleğe alınmasının yapılmasını gerektirir.</span><span class="sxs-lookup"><span data-stu-id="937a9-168">Correctly passing dictionary strings requires that the transport be buffered.</span></span>  
  
 <span data-ttu-id="937a9-169">Dizeler bir iç yöntem tarafından iletiye eklenir `AddSessionInformationToMessage` .</span><span class="sxs-lookup"><span data-stu-id="937a9-169">The strings are appended to the message by an internal `AddSessionInformationToMessage` method.</span></span> <span data-ttu-id="937a9-170">Bu, dizeleri UTF-8 olarak önek ön eki olan iletinin önüne ekler.</span><span class="sxs-lookup"><span data-stu-id="937a9-170">It adds the strings as UTF-8 to the front of the message prefixed with their length.</span></span> <span data-ttu-id="937a9-171">Tüm sözlük üst bilgisi daha sonra verilerinin uzunluğuna önek olarak eklenir.</span><span class="sxs-lookup"><span data-stu-id="937a9-171">The entire dictionary header is then prefixed with the length of its data.</span></span> <span data-ttu-id="937a9-172">Ters işlem, bir iç yöntem tarafından gerçekleştirilir `ExtractSessionInformationFromMessage` .</span><span class="sxs-lookup"><span data-stu-id="937a9-172">The reverse operation is performed by an internal `ExtractSessionInformationFromMessage` method.</span></span>  
  
 <span data-ttu-id="937a9-173">Dinamik sözlük anahtarlarını işlemenin yanı sıra, ara belleğe alınmış oturumsuz iletiler benzersiz bir şekilde alınır.</span><span class="sxs-lookup"><span data-stu-id="937a9-173">In addition to processing dynamic dictionary keys, buffered sessionful messages are received in a unique way.</span></span> <span data-ttu-id="937a9-174">Belge üzerinde bir okuyucu oluşturmak ve onu işlemek yerine ikili kodlayıcı, `MessagePatterns` ikili akışı oluşturmak için iç sınıfı kullanır.</span><span class="sxs-lookup"><span data-stu-id="937a9-174">Instead of creating a reader over the document and processing it, the binary encoder uses the internal `MessagePatterns` class to deconstruct the binary stream.</span></span> <span data-ttu-id="937a9-175">Bu düşünce, çoğu iletinin WCF tarafından oluşturulan belirli bir sırada görüntülenen belirli bir başlık kümesine sahip olması fikrindedir.</span><span class="sxs-lookup"><span data-stu-id="937a9-175">The idea is that most messages have a certain set of headers that show up in a certain order when generated by WCF.</span></span> <span data-ttu-id="937a9-176">Model sistemi, beklediği işe göre iletiyi ayırır.</span><span class="sxs-lookup"><span data-stu-id="937a9-176">The pattern system breaks the message apart based on what it expects.</span></span> <span data-ttu-id="937a9-177">Başarılı olursa, bir <xref:System.ServiceModel.Channels.MessageHeaders> NESNEYI XML ayrıştırmadan başlatır.</span><span class="sxs-lookup"><span data-stu-id="937a9-177">If it is successful, it initializes a <xref:System.ServiceModel.Channels.MessageHeaders> object without parsing the XML.</span></span> <span data-ttu-id="937a9-178">Aksi takdirde, standart yönteme geri döner.</span><span class="sxs-lookup"><span data-stu-id="937a9-178">If not, it falls back to the standard method.</span></span>  
  
### <a name="mtom-encoding"></a><span data-ttu-id="937a9-179">MTOM Kodlama</span><span class="sxs-lookup"><span data-stu-id="937a9-179">MTOM Encoding</span></span>  

 <span data-ttu-id="937a9-180"><xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement>Sınıfında adlı ek bir yapılandırma özelliği bulunur <xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement.MaxBufferSize%2A> .</span><span class="sxs-lookup"><span data-stu-id="937a9-180">The <xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement> class has an additional configuration property called <xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement.MaxBufferSize%2A>.</span></span> <span data-ttu-id="937a9-181">Bu, bir iletiyi okuma işlemi sırasında arabelleğe izin verilen veri miktarına bağlı olarak bir üst sınır koyar.</span><span class="sxs-lookup"><span data-stu-id="937a9-181">This places an upper bound on how much data it is allowed to buffer during the process of reading a message.</span></span> <span data-ttu-id="937a9-182">Tüm MIME parçalarını tek bir ileti halinde yeniden birleştirmek için XML bilgi kümesi (Infoset) veya diğer MIME bölümlerinin ara belleğe alınmış olması gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="937a9-182">The XML Information Set (Infoset), or other MIME parts, may need to be buffered to reassemble all the MIME parts into a single message.</span></span>  
  
 <span data-ttu-id="937a9-183">HTTP ile doğru şekilde çalışmak için, iç MTOM ileti Kodlayıcısı sınıfı, için bazı iç API 'Ler `GetContentType` (Ayrıca, iç) sağlar ve `WriteMessage` Bu genel ve geçersiz kılınabilir.</span><span class="sxs-lookup"><span data-stu-id="937a9-183">To work correctly with HTTP, the internal MTOM message encoder class provides some internal APIs for `GetContentType` (which is also internal) and `WriteMessage`, which is public and can be overridden.</span></span> <span data-ttu-id="937a9-184">HTTP başlıklarındaki değerlerin MIME başlıklarındaki değerlerle uyumlu olduğundan emin olmak için daha fazla iletişim oluşması gerekir.</span><span class="sxs-lookup"><span data-stu-id="937a9-184">More communication must occur to ensure values in the HTTP headers agree with values in the MIME headers.</span></span>  
  
 <span data-ttu-id="937a9-185">Dahili olarak, MTOM ileti Kodlayıcısı WCF 'nin metin okuyucularını kullanır ve metin kodlayıcıyla benzerdir.</span><span class="sxs-lookup"><span data-stu-id="937a9-185">Internally, the MTOM message encoder uses WCF's text readers, and is similar to the Text encoder.</span></span> <span data-ttu-id="937a9-186">Ana fark, büyük ölçekli ikilinin veya "Ikili büyük nesneler" (blob 'Lar), ileti baytlarına katıştırmadan önce Base-64 kodlamaya dönüştürmeden en iyi duruma getirmektedir.</span><span class="sxs-lookup"><span data-stu-id="937a9-186">The main difference is that it optimizes large chunks of binary, or "Binary Large Objects" (BLOBs), by not converting them to Base-64 encoding prior to being embedded into the message bytes.</span></span> <span data-ttu-id="937a9-187">Bunun yerine, bu Bloblar ayıklanmakta tutulur ve MIME ekleri olarak başvurulur.</span><span class="sxs-lookup"><span data-stu-id="937a9-187">Instead, these BLOBs are kept extracted, and referenced as the MIME attachments.</span></span>  
  
## <a name="writing-your-own-encoder"></a><span data-ttu-id="937a9-188">Kendi kodlayıcınızı yazma</span><span class="sxs-lookup"><span data-stu-id="937a9-188">Writing your own Encoder</span></span>  

 <span data-ttu-id="937a9-189">Kendi özel ileti kodlayıcıınızı uygulamak için aşağıdaki soyut temel sınıfların özel uygulamalarını sağlamanız gerekir:</span><span class="sxs-lookup"><span data-stu-id="937a9-189">To implement your own custom message encoder, you must provide custom implementations of the following abstract base classes:</span></span>  
  
- <xref:System.ServiceModel.Channels.MessageEncoder>  
  
- <xref:System.ServiceModel.Channels.MessageEncoderFactory>  
  
- <xref:System.ServiceModel.Channels.MessageEncodingBindingElement>  
  
 <span data-ttu-id="937a9-190">Bir iletinin bellek içi gösteriminden bir akışa yazılabilen bir gösterime dönüştürme, <xref:System.ServiceModel.Channels.MessageEncoder> XML okuyucuları ve belırlı XML kodlamaları türlerini destekleyen XML yazarları için bir fabrika görevi gören sınıfı içinde kapsüllenir.</span><span class="sxs-lookup"><span data-stu-id="937a9-190">Converting from the in-memory representation of a message to a representation that can be written to a stream is encapsulated within the <xref:System.ServiceModel.Channels.MessageEncoder> class, which serves as a factory for XML readers and XML writers that support specific types of XML encodings.</span></span>  
  
- <span data-ttu-id="937a9-191">Bu sınıfın geçersiz kılmanız gereken anahtar yöntemleri şunlardır:</span><span class="sxs-lookup"><span data-stu-id="937a9-191">The key methods of this class that you must override are:</span></span>  
  
- <span data-ttu-id="937a9-192"><xref:System.ServiceModel.Channels.MessageEncoder.WriteMessage%2A> bir nesnesi alır <xref:System.ServiceModel.Channels.MessageEncodingBindingElement> ve bir <xref:System.IO.Stream> nesnesine yazar.</span><span class="sxs-lookup"><span data-stu-id="937a9-192"><xref:System.ServiceModel.Channels.MessageEncoder.WriteMessage%2A> which takes a <xref:System.ServiceModel.Channels.MessageEncodingBindingElement> object and writes it into a <xref:System.IO.Stream> object.</span></span>  
  
- <span data-ttu-id="937a9-193"><xref:System.ServiceModel.Channels.MessageEncoder.ReadMessage%2A> bir <xref:System.IO.Stream> nesne ve en büyük üst bilgi boyutu alır ve bir <xref:System.ServiceModel.Channels.Message> nesne döndürür.</span><span class="sxs-lookup"><span data-stu-id="937a9-193"><xref:System.ServiceModel.Channels.MessageEncoder.ReadMessage%2A> which takes a <xref:System.IO.Stream> object and a maximum header size and returns a <xref:System.ServiceModel.Channels.Message> object.</span></span>  
  
 <span data-ttu-id="937a9-194">Bu yöntemler, standart Aktarım Protokolü ve özelleştirilmiş kodunuzla dönüştürmeyi işleyen bu yöntemlere yazdığınız koddur.</span><span class="sxs-lookup"><span data-stu-id="937a9-194">It is the code you write in these methods that handles conversion between the standard transport protocol, and your customized encoding.</span></span>  
  
 <span data-ttu-id="937a9-195">Ardından, özel kodlayıcıyı oluşturan bir fabrika sınıfını kodlarınızın olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="937a9-195">Next you need to code a factory class that creates your custom encoder.</span></span> <span data-ttu-id="937a9-196"><xref:System.ServiceModel.Channels.MessageEncoderFactory.Encoder%2A>Özel bir örneğini döndürmek için öğesini geçersiz kılın <xref:System.ServiceModel.Channels.MessageEncoder> .</span><span class="sxs-lookup"><span data-stu-id="937a9-196">Override the <xref:System.ServiceModel.Channels.MessageEncoderFactory.Encoder%2A> to return an instance of your custom <xref:System.ServiceModel.Channels.MessageEncoder>.</span></span>  
  
 <span data-ttu-id="937a9-197">Ardından <xref:System.ServiceModel.Channels.MessageEncoderFactory> , <xref:System.ServiceModel.Channels.MessageEncodingBindingElement.CreateMessageEncoderFactory%2A> bu fabrikasının bir örneğini döndürmek için yöntemini geçersiz kılarak hizmeti veya istemciyi yapılandırmak için kullanılan bağlama öğesi yığınına özel ' i bağlayın.</span><span class="sxs-lookup"><span data-stu-id="937a9-197">Then connect your custom <xref:System.ServiceModel.Channels.MessageEncoderFactory> to the binding element stack used to configure the service or client by overriding the <xref:System.ServiceModel.Channels.MessageEncodingBindingElement.CreateMessageEncoderFactory%2A> method to return an instance of this factory.</span></span>  
  
 <span data-ttu-id="937a9-198">Bu işlemi örnek kodla gösteren WCF ile birlikte sağlanan iki örnek vardır: [özel Ileti Kodlayıcısı: özel metin Kodlayıcısı](../samples/custom-message-encoder-custom-text-encoder.md) ve [özel Ileti Kodlayıcısı: Sıkıştırma Kodlayıcısı](../samples/custom-message-encoder-compression-encoder.md).</span><span class="sxs-lookup"><span data-stu-id="937a9-198">There are two samples provided with WCF that illustrate this process with sample code: [Custom Message Encoder: Custom Text Encoder](../samples/custom-message-encoder-custom-text-encoder.md) and [Custom Message Encoder: Compression Encoder](../samples/custom-message-encoder-compression-encoder.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="937a9-199">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="937a9-199">See also</span></span>

- <xref:System.ServiceModel.Channels.MessageEncodingBindingElement>
- <xref:System.ServiceModel.Channels.MessageEncoderFactory>
- <xref:System.ServiceModel.Channels.MessageEncoder>
- [<span data-ttu-id="937a9-200">Veri Aktarımı Mimarisi Genel Bakış</span><span class="sxs-lookup"><span data-stu-id="937a9-200">Data Transfer Architectural Overview</span></span>](../feature-details/data-transfer-architectural-overview.md)
- [<span data-ttu-id="937a9-201">İleti Kodlayıcı Seçme</span><span class="sxs-lookup"><span data-stu-id="937a9-201">Choosing a Message Encoder</span></span>](../feature-details/choosing-a-message-encoder.md)
- [<span data-ttu-id="937a9-202">Taşıma Seçme</span><span class="sxs-lookup"><span data-stu-id="937a9-202">Choosing a Transport</span></span>](../feature-details/choosing-a-transport.md)
