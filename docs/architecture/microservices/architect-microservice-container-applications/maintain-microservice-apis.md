---
title: Mikro hizmet API’leri ve anlaşmaları oluşturma, geliştirme ve sürüm oluşturma
description: Gereksinimler değiştikçe, gelişleri ve sürüm oluşturmayı ele alarak mikro hizmet API 'Leri ve sözleşmeleri oluşturun.
ms.date: 01/13/2021
ms.openlocfilehash: ec4dbcd1fde2078ddb6b5feb67b47a52f8b3aeb8
ms.sourcegitcommit: 10e719780594efc781b15295e499c66f316068b8
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 02/14/2021
ms.locfileid: "100425535"
---
# <a name="creating-evolving-and-versioning-microservice-apis-and-contracts"></a><span data-ttu-id="498c2-103">Mikro hizmet API’leri ve anlaşmaları oluşturma, geliştirme ve sürüm oluşturma</span><span class="sxs-lookup"><span data-stu-id="498c2-103">Creating, evolving, and versioning microservice APIs and contracts</span></span>

<span data-ttu-id="498c2-104">Mikro hizmet API 'SI, hizmet ve istemcileri arasında bir anlaşmada bulunur.</span><span class="sxs-lookup"><span data-stu-id="498c2-104">A microservice API is a contract between the service and its clients.</span></span> <span data-ttu-id="498c2-105">Bir mikro hizmeti yalnızca API sözleşmesini bozmadıysanız bağımsız olarak geliştirebilirsiniz, bu da sözleşmenin bu kadar önemli olduğu anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="498c2-105">You'll be able to evolve a microservice independently only if you do not break its API contract, which is why the contract is so important.</span></span> <span data-ttu-id="498c2-106">Sözleşmeyi değiştirirseniz, istemci uygulamalarınızı veya API ağ geçidinizi etkileyecektir.</span><span class="sxs-lookup"><span data-stu-id="498c2-106">If you change the contract, it will impact your client applications or your API Gateway.</span></span>

<span data-ttu-id="498c2-107">API tanımının doğası, kullanmakta olduğunuz protokole bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="498c2-107">The nature of the API definition depends on which protocol you're using.</span></span> <span data-ttu-id="498c2-108">Örneğin, mesajlaşma kullanıyorsanız ( [AMQP](http://www.amqp.org)gibi), API ileti türlerinden oluşur.</span><span class="sxs-lookup"><span data-stu-id="498c2-108">For instance, if you're using messaging (like [AMQP](http://www.amqp.org)), the API consists of the message types.</span></span> <span data-ttu-id="498c2-109">HTTP ve yeniden deneme Hizmetleri kullanıyorsanız, API, URL 'Lerden ve istek ve yanıt JSON biçimlerinden oluşur.</span><span class="sxs-lookup"><span data-stu-id="498c2-109">If you're using HTTP and RESTful services, the API consists of the URLs and the request and response JSON formats.</span></span>

<span data-ttu-id="498c2-110">Ancak, ilk sözleşmeniz hakkında düşünceli olsanız bile, bir hizmet API 'sinin zaman içinde değişiklik yapması gerekir.</span><span class="sxs-lookup"><span data-stu-id="498c2-110">However, even if you're thoughtful about your initial contract, a service API will need to change over time.</span></span> <span data-ttu-id="498c2-111">Bu gerçekleştiğinde — ve API 'niz birden çok istemci uygulaması tarafından tüketilen ortak bir API ise, genellikle tüm istemcilerin yeni API sözleşmenizi yükseltmesine izin verilmez.</span><span class="sxs-lookup"><span data-stu-id="498c2-111">When that happens—and especially if your API is a public API consumed by multiple client applications — you typically can't force all clients to upgrade to your new API contract.</span></span> <span data-ttu-id="498c2-112">Genellikle bir hizmetin yeni sürümlerini, bir hizmet sözleşmesinin hem eski hem de yeni sürümlerinin aynı anda çalıştığı bir şekilde artımlı olarak dağıtmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="498c2-112">You usually need to incrementally deploy new versions of a service in a way that both old and new versions of a service contract are running simultaneously.</span></span> <span data-ttu-id="498c2-113">Bu nedenle, hizmet sürümü oluşturma stratejiniz için bir strateji olması önemlidir.</span><span class="sxs-lookup"><span data-stu-id="498c2-113">Therefore, it's important to have a strategy for your service versioning.</span></span>

<span data-ttu-id="498c2-114">API değişiklikleri küçük olduğunda, API 'nize öznitelikler veya parametreler eklerseniz, daha eski bir API kullanan istemciler hizmetin yeni sürümü ile anahtar ve çalışır olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="498c2-114">When the API changes are small, like if you add attributes or parameters to your API, clients that use an older API should switch and work with the new version of the service.</span></span> <span data-ttu-id="498c2-115">Gerekli olan eksik özniteliklerin varsayılan değerlerini sağlayabiliyor olabilirsiniz ve istemciler ek yanıt özniteliklerini yoksayabilir.</span><span class="sxs-lookup"><span data-stu-id="498c2-115">You might be able to provide default values for any missing attributes that are required, and the clients might be able to ignore any extra response attributes.</span></span>

<span data-ttu-id="498c2-116">Ancak, bazen bir hizmet API 'sinde büyük ve uyumsuz değişiklikler yapmanız gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="498c2-116">However, sometimes you need to make major and incompatible changes to a service API.</span></span> <span data-ttu-id="498c2-117">İstemci uygulamaları veya hizmetleri hemen yeni sürüme yükseltmeye zorlamadığından, bir hizmetin bazı bir süre için önceki API sürümlerini desteklemesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="498c2-117">Because you might not be able to force client applications or services to upgrade immediately to the new version, a service must support older versions of the API for some period.</span></span> <span data-ttu-id="498c2-118">REST gibi HTTP tabanlı bir mekanizma kullanıyorsanız, API sürüm numarasını URL 'ye veya bir HTTP üstbilgisine eklemek bir yaklaşım olur.</span><span class="sxs-lookup"><span data-stu-id="498c2-118">If you're using an HTTP-based mechanism such as REST, one approach is to embed the API version number in the URL or into an HTTP header.</span></span> <span data-ttu-id="498c2-119">Daha sonra aynı hizmet örneğinde hizmetin her iki sürümünü de uygulamayla veya her bir API 'nin bir sürümünü ele alan farklı örnekler dağıtmaya karar verebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="498c2-119">Then you can decide between implementing both versions of the service simultaneously within the same service instance, or deploying different instances that each handle a version of the API.</span></span> <span data-ttu-id="498c2-120">Bu işlevsellik için iyi bir yaklaşım, farklı uygulama sürümlerini bağımsız işleyicilere ayırmak için [Ortalama deseninin](https://en.wikipedia.org/wiki/Mediator_pattern) (örneğin, [mediaTR kitaplığı](https://github.com/jbogard/MediatR)).</span><span class="sxs-lookup"><span data-stu-id="498c2-120">A good approach for this functionality is the [Mediator pattern](https://en.wikipedia.org/wiki/Mediator_pattern) (for example, [MediatR library](https://github.com/jbogard/MediatR)) to decouple the different implementation versions into independent handlers.</span></span>

<span data-ttu-id="498c2-121">Son olarak, bir REST mimarisi kullanıyorsanız, hizmetlerinizin sürümü oluşturmaya yönelik en iyi çözüm ve gelişmeye yönelik API 'Ler için [hiper medya](https://www.infoq.com/articles/mark-baker-hypermedia) kullanılır.</span><span class="sxs-lookup"><span data-stu-id="498c2-121">Finally, if you're using a REST architecture, [Hypermedia](https://www.infoq.com/articles/mark-baker-hypermedia) is the best solution for versioning your services and allowing evolvable APIs.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="498c2-122">Ek kaynaklar</span><span class="sxs-lookup"><span data-stu-id="498c2-122">Additional resources</span></span>

- <span data-ttu-id="498c2-123">**Scott Hanselman. ASP.NET Core daha fazla Web API sürümü oluşturma kolaylaştırıldı** </span><span class="sxs-lookup"><span data-stu-id="498c2-123">**Scott Hanselman. ASP.NET Core RESTful Web API versioning made easy** </span></span>\
  <https://www.hanselman.com/blog/ASPNETCoreRESTfulWebAPIVersioningMadeEasy.aspx>

- <span data-ttu-id="498c2-124">**Yeniden bir Web API 'sinin sürümü oluşturma** </span><span class="sxs-lookup"><span data-stu-id="498c2-124">**Versioning a RESTful web API** </span></span>\
  <https://docs.microsoft.com/azure/architecture/best-practices/api-design#versioning-a-restful-web-api>

- <span data-ttu-id="498c2-125">**Roy Fielding. Sürüm oluşturma, hiper medya ve REST** </span><span class="sxs-lookup"><span data-stu-id="498c2-125">**Roy Fielding. Versioning, Hypermedia, and REST** </span></span>\
  <https://www.infoq.com/articles/roy-fielding-on-versioning>

>[!div class="step-by-step"]
><span data-ttu-id="498c2-126">[Önceki](asynchronous-message-based-communication.md) 
> [Sonraki](microservices-addressability-service-registry.md)</span><span class="sxs-lookup"><span data-stu-id="498c2-126">[Previous](asynchronous-message-based-communication.md)
[Next](microservices-addressability-service-registry.md)</span></span>
