---
title: Genişletilmiş Koruma İlkesi
ms.date: 03/30/2017
ms.assetid: e2616a10-317e-4c34-8023-0c015a80a82f
ms.openlocfilehash: 3a5b1c7f296c68d407f0217963dec56f53e9a08a
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/12/2020
ms.locfileid: "79144728"
---
# <a name="extended-protection-policy"></a><span data-ttu-id="2c064-102">Genişletilmiş Koruma İlkesi</span><span class="sxs-lookup"><span data-stu-id="2c064-102">Extended Protection Policy</span></span>
<span data-ttu-id="2c064-103">Genişletilmiş Koruma, ortadaki adam (MITM) saldırılarına karşı koruma sağlayan bir güvenlik girişimidir.</span><span class="sxs-lookup"><span data-stu-id="2c064-103">Extended Protection is a security initiative for protecting against man-in-the-middle (MITM) attacks.</span></span> <span data-ttu-id="2c064-104">MITM saldırısı, Bir MITM'nin istemcinin kimlik bilgilerini alıp bir sunucuya ilettiği bir güvenlik tehdididir.</span><span class="sxs-lookup"><span data-stu-id="2c064-104">A MITM attack is a security threat in which a MITM takes a client’s credentials and forwards it to a server.</span></span>  
  
## <a name="demonstrates"></a><span data-ttu-id="2c064-105">Gösteriler</span><span class="sxs-lookup"><span data-stu-id="2c064-105">Demonstrates</span></span>  
 <span data-ttu-id="2c064-106">Genişletilmiş koruma</span><span class="sxs-lookup"><span data-stu-id="2c064-106">Extended protection</span></span>  
  
## <a name="discussion"></a><span data-ttu-id="2c064-107">Tartışma</span><span class="sxs-lookup"><span data-stu-id="2c064-107">Discussion</span></span>  
 <span data-ttu-id="2c064-108">Uygulamalar HTTPS kullanarak Kerberos, Digest veya NTLM kullanılarak kimlik doğrulaması yaptığında, önce bir Aktarım Düzeyi Güvenliği (TLS) kanalı kurulur ve ardından güvenli kanal kullanılarak kimlik doğrulaması gerçekleşir.</span><span class="sxs-lookup"><span data-stu-id="2c064-108">When applications authenticate using Kerberos, Digest or NTLM using HTTPS, a Transport Level Security (TLS) channel is first established and then authentication takes place using the secure channel.</span></span> <span data-ttu-id="2c064-109">Ancak, SSL tarafından oluşturulan oturum anahtarı ile kimlik doğrulama sırasında oluşturulan oturum anahtarı arasında bir bağlama yoktur.</span><span class="sxs-lookup"><span data-stu-id="2c064-109">However, there is no binding between the session key generated by SSL and the session key generated during authentication.</span></span> <span data-ttu-id="2c064-110">Herhangi bir MITM istemci ve sunucu arasında kendini kurabilir ve aktarım kanalının kendisi güvenli olsa bile istemciden gelen istekleri iletmeye başlayabilir, çünkü sunucunun istemciden güvenli kanal oluşturulup oluşturulmadığını bilmenin bir yolu yoktur veya Bir MITM.</span><span class="sxs-lookup"><span data-stu-id="2c064-110">Any MITM can establish itself between the client and the server and start forwarding the requests from the client, even when the transport channel itself is secure, because the server has no way of knowing whether the secure channel has been established from the client or a MITM.</span></span> <span data-ttu-id="2c064-111">Bu senaryodaki çözüm, dış TLS kanalını, sunucunun MITM olup olmadığını algılayabileceği iç kimlik doğrulama kanalıyla bağlamaktır.</span><span class="sxs-lookup"><span data-stu-id="2c064-111">The solution in this scenario is to bind the outer TLS channel with the inner authentication channel such that the server can detect if there is a MITM.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="2c064-112">Bu örnek yalnızca IIS'de barındırıldığında çalışır ve Cassini - Visual Studio Development Server'da çalışamaz çünkü Cassini HTTPS'yi desteklemez.</span><span class="sxs-lookup"><span data-stu-id="2c064-112">This sample only works when hosted on IIS and cannot work on Cassini – Visual Studio Development Server because Cassini does not support HTTPS.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="2c064-113">Bu özellik şu anda yalnızca Windows 7'de kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="2c064-113">This feature is currently only available on Windows 7.</span></span> <span data-ttu-id="2c064-114">Aşağıdaki adımlar Windows 7'ye özgüdir.</span><span class="sxs-lookup"><span data-stu-id="2c064-114">The following steps are specific to Windows 7.</span></span>  
  
#### <a name="to-set-up-build-and-run-the-sample"></a><span data-ttu-id="2c064-115">Örneği ayarlamak, oluşturmak ve çalıştırmak için</span><span class="sxs-lookup"><span data-stu-id="2c064-115">To set up, build, and run the sample</span></span>  
  
1. <span data-ttu-id="2c064-116">**Denetim Panelinden**İnternet Bilgi Hizmetleri Yükleyin, **Programlar Ekle/Kaldır**, **Windows Özellikleri**.</span><span class="sxs-lookup"><span data-stu-id="2c064-116">Install Internet Information Services from **Control Panel**, **Add/Remove Programs**, **Windows Features**.</span></span>  
  
2. <span data-ttu-id="2c064-117">**Windows Özellikleri,** **Internet Bilgi Hizmetleri,** **World Wide Web Services,** **Güvenlik**ve Windows Kimlik **Doğrulama'da Windows Kimlik Doğrulama'yı** **yükleyin.**</span><span class="sxs-lookup"><span data-stu-id="2c064-117">Install **Windows Authentication** in **Windows Features**, **Internet Information Services**, **World Wide Web Services**, **Security**, and **Windows Authentication**.</span></span>  
  
3. <span data-ttu-id="2c064-118">**Windows Özellikler** **Windows İletişim Vakfı HTTP Etkinleştirme** yükleyin , Microsoft **.NET Framework 3.5.1**, ve **Windows Communication Foundation HTTP Etkinleştirme**.</span><span class="sxs-lookup"><span data-stu-id="2c064-118">Install **Windows Communication Foundation HTTP Activation** in **Windows Features**, **Microsoft .NET Framework 3.5.1**, and **Windows Communication Foundation HTTP Activation**.</span></span>  
  
4. <span data-ttu-id="2c064-119">Bu örnek, istemcinin sunucuyla güvenli bir kanal oluşturmasını gerektirir, bu nedenle Internet Information Services (IIS) Manager'dan yüklenebilecek bir sunucu sertifikasının bulunmasını gerektirir.</span><span class="sxs-lookup"><span data-stu-id="2c064-119">This sample requires the client to establish a secure channel with the server, so it requires the presence of a server certificate which can be installed from Internet Information Services (IIS) Manager.</span></span>  
  
    1. <span data-ttu-id="2c064-120">IIS Yöneticisi'ni açın.</span><span class="sxs-lookup"><span data-stu-id="2c064-120">Open IIS Manager.</span></span> <span data-ttu-id="2c064-121">Kök düğüm (makine adı) seçildiğinde **Özellik Görünümü** sekmesinde görünen **Sunucu sertifikaları**aç.</span><span class="sxs-lookup"><span data-stu-id="2c064-121">Open **Server certificates**, which appears in the **Feature View** tab when the root node (machine name) is selected.</span></span>  
  
    2. <span data-ttu-id="2c064-122">Bu örneği test etmek amacıyla, kendi imzalı bir sertifika oluşturun.</span><span class="sxs-lookup"><span data-stu-id="2c064-122">For the purpose of testing this sample, create a self-signed certificate.</span></span> <span data-ttu-id="2c064-123">Internet Explorer'ın sertifikanın güvenli olmaması konusunda size soru saçması istemiyorsanız, sertifikayı Güvenilen Sertifika Kökü yetkilisi deposuna yükleyin.</span><span class="sxs-lookup"><span data-stu-id="2c064-123">If you do not want Internet Explorer to prompt you about the certificate not being secure, install the certificate in the Trusted Certificate Root authority store.</span></span>  
  
5. <span data-ttu-id="2c064-124">Varsayılan Web sitesi için **Eylemler** bölmesini açın.</span><span class="sxs-lookup"><span data-stu-id="2c064-124">Open the **Actions** pane for the default Web site.</span></span> <span data-ttu-id="2c064-125">**Siteyi Edit**, **Ciltler'e**tıklayın.</span><span class="sxs-lookup"><span data-stu-id="2c064-125">Click **Edit Site**, **Bindings**.</span></span> <span data-ttu-id="2c064-126">443 numaralı bağlantı noktası yla, zaten mevcut değilse, https türünü bir tür olarak ekleyin.</span><span class="sxs-lookup"><span data-stu-id="2c064-126">Add HTTPS as a type if not already present, with port number 443.</span></span> <span data-ttu-id="2c064-127">Önceki adımda oluşturulan SSL sertifikasını atayın.</span><span class="sxs-lookup"><span data-stu-id="2c064-127">Assign the SSL certificate created in the preceding step.</span></span>  
  
6. <span data-ttu-id="2c064-128">Hizmeti oluşturun.</span><span class="sxs-lookup"><span data-stu-id="2c064-128">Build the service.</span></span> <span data-ttu-id="2c064-129">Bu, IIS'de sanal bir dizin oluşturur ve hizmetin Barındırılan Web'de barındırılması için gereken .dll, .svc ve .config dosyalarını kopyalar.</span><span class="sxs-lookup"><span data-stu-id="2c064-129">This creates a virtual directory in IIS, and copies the .dll, .svc and .config files as required for the service to be Web hosted.</span></span>  
  
7. <span data-ttu-id="2c064-130">IIS Yöneticisi'ni açın.</span><span class="sxs-lookup"><span data-stu-id="2c064-130">Open IIS Manager.</span></span> <span data-ttu-id="2c064-131">Bir önceki adımda oluşturulan sanal dizinin **(ExtendedProtection)** sağ tıkla.'ya tıklayın.</span><span class="sxs-lookup"><span data-stu-id="2c064-131">Right-click the virtual directory (**ExtendedProtection**), which was created in the preceding step.</span></span> <span data-ttu-id="2c064-132">**Uygulamaya Dönüştür'ü**seçin.</span><span class="sxs-lookup"><span data-stu-id="2c064-132">Select **Convert to Application**.</span></span>  
  
8. <span data-ttu-id="2c064-133">Bu sanal dizin için IIS Manager'da **Kimlik Doğrulama** modüllerini açın ve Windows **Kimlik Doğrulama'yı etkinleştirin.**</span><span class="sxs-lookup"><span data-stu-id="2c064-133">Open the **Authentication** module in IIS Manager for this virtual directory and enable **Windows Authentication**.</span></span>  
  
9. <span data-ttu-id="2c064-134">Bu sanal dizin için **Windows Kimlik Doğrulaması** altında **Gelişmiş Ayarlar'ı** açın ve **Gerekli**olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="2c064-134">Open **Advanced Settings** under **Windows Authentication** for this virtual directory and set it to **Required**.</span></span>  
  
10. <span data-ttu-id="2c064-135">Bir tarayıcı penceresinden HTTPS URL'ye erişerek hizmeti test edebilirsiniz (Tam nitelikli bir etki alanı adı sağlayın).</span><span class="sxs-lookup"><span data-stu-id="2c064-135">You can test the service by accessing the HTTPS URL from a browser window (Provide a fully-qualified domain name).</span></span> <span data-ttu-id="2c064-136">Bu URL'ye uzak bir makineden erişmek istiyorsanız, güvenlik duvarının gelen tüm HTTP ve HTTPS bağlantıları için açıldığından emin olun.</span><span class="sxs-lookup"><span data-stu-id="2c064-136">If you want to access this URL from a remote machine, make sure that the firewall is opened for all incoming HTTP and HTTPS connections.</span></span>  
  
11. <span data-ttu-id="2c064-137">İstemci yapılandırma dosyasını açın ve istemci veya yerine gelen bitiş noktası `<<full_machine_name>>`adresi özniteliği için tam nitelikli bir etki alanı adı sağlayın.</span><span class="sxs-lookup"><span data-stu-id="2c064-137">Open the client configuration file and provide a fully-qualified domain name for the client or endpoint address attribute that replaces `<<full_machine_name>>`.</span></span>  
  
12. <span data-ttu-id="2c064-138">İstemciyi çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="2c064-138">Run the client.</span></span> <span data-ttu-id="2c064-139">İstemci, güvenli bir kanal oluşturan ve genişletilmiş koruma kullanan hizmetle iletişim kurar.</span><span class="sxs-lookup"><span data-stu-id="2c064-139">The client communicates with the service, which establishes a secure channel and uses extended protection.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="2c064-140">Numuneler makinenize zaten yüklenmiş olabilir.</span><span class="sxs-lookup"><span data-stu-id="2c064-140">The samples may already be installed on your machine.</span></span> <span data-ttu-id="2c064-141">Devam etmeden önce aşağıdaki (varsayılan) dizini denetleyin.</span><span class="sxs-lookup"><span data-stu-id="2c064-141">Check for the following (default) directory before continuing.</span></span>  
>
> `<InstallDrive>:\WF_WCF_Samples`  
>
> <span data-ttu-id="2c064-142">Bu dizin yoksa, tüm Windows Communication Foundation (WCF) ve örneklerini indirmek için .NET Framework 4 için Windows Communication [!INCLUDE[wf1](../../../../includes/wf1-md.md)] Foundation [(WCF) ve Windows İş Akışı Temeli (WF) Örneklerine](https://www.microsoft.com/download/details.aspx?id=21459) gidin.</span><span class="sxs-lookup"><span data-stu-id="2c064-142">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://www.microsoft.com/download/details.aspx?id=21459) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="2c064-143">Bu örnek aşağıdaki dizinde yer almaktadır.</span><span class="sxs-lookup"><span data-stu-id="2c064-143">This sample is located in the following directory.</span></span>  
>
> `<InstallDrive>:\WF_WCF_Samples\WCF\Basic\Services\Security\ExtendedProtection`
