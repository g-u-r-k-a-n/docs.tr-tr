---
title: 'CA1045: türleri başvuruya göre geçirme (kod analizi)'
description: 'Kod Analizi kuralı hakkında bilgi edinin CA1045: türleri başvuruya göre geçirmeyin'
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
- CA1045
- DoNotPassTypesByReference
helpviewer_keywords:
- CA1045
- DoNotPassTypesByReference
author: gewarren
ms.author: gewarren
ms.openlocfilehash: 1c1ad6a69232f7cfa48bb888733fe464eb00ab1e
ms.sourcegitcommit: 05d0087dfca85aac9ca2960f86c5efd218bf833f
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/30/2021
ms.locfileid: "99547056"
---
# <a name="ca1045-do-not-pass-types-by-reference"></a><span data-ttu-id="b0417-103">CA1045: Türleri başvuru olarak geçmeyin</span><span class="sxs-lookup"><span data-stu-id="b0417-103">CA1045: Do not pass types by reference</span></span>

| | <span data-ttu-id="b0417-104">Değer</span><span class="sxs-lookup"><span data-stu-id="b0417-104">Value</span></span> |
|-|-|
| <span data-ttu-id="b0417-105">**Kural Kimliği**</span><span class="sxs-lookup"><span data-stu-id="b0417-105">**Rule ID**</span></span> |<span data-ttu-id="b0417-106">CA1045</span><span class="sxs-lookup"><span data-stu-id="b0417-106">CA1045</span></span>|
| <span data-ttu-id="b0417-107">**Kategori**</span><span class="sxs-lookup"><span data-stu-id="b0417-107">**Category**</span></span> |[<span data-ttu-id="b0417-108">Microsoft.Design</span><span class="sxs-lookup"><span data-stu-id="b0417-108">Microsoft.Design</span></span>](design-warnings.md)|
| <span data-ttu-id="b0417-109">**Düzeltilme veya kırılmamış**</span><span class="sxs-lookup"><span data-stu-id="b0417-109">**Fix is breaking or non-breaking**</span></span> |<span data-ttu-id="b0417-110">Yeni</span><span class="sxs-lookup"><span data-stu-id="b0417-110">Breaking</span></span>|

## <a name="cause"></a><span data-ttu-id="b0417-111">Nedeni</span><span class="sxs-lookup"><span data-stu-id="b0417-111">Cause</span></span>

<span data-ttu-id="b0417-112">Ortak türde ortak veya korumalı bir yöntem `ref` , temel bir tür, bir başvuru türü veya yerleşik türlerden biri olmayan bir değer türü alan bir parametreye sahiptir.</span><span class="sxs-lookup"><span data-stu-id="b0417-112">A public or protected method in a public type has a `ref` parameter that takes a primitive type, a reference type, or a value type that is not one of the built-in types.</span></span>

## <a name="rule-description"></a><span data-ttu-id="b0417-113">Kural açıklaması</span><span class="sxs-lookup"><span data-stu-id="b0417-113">Rule description</span></span>

<span data-ttu-id="b0417-114">Türlerin başvuruya göre geçirilmesi ( `out` veya kullanılarak `ref` ) işaretçilerle deneyim gerektirir, değer türlerinin ve başvuru türlerinin nasıl farklı olduğunu ve birden çok dönüş değeri olan yöntemleri işleme.</span><span class="sxs-lookup"><span data-stu-id="b0417-114">Passing types by reference (using `out` or `ref`) requires experience with pointers, understanding how value types and reference types differ, and handling methods that have multiple return values.</span></span> <span data-ttu-id="b0417-115">Ayrıca, `out` ve parametreleri arasındaki fark `ref` yaygın olarak anlaşılmaz.</span><span class="sxs-lookup"><span data-stu-id="b0417-115">Also, the difference between `out` and `ref` parameters is not widely understood.</span></span>

<span data-ttu-id="b0417-116">Başvuru türü "başvuruya göre" geçirildiğinde, yöntemi nesnenin farklı bir örneğini döndürmek için parametresini kullanmayı amaçladığı.</span><span class="sxs-lookup"><span data-stu-id="b0417-116">When a reference type is passed "by reference," the method intends to use the parameter to return a different instance of the object.</span></span> <span data-ttu-id="b0417-117">(Başvuru türü başvuruya göre geçirilmesi, çift işaretçi, işaretçi işaretçisi veya çift yöneltme kullanma olarak da bilinir.) "Değere göre" değeri geçen varsayılan çağırma kuralını kullanma, başvuru türü alan bir parametre zaten nesneye bir işaretçi alır.</span><span class="sxs-lookup"><span data-stu-id="b0417-117">(Passing a reference type by reference is also known as using a double pointer, pointer to a pointer, or double indirection.) Using the default calling convention, which is pass "by value," a parameter that takes a reference type already receives a pointer to the object.</span></span> <span data-ttu-id="b0417-118">İşaret ettiği nesne değil, işaretçi değere göre geçirilir.</span><span class="sxs-lookup"><span data-stu-id="b0417-118">The pointer, not the object to which it points, is passed by value.</span></span> <span data-ttu-id="b0417-119">Değere göre geçirme yöntemi, yöntemin, başvuru türünün yeni bir örneğini işaret eden işaretçiyi değiştiremeyeceği, ancak gösterdiği nesnenin içeriğini değiştiremeyeceği anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="b0417-119">Passing by value means that the method cannot change the pointer to have it point to a new instance of the reference type, but can change the contents of the object to which it points.</span></span> <span data-ttu-id="b0417-120">Çoğu uygulama için bu yeterlidir ve istediğiniz davranışı verir.</span><span class="sxs-lookup"><span data-stu-id="b0417-120">For most applications this is sufficient and yields the behavior that you want.</span></span>

<span data-ttu-id="b0417-121">Bir yöntemin farklı bir örnek döndürmesi gerekiyorsa, bunu gerçekleştirmek için yönteminin dönüş değerini kullanın.</span><span class="sxs-lookup"><span data-stu-id="b0417-121">If a method must return a different instance, use the return value of the method to accomplish this.</span></span> <span data-ttu-id="b0417-122"><xref:System.String?displayProperty=fullName>Dizeler üzerinde çalışan ve bir dizenin yeni bir örneğini döndüren çeşitli yöntemler için sınıfına bakın.</span><span class="sxs-lookup"><span data-stu-id="b0417-122">See the <xref:System.String?displayProperty=fullName> class for a variety of methods that operate on strings and return a new instance of a string.</span></span> <span data-ttu-id="b0417-123">Bu modeli kullanarak, özgün nesnenin korunup korunmayacağına karar vermek için çağrı yapana bırakılır.</span><span class="sxs-lookup"><span data-stu-id="b0417-123">By using this model, it is left to the caller to decide whether the original object is preserved.</span></span>

<span data-ttu-id="b0417-124">Dönüş değerleri çok fazla ve yoğun olarak kullanıldığından, `out` ve parametrelerinin doğru uygulaması `ref` Ara tasarım ve kodlama becerileri gerektirir.</span><span class="sxs-lookup"><span data-stu-id="b0417-124">Although return values are commonplace and heavily used, the correct application of `out` and `ref` parameters requires intermediate design and coding skills.</span></span> <span data-ttu-id="b0417-125">Genel bir hedef kitle için tasarlayan kitaplık mimarları, kullanıcıların, veya parametreleriyle birlikte çalışmasını beklememelidir `out` `ref` .</span><span class="sxs-lookup"><span data-stu-id="b0417-125">Library architects who design for a general audience should not expect users to master working with `out` or `ref` parameters.</span></span>

> [!NOTE]
> <span data-ttu-id="b0417-126">Büyük yapıları olan parametrelerle çalışırken, bu yapıları kopyalamak için gereken ek kaynaklar, değere göre geçirdiğinizde bir performans etkisine neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="b0417-126">When you work with parameters that are large structures, the additional resources that are required to copy these structures could cause a performance effect when you pass by value.</span></span> <span data-ttu-id="b0417-127">Bu durumlarda, `ref` veya parametrelerini kullanmayı düşünebilirsiniz `out` .</span><span class="sxs-lookup"><span data-stu-id="b0417-127">In these cases, you might consider using `ref` or `out` parameters.</span></span>

## <a name="how-to-fix-violations"></a><span data-ttu-id="b0417-128">İhlalleri çözme</span><span class="sxs-lookup"><span data-stu-id="b0417-128">How to fix violations</span></span>

<span data-ttu-id="b0417-129">Bu kuralın bir değer türünden kaynaklanan ihlalini onarmak için, yönteminin dönüş değeri olarak nesneyi döndürmesini sağlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="b0417-129">To fix a violation of this rule that is caused by a value type, have the method return the object as its return value.</span></span> <span data-ttu-id="b0417-130">Yöntemin birden çok değer döndürmesi gerekiyorsa, değerleri tutan bir nesnenin tek bir örneğini döndürecek şekilde yeniden tasarlayamalıdır.</span><span class="sxs-lookup"><span data-stu-id="b0417-130">If the method must return multiple values, redesign it to return a single instance of an object that holds the values.</span></span>

<span data-ttu-id="b0417-131">Bir başvuru türü nedeniyle oluşan bu kuralın ihlalini onarmak için, istediğiniz davranışın başvurunun yeni bir örneğini döndürtiğine emin olun.</span><span class="sxs-lookup"><span data-stu-id="b0417-131">To fix a violation of this rule that is caused by a reference type, make sure that the behavior that you want is to return a new instance of the reference.</span></span> <span data-ttu-id="b0417-132">Eğer ise, yöntemi bunu yapmak için dönüş değerini kullanmalıdır.</span><span class="sxs-lookup"><span data-stu-id="b0417-132">If it is, the method should use its return value to do this.</span></span>

## <a name="when-to-suppress-warnings"></a><span data-ttu-id="b0417-133">Uyarıların ne zaman bastırılamıyor</span><span class="sxs-lookup"><span data-stu-id="b0417-133">When to suppress warnings</span></span>

<span data-ttu-id="b0417-134">Bu kuraldan bir uyarıyı gizlemek güvenlidir; Ancak, bu tasarım kullanılabilirlik sorunlarına neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="b0417-134">It is safe to suppress a warning from this rule; however, this design could cause usability issues.</span></span>

[!INCLUDE [suppress-warning](../../../../includes/code-analysis/suppress-warning.md)]

## <a name="configure-code-to-analyze"></a><span data-ttu-id="b0417-135">Analiz etmek için kodu Yapılandır</span><span class="sxs-lookup"><span data-stu-id="b0417-135">Configure code to analyze</span></span>

<span data-ttu-id="b0417-136">Kod tabanınızın hangi bölümlerinin bu kuralı çalıştıracağınızı yapılandırmak için aşağıdaki seçeneği kullanın.</span><span class="sxs-lookup"><span data-stu-id="b0417-136">Use the following option to configure which parts of your codebase to run this rule on.</span></span>

- [<span data-ttu-id="b0417-137">Belirli API yüzeylerini dahil et</span><span class="sxs-lookup"><span data-stu-id="b0417-137">Include specific API surfaces</span></span>](#include-specific-api-surfaces)

<span data-ttu-id="b0417-138">Bu seçeneği yalnızca bu kural için, tüm kurallar için veya bu kategorideki tüm kurallar ([Tasarım](design-warnings.md)) için yapılandırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="b0417-138">You can configure this option for just this rule, for all rules, or for all rules in this category ([Design](design-warnings.md)).</span></span> <span data-ttu-id="b0417-139">Daha fazla bilgi için bkz. [kod kalitesi kural yapılandırma seçenekleri](../code-quality-rule-options.md).</span><span class="sxs-lookup"><span data-stu-id="b0417-139">For more information, see [Code quality rule configuration options](../code-quality-rule-options.md).</span></span>

[!INCLUDE[api-surface](~/includes/code-analysis/api-surface.md)]

## <a name="example"></a><span data-ttu-id="b0417-140">Örnek</span><span class="sxs-lookup"><span data-stu-id="b0417-140">Example</span></span>

<span data-ttu-id="b0417-141">Aşağıdaki kitaplıkta, kullanıcının geri bildirimlerine yanıtlar üreten bir sınıfın iki uygulaması gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="b0417-141">The following library shows two implementations of a class that generates responses to the feedback of the user.</span></span> <span data-ttu-id="b0417-142">İlk uygulama ( `BadRefAndOut` ), kitaplık kullanıcısını üç dönüş değerini yönetmeye zorlar.</span><span class="sxs-lookup"><span data-stu-id="b0417-142">The first implementation (`BadRefAndOut`) forces the library user to manage three return values.</span></span> <span data-ttu-id="b0417-143">İkinci uygulama ( `RedesignedRefAndOut` ), `ReplyData` verileri tek bir birim olarak yöneten bir kapsayıcı sınıfının () örneğini döndürerek Kullanıcı deneyimini basitleştirir.</span><span class="sxs-lookup"><span data-stu-id="b0417-143">The second implementation (`RedesignedRefAndOut`) simplifies the user experience by returning an instance of a container class (`ReplyData`) that manages the data as a single unit.</span></span>

:::code language="csharp" source="snippets/csharp/all-rules/ca1045.cs" id="snippet1":::

## <a name="example-1"></a><span data-ttu-id="b0417-144">Örnek 1</span><span class="sxs-lookup"><span data-stu-id="b0417-144">Example 1</span></span>

<span data-ttu-id="b0417-145">Aşağıdaki uygulama, kullanıcının deneyimini gösterir.</span><span class="sxs-lookup"><span data-stu-id="b0417-145">The following application illustrates the experience of the user.</span></span> <span data-ttu-id="b0417-146">Yeniden tasarlanan kitaplığa ( `UseTheSimplifiedClass` Yöntem) yapılan çağrı daha basittir ve yöntemi tarafından döndürülen bilgiler kolayca yönetilir.</span><span class="sxs-lookup"><span data-stu-id="b0417-146">The call to the redesigned library (`UseTheSimplifiedClass` method) is more straightforward, and the information that is returned by the method is easily managed.</span></span> <span data-ttu-id="b0417-147">İki yöntemden oluşan çıkış aynı.</span><span class="sxs-lookup"><span data-stu-id="b0417-147">The output from the two methods is identical.</span></span>

:::code language="csharp" source="snippets/csharp/all-rules/ca1045.cs" id="snippet2":::

## <a name="example-2"></a><span data-ttu-id="b0417-148">Örnek 2</span><span class="sxs-lookup"><span data-stu-id="b0417-148">Example 2</span></span>

<span data-ttu-id="b0417-149">Aşağıdaki örnek kitaplık `ref` , başvuru türleri parametrelerinin nasıl kullanıldığını gösterir ve bu işlevselliği uygulamak için daha iyi bir yol gösterir.</span><span class="sxs-lookup"><span data-stu-id="b0417-149">The following example library illustrates how `ref` parameters for reference types are used, and shows a better way to implement this functionality.</span></span>

:::code language="csharp" source="snippets/csharp/all-rules/ca1045.cs" id="snippet3":::

## <a name="example-3"></a><span data-ttu-id="b0417-150">Örnek 3</span><span class="sxs-lookup"><span data-stu-id="b0417-150">Example 3</span></span>

<span data-ttu-id="b0417-151">Aşağıdaki uygulama, davranışı göstermek için kitaplıktaki her yöntemi çağırır.</span><span class="sxs-lookup"><span data-stu-id="b0417-151">The following application calls each method in the library to demonstrate the behavior.</span></span>

:::code language="csharp" source="snippets/csharp/all-rules/ca1045.cs" id="snippet4":::

<span data-ttu-id="b0417-152">Bu örnek aşağıdaki çıktıyı üretir:</span><span class="sxs-lookup"><span data-stu-id="b0417-152">This example produces the following output:</span></span>

```txt
Changing pointer - passed by value:
12345
12345
Changing pointer - passed by reference:
12345
12345 ABCDE
Passing by return value:
12345 ABCDE
```

## <a name="related-rules"></a><span data-ttu-id="b0417-153">İlgili kurallar</span><span class="sxs-lookup"><span data-stu-id="b0417-153">Related rules</span></span>

[<span data-ttu-id="b0417-154">CA1021: out parametrelerinden kaçının</span><span class="sxs-lookup"><span data-stu-id="b0417-154">CA1021: Avoid out parameters</span></span>](ca1021.md)
