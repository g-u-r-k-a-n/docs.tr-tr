---
title: Hataları Gönderme ve Alma
description: Bir hata durumu oluştuğunda bir hizmetin veya çift yönlü istemcinin nasıl SOAP hataları gönderebileceği ve bir istemci veya hizmet uygulamasının bu hataları nasıl işleyeceği hakkında bilgi edinin.
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- handling faults [WCF], sending
ms.assetid: 7be6fb96-ce2a-450b-aebe-f932c6a4bc5d
ms.openlocfilehash: 23f63fde2755a29cd545d3aefe699cad8dbecb3b
ms.sourcegitcommit: 358a28048f36a8dca39a9fe6e6ac1f1913acadd5
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 06/23/2020
ms.locfileid: "85244328"
---
# <a name="sending-and-receiving-faults"></a><span data-ttu-id="45beb-103">Hataları Gönderme ve Alma</span><span class="sxs-lookup"><span data-stu-id="45beb-103">Sending and Receiving Faults</span></span>

<span data-ttu-id="45beb-104">SOAP hataları bir hizmetten istemciye ve çift yönlü bir şekilde bir istemciden hizmete hata koşulu bilgilerini iletmelidir.</span><span class="sxs-lookup"><span data-stu-id="45beb-104">SOAP faults convey error condition information from a service to a client and in the duplex case from a client to a service in an interoperable way.</span></span> <span data-ttu-id="45beb-105">Genellikle bir hizmet özel hata içeriğini tanımlar ve hangi işlemlerin bu işlemleri döndürebileceğini belirtir.</span><span class="sxs-lookup"><span data-stu-id="45beb-105">Typically a service defines custom fault content and specifies which operations can return them.</span></span> <span data-ttu-id="45beb-106">(Daha fazla bilgi için bkz. [hataları tanımlama ve belirtme](defining-and-specifying-faults.md).) Bu konuda, bir hizmet veya çift yönlü istemcinin ilgili hata koşulu oluştuğunda ve bir istemci ya da hizmet uygulamasının bu hataları nasıl işleyeceği açıklanır.</span><span class="sxs-lookup"><span data-stu-id="45beb-106">(For more information, see [Defining and Specifying Faults](defining-and-specifying-faults.md).) This topic discusses how a service or duplex client can send those faults when the corresponding error condition has occurred and how a client or service application handles these faults.</span></span> <span data-ttu-id="45beb-107">Windows Communication Foundation (WCF) uygulamalarında hata işlemeye genel bir bakış için bkz. [anlaşmalar ve hizmetlerde hataları belirtme ve işleme](specifying-and-handling-faults-in-contracts-and-services.md).</span><span class="sxs-lookup"><span data-stu-id="45beb-107">For an overview of error handling in Windows Communication Foundation (WCF) applications, see [Specifying and Handling Faults in Contracts and Services](specifying-and-handling-faults-in-contracts-and-services.md).</span></span>

## <a name="sending-soap-faults"></a><span data-ttu-id="45beb-108">SOAP hataları gönderiliyor</span><span class="sxs-lookup"><span data-stu-id="45beb-108">Sending SOAP Faults</span></span>

<span data-ttu-id="45beb-109">Tanımlanan SOAP hataları, <xref:System.ServiceModel.FaultContractAttribute?displayProperty=nameWithType> Özel BIR SOAP hata türünü belirten bir işlemin öğesine sahip olduğu olanlardır.</span><span class="sxs-lookup"><span data-stu-id="45beb-109">Declared SOAP faults are those in which an operation has a <xref:System.ServiceModel.FaultContractAttribute?displayProperty=nameWithType> that specifies a custom SOAP fault type.</span></span> <span data-ttu-id="45beb-110">Bildirilmemiş SOAP hataları bir işlem için sözleşmede belirtilmemiş olanlardır.</span><span class="sxs-lookup"><span data-stu-id="45beb-110">Undeclared SOAP faults are those that are not specified in the contract for an operation.</span></span>

### <a name="sending-declared-faults"></a><span data-ttu-id="45beb-111">Bildirilmeyen hatalar gönderiliyor</span><span class="sxs-lookup"><span data-stu-id="45beb-111">Sending Declared Faults</span></span>

<span data-ttu-id="45beb-112">Tanımlanmış bir SOAP hatası göndermek için, SOAP hatasının uygun olduğu hata koşulunu tespit edin ve <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> tür parametresinin, bu işlemde belirtilen türün yeni bir nesnesi olduğu yeni bir nesne oluşturun <xref:System.ServiceModel.FaultContractAttribute> .</span><span class="sxs-lookup"><span data-stu-id="45beb-112">To send a declared SOAP fault, detect the error condition for which the SOAP fault is appropriate and throw a new <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> where the type parameter is a new object of the type specified in the <xref:System.ServiceModel.FaultContractAttribute> for that operation.</span></span> <span data-ttu-id="45beb-113">Aşağıdaki kod örneği, <xref:System.ServiceModel.FaultContractAttribute> `SampleMethod` işlemin ayrıntı türü Ile bir soap hatası döndüre, belirtmek için öğesinin kullanımını gösterir `GreetingFault` .</span><span class="sxs-lookup"><span data-stu-id="45beb-113">The following code example shows the use of <xref:System.ServiceModel.FaultContractAttribute> to specify that the `SampleMethod` operation can return a SOAP fault with the detail type of `GreetingFault`.</span></span>

[!code-csharp[FaultContractAttribute#4](../../../samples/snippets/csharp/VS_Snippets_CFX/faultcontractattribute/cs/services.cs#4)]
[!code-vb[FaultContractAttribute#4](../../../samples/snippets/visualbasic/VS_Snippets_CFX/faultcontractattribute/vb/services.vb#4)]

<span data-ttu-id="45beb-114">`GreetingFault`Hata bilgilerini istemciye iletmek için, uygun hata koşulunu yakalayın ve <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> `GreetingFault` `GreetingFault` Aşağıdaki kod örneğinde olduğu gibi, bağımsız değişkeni olarak yeni bir nesne içeren yeni bir nesne türü oluşturun.</span><span class="sxs-lookup"><span data-stu-id="45beb-114">To convey the `GreetingFault` error information to the client, catch the appropriate error condition and throw a new <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> of type `GreetingFault` with a new `GreetingFault` object as the argument, as in the following code example.</span></span> <span data-ttu-id="45beb-115">İstemci bir WCF istemci uygulaması ise, bu, türün türü olduğu yönetilen bir özel durum olarak deneyimdir <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> `GreetingFault` .</span><span class="sxs-lookup"><span data-stu-id="45beb-115">If the client is an WCF client application, it experiences this as a managed exception where the type is <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> of type `GreetingFault`.</span></span>

[!code-csharp[FaultContractAttribute#5](../../../samples/snippets/csharp/VS_Snippets_CFX/faultcontractattribute/cs/services.cs#5)]
[!code-vb[FaultContractAttribute#5](../../../samples/snippets/visualbasic/VS_Snippets_CFX/faultcontractattribute/vb/services.vb#5)]

### <a name="sending-undeclared-faults"></a><span data-ttu-id="45beb-116">Bildirilmemiş hatalar gönderiliyor</span><span class="sxs-lookup"><span data-stu-id="45beb-116">Sending Undeclared Faults</span></span>

<span data-ttu-id="45beb-117">Bildirilmemiş hataların gönderilmesi, WCF uygulamalarında sorunları hızlı bir şekilde tanılamak ve hatalarını ayıklamak için çok yararlı olabilir, ancak hata ayıklama aracı olarak kullanışlılığı sınırlıdır.</span><span class="sxs-lookup"><span data-stu-id="45beb-117">Sending undeclared faults can be very useful to quickly diagnose and debug problems in WCF applications, but its usefulness as a debugging tool is limited.</span></span> <span data-ttu-id="45beb-118">Daha genel olarak, hata ayıklanırken özelliği kullanmanız önerilir <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="45beb-118">More generally, when debugging it is recommended that you use the <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="45beb-119">Bu değeri true olarak belirlediğinizde istemciler bu tür hataları <xref:System.ServiceModel.FaultException%601> türünde özel durumlar olarak deneyime sahiptir <xref:System.ServiceModel.ExceptionDetail> .</span><span class="sxs-lookup"><span data-stu-id="45beb-119">When you set this value to true, clients experience such faults as <xref:System.ServiceModel.FaultException%601> exceptions of type <xref:System.ServiceModel.ExceptionDetail>.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="45beb-120">Yönetilen özel durumlar iç uygulama bilgilerini kullanıma sunabileceğinden, <xref:System.ServiceModel.ServiceBehaviorAttribute.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> veya <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> için AYARı, `true` WCF istemcilerinin kişisel olarak tanımlanabilir veya diğer hassas bilgiler dahil olmak üzere iç hizmet işlemi özel durumları hakkında bilgi almasına izin verebilir.</span><span class="sxs-lookup"><span data-stu-id="45beb-120">Because managed exceptions can expose internal application information, setting <xref:System.ServiceModel.ServiceBehaviorAttribute.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> or <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> to `true` can permit WCF clients to obtain information about internal service operation exceptions, including personally identifiable or other sensitive information.</span></span>
>
> <span data-ttu-id="45beb-121">Bu nedenle, <xref:System.ServiceModel.ServiceBehaviorAttribute.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> veya olarak ayarlanması <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> `true` yalnızca bir hizmet uygulamasının geçici olarak hata ayıklamanın bir yolu olarak önerilir.</span><span class="sxs-lookup"><span data-stu-id="45beb-121">Therefore, setting <xref:System.ServiceModel.ServiceBehaviorAttribute.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> or <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> to `true` is only recommended as a way of temporarily debugging a service application.</span></span> <span data-ttu-id="45beb-122">Ayrıca, işlenmemiş yönetilen özel durumları bu şekilde döndüren bir yöntem için WSDL, türü için anlaşma içermez <xref:System.ServiceModel.FaultException%601> <xref:System.ServiceModel.ExceptionDetail> .</span><span class="sxs-lookup"><span data-stu-id="45beb-122">In addition, the WSDL for a method that returns unhandled managed exceptions in this way does not contain the contract for the <xref:System.ServiceModel.FaultException%601> of type <xref:System.ServiceModel.ExceptionDetail>.</span></span> <span data-ttu-id="45beb-123">İstemciler <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> , hata ayıklama bilgilerini düzgün bir şekilde almak için bilinmeyen BIR SOAP hatası (WCF istemcilerine geri döndürülen) olasılığını beklememelidir.</span><span class="sxs-lookup"><span data-stu-id="45beb-123">Clients must expect the possibility of an unknown SOAP fault (returned to WCF clients as <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> objects) to obtain the debugging information properly.</span></span>

<span data-ttu-id="45beb-124">Bildirilmemiş bir SOAP hatası göndermek için bir <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> nesne (genel tür değil <xref:System.ServiceModel.FaultException%601> ) oluşturun ve dizeyi oluşturucuya geçirin.</span><span class="sxs-lookup"><span data-stu-id="45beb-124">To send an undeclared SOAP fault, throw a <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> object (that is, not the generic type <xref:System.ServiceModel.FaultException%601>) and pass the string to the constructor.</span></span> <span data-ttu-id="45beb-125">Bu, <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> yöntemi çağırarak, dizenin kullanılabildiği bir oluşturulan özel durum olarak WCF istemci uygulamalarına sunulur <xref:System.ServiceModel.FaultException%601.ToString%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="45beb-125">This is exposed to the WCF client applications as a thrown <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> exception where the string is available by calling the <xref:System.ServiceModel.FaultException%601.ToString%2A?displayProperty=nameWithType> method.</span></span>

> [!NOTE]
> <span data-ttu-id="45beb-126">String türünde bir SOAP hatası bildirirseniz ve bunu hizmetinize, <xref:System.ServiceModel.FaultException%601> Type parametresinin bir dize değeri olduğu yerde bir dize değeri olarak oluşturursanız ve ' de <xref:System.String?displayProperty=nameWithType> <xref:System.ServiceModel.FaultException%601.Detail%2A?displayProperty=nameWithType> kullanılamaz <xref:System.ServiceModel.FaultException%601.ToString%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="45beb-126">If you declare a SOAP fault of type string, and then throw this in your service as a <xref:System.ServiceModel.FaultException%601> where the type parameter is a <xref:System.String?displayProperty=nameWithType> the string value is assigned to the <xref:System.ServiceModel.FaultException%601.Detail%2A?displayProperty=nameWithType> property, and is not available from <xref:System.ServiceModel.FaultException%601.ToString%2A?displayProperty=nameWithType>.</span></span>

## <a name="handling-faults"></a><span data-ttu-id="45beb-127">Hataları işleme</span><span class="sxs-lookup"><span data-stu-id="45beb-127">Handling Faults</span></span>

<span data-ttu-id="45beb-128">WCF istemcilerinde, istemci uygulamalarına ilgi eden iletişim sırasında oluşan SOAP hataları yönetilen özel durumlar olarak oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="45beb-128">In WCF clients, SOAP faults that occur during communication that are of interest to client applications are raised as managed exceptions.</span></span> <span data-ttu-id="45beb-129">Herhangi bir programın yürütülmesi sırasında oluşabilecek birçok özel durum olsa da, WCF istemci programlama modelini kullanan uygulamalar, iletişimin sonucu olarak aşağıdaki iki türdeki özel durumları işlemeye bekleyebilir.</span><span class="sxs-lookup"><span data-stu-id="45beb-129">While there are many exceptions that can occur during the execution of any program, applications using the WCF client programming model can expect to handle exceptions of the following two types as a result of communication.</span></span>

- <xref:System.TimeoutException>

- <xref:System.ServiceModel.CommunicationException>

<span data-ttu-id="45beb-130"><xref:System.TimeoutException>bir işlem belirtilen zaman aşımı süresini aştığında nesneler oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="45beb-130"><xref:System.TimeoutException> objects are thrown when an operation exceeds the specified timeout period.</span></span>

<span data-ttu-id="45beb-131"><xref:System.ServiceModel.CommunicationException>hizmet veya istemcide bazı kurtarılabilir iletişim hatası koşulu olduğunda nesneler oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="45beb-131"><xref:System.ServiceModel.CommunicationException> objects are thrown when there is some recoverable communication error condition on either the service or the client.</span></span>

<span data-ttu-id="45beb-132"><xref:System.ServiceModel.CommunicationException>Sınıfta iki önemli türetilmiş tür <xref:System.ServiceModel.FaultException> ve genel <xref:System.ServiceModel.FaultException%601> tür bulunur.</span><span class="sxs-lookup"><span data-stu-id="45beb-132">The <xref:System.ServiceModel.CommunicationException> class has two important derived types, <xref:System.ServiceModel.FaultException> and the generic <xref:System.ServiceModel.FaultException%601> type.</span></span>

<span data-ttu-id="45beb-133"><xref:System.ServiceModel.FaultException>bir dinleyici, işlem sözleşmesinde beklenmediği veya belirtilmediği bir hata aldığında özel durumlar oluşur; genellikle bu durum, uygulamanın hata ayıklaması yapıldığında ve hizmetin <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> özelliği olarak ayarlandığında oluşur `true` .</span><span class="sxs-lookup"><span data-stu-id="45beb-133"><xref:System.ServiceModel.FaultException> exceptions are thrown when a listener receives a fault that is not expected or specified in the operation contract; usually this occurs when the application is being debugged and the service has the <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> property set to `true`.</span></span>

<span data-ttu-id="45beb-134"><xref:System.ServiceModel.FaultException%601>işlem sözleşmesinde belirtilen bir hata, iki yönlü bir işleme (yani, olarak ayarlanmış bir özniteliğe sahip bir yöntem) yanıt olarak alındığında, istemci üzerinde özel durumlar oluşur <xref:System.ServiceModel.OperationContractAttribute> <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> `false` .</span><span class="sxs-lookup"><span data-stu-id="45beb-134"><xref:System.ServiceModel.FaultException%601> exceptions are thrown on the client when a fault that is specified in the operation contract is received in response to a two-way operation (that is, a method with an <xref:System.ServiceModel.OperationContractAttribute> attribute with <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> set to `false`).</span></span>

> [!NOTE]
> <span data-ttu-id="45beb-135">Bir WCF hizmeti, <xref:System.ServiceModel.ServiceBehaviorAttribute.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> istemci olarak ayarlanan veya özelliği olduğunda, `true` Bu, türü bildirilmemiş bir tür olarak deneyim sağlar <xref:System.ServiceModel.FaultException%601> <xref:System.ServiceModel.ExceptionDetail> .</span><span class="sxs-lookup"><span data-stu-id="45beb-135">When an WCF service has the <xref:System.ServiceModel.ServiceBehaviorAttribute.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> or <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> property set to `true` the client experiences this as an undeclared <xref:System.ServiceModel.FaultException%601> of type <xref:System.ServiceModel.ExceptionDetail>.</span></span> <span data-ttu-id="45beb-136">İstemciler, bu hatayı yakalayabilir veya bir catch bloğunda hatayı işleyebilir <xref:System.ServiceModel.FaultException> .</span><span class="sxs-lookup"><span data-stu-id="45beb-136">Clients can either catch this specific fault or handle the fault in a catch block for <xref:System.ServiceModel.FaultException>.</span></span>

<span data-ttu-id="45beb-137">Genellikle, yalnızca <xref:System.ServiceModel.FaultException%601> , <xref:System.TimeoutException> ve <xref:System.ServiceModel.CommunicationException> özel durumlar, istemcileri ve Hizmetleri ilgilenir.</span><span class="sxs-lookup"><span data-stu-id="45beb-137">Typically, only <xref:System.ServiceModel.FaultException%601>, <xref:System.TimeoutException>, and <xref:System.ServiceModel.CommunicationException> exceptions are of interest to clients and services.</span></span>

> [!NOTE]
> <span data-ttu-id="45beb-138">Tabii ki diğer özel durumlar oluşur.</span><span class="sxs-lookup"><span data-stu-id="45beb-138">Other exceptions, of course, do occur.</span></span> <span data-ttu-id="45beb-139">Beklenmeyen özel durumlar gibi çok önemli hatalardan kaynaklanır <xref:System.OutOfMemoryException?displayProperty=nameWithType> ; genellikle uygulamalar bu tür yöntemleri yakalayamaz.</span><span class="sxs-lookup"><span data-stu-id="45beb-139">Unexpected exceptions include catastrophic failures like <xref:System.OutOfMemoryException?displayProperty=nameWithType>; typically applications should not catch such methods.</span></span>

### <a name="catch-fault-exceptions-in-the-correct-order"></a><span data-ttu-id="45beb-140">Hata özel durumlarını doğru sırada yakala</span><span class="sxs-lookup"><span data-stu-id="45beb-140">Catch Fault Exceptions in the Correct Order</span></span>

<span data-ttu-id="45beb-141">, Ve öğesinden türetildiğinden, <xref:System.ServiceModel.FaultException%601> <xref:System.ServiceModel.FaultException> <xref:System.ServiceModel.FaultException> <xref:System.ServiceModel.CommunicationException> Bu özel durumları uygun sırada yakalamak önemlidir.</span><span class="sxs-lookup"><span data-stu-id="45beb-141">Because <xref:System.ServiceModel.FaultException%601> derives from <xref:System.ServiceModel.FaultException>, and <xref:System.ServiceModel.FaultException> derives from <xref:System.ServiceModel.CommunicationException>, it is important to catch these exceptions in the proper order.</span></span> <span data-ttu-id="45beb-142">Örneğin, ilk olarak yakaladığınız bir try/catch bloğuna sahipseniz <xref:System.ServiceModel.CommunicationException> , belirtilen ve belirtilmeyen tüm SOAP hataları burada işlenir; özel bir özel durumu işlemek için sonraki tüm catch blokları <xref:System.ServiceModel.FaultException%601> hiçbir şekilde çağrılmaz.</span><span class="sxs-lookup"><span data-stu-id="45beb-142">If, for example, you have a try/catch block in which you first catch <xref:System.ServiceModel.CommunicationException>, all specified and unspecified SOAP faults are handled there; any subsequent catch blocks to handle a custom <xref:System.ServiceModel.FaultException%601> exception are never invoked.</span></span>

<span data-ttu-id="45beb-143">Bir işlemin belirtilen sayıda hata döndürebileceği unutulmamalıdır.</span><span class="sxs-lookup"><span data-stu-id="45beb-143">Remember that one operation can return any number of specified faults.</span></span> <span data-ttu-id="45beb-144">Her hata benzersiz bir türdür ve ayrı olarak işlenmelidir.</span><span class="sxs-lookup"><span data-stu-id="45beb-144">Each fault is a unique type and must be handled separately.</span></span>

### <a name="handle-exceptions-when-closing-the-channel"></a><span data-ttu-id="45beb-145">Kanalı kapatırken özel durumları işle</span><span class="sxs-lookup"><span data-stu-id="45beb-145">Handle Exceptions When Closing the Channel</span></span>

<span data-ttu-id="45beb-146">Yukarıdaki tartışmanın çoğu, uygulama iletilerini işleme sırasında, diğer bir deyişle istemci uygulama, WCF istemci nesnesi üzerinde işlemler çağırdığında istemci tarafından açıkça gönderilen iletiler ile yapılır.</span><span class="sxs-lookup"><span data-stu-id="45beb-146">Most of the preceding discussion has to do with faults sent in the course of processing application messages, that is, messages explicitly sent by the client when the client application calls operations on the WCF client object.</span></span>

<span data-ttu-id="45beb-147">Nesneleri elden atan yerel nesneler bile geri dönüşüm işlemi sırasında oluşan özel durumları oluşturabilir veya maskeleyebilir.</span><span class="sxs-lookup"><span data-stu-id="45beb-147">Even with local objects disposing the object can either raise or mask exceptions that occur during the recycling process.</span></span> <span data-ttu-id="45beb-148">WCF istemci nesnelerini kullandığınızda benzer bir durum oluşabilir.</span><span class="sxs-lookup"><span data-stu-id="45beb-148">Something similar can occur when you use WCF client objects.</span></span> <span data-ttu-id="45beb-149">İşlemleri çağırdığınızda, oluşturulan bir bağlantı üzerinden ileti gönderiyorsunuz.</span><span class="sxs-lookup"><span data-stu-id="45beb-149">When you call operations you are sending messages over an established connection.</span></span> <span data-ttu-id="45beb-150">Kanalın kapatılması, bağlantı düzgün şekilde kapatılabilir veya tüm işlemler düzgün şekilde döndürülse bile zaten kapalıysa özel durumlar oluşturabilir.</span><span class="sxs-lookup"><span data-stu-id="45beb-150">Closing the channel can throw exceptions if the connection cannot be cleanly closed or is already closed, even if all the operations returned properly.</span></span>

<span data-ttu-id="45beb-151">Genellikle, istemci nesne kanalları aşağıdaki yollarla kapalıdır:</span><span class="sxs-lookup"><span data-stu-id="45beb-151">Typically, client object channels are closed in one of the following ways:</span></span>

- <span data-ttu-id="45beb-152">WCF istemci nesnesi geri dönüştürüldüğünde.</span><span class="sxs-lookup"><span data-stu-id="45beb-152">When the WCF client object is recycled.</span></span>

- <span data-ttu-id="45beb-153">İstemci uygulaması çağırdığında <xref:System.ServiceModel.ClientBase%601.Close%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="45beb-153">When the client application calls <xref:System.ServiceModel.ClientBase%601.Close%2A?displayProperty=nameWithType>.</span></span>

- <span data-ttu-id="45beb-154">İstemci uygulaması çağırdığında <xref:System.ServiceModel.ICommunicationObject.Close%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="45beb-154">When the client application calls <xref:System.ServiceModel.ICommunicationObject.Close%2A?displayProperty=nameWithType>.</span></span>

- <span data-ttu-id="45beb-155">İstemci uygulaması, bir oturum için sonlandırma işlemi olan bir işlem çağırdığında.</span><span class="sxs-lookup"><span data-stu-id="45beb-155">When the client application calls an operation that is a terminating operation for a session.</span></span>

<span data-ttu-id="45beb-156">Her durumda kanalı kapatmak, kanala, uygulama düzeyinde karmaşık işlevselliği destekleyecek şekilde ileti gönderen temeldeki tüm kanalları kapatmaya başlamasını söyler.</span><span class="sxs-lookup"><span data-stu-id="45beb-156">In all cases, closing the channel instructs the channel to begin closing any underlying channels that may be sending messages to support complex functionality at the application level.</span></span> <span data-ttu-id="45beb-157">Örneğin, bir anlaşma oturum gerektirdiğinde, bir bağlama bir oturum oluşturuluncaya kadar hizmet kanalına sahip iletiler değiş tokuşu yaparak bir oturum kurmaya çalışır.</span><span class="sxs-lookup"><span data-stu-id="45beb-157">For example, when a contract requires sessions a binding attempts to establish a session by exchanging messages with the service channel until a session is established.</span></span> <span data-ttu-id="45beb-158">Kanal kapatıldığında, temeldeki oturum kanalı hizmete oturumun sonlandırıldığını bildirir.</span><span class="sxs-lookup"><span data-stu-id="45beb-158">When the channel is closed, the underlying session channel notifies the service that the session is terminated.</span></span> <span data-ttu-id="45beb-159">Bu durumda, kanal önceden durdurulmuş, kapalı veya kullanılamaz durumdaysa (örneğin, bir ağ kablosu kesilmediyse), istemci kanalı, oturum sonlandırıldığı ve bir özel durum ortaya çıkmış olan hizmet kanalına bilgi verebilir.</span><span class="sxs-lookup"><span data-stu-id="45beb-159">In this case, if the channel has already aborted, closed, or is otherwise unusable (for example, when a network cable is unplugged), the client channel cannot inform the service channel that the session is terminated and an exception can result.</span></span>

### <a name="abort-the-channel-if-necessary"></a><span data-ttu-id="45beb-160">Gerekirse kanalı durdur</span><span class="sxs-lookup"><span data-stu-id="45beb-160">Abort the Channel If Necessary</span></span>

<span data-ttu-id="45beb-161">Kanalı kapatmak aynı zamanda özel durumlar da oluşturabileceğinden, hata özel durumlarının doğru sırada yakalanmasıyla ilgili ek olarak, yakalama bloğunda çağrı yapmak için kullanılan kanalı durdurmak önemlidir.</span><span class="sxs-lookup"><span data-stu-id="45beb-161">Because closing the channel can also throw exceptions, then, it is recommended that in addition to catching fault exceptions in the correct order, it is important to abort the channel that was used in making the call in the catch block.</span></span>

<span data-ttu-id="45beb-162">Hata bilgilerini bir işleme özel olarak ortaya çıkardıysanız ve başkalarının kullanabilmesi mümkün kalırsa, kanalı durdurmaya gerek kalmaz (Bu durumlar nadir olsa da).</span><span class="sxs-lookup"><span data-stu-id="45beb-162">If the fault conveys error information specific to an operation and it remains possible that others can use it, there is no need to abort the channel (although these cases are rare).</span></span> <span data-ttu-id="45beb-163">Diğer tüm durumlarda, kanalı iptal etmeniz önerilir.</span><span class="sxs-lookup"><span data-stu-id="45beb-163">In all other cases, it is recommended that you abort the channel.</span></span> <span data-ttu-id="45beb-164">Tüm bu noktaları gösteren bir örnek için bkz. [Beklenen özel durumlar](./samples/expected-exceptions.md).</span><span class="sxs-lookup"><span data-stu-id="45beb-164">For a sample that demonstrates all of these points, see [Expected Exceptions](./samples/expected-exceptions.md).</span></span>

<span data-ttu-id="45beb-165">Aşağıdaki kod örneği, bir temel istemci uygulamasında, belirtilen bir hata ve bildirilmemiş bir hata da dahil olmak üzere SOAP hata özel durumlarının nasıl işleneceğini gösterir.</span><span class="sxs-lookup"><span data-stu-id="45beb-165">The following code example shows how to handle SOAP fault exceptions in a basic client application, including a declared fault and an undeclared fault.</span></span>

> [!NOTE]
> <span data-ttu-id="45beb-166">Bu örnek kod, `using` yapısını kullanmaz.</span><span class="sxs-lookup"><span data-stu-id="45beb-166">This sample code does not use the `using` construct.</span></span> <span data-ttu-id="45beb-167">Kapatma kanalları özel durumlar oluşturabileceğinden, uygulamaların önce bir WCF istemcisi oluşturması önerilir ve sonra aynı try bloğunda WCF istemcisini açmak, kullanmak ve kapatmak önerilir.</span><span class="sxs-lookup"><span data-stu-id="45beb-167">Because closing channels can throw exceptions, it is recommended that applications create a WCF client first, and then open, use, and close the WCF client in the same try block.</span></span> <span data-ttu-id="45beb-168">Ayrıntılar için bkz. [WCF Istemcisine genel bakış](wcf-client-overview.md) ve [WCF istemci kaynaklarını serbest bırakmak Için kapat ve iptal kullanma](./samples/use-close-abort-release-wcf-client-resources.md).</span><span class="sxs-lookup"><span data-stu-id="45beb-168">For details, see [WCF Client Overview](wcf-client-overview.md) and [Use Close and Abort to release WCF client resources](./samples/use-close-abort-release-wcf-client-resources.md).</span></span>

[!code-csharp[FaultContractAttribute#3](../../../samples/snippets/csharp/VS_Snippets_CFX/faultcontractattribute/cs/client.cs#3)]
[!code-vb[FaultContractAttribute#3](../../../samples/snippets/visualbasic/VS_Snippets_CFX/faultcontractattribute/vb/client.vb#3)]

## <a name="see-also"></a><span data-ttu-id="45beb-169">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="45beb-169">See also</span></span>

- <xref:System.ServiceModel.FaultException>
- <xref:System.ServiceModel.FaultException%601>
- <xref:System.ServiceModel.CommunicationException?displayProperty=nameWithType>
- [<span data-ttu-id="45beb-170">Beklenen Özel Durumlar</span><span class="sxs-lookup"><span data-stu-id="45beb-170">Expected Exceptions</span></span>](./samples/expected-exceptions.md)
- [<span data-ttu-id="45beb-171">Kapat ve Durdur seçeneklerini kullanarak WCF istemci kaynaklarını serbest bırakma</span><span class="sxs-lookup"><span data-stu-id="45beb-171">Use Close and Abort to release WCF client resources</span></span>](./samples/use-close-abort-release-wcf-client-resources.md)
