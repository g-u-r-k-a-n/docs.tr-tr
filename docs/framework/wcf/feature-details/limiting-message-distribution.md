---
title: İleti Dağıtımını Sınırlandırma
ms.date: 03/30/2017
ms.assetid: 8b5ec4b8-1ce9-45ef-bb90-2c840456bcc1
ms.openlocfilehash: 36d9d43760e68f6bcf0099ac17dec5a8278d0e49
ms.sourcegitcommit: 09b4090b78f52fd09b0e430cd4b26576f1fdf96e
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 01/17/2020
ms.locfileid: "76211901"
---
# <a name="limiting-message-distribution"></a><span data-ttu-id="17fd0-102">İleti Dağıtımını Sınırlandırma</span><span class="sxs-lookup"><span data-stu-id="17fd0-102">Limiting Message Distribution</span></span>

<span data-ttu-id="17fd0-103">Eş kanal, yayın ağı tasarlayabilme.</span><span class="sxs-lookup"><span data-stu-id="17fd0-103">Peer Channel is by design a broadcast mesh.</span></span> <span data-ttu-id="17fd0-104">Temel taşması modeli, bir kafesin herhangi bir üyesi tarafından gönderilen her iletiyi o kafesin diğer üyelerine dağıtmayı içerir.</span><span class="sxs-lookup"><span data-stu-id="17fd0-104">Its basic flooding model involves distributing each message sent by any member of a mesh to all other members of that mesh.</span></span> <span data-ttu-id="17fd0-105">Bu, bir üye tarafından oluşturulan her iletinin ilgili olduğu ve diğer tüm Üyeler için (örneğin, bir sohbet odası) yararlı olduğu durumlarda idealdir.</span><span class="sxs-lookup"><span data-stu-id="17fd0-105">This is ideal in situations where every message generated by a member is relevant and useful to all other members (for example, a chat room).</span></span> <span data-ttu-id="17fd0-106">Ancak, birçok uygulamanın ileti dağıtımını kısıtlamak için zaman zaman ihtiyacı vardır.</span><span class="sxs-lookup"><span data-stu-id="17fd0-106">However, many applications have an occasional need for limiting message distribution.</span></span> <span data-ttu-id="17fd0-107">Örneğin, yeni bir üye bir kafesi birleştirir ve ağ üzerinden gönderilen son iletiyi almak istiyorsa, bu isteğin her ağ üyesine taşmasının gerekli değildir.</span><span class="sxs-lookup"><span data-stu-id="17fd0-107">For example, if a new member joins a mesh and wants to retrieve the last message sent through the mesh, this request does not need to be flooded to every member of the mesh.</span></span> <span data-ttu-id="17fd0-108">İstek yakın komşular ile sınırlandırılabilir veya yerel olarak oluşturulan iletiler filtrelenebilir. İletiler Ayrıca, kafesde tek bir düğüme gönderilebilir.</span><span class="sxs-lookup"><span data-stu-id="17fd0-108">The request could be limited to near neighbors, or locally generated messages can be filtered out. Messages can also be sent to an individual node on the mesh.</span></span> <span data-ttu-id="17fd0-109">Bu konuda atlama sayısı, Ileti yayma filtresi, yerel bir filtre veya iletilerin ağ genelinde nasıl iletildiğini denetlemek için doğrudan bağlantı kullanımı ele alınmaktadır ve bir yaklaşım seçmek için genel yönergeler sağlanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="17fd0-109">This topic discusses using Hop Count, a Message Propagation Filter, a local filter, or a direct connection to control how messages are forwarded throughout the mesh, and provides general guidelines for choosing an approach.</span></span>

## <a name="hop-counts"></a><span data-ttu-id="17fd0-110">Atlama sayısı</span><span class="sxs-lookup"><span data-stu-id="17fd0-110">Hop Counts</span></span>

<span data-ttu-id="17fd0-111">`PeerHopCount` kavramı, IP protokolünde kullanılan TTL (yaşam süresi) ile benzerdir.</span><span class="sxs-lookup"><span data-stu-id="17fd0-111">The concept of `PeerHopCount` is similar to TTL (Time-To-Live) used in IP protocol.</span></span> <span data-ttu-id="17fd0-112">`PeerHopCount` değeri bir ileti örneğine bağlıdır ve bir iletinin bırakılmadan önce kaç kez iletilmesi gerektiğini belirtir.</span><span class="sxs-lookup"><span data-stu-id="17fd0-112">The value of `PeerHopCount` is tied to a message instance, and it specifies how many times a message should be forwarded before being dropped.</span></span> <span data-ttu-id="17fd0-113">Bir eş kanal istemcisi tarafından ileti alındığında istemci, `PeerHopCount` belirtilmişse iletiyi inceler.</span><span class="sxs-lookup"><span data-stu-id="17fd0-113">Each time a message is received by a Peer Channel client, the client examines the message to see if `PeerHopCount` is specified.</span></span> <span data-ttu-id="17fd0-114">Belirtilmişse, istemci, iletiyi komşu düğümlere iletmeden önce atlama sayısı değerini bir azaltır.</span><span class="sxs-lookup"><span data-stu-id="17fd0-114">If it is specified, then the client decrements the hop count value by one before forwarding the message to neighboring nodes.</span></span> <span data-ttu-id="17fd0-115">İstemci atlama sayısı değeri sıfır olan bir ileti aldığında, istemci iletiyi işler, ancak iletiyi komşuları 'e iletmez.</span><span class="sxs-lookup"><span data-stu-id="17fd0-115">When a client receives a message with a hop count value of zero, the client processes the message, but does not forward the message to neighbors.</span></span>

<span data-ttu-id="17fd0-116">İleti sınıfının uygulamasındaki uygulanabilir özelliğe veya alana bir öznitelik olarak `PeerHopCount` eklenerek atlama sayısı bir iletiye eklenebilir.</span><span class="sxs-lookup"><span data-stu-id="17fd0-116">Hop count may be added to a message by adding `PeerHopCount` as an attribute to the applicable property or field in the implementation of the message class.</span></span> <span data-ttu-id="17fd0-117">İletiyi ağ üzerinden göndermeden önce belirli bir değere ayarlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="17fd0-117">You can set this to a specific value before sending the message to the mesh.</span></span> <span data-ttu-id="17fd0-118">Bu şekilde, gerekli olduğunda, ağ genelinde iletilerin dağıtımını sınırlandırmak için atlama sayısı ' nı kullanabilir, böylece gereksiz ileti yinelemeyi önleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="17fd0-118">In this manner, you can use hop count to limit distribution of messages throughout the mesh when necessary, potentially avoiding unnecessary message duplication.</span></span> <span data-ttu-id="17fd0-119">Bu, kafesin yüksek miktarda yedekli veri içerdiği ya da anında komşular veya birkaç atlamanın içindeki komşular için bir ileti göndermede yararlı olur.</span><span class="sxs-lookup"><span data-stu-id="17fd0-119">This is useful in cases where the mesh contains a high amount of redundant data, or for sending a message to immediate neighbors, or neighbors within a few hops.</span></span>

- <span data-ttu-id="17fd0-120">Kod parçacıkları ve ilgili bilgiler için bkz. [PeerHopCount özniteliği:](https://docs.microsoft.com/archive/blogs/peerchan/the-peerhopcount-attribute-controlling-message-distribution) eş kanal blogundan ileti dağıtımı gönderisini denetleme.</span><span class="sxs-lookup"><span data-stu-id="17fd0-120">For code snippets and related information, see the [The PeerHopCount Attribute: Controlling Message Distribution](https://docs.microsoft.com/archive/blogs/peerchan/the-peerhopcount-attribute-controlling-message-distribution) post on the Peer Channel blog.</span></span>

## <a name="message-propagation-filter"></a><span data-ttu-id="17fd0-121">İleti yayma filtresi</span><span class="sxs-lookup"><span data-stu-id="17fd0-121">Message Propagation Filter</span></span>

<span data-ttu-id="17fd0-122">`MessagePropagationFilter`, özellikle iletinin içeriği veya diğer belirli senaryolar yayılmayı tespit edildiğinde ileti taşmasını özelleştirilmiş denetim için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="17fd0-122">`MessagePropagationFilter` can be used for customized control of message flooding, especially when the content of the message or other specific scenarios determine propagation.</span></span> <span data-ttu-id="17fd0-123">Filtre, düğüm üzerinden geçen her ileti için yayma kararları verir.</span><span class="sxs-lookup"><span data-stu-id="17fd0-123">The filter makes propagation decisions for every message that passes through the node.</span></span> <span data-ttu-id="17fd0-124">Bu, bir yerde, düğümünüz ve uygulamanız tarafından oluşturulan iletilerin başka bir yerinde oluşan iletiler için geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="17fd0-124">This is true for messages that originated elsewhere in the mesh that your node has received as well as messages created by your application.</span></span> <span data-ttu-id="17fd0-125">Filtrenin hem iletiye hem de kaynağına erişimi vardır; bu nedenle iletiyi iletme veya bırakma hakkında kararlar, kullanılabilir olan tüm bilgileri temel alabilir.</span><span class="sxs-lookup"><span data-stu-id="17fd0-125">The filter has access to both the message and its origination, so decisions about forwarding or dropping the message can be based on the full information available.</span></span>

<span data-ttu-id="17fd0-126"><xref:System.ServiceModel.PeerMessagePropagationFilter>, <xref:System.ServiceModel.PeerMessagePropagationFilter.ShouldMessagePropagate%2A>tek bir işlevi olan temel soyut bir sınıftır.</span><span class="sxs-lookup"><span data-stu-id="17fd0-126"><xref:System.ServiceModel.PeerMessagePropagationFilter> is a base abstract class with a single function, <xref:System.ServiceModel.PeerMessagePropagationFilter.ShouldMessagePropagate%2A>.</span></span> <span data-ttu-id="17fd0-127">Yöntem çağrısının ilk bağımsız değişkeni iletinin tam bir kopyasında geçirilir.</span><span class="sxs-lookup"><span data-stu-id="17fd0-127">The first argument of the method call passes in a full copy of the message.</span></span> <span data-ttu-id="17fd0-128">İletide yapılan tüm değişiklikler gerçek iletiyi etkilemez.</span><span class="sxs-lookup"><span data-stu-id="17fd0-128">Any changes made to the message do not affect the actual message.</span></span> <span data-ttu-id="17fd0-129">Yöntem çağrısının son bağımsız değişkeni iletinin kaynağını belirtir (`PeerMessageOrigination.Local` veya `PeerMessageOrigination.Remote`).</span><span class="sxs-lookup"><span data-stu-id="17fd0-129">The last argument of the method call identifies the origin of the message (`PeerMessageOrigination.Local` or `PeerMessageOrigination.Remote`).</span></span> <span data-ttu-id="17fd0-130">Bu yöntemin somut uygulamaları, iletinin yerel uygulamaya (`Local`) iletileceği, uzak istemcilere (`Remote`), her ikisi de (`LocalAndRemote`) veya hiç (`None`) iletildiğini belirten <xref:System.ServiceModel.PeerMessagePropagation> numaralandırmasından bir sabit döndürmelidir.</span><span class="sxs-lookup"><span data-stu-id="17fd0-130">Concrete implementations of this method must return a constant from the <xref:System.ServiceModel.PeerMessagePropagation> enumeration indicating that the message is to be forwarded to the local application (`Local`), forwarded to remote clients (`Remote`), both (`LocalAndRemote`), or neither (`None`).</span></span> <span data-ttu-id="17fd0-131">Bu filtre, karşılık gelen `PeerNode` nesnesine erişerek ve `PeerNode.MessagePropagationFilter` özelliğindeki türetilmiş yayma filtresi sınıfının bir örneğini belirterek uygulanabilir.</span><span class="sxs-lookup"><span data-stu-id="17fd0-131">This filter can be applied by accessing the corresponding `PeerNode` object and specifying an instance of the derived propagation filter class in the `PeerNode.MessagePropagationFilter` property.</span></span> <span data-ttu-id="17fd0-132">Eş kanalını açmadan önce yayma filtresinin eklendiğinden emin olun.</span><span class="sxs-lookup"><span data-stu-id="17fd0-132">Ensure that the propagation filter is attached before opening the Peer Channel.</span></span>

- <span data-ttu-id="17fd0-133">Kod parçacıkları ve ilgili bilgiler için, eş kanal bloguna [eş kanal ve MessagePropagationFilter](https://docs.microsoft.com/archive/blogs/peerchan/peer-channel-and-messagepropagationfilter) gönderisine bakın.</span><span class="sxs-lookup"><span data-stu-id="17fd0-133">For code snippets and related information, see the [Peer Channel and MessagePropagationFilter](https://docs.microsoft.com/archive/blogs/peerchan/peer-channel-and-messagepropagationfilter) post on the Peer Channel blog.</span></span>

## <a name="contacting-an-individual-node-in-the-mesh"></a><span data-ttu-id="17fd0-134">Kafesteki tek bir düğümle iletişim kurma</span><span class="sxs-lookup"><span data-stu-id="17fd0-134">Contacting an Individual Node in the Mesh</span></span>

<span data-ttu-id="17fd0-135">Bir kafesteki tek bir düğüme yerel bir filtre ayarlanarak veya doğrudan bağlantı ayarlanarak iletişim kurulabilirler.</span><span class="sxs-lookup"><span data-stu-id="17fd0-135">An individual node in a mesh can be contacted by setting up a local filter, or by setting up a direct connection.</span></span>

<span data-ttu-id="17fd0-136">Bir kafesdeki düğümlerin tek bir KIMLIĞI varsa, iletinizin uygulamasında bir hedef KIMLIĞI belirtilebilir.</span><span class="sxs-lookup"><span data-stu-id="17fd0-136">If the nodes in a mesh each have an individual ID, a destination ID can be specified in the implementation of your message.</span></span> <span data-ttu-id="17fd0-137">İleti sözleşmeniz, KIMLIĞI belirttiğiniz hedef KIMLIĞIYLE eşleşiyorsa iletiyi yalnızca geçerli düğüme görüntüleyecek olan bir işlev yazılarak ayarlanabilir.</span><span class="sxs-lookup"><span data-stu-id="17fd0-137">A local filter can be set up by writing a function in your message contract that will only display the message to the current node if its ID matches the destination ID you specified.</span></span> <span data-ttu-id="17fd0-138">Ağ, iletiyi taşır, bu nedenle yeni bir bağlantı kurma yükünün tahakkuk olması gerekmez.</span><span class="sxs-lookup"><span data-stu-id="17fd0-138">The mesh transports the message, so the overhead of setting up a new connection does not have to be incurred.</span></span> <span data-ttu-id="17fd0-139">Ancak, ağ genelinde iletinin birçok kez gönderilmesi için bir verimlilik kaybı vardır.</span><span class="sxs-lookup"><span data-stu-id="17fd0-139">However, there is a loss of efficiency since the message is sent many times throughout the mesh.</span></span> <span data-ttu-id="17fd0-140">Bu, iletiler çok büyük veya çok sık olmadığı sürece bir kafesin ayrı üyelerine ileti göndermek için iyi bir sonuç verir.</span><span class="sxs-lookup"><span data-stu-id="17fd0-140">This works well for sending messages to individual members of a mesh as long as the messages are neither too big nor too frequent.</span></span>

<span data-ttu-id="17fd0-141">Uzun süreli, yüksek bant genişliğine sahip bağlantılarda doğrudan bağlantılar tercih edilir.</span><span class="sxs-lookup"><span data-stu-id="17fd0-141">For long-lasting, high-bandwidth connections, direct connections are preferable.</span></span> <span data-ttu-id="17fd0-142">Ağ üzerinden bağlantı bilgilerini gönderebilir ve ardından ileti gönderme/alma seçeneğini belirleyerek doğrudan bir bağlantı kurabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="17fd0-142">You can send connection information over the mesh, and then set up a direct connection of your choosing to send/receive messages.</span></span>

## <a name="choosing-an-approach-for-limiting-message-distribution"></a><span data-ttu-id="17fd0-143">Ileti dağıtımını kısıtlamak için bir yaklaşım seçme</span><span class="sxs-lookup"><span data-stu-id="17fd0-143">Choosing an Approach for Limiting Message Distribution</span></span>

<span data-ttu-id="17fd0-144">İleti dağıtımını sınırlandırmanız gereken bir senaryo keşfettiğiniz zaman, aşağıdaki soruları kendinize sorun:</span><span class="sxs-lookup"><span data-stu-id="17fd0-144">When you discover a scenario in which you need to limit message distribution, ask yourself the following questions:</span></span>

- <span data-ttu-id="17fd0-145">İletiyi alması gereken **kişiler** ?</span><span class="sxs-lookup"><span data-stu-id="17fd0-145">**Who** needs to receive the message?</span></span> <span data-ttu-id="17fd0-146">Yalnızca bir komşu düğüm mi?</span><span class="sxs-lookup"><span data-stu-id="17fd0-146">Just one neighbor node?</span></span> <span data-ttu-id="17fd0-147">Bir düğüm, kafeste başka bir yerde mi?</span><span class="sxs-lookup"><span data-stu-id="17fd0-147">A node somewhere else in the mesh?</span></span> <span data-ttu-id="17fd0-148">Kafesin yarısı mi?</span><span class="sxs-lookup"><span data-stu-id="17fd0-148">Half the mesh?</span></span>

- <span data-ttu-id="17fd0-149">Bu ileti **ne sıklıkla** gönderilir?</span><span class="sxs-lookup"><span data-stu-id="17fd0-149">**How often** will this message be sent?</span></span>

- <span data-ttu-id="17fd0-150">Bu ileti ne tür bir **bant genişliğine** kullanacaktır?</span><span class="sxs-lookup"><span data-stu-id="17fd0-150">What kind of **bandwidth** will this message use?</span></span>

<span data-ttu-id="17fd0-151">Bu soruların yanıtları, atlama sayısı, Ileti yayma filtresi, yerel bir filtre veya doğrudan bağlantı kullanıp kullanmayacağınızı belirlemenize yardımcı olabilir.</span><span class="sxs-lookup"><span data-stu-id="17fd0-151">The answers to these questions can help you determine whether to use Hop Count, a Message Propagation Filter, a local filter, or a direct connection.</span></span> <span data-ttu-id="17fd0-152">Aşağıdaki genel yönergeleri göz önünde bulundurun:</span><span class="sxs-lookup"><span data-stu-id="17fd0-152">Consider the following general guidelines:</span></span>

- <span data-ttu-id="17fd0-153">**Sağlayan**</span><span class="sxs-lookup"><span data-stu-id="17fd0-153">**Who**</span></span>

  - <span data-ttu-id="17fd0-154">*Bağımsız düğüm*: Yerel filtre veya doğrudan bağlantı.</span><span class="sxs-lookup"><span data-stu-id="17fd0-154">*Individual node*:  Local filter or direct connection.</span></span>

  - <span data-ttu-id="17fd0-155">*Belirli bir yakın çevre Içinde komşuları*: PeerHopCount.</span><span class="sxs-lookup"><span data-stu-id="17fd0-155">*Neighbors within a certain vicinity*:  PeerHopCount.</span></span>

  - <span data-ttu-id="17fd0-156">*Kafesin karmaşık alt kümesi*: MessagePropagationFilter.</span><span class="sxs-lookup"><span data-stu-id="17fd0-156">*Complex subset of the mesh*:  MessagePropagationFilter.</span></span>

- <span data-ttu-id="17fd0-157">**Ne sıklıkta**</span><span class="sxs-lookup"><span data-stu-id="17fd0-157">**How often**</span></span>

  - <span data-ttu-id="17fd0-158">*Çok sık*: doğrudan bağlantı, PeerHopCount, MessagePropagationFilter.</span><span class="sxs-lookup"><span data-stu-id="17fd0-158">*Very frequent*:  Direct connection, PeerHopCount, MessagePropagationFilter.</span></span>

  - <span data-ttu-id="17fd0-159">*Zaman zaman*: Yerel filtre.</span><span class="sxs-lookup"><span data-stu-id="17fd0-159">*Occasional*:  Local filter.</span></span>

- <span data-ttu-id="17fd0-160">**Bant genişliği kullanımı**</span><span class="sxs-lookup"><span data-stu-id="17fd0-160">**Bandwidth use**</span></span>

  - <span data-ttu-id="17fd0-161">*Yüksek*: doğrudan bağlantı, MessagePropagationFilter veya yerel filtre kullanmak daha az önerilir.</span><span class="sxs-lookup"><span data-stu-id="17fd0-161">*High*:  Direct connection, less advisable to use MessagePropagationFilter or local filter.</span></span>

  - <span data-ttu-id="17fd0-162">*Düşük*: herhangi bir, doğrudan bağlantı gerekli değildir.</span><span class="sxs-lookup"><span data-stu-id="17fd0-162">*Low*:  Any, direct connection probably not needed.</span></span>

## <a name="see-also"></a><span data-ttu-id="17fd0-163">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="17fd0-163">See also</span></span>

- [<span data-ttu-id="17fd0-164">Eş Kanal Uygulaması Oluşturma</span><span class="sxs-lookup"><span data-stu-id="17fd0-164">Building a Peer Channel Application</span></span>](../../../../docs/framework/wcf/feature-details/building-a-peer-channel-application.md)
