---
description: 'Daha fazla bilgi edinin: Iş akışı hizmeti konak Iç Işlevleri'
title: İş Akışı Hizmeti Ana Bilgisayar Dahili Bileşenleri
ms.date: 03/30/2017
ms.assetid: af44596f-bf6a-4149-9f04-08d8e8f45250
ms.openlocfilehash: fb33e7d6f4e9f78c06459f3d7c8b5c44e2a44a7d
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 02/06/2021
ms.locfileid: "99704387"
---
# <a name="workflow-service-host-internals"></a><span data-ttu-id="6dcf9-103">İş Akışı Hizmeti Ana Bilgisayar Dahili Bileşenleri</span><span class="sxs-lookup"><span data-stu-id="6dcf9-103">Workflow Service Host Internals</span></span>

<span data-ttu-id="6dcf9-104"><xref:System.ServiceModel.WorkflowServiceHost> iş akışı hizmetleri için bir konak sağlar.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-104"><xref:System.ServiceModel.WorkflowServiceHost> provides a host for workflow services.</span></span> <span data-ttu-id="6dcf9-105">Gelen iletileri dinlemeden ve bunları uygun iş akışı hizmeti örneğine yönlendirmekten sorumludur, boşta iş akışlarının kaldırılmasını ve kalıcı olarak kaldırılmasını ve daha fazlasını denetler.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-105">It is responsible for listening for incoming messages and routing them to the appropriate workflow service instance, it controls unloading and persisting of idle workflows, and more.</span></span> <span data-ttu-id="6dcf9-106">Bu konuda, WorkflowServiceHost 'ın gelen iletileri nasıl işlediği açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-106">This topic describes how WorkflowServiceHost processes incoming messages.</span></span>  
  
## <a name="workflowservicehost-overview"></a><span data-ttu-id="6dcf9-107">WorkflowServiceHost genel bakış</span><span class="sxs-lookup"><span data-stu-id="6dcf9-107">WorkflowServiceHost Overview</span></span>  

<span data-ttu-id="6dcf9-108"><xref:System.ServiceModel.WorkflowServiceHost>Sınıfı, iş akışı hizmetlerini barındırmak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-108">The <xref:System.ServiceModel.WorkflowServiceHost> class is used to host workflow services.</span></span> <span data-ttu-id="6dcf9-109">Gelen iletileri dinler ve bunları uygun hizmet örneğine yönlendirir, yeni örnekler oluşturuyor ya da gerektiğinde dayanıklı depolama alanından mevcut örnekleri yüklüyor.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-109">It listens for incoming messages and routes them to the appropriate service instance, creating new instances or loading existing instances from durable storage as needed.</span></span> <span data-ttu-id="6dcf9-110">Aşağıdaki diyagramda, üst düzey nasıl çalıştığı aşağıda gösterilmektedir <xref:System.ServiceModel.WorkflowServiceHost> :</span><span class="sxs-lookup"><span data-stu-id="6dcf9-110">The following diagram illustrates on a high level how <xref:System.ServiceModel.WorkflowServiceHost> works:</span></span>
  
 ![Iş akışı hizmeti ana bilgisayarına genel bakış gösteren diyagram.](./media/workflow-service-host-internals/workflow-service-host-high-level-overview.gif)  
  
 <span data-ttu-id="6dcf9-112">Bu diyagramda, <xref:System.ServiceModel.WorkflowServiceHost> . xamlx dosyalarından iş akışı hizmeti tanımlarının yüklendiği ve yapılandırma bilgileri bir yapılandırma dosyasından yüklendiği gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-112">This diagram shows that <xref:System.ServiceModel.WorkflowServiceHost> loads workflow service definitions from .xamlx files and loads configuration information from a configuration file.</span></span> <span data-ttu-id="6dcf9-113">İzleme profilinden izleme yapılandırmasını da yükler.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-113">It also loads tracking configuration from the tracking profile.</span></span> <span data-ttu-id="6dcf9-114"><xref:System.ServiceModel.WorkflowServiceHost> iş akışı örneklerine denetim işlemleri göndermenizi sağlayan bir iş akışı denetim uç noktası sunar.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-114"><xref:System.ServiceModel.WorkflowServiceHost> exposes a workflow control endpoint which allows you to send control operations to workflow instances.</span></span>  <span data-ttu-id="6dcf9-115">Daha fazla bilgi için bkz. [Workflow Control Endpoint Sample](workflow-control-endpoint.md).</span><span class="sxs-lookup"><span data-stu-id="6dcf9-115">For more information see [Workflow Control Endpoint sample](workflow-control-endpoint.md).</span></span>  
  
 <span data-ttu-id="6dcf9-116"><xref:System.ServiceModel.WorkflowServiceHost> Ayrıca, gelen uygulama iletilerini dinleyen uygulama uç noktalarını da kullanıma sunar.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-116"><xref:System.ServiceModel.WorkflowServiceHost> also exposes application endpoints that listen for incoming application messages.</span></span> <span data-ttu-id="6dcf9-117">Gelen bir ileti geldiğinde ilgili iş akışı hizmet örneğine (o anda yüklenmişse) gönderilir.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-117">When an incoming message arrives it is sent to the appropriate workflow service instance (if it is currently loaded).</span></span> <span data-ttu-id="6dcf9-118">Gerekirse, yeni bir iş akışı örneği oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-118">If needed a new workflow instance is created.</span></span> <span data-ttu-id="6dcf9-119">Ya da var olan bir örnek kalıcıda bulunursa kalıcılık deposundan yüklenir.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-119">Or if an existing instance has been persisted it is loaded from the persistence store.</span></span>  
  
## <a name="workflowservicehost-details"></a><span data-ttu-id="6dcf9-120">WorkflowServiceHost ayrıntıları</span><span class="sxs-lookup"><span data-stu-id="6dcf9-120">WorkflowServiceHost Details</span></span>  

 <span data-ttu-id="6dcf9-121">Aşağıdaki diyagramda, <xref:System.ServiceModel.WorkflowServiceHost> iletilerin bir bit daha detaylı şekilde nasıl işlediği gösterilmektedir:</span><span class="sxs-lookup"><span data-stu-id="6dcf9-121">The following diagram shows how <xref:System.ServiceModel.WorkflowServiceHost> handles messages in a bit more detail:</span></span>  
  
 ![Iş akışı hizmeti ana bilgisayar ileti akışını gösteren diyagram.](./media/workflow-service-host-internals/workflow-service-host-message-flow.gif)  
  
 <span data-ttu-id="6dcf9-123">Bu diyagramda üç farklı uç nokta, bir uygulama uç noktası, iş akışı denetim uç noktası ve bir iş akışı barındırma uç noktası gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-123">This diagram shows three different endpoints, an application endpoint, a workflow control endpoint, and a workflow hosting endpoint.</span></span> <span data-ttu-id="6dcf9-124">Uygulama uç noktası, belirli bir iş akışı örneği için bağlanan iletileri alır.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-124">The application endpoint receives messages that are bound for a specific workflow instance.</span></span> <span data-ttu-id="6dcf9-125">İş akışı denetim uç noktası denetim işlemlerini dinler.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-125">The workflow control endpoint listens for control operations.</span></span> <span data-ttu-id="6dcf9-126">İş akışı barındırma uç noktası, <xref:System.ServiceModel.WorkflowServiceHost> hizmet dışı iş akışlarını yüklemeye ve yürütmeye neden olan iletileri dinler.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-126">The workflow hosting endpoint listens for messages that cause <xref:System.ServiceModel.WorkflowServiceHost> to load and execute non-service workflows.</span></span> <span data-ttu-id="6dcf9-127">Diyagramda gösterildiği gibi, tüm iletiler WCF çalışma zamanı aracılığıyla işlenir.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-127">As shown in the diagram all messages are processed through the WCF runtime.</span></span>  <span data-ttu-id="6dcf9-128">İş akışı hizmeti örneği azaltma özelliği kullanılarak elde edilir <xref:System.ServiceModel.Description.ServiceThrottlingBehavior.MaxConcurrentInstances%2A> .</span><span class="sxs-lookup"><span data-stu-id="6dcf9-128">Workflow service instance throttling is achieved by using the <xref:System.ServiceModel.Description.ServiceThrottlingBehavior.MaxConcurrentInstances%2A> property.</span></span> <span data-ttu-id="6dcf9-129">Bu özellik, eşzamanlı iş akışı hizmeti örneklerinin sayısını sınırlandırır.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-129">This property will limit the number of concurrent workflow service instances.</span></span> <span data-ttu-id="6dcf9-130">Bu kısıtlama, yeni iş akışı hizmet örnekleri veya kalıcı iş akışı örneklerinin etkinleştirilme istekleri için ek istek aşıldığında sıraya alınır.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-130">When this throttle is exceeded any additional requests for new workflow service instances or requests to activate persisted workflow instances will be queued.</span></span> <span data-ttu-id="6dcf9-131">Sıraya alınan istekler, yeni bir örnek veya çalışan, kalıcı bir örnek için istek olup olmadıklarından bağımsız olarak, FıFO sırasında işlenir.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-131">The queued requests are processed in FIFO order regardless of whether they are requests for a new instance or a running, persisted instance.</span></span> <span data-ttu-id="6dcf9-132">İşlenmemiş özel durumların nasıl ele alınacağını ve boşta iş akışı hizmetlerinin nasıl kaldırılacağına ve kalıcı olduğunu belirleyen konak ilkesi bilgileri yüklenir.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-132">Host policy information is loaded that determines how unhandled exceptions are dealt with, and how idle workflow services are unloaded and persisted.</span></span> <span data-ttu-id="6dcf9-133">Bu konular hakkında daha fazla bilgi için bkz. [nasıl yapılır: Iş akışı Işlenmemiş özel durum davranışını WorkflowServiceHost ile](config-workflow-unhandled-exception-workflowservicehost.md) yapılandırma ve [nasıl yapılır: WorkflowServiceHost Ile boşta davranışı yapılandırma](how-to-configure-idle-behavior-with-workflowservicehost.md).</span><span class="sxs-lookup"><span data-stu-id="6dcf9-133">For more information about these topics see [How to: Configure Workflow Unhandled Exception Behavior with WorkflowServiceHost](config-workflow-unhandled-exception-workflowservicehost.md) and [How to: Configure Idle Behavior with WorkflowServiceHost](how-to-configure-idle-behavior-with-workflowservicehost.md).</span></span> <span data-ttu-id="6dcf9-134">İş akışı örnekleri, ana bilgisayar ilkelerine göre kalıcı hale getirilir ve gerektiğinde yeniden yüklenir.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-134">Workflow instances are persisted according to host policies and are reloaded when needed.</span></span> <span data-ttu-id="6dcf9-135">İş akışı kalıcılığı hakkında daha fazla bilgi için bkz. [nasıl yapılır: WorkflowServiceHost Ile kalıcılığı yapılandırma](how-to-configure-persistence-with-workflowservicehost.md), [uzun süre çalışan bir iş akışı hizmeti oluşturma](creating-a-long-running-workflow-service.md)ve [iş akışı kalıcılığı](../../windows-workflow-foundation/workflow-persistence.md).</span><span class="sxs-lookup"><span data-stu-id="6dcf9-135">For more information about workflow persistence see: [How to: Configure Persistence with WorkflowServiceHost](how-to-configure-persistence-with-workflowservicehost.md), [Creating a Long-running Workflow Service](creating-a-long-running-workflow-service.md), and [Workflow Persistence](../../windows-workflow-foundation/workflow-persistence.md).</span></span>  
  
 <span data-ttu-id="6dcf9-136">Aşağıdaki çizimde, WorkflowServiceHost. Open çağrıldığında akış gösterilmektedir:</span><span class="sxs-lookup"><span data-stu-id="6dcf9-136">The following illustration shows the flow when WorkflowServiceHost.Open is called:</span></span>  
  
 ![WorkflowServiceHost. Open çağrıldığında akışı gösteren diyagram.](./media/workflow-service-host-internals/workflow-service-host-open.gif)  
  
 <span data-ttu-id="6dcf9-138">İş akışı XAML 'den yüklenir ve etkinlik ağacı oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-138">The workflow is loaded from XAML and the activity tree is created.</span></span> <span data-ttu-id="6dcf9-139"><xref:System.ServiceModel.WorkflowServiceHost> Etkinlik ağacını açıklar ve hizmet açıklamasını oluşturur.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-139"><xref:System.ServiceModel.WorkflowServiceHost> walks the activity tree and creates the service description.</span></span> <span data-ttu-id="6dcf9-140">Yapılandırma konağa uygulandı.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-140">Configuration is applied to the host.</span></span> <span data-ttu-id="6dcf9-141">Son olarak, ana bilgisayar gelen iletileri dinlemeye başlar.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-141">Finally the host begins to listen for incoming messages.</span></span>  
  
 <span data-ttu-id="6dcf9-142">Aşağıdaki çizimde, <xref:System.ServiceModel.WorkflowServiceHost> CanCreateInstance 'ya ayarlanmış bir alma etkinliği için bir ileti aldığında ne olduğu gösterilmektedir `true` :</span><span class="sxs-lookup"><span data-stu-id="6dcf9-142">The following illustration shows what the <xref:System.ServiceModel.WorkflowServiceHost> does when it receives a message bound for a Receive activity that has CanCreateInstance set to `true`:</span></span>  
  
 ![WFS ana bilgisayarı tarafından bir ileti alındığında kullanılan karar ağacı ve CanCreateInstance doğru.](./media/workflow-service-host-internals/workflow-service-host-receive-message-cancreateinstance.gif)  
  
 <span data-ttu-id="6dcf9-144">İleti ulaşır ve WCF kanal yığını tarafından işlenir.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-144">The message arrives and is processed by the WCF channel stack.</span></span> <span data-ttu-id="6dcf9-145">Kısıtlar ve bağıntı sorguları yürütülür.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-145">Throttles are checked and correlation queries are executed.</span></span> <span data-ttu-id="6dcf9-146">İleti, mevcut bir örnek için bağlıysa ileti teslim edilir.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-146">If the message is bound for an existing instance the message is delivered.</span></span> <span data-ttu-id="6dcf9-147">Yeni bir örneğin oluşturulması gerekiyorsa, alma etkinliğinin CanCreateInstance özelliği denetlenir.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-147">If a new instance needs to be created, the Receive activity’s CanCreateInstance property is checked.</span></span> <span data-ttu-id="6dcf9-148">True olarak ayarlanırsa, yeni bir örnek oluşturulur ve ileti teslim edilir.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-148">If it is set to true, a new instance is created and the message is delivered.</span></span>  
  
 <span data-ttu-id="6dcf9-149">Aşağıdaki çizimde, <xref:System.ServiceModel.WorkflowServiceHost> CanCreateInstance değeri false olarak ayarlanmış bir alma etkinliği için bir ileti aldığında ne olduğu gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-149">The following illustration shows what the <xref:System.ServiceModel.WorkflowServiceHost> does when it receives a message bound for a Receive activity that has CanCreateInstance set to false.</span></span>  
  
 ![WFS ana bilgisayarı tarafından bir ileti alındığında kullanılan karar ağacı ve CanCreateInstance yanlış.](./media/workflow-service-host-internals/workflow-service-host-receive-message.gif)  
  
 <span data-ttu-id="6dcf9-151">İleti ulaşır ve WCF kanal yığını tarafından işlenir.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-151">The message arrives and is processed by the WCF channel stack.</span></span> <span data-ttu-id="6dcf9-152">Kısıtlar ve bağıntı sorguları yürütülür.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-152">Throttles are checked and correlation queries are executed.</span></span> <span data-ttu-id="6dcf9-153">İleti, var olan bir örneğe bağlanır (CanCreateInstance yanlış olduğu için) Örneğin kalıcılık deposundan yüklenmesi durumunda, yer işareti sürdürülür ve iş akışı yürütülür.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-153">The message is bound for an existing instance (because CanCreateInstance is false) so the instance is loaded from persistence store, the bookmark is resumed and the workflow executes.</span></span>  
  
> [!WARNING]
> <span data-ttu-id="6dcf9-154">SQL Server, yalnızca NamedPipe protokolünü dinlemek üzere yapılandırılmışsa, iş akışı hizmeti ana bilgisayarı açılmaz.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-154">Workflow Service Host will fail to open if SQL Server is configured to listen on NamedPipe protocol only.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6dcf9-155">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="6dcf9-155">See also</span></span>

- [<span data-ttu-id="6dcf9-156">İş Akışı Hizmetleri</span><span class="sxs-lookup"><span data-stu-id="6dcf9-156">Workflow Services</span></span>](workflow-services.md)
- [<span data-ttu-id="6dcf9-157">İş Akışı Hizmetlerini Barındırma</span><span class="sxs-lookup"><span data-stu-id="6dcf9-157">Hosting Workflow Services</span></span>](hosting-workflow-services.md)
- [<span data-ttu-id="6dcf9-158">İş Akışı Denetim Uç Noktası</span><span class="sxs-lookup"><span data-stu-id="6dcf9-158">Workflow Control Endpoint</span></span>](workflow-control-endpoint.md)
- [<span data-ttu-id="6dcf9-159">Nasıl yapılır: WorkflowServiceHost ile İş Akışı Tarafından İşlenmeyen Özel Durum Davranışını Yapılandırma</span><span class="sxs-lookup"><span data-stu-id="6dcf9-159">How to: Configure Workflow Unhandled Exception Behavior with WorkflowServiceHost</span></span>](config-workflow-unhandled-exception-workflowservicehost.md)
- [<span data-ttu-id="6dcf9-160">Uzun Süre Çalışan Bir İş Akışı Hizmeti Oluşturma</span><span class="sxs-lookup"><span data-stu-id="6dcf9-160">Creating a Long-running Workflow Service</span></span>](creating-a-long-running-workflow-service.md)
- [<span data-ttu-id="6dcf9-161">İş Akışı Kalıcılığı</span><span class="sxs-lookup"><span data-stu-id="6dcf9-161">Workflow Persistence</span></span>](../../windows-workflow-foundation/workflow-persistence.md)
