---
description: 'Hakkında daha fazla bilgi edinin: SQL Server Express Kullanıcı örnekleri'
title: SQL Server Express Kullanıcı Örnekleri
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
ms.assetid: 00c12376-cb26-4317-86ad-e6e9c089be57
ms.openlocfilehash: 8579dee5c31a2b63156db72df6cc109beb843f08
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 02/06/2021
ms.locfileid: "99767288"
---
# <a name="sql-server-express-user-instances"></a><span data-ttu-id="e1800-103">SQL Server Express Kullanıcı Örnekleri</span><span class="sxs-lookup"><span data-stu-id="e1800-103">SQL Server Express User Instances</span></span>

<span data-ttu-id="e1800-104">Microsoft SQL Server Express Edition (SQL Server Express), yalnızca SQL Server () için .NET Framework Veri Sağlayıcısı kullanılırken kullanılabilen Kullanıcı örneği özelliğini destekler `SqlClient` .</span><span class="sxs-lookup"><span data-stu-id="e1800-104">Microsoft SQL Server Express Edition (SQL Server Express) supports the user instance feature, which is only available when using the .NET Framework Data Provider for SQL Server (`SqlClient`).</span></span> <span data-ttu-id="e1800-105">Bir kullanıcı örneği, bir üst örnek tarafından oluşturulan SQL Server Express veritabanı altyapısının ayrı bir örneğidir.</span><span class="sxs-lookup"><span data-stu-id="e1800-105">A user instance is a separate instance of the SQL Server Express Database Engine that is generated by a parent instance.</span></span> <span data-ttu-id="e1800-106">Kullanıcı örnekleri, yerel bilgisayarlarında yönetici olmayan kullanıcıların SQL Server Express veritabanlarına ekler ve bunlara bağlanmasına izin verir.</span><span class="sxs-lookup"><span data-stu-id="e1800-106">User instances allow users who are not administrators on their local computers to attach and connect to SQL Server Express databases.</span></span> <span data-ttu-id="e1800-107">Her örnek, bireysel kullanıcının güvenlik bağlamı altında, tek örnekli Kullanıcı bazında çalışır.</span><span class="sxs-lookup"><span data-stu-id="e1800-107">Each instance runs under the security context of the individual user, on a one-instance-per-user basis.</span></span>  
  
## <a name="user-instance-capabilities"></a><span data-ttu-id="e1800-108">Kullanıcı örneği özellikleri</span><span class="sxs-lookup"><span data-stu-id="e1800-108">User Instance Capabilities</span></span>  

 <span data-ttu-id="e1800-109">Kullanıcı örnekleri, en az ayrıcalıklı kullanıcı hesabı (LUA) altında Windows çalıştıran kullanıcılar için yararlıdır.</span><span class="sxs-lookup"><span data-stu-id="e1800-109">User instances are useful for users who are running Windows under a least-privilege user account (LUA).</span></span> <span data-ttu-id="e1800-110">Her kullanıcının, `sysadmin` bilgisayarında çalışan örnek üzerinde Windows Yöneticisi olarak çalışmasına gerek kalmadan SQL Server Sistem Yöneticisi () ayrıcalıkları vardır.</span><span class="sxs-lookup"><span data-stu-id="e1800-110">Each user has SQL Server system administrator (`sysadmin`) privileges over the instance running on their computer without needing to run as a Windows administrator as well.</span></span> <span data-ttu-id="e1800-111">Bir Kullanıcı örneğinde sınırlı izinlerle yürütülen yazılım, SQL Server Express örneği kullanıcının yönetici olmayan Windows hesabı altında, hizmet olarak değil, sistem genelinde değişiklik yapamaz.</span><span class="sxs-lookup"><span data-stu-id="e1800-111">Software executing on a user instance with limited permissions cannot make system-wide changes because the instance of SQL Server Express is running under the non-administrator Windows account of the user, not as a service.</span></span> <span data-ttu-id="e1800-112">Her kullanıcı örneği, üst örneğinden ve aynı bilgisayarda çalışan diğer kullanıcı örneklerinden yalıtılmıştır.</span><span class="sxs-lookup"><span data-stu-id="e1800-112">Each user instance is isolated from its parent instance and from any other user instances running on the same computer.</span></span> <span data-ttu-id="e1800-113">Bir Kullanıcı örneğinde çalışan veritabanları yalnızca tek kullanıcı modunda açılır ve birden çok kullanıcının bir kullanıcı örneği üzerinde çalışan veritabanlarına bağlanması mümkün değildir.</span><span class="sxs-lookup"><span data-stu-id="e1800-113">Databases running on a user instance are opened in single-user mode only, and it is not possible for multiple users to connect to databases running on a user instance.</span></span> <span data-ttu-id="e1800-114">Çoğaltma ve dağıtılmış sorgular da Kullanıcı örnekleri için devre dışıdır.</span><span class="sxs-lookup"><span data-stu-id="e1800-114">Replication and distributed queries are also disabled for user instances.</span></span>
  
> [!NOTE]
> <span data-ttu-id="e1800-115">Kullanıcı örnekleri, kendi bilgisayarlarında zaten yönetici olan kullanıcılar veya birden çok veritabanı kullanıcısı içeren senaryolar için gerekli değildir.</span><span class="sxs-lookup"><span data-stu-id="e1800-115">User instances are not needed for users who are already administrators on their own computers, or for scenarios involving multiple database users.</span></span>  
  
## <a name="enabling-user-instances"></a><span data-ttu-id="e1800-116">Kullanıcı örneklerini etkinleştirme</span><span class="sxs-lookup"><span data-stu-id="e1800-116">Enabling User Instances</span></span>  

 <span data-ttu-id="e1800-117">Kullanıcı örnekleri oluşturmak için bir SQL Server Express üst örneğinin çalışıyor olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="e1800-117">To generate user instances, a parent instance of SQL Server Express must be running.</span></span> <span data-ttu-id="e1800-118">SQL Server Express yüklendiğinde Kullanıcı örnekleri varsayılan olarak etkindir ve üst örnekte **sp_configure** sistem saklı yordamını yürüten bir sistem yöneticisi tarafından açıkça etkinleştirilebilir veya devre dışı bırakılabilir.</span><span class="sxs-lookup"><span data-stu-id="e1800-118">User instances are enabled by default when SQL Server Express is installed, and they can be explicitly enabled or disabled by a system administrator executing the **sp_configure** system stored procedure on the parent instance.</span></span>  
  
```sql  
-- Enable user instances.  
sp_configure 'user instances enabled','1'
  
-- Disable user instances.  
sp_configure 'user instances enabled','0'  
```  
  
 <span data-ttu-id="e1800-119">Kullanıcı örnekleri için ağ protokolünün yerel adlandırılmış kanallar olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="e1800-119">The network protocol for user instances must be local Named Pipes.</span></span> <span data-ttu-id="e1800-120">Bir kullanıcı örneği SQL Server uzak bir örneğinde başlatılamaz ve SQL Server oturum açma işlemlerine izin verilmez.</span><span class="sxs-lookup"><span data-stu-id="e1800-120">A user instance cannot be started on a remote instance of SQL Server, and SQL Server logins are not allowed.</span></span>  
  
## <a name="connecting-to-a-user-instance"></a><span data-ttu-id="e1800-121">Kullanıcı örneğine bağlanma</span><span class="sxs-lookup"><span data-stu-id="e1800-121">Connecting to a User Instance</span></span>  

 <span data-ttu-id="e1800-122">`User Instance`Ve `AttachDBFilename` <xref:System.Data.SqlClient.SqlConnection.ConnectionString%2A> anahtar sözcükleri bir <xref:System.Data.SqlClient.SqlConnection> Kullanıcı örneğine bağlanmasına izin verir.</span><span class="sxs-lookup"><span data-stu-id="e1800-122">The `User Instance` and `AttachDBFilename`<xref:System.Data.SqlClient.SqlConnection.ConnectionString%2A> keywords allow a <xref:System.Data.SqlClient.SqlConnection> to connect to a user instance.</span></span> <span data-ttu-id="e1800-123">Kullanıcı örnekleri ve özellikleri tarafından da desteklenir <xref:System.Data.SqlClient.SqlConnectionStringBuilder> `UserInstance` `AttachDBFilename` .</span><span class="sxs-lookup"><span data-stu-id="e1800-123">User instances are also supported by the <xref:System.Data.SqlClient.SqlConnectionStringBuilder>`UserInstance` and `AttachDBFilename` properties.</span></span>  
  
 <span data-ttu-id="e1800-124">Aşağıda gösterilen örnek bağlantı dizesi hakkında aşağıdakileri göz önünde edin:</span><span class="sxs-lookup"><span data-stu-id="e1800-124">Note the following about the sample connection string shown below:</span></span>  
  
- <span data-ttu-id="e1800-125">`Data Source`Anahtar sözcüğü, Kullanıcı örneğini oluşturan SQL Server Express üst örneğine başvurur.</span><span class="sxs-lookup"><span data-stu-id="e1800-125">The `Data Source` keyword refers to the parent instance of SQL Server Express that is generating the user instance.</span></span> <span data-ttu-id="e1800-126">Varsayılan örnek .\SQLEXPRESS.</span><span class="sxs-lookup"><span data-stu-id="e1800-126">The default instance is .\sqlexpress.</span></span>  
  
- <span data-ttu-id="e1800-127">`Integrated Security` , olarak ayarlanır `true` .</span><span class="sxs-lookup"><span data-stu-id="e1800-127">`Integrated Security` is set to `true`.</span></span> <span data-ttu-id="e1800-128">Bir kullanıcı örneğine bağlanmak için Windows kimlik doğrulaması gerekir; SQL Server oturum açma işlemleri desteklenmez.</span><span class="sxs-lookup"><span data-stu-id="e1800-128">To connect to a user instance, Windows Authentication is required; SQL Server logins are not supported.</span></span>  
  
- <span data-ttu-id="e1800-129">, `User Instance` `true` Bir kullanıcı örneği çağıran olarak ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="e1800-129">The `User Instance` is set to `true`, which invokes a user instance.</span></span> <span data-ttu-id="e1800-130">(Varsayılan değer `false` .)</span><span class="sxs-lookup"><span data-stu-id="e1800-130">(The default is `false`.)</span></span>  
  
- <span data-ttu-id="e1800-131">`AttachDbFileName`Bağlantı dizesi anahtar sözcüğü, tam yol adını içermesi gereken birincil veritabanı dosyasını (. mdf) eklemek için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="e1800-131">The `AttachDbFileName` connection string keyword is used to attach the primary database file (.mdf), which must include the full path name.</span></span> <span data-ttu-id="e1800-132">`AttachDbFileName` Ayrıca bir bağlantı dizesi içindeki "Genişletilmiş Özellikler" ve "ilk dosya adı" anahtarlarına karşılık gelir <xref:System.Data.SqlClient.SqlConnection> .</span><span class="sxs-lookup"><span data-stu-id="e1800-132">`AttachDbFileName` also corresponds to the "extended properties" and "initial file name" keys within a <xref:System.Data.SqlClient.SqlConnection> connection string.</span></span>  
  
- <span data-ttu-id="e1800-133">`|DataDirectory|`Kanal simgelerine eklenen dize, bağlantıyı açan uygulamanın veri dizinine başvurur ve. mdf ve. ldf veritabanının ve günlük dosyalarının konumunu gösteren göreli bir yol sağlar.</span><span class="sxs-lookup"><span data-stu-id="e1800-133">The `|DataDirectory|` substitution string enclosed in the pipe symbols refers to the data directory of the application opening the connection and provides a relative path indicating the location of the .mdf and .ldf database and log files.</span></span> <span data-ttu-id="e1800-134">Bu dosyaları başka bir yerde bulmak istiyorsanız dosyaların tam yolunu sağlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="e1800-134">If you want to locate these files elsewhere, you must provide the full path to the files.</span></span>  
  
```text
Data Source=.\\SQLExpress;Integrated Security=true;  
User Instance=true;AttachDBFilename=|DataDirectory|\InstanceDB.mdf;  
Initial Catalog=InstanceDB;  
```  
  
> [!NOTE]
> <span data-ttu-id="e1800-135">Ayrıca, <xref:System.Data.SqlClient.SqlConnectionStringBuilder> <xref:System.Data.SqlClient.SqlConnectionStringBuilder.UserInstance%2A> <xref:System.Data.SqlClient.SqlConnectionStringBuilder.AttachDBFilename%2A> çalışma zamanında bir bağlantı dizesi oluşturmak için ve özelliklerini de kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e1800-135">You can also use the <xref:System.Data.SqlClient.SqlConnectionStringBuilder><xref:System.Data.SqlClient.SqlConnectionStringBuilder.UserInstance%2A> and <xref:System.Data.SqlClient.SqlConnectionStringBuilder.AttachDBFilename%2A> properties to build a connection string at run time.</span></span>  
  
### <a name="using-the-124datadirectory124-substitution-string"></a><span data-ttu-id="e1800-136">&#124;DataDirectory&#124; değiştirme dizesi kullanma</span><span class="sxs-lookup"><span data-stu-id="e1800-136">Using the &#124;DataDirectory&#124; Substitution String</span></span>  

 <span data-ttu-id="e1800-137">`AttachDbFileName` , ADO.NET 2,0 ' de `|DataDirectory|` (kanal sembolleri içine alınmış) değiştirme dizesinin tanıtılmasıyla genişletildi.</span><span class="sxs-lookup"><span data-stu-id="e1800-137">`AttachDbFileName` was extended in ADO.NET 2.0 with the introduction of the `|DataDirectory|` (enclosed in pipe symbols) substitution string.</span></span> <span data-ttu-id="e1800-138">`DataDirectory``AttachDbFileName`, bir veri dosyasının göreli yolunu belirtmek için ile birlikte kullanıldığında, geliştiricilerin tam yol belirtmek yerine veri kaynağına göre göreli bir yolu temel alan bağlantı dizeleri oluşturmalarına olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="e1800-138">`DataDirectory` is used in conjunction with `AttachDbFileName` to indicate a relative path to a data file, allowing developers to create connection strings that are based on a relative path to the data source instead of being required to specify a full path.</span></span>  
  
 <span data-ttu-id="e1800-139">Öğesinin işaret ettiği fiziksel konum `DataDirectory` , uygulamanın türüne bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="e1800-139">The physical location that `DataDirectory` points to depends on the type of application.</span></span> <span data-ttu-id="e1800-140">Bu örnekte, eklenecek Northwind. mdf dosyası uygulamanın \ app_data klasöründe bulunur.</span><span class="sxs-lookup"><span data-stu-id="e1800-140">In this example, the Northwind.mdf file to be attached is located in the application's \app_data folder.</span></span>  
  
```text
Data Source=.\\SQLExpress;Integrated Security=true;  
User Instance=true;  
AttachDBFilename=|DataDirectory|\app_data\Northwind.mdf;  
Initial Catalog=Northwind;  
```  
  
 <span data-ttu-id="e1800-141">`DataDirectory`Kullanıldığında, ortaya çıkan dosya yolu, dizin yapısında değiştirme dizesi tarafından işaret edilen dizinden daha yüksek olamaz.</span><span class="sxs-lookup"><span data-stu-id="e1800-141">When `DataDirectory` is used, the resulting file path cannot be higher in the directory structure than the directory pointed to by the substitution string.</span></span> <span data-ttu-id="e1800-142">Örneğin, tam genişletilmiş `DataDirectory` C:\AppDirectory\ App_Data ise, yukarıda gösterilen örnek bağlantı dizesi c:\appdirectoryaltında olduğundan geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="e1800-142">For example, if the fully expanded `DataDirectory` is C:\AppDirectory\app_data, then the sample connection string shown above works because it is below c:\AppDirectory.</span></span> <span data-ttu-id="e1800-143">Bununla birlikte, olarak belirtilmeye çalışılması `DataDirectory` `|DataDirectory|\..\data` bir hata oluşmasına neden olur çünkü \Data bir \Appdirectoryalt dizini değildir.</span><span class="sxs-lookup"><span data-stu-id="e1800-143">However, attempting to specify `DataDirectory` as `|DataDirectory|\..\data` will result in an error because \data is not a subdirectory of \AppDirectory.</span></span>  
  
 <span data-ttu-id="e1800-144">Bağlantı dizesinde hatalı biçimli bir değiştirme dizesi varsa, bir <xref:System.ArgumentException> oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="e1800-144">If the connection string has an improperly formatted substitution string, an <xref:System.ArgumentException> will be thrown.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="e1800-145"><xref:System.Data.SqlClient> değiştirme dizelerini yerel bilgisayar dosya sistemine karşı tam yollarla çözer.</span><span class="sxs-lookup"><span data-stu-id="e1800-145"><xref:System.Data.SqlClient> resolves the substitution strings into full paths against the local computer file system.</span></span> <span data-ttu-id="e1800-146">Bu nedenle, uzak sunucu, HTTP ve UNC yol adları desteklenmez.</span><span class="sxs-lookup"><span data-stu-id="e1800-146">Therefore, remote server, HTTP, and UNC path names are not supported.</span></span> <span data-ttu-id="e1800-147">Sunucu yerel bilgisayarda bulunmuyorsa bağlantı açıldığında bir özel durum oluşur.</span><span class="sxs-lookup"><span data-stu-id="e1800-147">An exception is thrown when the connection is opened if the server is not located on the local computer.</span></span>  
  
 <span data-ttu-id="e1800-148"><xref:System.Data.SqlClient.SqlConnection>Açıldığında, varsayılan SQL Server Express örneğinden, çağıranın hesabı altında çalışan bir çalışma zamanı başlatılmış örneğe yönlendirilir.</span><span class="sxs-lookup"><span data-stu-id="e1800-148">When the <xref:System.Data.SqlClient.SqlConnection> is opened, it is redirected from the default SQL Server Express instance to a run-time initiated instance running under the caller's account.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="e1800-149"><xref:System.Data.SqlClient.SqlConnection.ConnectionTimeout%2A>Kullanıcı örneklerinin normal örneklere göre yüklenmeye daha uzun sürebileceğinden, değeri artırmak gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="e1800-149">It may be necessary to increase the <xref:System.Data.SqlClient.SqlConnection.ConnectionTimeout%2A> value since user instances may take longer to load than regular instances.</span></span>  
  
 <span data-ttu-id="e1800-150">Aşağıdaki kod parçası yeni bir açar `SqlConnection` , bağlantı dizesini konsol penceresinde görüntüler ve ardından kod bloğundan çıkarken bağlantıyı kapatır `using` .</span><span class="sxs-lookup"><span data-stu-id="e1800-150">The following code fragment opens a new `SqlConnection`, displays the connection string in the console window, and then closes the connection when exiting the `using` code block.</span></span>  
  
```vb  
Private Sub OpenSqlConnection()  
    ' Retrieve the connection string.  
    Dim connectionString As String = GetConnectionString()  
  
    Using connection As New SqlConnection(connectionString)  
        connection.Open()  
        Console.WriteLine("ConnectionString: {0}", _  
           connection.ConnectionString)  
    End Using  
End Sub  
```  
  
```csharp  
private static void OpenSqlConnection()  
{  
    // Retrieve the connection string.  
    string connectionString = GetConnectionString();  
  
    using (SqlConnection connection =
        new SqlConnection(connectionString))  
    {  
        connection.Open();  
        Console.WriteLine("ConnectionString: {0}",
             connection.ConnectionString);  
    }  
}  
```  
  
> [!NOTE]
> <span data-ttu-id="e1800-151">SQL Server içinde çalışan ortak dil çalışma zamanı (CLR) kodunda Kullanıcı örnekleri desteklenmez.</span><span class="sxs-lookup"><span data-stu-id="e1800-151">User instances are not supported in common language runtime (CLR) code that is running inside of SQL Server.</span></span> <span data-ttu-id="e1800-152">, <xref:System.InvalidOperationException> `Open` Bağlantı dizesinde bulunan bir üzerinde çağrılırsa oluşturulur <xref:System.Data.SqlClient.SqlConnection> `User Instance=true` .</span><span class="sxs-lookup"><span data-stu-id="e1800-152">An <xref:System.InvalidOperationException> is thrown if `Open` is called on a <xref:System.Data.SqlClient.SqlConnection> that has `User Instance=true` in the connection string.</span></span>  
  
## <a name="lifetime-of-a-user-instance-connection"></a><span data-ttu-id="e1800-153">Kullanıcı örneği bağlantısının ömrü</span><span class="sxs-lookup"><span data-stu-id="e1800-153">Lifetime of a User Instance Connection</span></span>  

 <span data-ttu-id="e1800-154">Hizmet olarak çalışan SQL Server sürümlerinden farklı olarak, SQL Server Express örneklerinin el ile başlatılması ve durdurulması gerekmez.</span><span class="sxs-lookup"><span data-stu-id="e1800-154">Unlike versions of SQL Server that run as a service, SQL Server Express instances do not need to be manually started and stopped.</span></span> <span data-ttu-id="e1800-155">Kullanıcı oturum açtığında ve bir kullanıcı örneğine her bağlanışında, Kullanıcı örneği zaten çalışmıyorsa başlatılır.</span><span class="sxs-lookup"><span data-stu-id="e1800-155">Each time a user logs in and connects to a user instance, the user instance is started if it is not already running.</span></span> <span data-ttu-id="e1800-156">Kullanıcı örneği veritabanlarının, `AutoClose` bir süre işlem yapılmadan sonra veritabanını otomatik olarak kapatması için seçenek kümesi vardır.</span><span class="sxs-lookup"><span data-stu-id="e1800-156">User instance databases have the `AutoClose` option set so that the database is automatically shut down after a period of inactivity.</span></span> <span data-ttu-id="e1800-157">Başlatılan sqlservr.exe işlem, örneğe son bağlantı kapatıldıktan sonra sınırlı bir zaman aşımı süresi boyunca çalışır, bu nedenle zaman aşımı süresi dolmadan önce başka bir bağlantı açılırsa yeniden başlatılması gerekmez.</span><span class="sxs-lookup"><span data-stu-id="e1800-157">The sqlservr.exe process that is started is kept running for a limited time-out period after the last connection to the instance is closed, so it does not need to be restarted if another connection is opened before the time-out has expired.</span></span> <span data-ttu-id="e1800-158">Bu zaman aşımı süresi dolmadan önce yeni bir bağlantı açılmamışsa Kullanıcı örneği otomatik olarak kapanır.</span><span class="sxs-lookup"><span data-stu-id="e1800-158">The user instance automatically shuts down if no new connection opens before that time-out period has expired.</span></span> <span data-ttu-id="e1800-159">Üst örnekteki Sistem Yöneticisi, Kullanıcı örneği **zaman aşımı** seçeneğini değiştirmek için **sp_configure** kullanarak bir kullanıcı örneği için zaman aşımı süresi süresini ayarlayabilir.</span><span class="sxs-lookup"><span data-stu-id="e1800-159">A system administrator on the parent instance can set the duration of the time-out period for a user instance by using **sp_configure** to change the **user instance timeout** option.</span></span> <span data-ttu-id="e1800-160">Varsayılan değer 60 dakikadır.</span><span class="sxs-lookup"><span data-stu-id="e1800-160">The default is 60 minutes.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="e1800-161">`Min Pool Size`Bağlantı dizesinde sıfırdan büyük bir değere sahip ise, bağlantı havuzlayıcı her zaman açılmış birkaç bağlantıyı korur ve Kullanıcı örneği otomatik olarak kapatılmaz.</span><span class="sxs-lookup"><span data-stu-id="e1800-161">If `Min Pool Size` is used in the connection string with a value greater than zero, the connection pooler will always maintain a few opened connections, and the user instance will not automatically shut down.</span></span>  
  
## <a name="how-user-instances-work"></a><span data-ttu-id="e1800-162">Kullanıcı örnekleri nasıl çalışır?</span><span class="sxs-lookup"><span data-stu-id="e1800-162">How User Instances Work</span></span>  

 <span data-ttu-id="e1800-163">Her Kullanıcı için bir kullanıcı örneği ilk kez oluşturulduğunda, **ana** ve **msdb** sistem veritabanları, Kullanıcı örneği tarafından özel kullanım için, şablon verileri klasöründen kullanıcının yerel uygulama veri deposu dizini altındaki bir yola kopyalanır.</span><span class="sxs-lookup"><span data-stu-id="e1800-163">The first time a user instance is generated for each user, the **master** and **msdb** system databases are copied from the Template Data folder to a path under the user's local application data repository directory for exclusive use by the user instance.</span></span> <span data-ttu-id="e1800-164">Bu yol genellikle olur `C:\Documents and Settings\<UserName>\Local Settings\Application Data\Microsoft\Microsoft SQL Server Data\SQLEXPRESS` .</span><span class="sxs-lookup"><span data-stu-id="e1800-164">This path is typically `C:\Documents and Settings\<UserName>\Local Settings\Application Data\Microsoft\Microsoft SQL Server Data\SQLEXPRESS`.</span></span> <span data-ttu-id="e1800-165">Bir kullanıcı örneği başlatıldığında, **tempdb**, log ve Trace dosyaları da bu dizine yazılır.</span><span class="sxs-lookup"><span data-stu-id="e1800-165">When a user instance starts up, the **tempdb**, log, and trace files are also written to this directory.</span></span> <span data-ttu-id="e1800-166">Örnek için, her kullanıcı için benzersiz olması garanti edilen bir ad oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="e1800-166">A name is generated for the instance, which is guaranteed to be unique for each user.</span></span>  
  
 <span data-ttu-id="e1800-167">Varsayılan olarak, Windows buıltın\users grubunun tüm üyelerine, SQL Server ikili dosyalarında okuma ve yürütme izinlerinin yanı sıra yerel örneğe bağlanma izinleri verilir.</span><span class="sxs-lookup"><span data-stu-id="e1800-167">By default all members of the Windows Builtin\Users group are granted permissions to connect on the local instance as well as read and execute permissions on the SQL Server binaries.</span></span> <span data-ttu-id="e1800-168">Kullanıcı örneğini barındıran çağıran kullanıcının kimlik bilgileri doğrulandıktan sonra, bu kullanıcı `sysadmin` o örnekte olur.</span><span class="sxs-lookup"><span data-stu-id="e1800-168">Once the credentials of the calling user hosting the user instance have been verified, that user becomes the `sysadmin` on that instance.</span></span> <span data-ttu-id="e1800-169">Yalnızca paylaşılan bellek Kullanıcı örnekleri için etkindir, yani yalnızca yerel makinedeki işlemler mümkündür.</span><span class="sxs-lookup"><span data-stu-id="e1800-169">Only shared memory is enabled for user instances, which means that only operations on the local machine are possible.</span></span>  
  
 <span data-ttu-id="e1800-170">Kullanıcılara bağlantı dizesinde belirtilen. mdf ve. ldf dosyalarında hem okuma hem de yazma izinleri verilmelidir.</span><span class="sxs-lookup"><span data-stu-id="e1800-170">Users must be granted both read and write permissions on the .mdf and .ldf files specified in the connection string.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="e1800-171">. Mdf ve. ldf dosyaları sırasıyla veritabanı ve günlük dosyalarını temsil eder.</span><span class="sxs-lookup"><span data-stu-id="e1800-171">The .mdf and .ldf files represent the database and log files, respectively.</span></span> <span data-ttu-id="e1800-172">Bu iki dosya eşleşen bir küme olduğundan yedekleme ve geri yükleme işlemleri sırasında dikkatli olunmalıdır.</span><span class="sxs-lookup"><span data-stu-id="e1800-172">These two files are a matched set, so care must be taken during backup and restore operations.</span></span> <span data-ttu-id="e1800-173">Veritabanı dosyası, günlük dosyasının tam sürümü hakkında bilgi içerir ve yanlış bir günlük dosyasıyla birleştirildiğinde veritabanı açılmaz.</span><span class="sxs-lookup"><span data-stu-id="e1800-173">The database file contains information about the exact version of the log file, and the database will not open if it is coupled with the wrong log file.</span></span>  
  
 <span data-ttu-id="e1800-174">Verilerin bozulmasını önlemek için, Kullanıcı örneğindeki bir veritabanı özel erişimle açılır.</span><span class="sxs-lookup"><span data-stu-id="e1800-174">To avoid data corruption, a database in the user instance is opened with exclusive access.</span></span> <span data-ttu-id="e1800-175">Aynı bilgisayarda iki farklı kullanıcı örneği aynı veritabanını paylaşıyorsa, ikinci bir örnekte açılmadan önce ilk örnekteki kullanıcının veritabanını kapatması gerekir.</span><span class="sxs-lookup"><span data-stu-id="e1800-175">If two different user instances share the same database on the same computer, the user on the first instance must close the database before it can be opened in a second instance.</span></span>  
  
## <a name="user-instance-scenarios"></a><span data-ttu-id="e1800-176">Kullanıcı örneği senaryoları</span><span class="sxs-lookup"><span data-stu-id="e1800-176">User Instance Scenarios</span></span>  

 <span data-ttu-id="e1800-177">Kullanıcı örnekleri, geliştirme bilgisayarlarında yönetim hesapları olan geliştiricilere bağlı olmayan bir SQL Server veri deposu ile veritabanı uygulamalarına yönelik geliştiriciler sağlar.</span><span class="sxs-lookup"><span data-stu-id="e1800-177">User instances provide developers of database applications with a SQL Server data store that does not depend on developers having administrative accounts on their development computers.</span></span> <span data-ttu-id="e1800-178">Kullanıcı örnekleri, veritabanı uygulamasının bir dosyaya bağlandığı erişim/Jet modeline dayalıdır ve Kullanıcı, bir sistem yöneticisinin izin vermesini gerektirmeden tüm veritabanı nesneleri üzerinde otomatik olarak tam izinlere sahip olur.</span><span class="sxs-lookup"><span data-stu-id="e1800-178">User instances are based on the Access/Jet model, where the database application simply connects to a file, and the user automatically has full permissions on all of the database objects without needing the intervention of a system administrator to grant permissions.</span></span> <span data-ttu-id="e1800-179">Kullanıcının en az ayrıcalıklı kullanıcı hesabı (LUA) altında çalıştığı ve sunucuda veya yerel makinede yönetici ayrıcalıklarına sahip olmadığı durumlarda, ancak veritabanı nesneleri ve uygulamalar oluşturmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="e1800-179">It is intended to work in situations where the user is running under a least-privilege user account (LUA) and does not have administrative privileges on the server or local machine, yet needs to create database objects and applications.</span></span> <span data-ttu-id="e1800-180">Kullanıcı örnekleri, kullanıcıların, daha ayrıcalıklı bir sistem hizmetinin güvenlik bağlamında değil, kullanıcının kendi güvenlik bağlamı altında çalışan çalışma zamanında örnekler oluşturmalarına olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="e1800-180">User instances allow users to create instances at run time that run under the user's own security context, and not in the security context of a more privileged system service.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="e1800-181">Kullanıcı örnekleri yalnızca, kullanan tüm uygulamaların tam olarak güvendiği senaryolarda kullanılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="e1800-181">User instances should only be used in scenarios where all the applications using it are fully trusted.</span></span>  
  
 <span data-ttu-id="e1800-182">Kullanıcı örneği senaryoları şunları içerir:</span><span class="sxs-lookup"><span data-stu-id="e1800-182">User instance scenarios include:</span></span>  
  
- <span data-ttu-id="e1800-183">Verilerin paylaşılabileceği tek kullanıcılı uygulamalar gerekli değildir.</span><span class="sxs-lookup"><span data-stu-id="e1800-183">Any single-user application where sharing data is not required.</span></span>  
  
- <span data-ttu-id="e1800-184">ClickOnce dağıtımı.</span><span class="sxs-lookup"><span data-stu-id="e1800-184">ClickOnce deployment.</span></span> <span data-ttu-id="e1800-185">.NET Framework 2,0 (veya üzeri) ve SQL Server Express zaten hedef bilgisayarda yüklüyse, bir ClickOnce eyleminin sonucu olarak indirilen yükleme paketi yönetici olmayan kullanıcılar tarafından yüklenebilir ve kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="e1800-185">If .NET Framework 2.0 (or later) and SQL Server Express are already installed on the target computer, the installation package downloaded as a result of a ClickOnce action can be installed and used by non-administrator users.</span></span> <span data-ttu-id="e1800-186">Kurulumun bir parçası olan bir yöneticinin SQL Server Express yüklemesi gerektiğini unutmayın.</span><span class="sxs-lookup"><span data-stu-id="e1800-186">Note that an administrator must install SQL Server Express if that is part of the setup.</span></span> <span data-ttu-id="e1800-187">Daha fazla bilgi için bkz. [Windows Forms Için ClickOnce dağıtımı](/dotnet/desktop/winforms/clickonce-deployment-for-windows-forms).</span><span class="sxs-lookup"><span data-stu-id="e1800-187">For more information, see [ClickOnce Deployment for Windows Forms](/dotnet/desktop/winforms/clickonce-deployment-for-windows-forms).</span></span>
  
- <span data-ttu-id="e1800-188">Windows kimlik doğrulamasını kullanarak adanmış ASP.NET barındırma.</span><span class="sxs-lookup"><span data-stu-id="e1800-188">Dedicated ASP.NET hosting using Windows Authentication.</span></span> <span data-ttu-id="e1800-189">Tek bir SQL Server Express örneği, intranette barındırılabilir.</span><span class="sxs-lookup"><span data-stu-id="e1800-189">A single SQL Server Express instance can be hosted on an intranet.</span></span> <span data-ttu-id="e1800-190">Uygulama, kimliğe bürünme özelliğini kullanarak değil, ASPNET Windows hesabını kullanarak bağlanır.</span><span class="sxs-lookup"><span data-stu-id="e1800-190">The application connects using the ASPNET Windows account, not by using impersonation.</span></span> <span data-ttu-id="e1800-191">Kullanıcı örnekleri, tüm uygulamaların aynı Kullanıcı örneğini paylaştığı ve artık birbirinden yalıtılmış kalmayacak olan üçüncü taraf veya paylaşılan barındırma senaryolarında kullanılmamalıdır.</span><span class="sxs-lookup"><span data-stu-id="e1800-191">User instances should not be used for third-party or shared hosting scenarios where all applications would share the same user instance and would no longer remain isolated from each other.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e1800-192">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="e1800-192">See also</span></span>

- [<span data-ttu-id="e1800-193">SQL Server ve ADO.NET</span><span class="sxs-lookup"><span data-stu-id="e1800-193">SQL Server and ADO.NET</span></span>](index.md)
- [<span data-ttu-id="e1800-194">Bağlantı dizeleri</span><span class="sxs-lookup"><span data-stu-id="e1800-194">Connection Strings</span></span>](../connection-strings.md)
- [<span data-ttu-id="e1800-195">Bir veri kaynağına bağlanma</span><span class="sxs-lookup"><span data-stu-id="e1800-195">Connecting to a Data Source</span></span>](../connecting-to-a-data-source.md)
- [<span data-ttu-id="e1800-196">ADO.NET’e Genel Bakış</span><span class="sxs-lookup"><span data-stu-id="e1800-196">ADO.NET Overview</span></span>](../ado-net-overview.md)
