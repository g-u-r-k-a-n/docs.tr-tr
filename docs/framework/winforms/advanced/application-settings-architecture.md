---
title: Uygulama Ayarları Mimarisi
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- application settings [Windows Forms], architecture
ms.assetid: c8eb2ad0-fac6-4ea2-9140-675a4a44d562
ms.openlocfilehash: 078b5f3fc1cd4273af282580f41e68ca9bd8ff51
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/12/2020
ms.locfileid: "79182623"
---
# <a name="application-settings-architecture"></a><span data-ttu-id="b114f-102">Uygulama Ayarları Mimarisi</span><span class="sxs-lookup"><span data-stu-id="b114f-102">Application Settings Architecture</span></span>
<span data-ttu-id="b114f-103">Bu konu, Uygulama Ayarları mimarisinin nasıl çalıştığını açıklar ve gruplanmış ayarlar ve ayarlar anahtarları gibi mimarinin gelişmiş özelliklerini inceler.</span><span class="sxs-lookup"><span data-stu-id="b114f-103">This topic describes how the Application Settings architecture works, and explores advanced features of the architecture, such as grouped settings and settings keys.</span></span>

 <span data-ttu-id="b114f-104">Uygulama ayarları mimarisi, uygulama veya kullanıcı kapsamıyla güçlü bir şekilde yazılan ayarları tanımlamayı ve uygulama oturumları arasındaki ayarları kalıcı olarak desteklemektedir.</span><span class="sxs-lookup"><span data-stu-id="b114f-104">The application settings architecture supports defining strongly typed settings with either application or user scope, and persisting the settings between application sessions.</span></span> <span data-ttu-id="b114f-105">Mimari, ayarları kaydetmek ve yerel dosya sisteminden yüklemek için varsayılan bir kalıcılık altyapısı sağlar.</span><span class="sxs-lookup"><span data-stu-id="b114f-105">The architecture provides a default persistence engine for saving settings to and loading them from the local file system.</span></span> <span data-ttu-id="b114f-106">Mimari de özel bir kalıcılık altyapısı sağlamak için arabirimleri tanımlar.</span><span class="sxs-lookup"><span data-stu-id="b114f-106">The architecture also defines interfaces for supplying a custom persistence engine.</span></span>

 <span data-ttu-id="b114f-107">Özel bileşenlerin bir uygulamada barındırıldığında kendi ayarlarını devam etmesini sağlayan arabirimler sağlanır.</span><span class="sxs-lookup"><span data-stu-id="b114f-107">Interfaces are provided that enable custom components to persist their own settings when they are hosted in an application.</span></span> <span data-ttu-id="b114f-108">Bileşenler, ayarlar anahtarlarını kullanarak bileşenin birden çok örneğinin ayarlarını ayrı tutabilir.</span><span class="sxs-lookup"><span data-stu-id="b114f-108">By using settings keys, components can keep settings for multiple instances of the component separate.</span></span>

## <a name="defining-settings"></a><span data-ttu-id="b114f-109">Ayarları Tanımlama</span><span class="sxs-lookup"><span data-stu-id="b114f-109">Defining Settings</span></span>
 <span data-ttu-id="b114f-110">Uygulama ayarları mimarisi hem ASP.NET hem de Windows Forms içinde kullanılır ve her iki ortam arasında paylaşılan bir dizi temel sınıf içerir.</span><span class="sxs-lookup"><span data-stu-id="b114f-110">The application settings architecture is used within both ASP.NET and Windows Forms, and it contains a number of base classes that are shared across both environments.</span></span> <span data-ttu-id="b114f-111">En <xref:System.Configuration.SettingsBase>önemlisi, bir koleksiyon aracılığıyla ayarlara erişim sağlayan ve ayarları yükleme ve kaydetme için düşük düzeyli yöntemler sağlayan dır.</span><span class="sxs-lookup"><span data-stu-id="b114f-111">The most important is <xref:System.Configuration.SettingsBase>, which provides access to settings through a collection, and provides low-level methods for loading and saving settings.</span></span> <span data-ttu-id="b114f-112">Her ortam, o ortam <xref:System.Configuration.SettingsBase> için ek ayarlar işlevselliği sağlamak için türetilen kendi sınıfını uygular.</span><span class="sxs-lookup"><span data-stu-id="b114f-112">Each environment implements its own class derived from <xref:System.Configuration.SettingsBase> to provide additional settings functionality for that environment.</span></span> <span data-ttu-id="b114f-113">Windows Forms tabanlı bir uygulamada, tüm uygulama ayarları <xref:System.Configuration.ApplicationSettingsBase> nın sınıftan türetilen bir sınıfta tanımlanması gerekir ve bu da temel sınıfa aşağıdaki işlevleri ekler:</span><span class="sxs-lookup"><span data-stu-id="b114f-113">In a Windows Forms-based application, all application settings must be defined on a class derived from the <xref:System.Configuration.ApplicationSettingsBase> class, which adds the following functionality to the base class:</span></span>

- <span data-ttu-id="b114f-114">Üst düzey yükleme ve kaydetme işlemleri</span><span class="sxs-lookup"><span data-stu-id="b114f-114">Higher-level loading and saving operations</span></span>

- <span data-ttu-id="b114f-115">Kullanıcı kapsamı namına ayarlar için destek</span><span class="sxs-lookup"><span data-stu-id="b114f-115">Support for user-scoped settings</span></span>

- <span data-ttu-id="b114f-116">Kullanıcının ayarlarını önceden tanımlanmış varsayılanlara geri verme</span><span class="sxs-lookup"><span data-stu-id="b114f-116">Reverting a user's settings to the predefined defaults</span></span>

- <span data-ttu-id="b114f-117">Ayarları önceki uygulama sürümünden yükseltme</span><span class="sxs-lookup"><span data-stu-id="b114f-117">Upgrading settings from a previous application version</span></span>

- <span data-ttu-id="b114f-118">Ayarları, değiştirilmeden veya kaydedilmeden önce doğrulama</span><span class="sxs-lookup"><span data-stu-id="b114f-118">Validating settings, either before they are changed or before they are saved</span></span>

 <span data-ttu-id="b114f-119"><xref:System.Configuration> Ayarlar, ad alanı içinde tanımlanan bir dizi öznitelik kullanılarak tanımlanabilir; bunlar Uygulama [Ayarları Öznitelikleri](application-settings-attributes.md)açıklanmıştır.</span><span class="sxs-lookup"><span data-stu-id="b114f-119">The settings can be described using a number of attributes defined within the <xref:System.Configuration> namespace; these are described in [Application Settings Attributes](application-settings-attributes.md).</span></span> <span data-ttu-id="b114f-120">Bir ayar tanımladığınızda, ayarın tüm <xref:System.Configuration.ApplicationScopedSettingAttribute> <xref:System.Configuration.UserScopedSettingAttribute>uygulama için mi yoksa yalnızca geçerli kullanıcı için mi geçerli olduğunu açıklayan bir ayarı veya yalnızca geçerli kullanıcı için mi uygulamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="b114f-120">When you define a setting, you must apply it with either <xref:System.Configuration.ApplicationScopedSettingAttribute> or <xref:System.Configuration.UserScopedSettingAttribute>, which describes whether the setting applies to the entire application or just to the current user.</span></span>

 <span data-ttu-id="b114f-121">Aşağıdaki kod örneği, `BackgroundColor`tek bir ayarı olan özel ayarlar sınıfını tanımlar.</span><span class="sxs-lookup"><span data-stu-id="b114f-121">The following code example defines a custom settings class with a single setting, `BackgroundColor`.</span></span>

 [!code-csharp[ApplicationSettings.Create#1](~/samples/snippets/csharp/VS_Snippets_Winforms/ApplicationSettings.Create/CS/MyAppSettings.cs#1)]
 [!code-vb[ApplicationSettings.Create#1](~/samples/snippets/visualbasic/VS_Snippets_Winforms/ApplicationSettings.Create/VB/MyAppSettings.vb#1)]

## <a name="settings-persistence"></a><span data-ttu-id="b114f-122">Ayarlar Kalıcılığı</span><span class="sxs-lookup"><span data-stu-id="b114f-122">Settings Persistence</span></span>
 <span data-ttu-id="b114f-123">Sınıfın <xref:System.Configuration.ApplicationSettingsBase> kendisi devam etmez veya ayarlarını yüklemez; bu iş ayarlar sağlayıcı, türetilmiştir bir <xref:System.Configuration.SettingsProvider>sınıf düşüyor.</span><span class="sxs-lookup"><span data-stu-id="b114f-123">The <xref:System.Configuration.ApplicationSettingsBase> class does not itself persist or load settings; this job falls to the settings provider, a class that derives from <xref:System.Configuration.SettingsProvider>.</span></span> <span data-ttu-id="b114f-124">Türetilmiş bir <xref:System.Configuration.ApplicationSettingsBase> sınıf <xref:System.Configuration.SettingsProviderAttribute>, sonra varsayılan sağlayıcı, üzerinden <xref:System.Configuration.LocalFileSettingsProvider>bir ayar sağlayıcısı belirtmezse, kullanılır.</span><span class="sxs-lookup"><span data-stu-id="b114f-124">If a derived class of <xref:System.Configuration.ApplicationSettingsBase> does not specify a settings provider through the <xref:System.Configuration.SettingsProviderAttribute>, then the default provider, <xref:System.Configuration.LocalFileSettingsProvider>, is used.</span></span>

 <span data-ttu-id="b114f-125">.NET Framework ile ilk olarak yayımlanan yapılandırma sistemi, yerel bilgisayarın machine.config dosyası veya uygulamanızla birlikte `app.`dağıttığınız bir exe.config dosyası içinde statik uygulama yapılandırma verilerinin sağlanmasını destekler.</span><span class="sxs-lookup"><span data-stu-id="b114f-125">The configuration system that was originally released with the .NET Framework supports providing static application configuration data through either the local computer's machine.config file or within an `app.`exe.config file that you deploy with your application.</span></span> <span data-ttu-id="b114f-126">Sınıf <xref:System.Configuration.LocalFileSettingsProvider> bu yerel desteği aşağıdaki şekillerde genişletir:</span><span class="sxs-lookup"><span data-stu-id="b114f-126">The <xref:System.Configuration.LocalFileSettingsProvider> class expands this native support in the following ways:</span></span>

- <span data-ttu-id="b114f-127">Uygulama kapsamlı ayarlar machine.config veya `app.`exe.config dosyalarında saklanabilir.</span><span class="sxs-lookup"><span data-stu-id="b114f-127">Application-scoped settings can be stored in either the machine.config or `app.`exe.config files.</span></span> <span data-ttu-id="b114f-128">Machine.config her zaman salt `app`okunurken,.exe.config çoğu uygulama için yalnızca okunan güvenlik konularıyla sınırlandırılmıştır.</span><span class="sxs-lookup"><span data-stu-id="b114f-128">Machine.config is always read-only, while `app`.exe.config is restricted by security considerations to read-only for most applications.</span></span>

- <span data-ttu-id="b114f-129">Kullanıcı kapsamı ayarları .exe.config dosyalarında `app`depolanabilir ve bu durumda bunlar statik varsayılan olarak kabul edilir.</span><span class="sxs-lookup"><span data-stu-id="b114f-129">User-scoped settings can be stored in `app`.exe.config files, in which case they are treated as static defaults.</span></span>

- <span data-ttu-id="b114f-130">Varsayılan olmayan kullanıcı kapsamı ayarları, *kullanıcının* uygulamayı şu anda yürüten kişinin kullanıcı adı olduğu yeni bir dosyada, *kullanıcı*.config'de depolanır.</span><span class="sxs-lookup"><span data-stu-id="b114f-130">Non-default user-scoped settings are stored in a new file, *user*.config, where *user* is the user name of the person currently executing the application.</span></span> <span data-ttu-id="b114f-131">Kullanıcı kapsamı nasahip bir ayar için <xref:System.Configuration.DefaultSettingValueAttribute>varsayılan bir değer belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="b114f-131">You can specify a default for a user-scoped setting with <xref:System.Configuration.DefaultSettingValueAttribute>.</span></span> <span data-ttu-id="b114f-132">Kullanıcı kapsamı ayarları uygulama yürütme sırasında `user`sık sık değiştiğinden, .config her zaman okunur/yazar.</span><span class="sxs-lookup"><span data-stu-id="b114f-132">Because user-scoped settings often change during application execution, `user`.config is always read/write.</span></span>

 <span data-ttu-id="b114f-133">Her üç yapılandırma dosyası da ayarları XML biçiminde depolar.</span><span class="sxs-lookup"><span data-stu-id="b114f-133">All three configuration files store settings in XML format.</span></span> <span data-ttu-id="b114f-134">Uygulama kapsamı namına ayarlar için üst `<appSettings>`düzey `<userSettings>` XML öğesi, kullanıcı kapsamı ayarları için kullanılırken.</span><span class="sxs-lookup"><span data-stu-id="b114f-134">The top-level XML element for application-scoped settings is `<appSettings>`, while `<userSettings>` is used for user-scoped settings.</span></span> <span data-ttu-id="b114f-135">Kullanıcı `app`kapsamı namına ayarlar için hem uygulama kapsamı hem de varsayılan ayarları içeren bir .exe.config dosyası aşağıdaki gibi görünür:</span><span class="sxs-lookup"><span data-stu-id="b114f-135">An `app`.exe.config file which contains both application-scoped settings and defaults for user-scoped settings would look like this:</span></span>

```xml
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
        <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
            <section name="WindowsApplication1.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
        </sectionGroup>
        <sectionGroup name="userSettings" type="System.Configuration.UserSettingsGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
            <section name="WindowsApplication1.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" allowExeDefinition="MachineToLocalUser" />
        </sectionGroup>
    </configSections>
    <applicationSettings>
        <WindowsApplication1.Properties.Settings>
            <setting name="Cursor" serializeAs="String">
                <value>Default</value>
            </setting>
            <setting name="DoubleBuffering" serializeAs="String">
                <value>False</value>
            </setting>
        </WindowsApplication1.Properties.Settings>
    </applicationSettings>
    <userSettings>
        <WindowsApplication1.Properties.Settings>
            <setting name="FormTitle" serializeAs="String">
                <value>Form1</value>
            </setting>
            <setting name="FormSize" serializeAs="String">
                <value>595, 536</value>
            </setting>
        </WindowsApplication1.Properties.Settings>
    </userSettings>
</configuration>
```

 <span data-ttu-id="b114f-136">Yapılandırma dosyasının uygulama ayarları bölümündeki öğelerin tanımı için [Bkz. Uygulama Ayarları Şeması.](../../configure-apps/file-schema/application-settings-schema.md)</span><span class="sxs-lookup"><span data-stu-id="b114f-136">For a definition of the elements within the application settings section of a configuration file, see [Application Settings Schema](../../configure-apps/file-schema/application-settings-schema.md).</span></span>

### <a name="settings-bindings"></a><span data-ttu-id="b114f-137">Ayar Bağlamalar</span><span class="sxs-lookup"><span data-stu-id="b114f-137">Settings Bindings</span></span>
 <span data-ttu-id="b114f-138">Uygulama ayarları, ayarlar nesnesi ve bileşenleri arasında ayarlar güncelleştirmelerinin çift yönlü iletişimini sağlamak için Windows Forms veri bağlama mimarisini kullanır.</span><span class="sxs-lookup"><span data-stu-id="b114f-138">Application settings uses the Windows Forms data binding architecture to provide two-way communication of settings updates between the settings object and components.</span></span> <span data-ttu-id="b114f-139">Uygulama ayarları oluşturmak ve bunları bileşen özelliklerine atamak için Visual Studio'yu kullanırsanız, bu bağlamalar otomatik olarak oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="b114f-139">If you use Visual Studio to create application settings and assign them to component properties, these bindings are generated automatically.</span></span>

 <span data-ttu-id="b114f-140">Bir uygulama ayarını yalnızca <xref:System.Windows.Forms.IBindableComponent> arabirimi destekleyen bir bileşene bağlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="b114f-140">You can only bind an application setting to a component that supports the <xref:System.Windows.Forms.IBindableComponent> interface.</span></span> <span data-ttu-id="b114f-141">Ayrıca, bileşenin belirli bir bağlı özellik için bir değişiklik olayı uygulaması veya <xref:System.ComponentModel.INotifyPropertyChanged> uygulama ayarlarını özelliğin arabirim üzerinden değiştiğini bildirmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="b114f-141">Also, the component must implement a change event for a specific bound property, or notify application settings that the property has changed through the <xref:System.ComponentModel.INotifyPropertyChanged> interface.</span></span> <span data-ttu-id="b114f-142">Bileşen uygulanmazsa <xref:System.Windows.Forms.IBindableComponent> ve Visual Studio aracılığıyla bağlayıcı iseniz, bağlı özellikleri ilk kez ayarlanır, ancak güncelleştirmez.</span><span class="sxs-lookup"><span data-stu-id="b114f-142">If the component does not implement <xref:System.Windows.Forms.IBindableComponent> and you are binding through Visual Studio, the bound properties will be set the first time, but will not update.</span></span> <span data-ttu-id="b114f-143">Bileşen özellik değişikliği <xref:System.Windows.Forms.IBindableComponent> bildirimlerini uygular ancak desteklemiyorsa, özellik değiştirildiğinde bağlama ayarlar dosyasında güncelleştirmez.</span><span class="sxs-lookup"><span data-stu-id="b114f-143">If the component implements <xref:System.Windows.Forms.IBindableComponent> but does not support property change notifications, the binding will not update in the settings file when the property is changed.</span></span>

 <span data-ttu-id="b114f-144">Bazı Windows Forms bileşenleri, örneğin, <xref:System.Windows.Forms.ToolStripItem>ayarlar bağlamaları desteklemez.</span><span class="sxs-lookup"><span data-stu-id="b114f-144">Some Windows Forms components, such as <xref:System.Windows.Forms.ToolStripItem>, do not support settings bindings.</span></span>

### <a name="settings-serialization"></a><span data-ttu-id="b114f-145">Ayarlar Serileştirme</span><span class="sxs-lookup"><span data-stu-id="b114f-145">Settings Serialization</span></span>
 <span data-ttu-id="b114f-146">Ayarları <xref:System.Configuration.LocalFileSettingsProvider> diske kaydetmek gerektiğinde, aşağıdaki eylemleri gerçekleştirir:</span><span class="sxs-lookup"><span data-stu-id="b114f-146">When <xref:System.Configuration.LocalFileSettingsProvider> must save settings to disk, it performs the following actions:</span></span>

1. <span data-ttu-id="b114f-147">Türemiş sınıfınızda <xref:System.Configuration.ApplicationSettingsBase> tanımlanan tüm özellikleri incelemek için yansımayı kullanır, <xref:System.Configuration.UserScopedSettingAttribute>bu özellikleri ya da <xref:System.Configuration.ApplicationScopedSettingAttribute> .</span><span class="sxs-lookup"><span data-stu-id="b114f-147">Uses reflection to examine all of the properties defined on your <xref:System.Configuration.ApplicationSettingsBase> derived class, finding those that are applied with either <xref:System.Configuration.ApplicationScopedSettingAttribute> or <xref:System.Configuration.UserScopedSettingAttribute>.</span></span>

2. <span data-ttu-id="b114f-148">Özelliği diske seri hale getirir.</span><span class="sxs-lookup"><span data-stu-id="b114f-148">Serializes the property to disk.</span></span> <span data-ttu-id="b114f-149">İlk olarak, türün <xref:System.ComponentModel.TypeConverter.ConvertFromString%2A> ilişkili <xref:System.ComponentModel.TypeConverter>veya ilişkili arama çalışır. <xref:System.ComponentModel.TypeConverter.ConvertToString%2A></span><span class="sxs-lookup"><span data-stu-id="b114f-149">It first attempts to call the <xref:System.ComponentModel.TypeConverter.ConvertToString%2A> or <xref:System.ComponentModel.TypeConverter.ConvertFromString%2A> on the type's associated <xref:System.ComponentModel.TypeConverter>.</span></span> <span data-ttu-id="b114f-150">Bu başarılı olmazsa, bunun yerine XML serileştirme kullanır.</span><span class="sxs-lookup"><span data-stu-id="b114f-150">If this does not succeed, it uses XML serialization instead.</span></span>

3. <span data-ttu-id="b114f-151">Ayarın özniteliğine göre hangi ayarların hangi dosyalara gideceğini belirler.</span><span class="sxs-lookup"><span data-stu-id="b114f-151">Determines which settings go in which files, based on the setting's attribute.</span></span>

 <span data-ttu-id="b114f-152">Kendi ayarlar sınıfını uygularsanız, numaralandırmayı kullanarak ikili veya özel serileştirme <xref:System.Configuration.SettingsSerializeAs> ayarını işaretlemek için bu ayarı kullanabilirsiniz. <xref:System.Configuration.SettingsSerializeAsAttribute></span><span class="sxs-lookup"><span data-stu-id="b114f-152">If you implement your own settings class, you can use the <xref:System.Configuration.SettingsSerializeAsAttribute> to mark a setting for either binary or custom serialization using the <xref:System.Configuration.SettingsSerializeAs> enumeration.</span></span> <span data-ttu-id="b114f-153">Kodda kendi ayarlar sınıfOluşturma hakkında daha fazla bilgi için [bkz: Uygulama Ayarları oluştur](how-to-create-application-settings.md).</span><span class="sxs-lookup"><span data-stu-id="b114f-153">For more information on creating your own settings class in code, see [How to: Create Application Settings](how-to-create-application-settings.md).</span></span>

### <a name="settings-file-locations"></a><span data-ttu-id="b114f-154">Ayarlar Dosya Konumları</span><span class="sxs-lookup"><span data-stu-id="b114f-154">Settings File Locations</span></span>
 <span data-ttu-id="b114f-155">`app`.exe.config ve *kullanıcı*.config dosyalarının konumu, uygulamanın nasıl yüklendiğinde göre farklılık gösterir.</span><span class="sxs-lookup"><span data-stu-id="b114f-155">The location of the `app`.exe.config and *user*.config files will differ based on how the application is installed.</span></span> <span data-ttu-id="b114f-156">Yerel bilgisayara kopyalanan Windows Forms tabanlı bir `app`uygulama için .exe.config, uygulamanın ana yürütülebilir dosyasının temel diziniyle aynı dizinde yer alacaktır ve <xref:System.Windows.Forms.Application.LocalUserAppDataPath%2A?displayProperty=nameWithType> *kullanıcı*.config özellik tarafından belirtilen konumda yer alacaktır.</span><span class="sxs-lookup"><span data-stu-id="b114f-156">For a Windows Forms-based application copied onto the local computer, `app`.exe.config will reside in the same directory as the base directory of the application's main executable file, and *user*.config will reside in the location specified by the <xref:System.Windows.Forms.Application.LocalUserAppDataPath%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="b114f-157">ClickOnce ile yüklenen bir uygulama için, bu dosyaların her ikisi de ClickOnce Veri Dizini'nde %InstallRoot%\Documents and Settings\\kullanıcı*adı*\Yerel Ayarlar altında bulunur.</span><span class="sxs-lookup"><span data-stu-id="b114f-157">For an application installed by means of ClickOnce, both of these files will reside in the ClickOnce Data Directory underneath %InstallRoot%\Documents and Settings\\*username*\Local Settings.</span></span>

 <span data-ttu-id="b114f-158">Bir kullanıcı, bir etki alanındaki diğer bilgisayarları kullanırken farklı Windows ve uygulama ayarlarını tanımlamasına olanak tanıyan dolaşım profillerini etkinleştirmişse, bu dosyaların depolama konumu biraz farklıdır.</span><span class="sxs-lookup"><span data-stu-id="b114f-158">The storage location of these files is slightly different if a user has enabled roaming profiles, which enables a user to define different Windows and application settings when they are using other computers within a domain.</span></span> <span data-ttu-id="b114f-159">Bu durumda, clickonce uygulamaları ve ClickOnce olmayan uygulamalar `app`%InstallRoot%\Documents *user*and Settings\\kullanıcı*adı*\Application Data altında depolanan .exe.config ve kullanıcı .config dosyalarına sahip olacaktır.</span><span class="sxs-lookup"><span data-stu-id="b114f-159">In that case, both ClickOnce applications and non-ClickOnce applications will have their `app`.exe.config and *user*.config files stored under %InstallRoot%\Documents and Settings\\*username*\Application Data.</span></span>

 <span data-ttu-id="b114f-160">Uygulama Ayarları özelliğinin yeni dağıtım teknolojisiyle nasıl çalıştığı hakkında daha fazla bilgi için [ClickOnce ve Uygulama Ayarları'na](/visualstudio/deployment/clickonce-and-application-settings)bakın.</span><span class="sxs-lookup"><span data-stu-id="b114f-160">For more information about how the Application Settings feature works with the new deployment technology, see [ClickOnce and Application Settings](/visualstudio/deployment/clickonce-and-application-settings).</span></span> <span data-ttu-id="b114f-161">ClickOnce Veri Dizini hakkında daha fazla bilgi için [ClickOnce Uygulamalarında Yerel ve Uzak Verilere Erişim'e](/visualstudio/deployment/accessing-local-and-remote-data-in-clickonce-applications)bakın.</span><span class="sxs-lookup"><span data-stu-id="b114f-161">For more information about the ClickOnce Data Directory, see [Accessing Local and Remote Data in ClickOnce Applications](/visualstudio/deployment/accessing-local-and-remote-data-in-clickonce-applications).</span></span>

## <a name="application-settings-and-security"></a><span data-ttu-id="b114f-162">Uygulama Ayarları ve Güvenlik</span><span class="sxs-lookup"><span data-stu-id="b114f-162">Application Settings and Security</span></span>
 <span data-ttu-id="b114f-163">Uygulama ayarları, Internet veya intranet üzerinden barındırılan Windows Forms uygulamaları için varsayılan olan kısıtlı bir ortam olan kısmi güven de çalışacak şekilde tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="b114f-163">Application settings are designed to work in partial trust, a restricted environment that is the default for Windows Forms applications hosted over the Internet or an intranet.</span></span> <span data-ttu-id="b114f-164">Varsayılan ayarlar sağlayıcısıyla uygulama ayarlarını kullanmak için kısmi güvenin ötesinde özel izinler gerekmez.</span><span class="sxs-lookup"><span data-stu-id="b114f-164">No special permissions beyond partial trust are needed to use application settings with the default settings provider.</span></span>

 <span data-ttu-id="b114f-165">Uygulama ayarları ClickOnce uygulamasında `user`kullanıldığında,.config dosyası ClickOnce veri dizininde depolanır.</span><span class="sxs-lookup"><span data-stu-id="b114f-165">When application settings are used in a ClickOnce application, the `user`.config file is stored in the ClickOnce data directory.</span></span> <span data-ttu-id="b114f-166">Uygulamanın `user`.config dosyasının boyutu ClickOnce tarafından ayarlanan veri dizini kotasını aşamaz.</span><span class="sxs-lookup"><span data-stu-id="b114f-166">The size of the application's `user`.config file cannot exceed the data directory quota set by ClickOnce.</span></span> <span data-ttu-id="b114f-167">Daha fazla bilgi için [ClickOnce ve Uygulama Ayarları'na](/visualstudio/deployment/clickonce-and-application-settings)bakın.</span><span class="sxs-lookup"><span data-stu-id="b114f-167">For more information, see [ClickOnce and Application Settings](/visualstudio/deployment/clickonce-and-application-settings).</span></span>

## <a name="custom-settings-providers"></a><span data-ttu-id="b114f-168">Özel Ayarlar Sağlayıcıları</span><span class="sxs-lookup"><span data-stu-id="b114f-168">Custom Settings Providers</span></span>
 <span data-ttu-id="b114f-169">Uygulama Ayarları mimarisinde, uygulama ayarları sarıcı sınıfı arasında gevşek bir <xref:System.Configuration.ApplicationSettingsBase>bağlantı vardır, türetilmiş , <xref:System.Configuration.SettingsProvider>ve ilişkili ayarlar sağlayıcı veya sağlayıcılar, türetilmiştir.</span><span class="sxs-lookup"><span data-stu-id="b114f-169">In the Application Settings architecture, there is a loose coupling between the applications settings wrapper class, derived from <xref:System.Configuration.ApplicationSettingsBase>, and the associated settings provider or providers, derived from <xref:System.Configuration.SettingsProvider>.</span></span> <span data-ttu-id="b114f-170">Bu ilişkilendirme yalnızca <xref:System.Configuration.SettingsProviderAttribute> sarıcı sınıfına uygulanan veya bireysel özellikleri yle tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="b114f-170">This association is defined only by the <xref:System.Configuration.SettingsProviderAttribute> applied to the wrapper class or its individual properties.</span></span> <span data-ttu-id="b114f-171">Bir ayar sağlayıcısı açıkça belirtilmemişse, <xref:System.Configuration.LocalFileSettingsProvider>varsayılan sağlayıcı kullanılır.</span><span class="sxs-lookup"><span data-stu-id="b114f-171">If a settings provider is not explicitly specified, the default provider, <xref:System.Configuration.LocalFileSettingsProvider>, is used.</span></span> <span data-ttu-id="b114f-172">Sonuç olarak, bu mimari özel ayarlar sağlayıcıları oluşturmayı ve kullanmayı destekler.</span><span class="sxs-lookup"><span data-stu-id="b114f-172">As a result, this architecture supports creating and using custom settings providers.</span></span>

 <span data-ttu-id="b114f-173">Örneğin, tüm ayarları verileri bir `SqlSettingsProvider`Microsoft SQL Server veritabanında depolayacak bir sağlayıcı olan bir sağlayıcı geliştirmek ve kullanmak istediğinizi varsayalım.</span><span class="sxs-lookup"><span data-stu-id="b114f-173">For example, suppose that you want to develop and use `SqlSettingsProvider`, a provider that will store all settings data in a Microsoft SQL Server database.</span></span> <span data-ttu-id="b114f-174">Türetilmiş sınıfınız <xref:System.Configuration.SettingsProvider>bu bilgileri `Initialize` kendi yönteminde bir <xref:System.Collections.Specialized.NameValueCollection?displayProperty=nameWithType>tür parametresi olarak alır.</span><span class="sxs-lookup"><span data-stu-id="b114f-174">Your <xref:System.Configuration.SettingsProvider>-derived class would receive this information in its `Initialize` method as a parameter of type <xref:System.Collections.Specialized.NameValueCollection?displayProperty=nameWithType>.</span></span> <span data-ttu-id="b114f-175">Daha sonra, <xref:System.Configuration.SettingsProvider.GetPropertyValues%2A> ayarlarınızı veri deposundan almak ve <xref:System.Configuration.SettingsProvider.SetPropertyValues%2A> bunları kaydetmek için bu yöntemi uygularsınız.</span><span class="sxs-lookup"><span data-stu-id="b114f-175">You would then implement the <xref:System.Configuration.SettingsProvider.GetPropertyValues%2A> method to retrieve your settings from the data store, and <xref:System.Configuration.SettingsProvider.SetPropertyValues%2A> to save them.</span></span> <span data-ttu-id="b114f-176">Sağlayıcınız, <xref:System.Configuration.SettingsPropertyCollection> sağlanan <xref:System.Configuration.SettingsProvider.GetPropertyValues%2A> özelliğin adını, türünü ve kapsamını ve söz le ilgili tanımlanan diğer ayarları belirlemek için kullanabilir.</span><span class="sxs-lookup"><span data-stu-id="b114f-176">Your provider can use the <xref:System.Configuration.SettingsPropertyCollection> supplied to <xref:System.Configuration.SettingsProvider.GetPropertyValues%2A> to determine the property's name, type, and scope, as well as any other settings attributes defined for that property.</span></span>

 <span data-ttu-id="b114f-177">Sağlayıcınızın, uygulamaları açık olmayan bir özellik ve bir yöntem uygulaması gerekir.</span><span class="sxs-lookup"><span data-stu-id="b114f-177">Your provider will need to implement one property and one method whose implementations may not be obvious.</span></span> <span data-ttu-id="b114f-178">Özellik <xref:System.Configuration.SettingsProvider.ApplicationName%2A> soyut bir <xref:System.Configuration.SettingsProvider>özelliktir; aşağıdakileri döndürmek için programlamanız gerekir:</span><span class="sxs-lookup"><span data-stu-id="b114f-178">The <xref:System.Configuration.SettingsProvider.ApplicationName%2A> property is an abstract property of <xref:System.Configuration.SettingsProvider>; you should program it to return the following:</span></span>

 [!code-csharp[ApplicationSettings.Architecture#2](~/samples/snippets/csharp/VS_Snippets_Winforms/ApplicationSettings.Architecture/CS/DummyClass.cs#2)]
 [!code-vb[ApplicationSettings.Architecture#2](~/samples/snippets/visualbasic/VS_Snippets_Winforms/ApplicationSettings.Architecture/VB/DummyProviderClass.vb#2)]

 <span data-ttu-id="b114f-179">Türemiş sınıfınız `Initialize` da hiçbir bağımsız değişken alır ve hiçbir değer döndürür bir yöntem uygulaması gerekir.</span><span class="sxs-lookup"><span data-stu-id="b114f-179">Your derived class must also implement an `Initialize` method that takes no arguments and returns no value.</span></span> <span data-ttu-id="b114f-180">Bu yöntem ile <xref:System.Configuration.SettingsProvider>tanımlanmaz.</span><span class="sxs-lookup"><span data-stu-id="b114f-180">This method is not defined by <xref:System.Configuration.SettingsProvider>.</span></span>

 <span data-ttu-id="b114f-181">Son olarak, <xref:System.Configuration.IApplicationSettingsProvider> ayarları yenilemek, ayarları varsayılanlarına geri getirmek ve ayarları bir uygulama sürümünden diğerine yükseltmek için sağlayıcınıza destek sağlarsınız.</span><span class="sxs-lookup"><span data-stu-id="b114f-181">Finally, you implement <xref:System.Configuration.IApplicationSettingsProvider> on your provider to provide support for refreshing settings, reverting settings to their defaults, and upgrading settings from one application version to another.</span></span>

 <span data-ttu-id="b114f-182">Sağlayıcınızı uyguladıktan ve derledikten sonra, ayarlar sınıfınıza varsayılan yerine bu sağlayıcıyı kullanması için talimat vermeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="b114f-182">Once you have implemented and compiled your provider, you need to instruct your settings class to use this provider instead of the default.</span></span> <span data-ttu-id="b114f-183">Bunu . <xref:System.Configuration.SettingsProviderAttribute></span><span class="sxs-lookup"><span data-stu-id="b114f-183">You accomplish this through the <xref:System.Configuration.SettingsProviderAttribute>.</span></span> <span data-ttu-id="b114f-184">Tüm ayarlar sınıfına uygulanırsa, sağlayıcı sınıfın tanımladığı her ayar için kullanılır; tek tek ayarlara uygulanırsa, Uygulama Ayarları mimarisi yalnızca <xref:System.Configuration.LocalFileSettingsProvider> bu ayarlar için bu sağlayıcıyı kullanır ve geri kalanı için kullanır.</span><span class="sxs-lookup"><span data-stu-id="b114f-184">If applied to an entire settings class, the provider is used for each setting that the class defines; if applied to individual settings, Application Settings architecture uses that provider for those settings only, and uses <xref:System.Configuration.LocalFileSettingsProvider> for the rest.</span></span> <span data-ttu-id="b114f-185">Aşağıdaki kod örneği, ayarlar sınıfına özel sağlayıcınızı kullanmasını nasıl talimatı verilebildiğini gösterir.</span><span class="sxs-lookup"><span data-stu-id="b114f-185">The following code example shows how to instruct the settings class to use your custom provider.</span></span>

 [!code-csharp[ApplicationSettings.Architecture#1](~/samples/snippets/csharp/VS_Snippets_Winforms/ApplicationSettings.Architecture/CS/DummyClass.cs#1)]
 [!code-vb[ApplicationSettings.Architecture#1](~/samples/snippets/visualbasic/VS_Snippets_Winforms/ApplicationSettings.Architecture/VB/DummyProviderClass.vb#1)]

 <span data-ttu-id="b114f-186">Bir sağlayıcı aynı anda birden çok iş parçacığı ndan çağrılabilir, ancak her zaman aynı depolama konumuna yazar; bu nedenle, Uygulama Ayarları mimarisi sağlayıcı sınıfınızın yalnızca tek bir örneğini anında alacaktır.</span><span class="sxs-lookup"><span data-stu-id="b114f-186">A provider may be called from multiple threads simultaneously, but it will always write to the same storage location; therefore, the Application Settings architecture will only ever instantiate a single instance of your provider class.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="b114f-187">Sağlayıcınızın iş parçacığı için güvenli olduğundan ve yapılandırma dosyalarına yazmak için aynı anda yalnızca bir iş parçacığına izin vermelisiniz.</span><span class="sxs-lookup"><span data-stu-id="b114f-187">You should ensure that your provider is thread-safe, and only allows one thread at a time to write to the configuration files.</span></span>

 <span data-ttu-id="b114f-188">Sağlayıcınızın <xref:System.Configuration?displayProperty=nameWithType> ad alanında tanımlanan tüm ayarları desteklemesi gerekmez, ancak en az destek <xref:System.Configuration.ApplicationScopedSettingAttribute> <xref:System.Configuration.UserScopedSettingAttribute>ve desteklemesi <xref:System.Configuration.DefaultSettingValueAttribute>gerekir.</span><span class="sxs-lookup"><span data-stu-id="b114f-188">Your provider does not need to support all of the settings attributes defined in the <xref:System.Configuration?displayProperty=nameWithType> namespace, though it must at a minimum support <xref:System.Configuration.ApplicationScopedSettingAttribute> and <xref:System.Configuration.UserScopedSettingAttribute>, and should also support <xref:System.Configuration.DefaultSettingValueAttribute>.</span></span> <span data-ttu-id="b114f-189">Desteklemediği bu öznitelikler için sağlayıcınız bildirimde bulunulmadan başarısız olmalıdır; bir istisna atmamalıdır.</span><span class="sxs-lookup"><span data-stu-id="b114f-189">For those attributes that it does not support, your provider should just fail without notification; it should not throw an exception.</span></span> <span data-ttu-id="b114f-190">Ayarlar sınıfı geçersiz bir öznitelikler birleşimi kullanıyorsa, <xref:System.Configuration.ApplicationScopedSettingAttribute> ancak <xref:System.Configuration.UserScopedSettingAttribute> (uygulama ve aynı ayara gibi) sağlayıcınız bir özel durum oluşturmalı ve işlemi durdurmalıdır.</span><span class="sxs-lookup"><span data-stu-id="b114f-190">If the settings class uses an invalid combination of attributes, however — such as applying <xref:System.Configuration.ApplicationScopedSettingAttribute> and <xref:System.Configuration.UserScopedSettingAttribute> to the same setting — your provider should throw an exception and cease operation.</span></span>

## <a name="see-also"></a><span data-ttu-id="b114f-191">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="b114f-191">See also</span></span>

- <xref:System.Configuration.ApplicationSettingsBase>
- <xref:System.Configuration.SettingsProvider>
- <xref:System.Configuration.LocalFileSettingsProvider>
- [<span data-ttu-id="b114f-192">Uygulama Ayarlarına Genel Bakış</span><span class="sxs-lookup"><span data-stu-id="b114f-192">Application Settings Overview</span></span>](application-settings-overview.md)
- [<span data-ttu-id="b114f-193">Özel Denetimler için Uygulama Ayarları</span><span class="sxs-lookup"><span data-stu-id="b114f-193">Application Settings for Custom Controls</span></span>](application-settings-for-custom-controls.md)
- [<span data-ttu-id="b114f-194">ClickOnce ve Uygulama Ayarları</span><span class="sxs-lookup"><span data-stu-id="b114f-194">ClickOnce and Application Settings</span></span>](/visualstudio/deployment/clickonce-and-application-settings)
- [<span data-ttu-id="b114f-195">Uygulama Ayarları Şeması</span><span class="sxs-lookup"><span data-stu-id="b114f-195">Application Settings Schema</span></span>](../../configure-apps/file-schema/application-settings-schema.md)
