---
title: Devamlılık Görevlerini Kullanarak Görevleri Birbirine Bağlama
description: .NET 'teki devamlılık görevlerini kullanarak görev zincirini öğrenin. Devamlılık görevi, başka bir görev tarafından çağrılan zaman uyumsuz bir görevdir.
ms.date: 02/11/2019
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- tasks, continuations
ms.assetid: 0b45e9a2-de28-46ce-8212-1817280ed42d
ms.openlocfilehash: 90317f3db5bcf2371494e14a1ca1dd16d049e0bd
ms.sourcegitcommit: 7137e12f54c4e83a94ae43ec320f8cf59c1772ea
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 06/10/2020
ms.locfileid: "84662478"
---
# <a name="chaining-tasks-by-using-continuation-tasks"></a><span data-ttu-id="6ee2a-104">Devamlılık Görevlerini Kullanarak Görevleri Birbirine Bağlama</span><span class="sxs-lookup"><span data-stu-id="6ee2a-104">Chaining Tasks by Using Continuation Tasks</span></span>
<span data-ttu-id="6ee2a-105">Zaman uyumsuz programlamada, bir zaman uyumsuz işlem için, tamamlandığında ikinci bir işlemi çağırmak ve verileri iletmek için yaygındır.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-105">In asynchronous programming, it is common for one asynchronous operation, on completion, to invoke a second operation and pass data to it.</span></span> <span data-ttu-id="6ee2a-106">Geleneksel olarak, devamlılıklar geri çağırma yöntemleri kullanılarak yapılır.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-106">Traditionally, continuations have been done by using callback methods.</span></span> <span data-ttu-id="6ee2a-107">Görev paralel kitaplığında, aynı işlevler *devamlılık görevleri*tarafından sağlanır.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-107">In the Task Parallel Library, the same functionality is provided by *continuation tasks*.</span></span> <span data-ttu-id="6ee2a-108">Devamlılık görevi (sadece devamlılık olarak da bilinir *), öncül*olarak bilinen başka bir görev tarafından çağrılan zaman uyumsuz bir görevdir.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-108">A continuation task (also known just as a continuation) is an asynchronous task that is invoked by another task, which is known as the *antecedent*, when the antecedent finishes.</span></span>  
  
 <span data-ttu-id="6ee2a-109">Devamlılıkların kullanımı nispeten kolaydır, ancak bu, güçlü ve esnektir.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-109">Continuations are relatively easy to use, but are nevertheless powerful and flexible.</span></span> <span data-ttu-id="6ee2a-110">Örneğin, şunları yapabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="6ee2a-110">For example, you can:</span></span>  
  
- <span data-ttu-id="6ee2a-111">Verileri öncül bilgisayardan devamlıya geçirin.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-111">Pass data from the antecedent to the continuation.</span></span>  
  
- <span data-ttu-id="6ee2a-112">Devamlılığın çağrılacağını veya çağrılmaması gereken kesin koşulları belirtin.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-112">Specify the precise conditions under which the continuation will be invoked or not invoked.</span></span>  
  
- <span data-ttu-id="6ee2a-113">Çalışmaya başlamadan önce veya çalışmaya devam etmeden önce bir devamlılığın iptal edildiğini yapın.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-113">Cancel a continuation either before it starts or cooperatively as it is running.</span></span>  
  
- <span data-ttu-id="6ee2a-114">Devamlılığın nasıl zamanlanması gerektiği hakkında ipuçları sağlayın.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-114">Provide hints about how the continuation should be scheduled.</span></span>  
  
- <span data-ttu-id="6ee2a-115">Aynı öncül öğesinden birden çok devamlılık çağırın.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-115">Invoke multiple continuations from the same antecedent.</span></span>  
  
- <span data-ttu-id="6ee2a-116">Bir veya birden çok öncüllerin tamamlandıktan sonra bir devamlılık çağırın.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-116">Invoke one continuation when all or any one of multiple antecedents complete.</span></span>  
  
- <span data-ttu-id="6ee2a-117">Zincirden sonra herhangi bir rastgele uzunluğa kadar zincir devamlılıkları.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-117">Chain continuations one after another to any arbitrary length.</span></span>  
  
- <span data-ttu-id="6ee2a-118">Öncül tarafından oluşturulan özel durumları işlemek için devamlılık kullanın.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-118">Use a continuation to handle exceptions thrown by the antecedent.</span></span>  
  
## <a name="about-continuations"></a><span data-ttu-id="6ee2a-119">Devamlılıklar hakkında</span><span class="sxs-lookup"><span data-stu-id="6ee2a-119">About continuations</span></span>  
 <span data-ttu-id="6ee2a-120">Devamlılık, durumunda oluşturulan bir görevdir <xref:System.Threading.Tasks.TaskStatus.WaitingForActivation> .</span><span class="sxs-lookup"><span data-stu-id="6ee2a-120">A continuation is a task that is created in the <xref:System.Threading.Tasks.TaskStatus.WaitingForActivation> state.</span></span> <span data-ttu-id="6ee2a-121">Öncül görevi veya görevleri tamamlandığında otomatik olarak etkinleştirilir.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-121">It is activated automatically when its antecedent task or tasks complete.</span></span> <span data-ttu-id="6ee2a-122"><xref:System.Threading.Tasks.Task.Start%2A?displayProperty=nameWithType>Kullanıcı kodunda devamlılığın çağrılması bir <xref:System.InvalidOperationException?displayProperty=nameWithType> özel durum oluşturur.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-122">Calling <xref:System.Threading.Tasks.Task.Start%2A?displayProperty=nameWithType> on a continuation in user code throws an <xref:System.InvalidOperationException?displayProperty=nameWithType> exception.</span></span>  
  
 <span data-ttu-id="6ee2a-123">Devamlılık kendi kendisidir <xref:System.Threading.Tasks.Task> ve başlatıldığı iş parçacığını engellemez.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-123">A continuation is itself a <xref:System.Threading.Tasks.Task> and does not block the thread on which it is started.</span></span> <span data-ttu-id="6ee2a-124"><xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType>Devamlılık görevi bitene kadar engellemek için yöntemini çağırın.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-124">Call the <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> method to block until the continuation task finishes.</span></span>  
  
## <a name="creating-a-continuation-for-a-single-antecedent"></a><span data-ttu-id="6ee2a-125">Tek bir öncül için devamlılık oluşturma</span><span class="sxs-lookup"><span data-stu-id="6ee2a-125">Creating a continuation for a single antecedent</span></span>  
 <span data-ttu-id="6ee2a-126">Yöntemini çağırarak, öncül öğesinin tamamlandığında yürütülen bir devamlılık oluşturursunuz <xref:System.Threading.Tasks.Task.ContinueWith%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="6ee2a-126">You create a continuation that executes when its antecedent has completed by calling the <xref:System.Threading.Tasks.Task.ContinueWith%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="6ee2a-127">Aşağıdaki örnekte temel desenler gösterilmektedir (açıklık için özel durum işleme atlanır).</span><span class="sxs-lookup"><span data-stu-id="6ee2a-127">The following example shows the basic pattern (for clarity, exception handling is omitted).</span></span> <span data-ttu-id="6ee2a-128">Bu, `taskA` <xref:System.DayOfWeek> haftanın geçerli gününün adını belirten bir nesne döndüren bir öncül görevini yürütür.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-128">It executes an antecedent task, `taskA`, that returns a <xref:System.DayOfWeek> object that indicates the name of the current day of the week.</span></span> <span data-ttu-id="6ee2a-129">Öncül tamamlandığında, devamlılık görevi, öncül öğesini `continuation` geçirdiğini ve sonucunu içeren bir dize görüntüler.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-129">When the antecedent completes, the continuation task, `continuation`, is passed the antecedent and displays a string that includes its result.</span></span>

> [!NOTE]
> <span data-ttu-id="6ee2a-130">Bu makaledeki C# örnekleri, `async` yöntemi üzerindeki değiştiriciyi kullanır `Main` .</span><span class="sxs-lookup"><span data-stu-id="6ee2a-130">The C# samples in this article make use of the `async` modifier on the `Main` method.</span></span> <span data-ttu-id="6ee2a-131">Bu özellik C# 7,1 ve üzeri sürümlerde kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-131">That feature is available in C# 7.1 and later.</span></span> <span data-ttu-id="6ee2a-132">Önceki sürümler [`CS5001`](../../csharp/misc/cs5001.md) Bu örnek kodu derlerken oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-132">Previous versions generate [`CS5001`](../../csharp/misc/cs5001.md) when compiling this sample code.</span></span> <span data-ttu-id="6ee2a-133">Dil sürümünü C# 7,1 veya daha yeni bir sürüme ayarlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-133">You'll need to set the language version to C# 7.1 or newer.</span></span> <span data-ttu-id="6ee2a-134">Dil sürümünü [yapılandırma sürümünü yapılandırma](../../csharp/language-reference/configure-language-version.md)makalesindeki makaleyi yapılandırma hakkında bilgi edinebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-134">You can learn how to configure the language version in the article on [configure language version](../../csharp/language-reference/configure-language-version.md).</span></span>
  
 [!code-csharp[TPL_Continuations#1](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/simple1.cs#1)]
 [!code-vb[TPL_Continuations#1](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/simple1.vb#1)]  
  
## <a name="creating-a-continuation-for-multiple-antecedents"></a><span data-ttu-id="6ee2a-135">Birden çok öncüllerin için devamlılık oluşturma</span><span class="sxs-lookup"><span data-stu-id="6ee2a-135">Creating a continuation for multiple antecedents</span></span>  
 <span data-ttu-id="6ee2a-136">Ayrıca, bir görev grubunun herhangi biri veya tümü tamamlandığında çalıştırılacak bir devamlılık oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-136">You can also create a continuation that will run when any or all of a group of tasks has completed.</span></span> <span data-ttu-id="6ee2a-137">Tüm öncül görevler tamamlandığında bir devamlılık yürütmek için statik ( `Shared` Visual Basic) <xref:System.Threading.Tasks.Task.WhenAll%2A?displayProperty=nameWithType> yöntemi veya örnek <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAll%2A?displayProperty=nameWithType> yöntemi çağırın.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-137">To execute a continuation when all antecedent tasks have completed, you call the static (`Shared` in Visual Basic) <xref:System.Threading.Tasks.Task.WhenAll%2A?displayProperty=nameWithType> method or the instance <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAll%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="6ee2a-138">Öncül görevlerden herhangi biri tamamlandığında bir devamlılık yürütmek için statik ( `Shared` Visual Basic) <xref:System.Threading.Tasks.Task.WhenAny%2A?displayProperty=nameWithType> yöntemi veya örnek <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAny%2A?displayProperty=nameWithType> yöntemi çağırın.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-138">To execute a continuation when any of the antecedent tasks has completed, you call the static (`Shared` in Visual Basic) <xref:System.Threading.Tasks.Task.WhenAny%2A?displayProperty=nameWithType> method or the instance <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAny%2A?displayProperty=nameWithType> method.</span></span>  
  
 <span data-ttu-id="6ee2a-139"><xref:System.Threading.Tasks.Task.WhenAll%2A?displayProperty=nameWithType>Ve <xref:System.Threading.Tasks.Task.WhenAny%2A?displayProperty=nameWithType> aşırı yüklerini çağıran iş parçacığını engellemediğine unutmayın.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-139">Note that calls to the <xref:System.Threading.Tasks.Task.WhenAll%2A?displayProperty=nameWithType> and <xref:System.Threading.Tasks.Task.WhenAny%2A?displayProperty=nameWithType> overloads do not block the calling thread.</span></span>  <span data-ttu-id="6ee2a-140">Ancak, <xref:System.Threading.Tasks.Task.WhenAll%28System.Collections.Generic.IEnumerable%7BSystem.Threading.Tasks.Task%7D%29?displayProperty=nameWithType> <xref:System.Threading.Tasks.Task.WhenAll%28System.Threading.Tasks.Task%5B%5D%29?displayProperty=nameWithType> <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> çağıran iş parçacığını engelleyen döndürülen özelliği almak için ve yöntemleri hariç tüm ve yöntemlerini çağırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-140">However, you typically call all but the <xref:System.Threading.Tasks.Task.WhenAll%28System.Collections.Generic.IEnumerable%7BSystem.Threading.Tasks.Task%7D%29?displayProperty=nameWithType> and  <xref:System.Threading.Tasks.Task.WhenAll%28System.Threading.Tasks.Task%5B%5D%29?displayProperty=nameWithType> methods to retrieve the returned  <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property, which does block the calling thread.</span></span>  
  
 <span data-ttu-id="6ee2a-141">Aşağıdaki örnek, <xref:System.Threading.Tasks.Task.WhenAll%28System.Collections.Generic.IEnumerable%7BSystem.Threading.Tasks.Task%7D%29?displayProperty=nameWithType> 10 öncül görevlerinin sonuçlarını yansıtan bir devamlılık görevi oluşturmak için yöntemini çağırır.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-141">The following example calls the <xref:System.Threading.Tasks.Task.WhenAll%28System.Collections.Generic.IEnumerable%7BSystem.Threading.Tasks.Task%7D%29?displayProperty=nameWithType> method to create a continuation task that reflects the results of its 10 antecedent tasks.</span></span> <span data-ttu-id="6ee2a-142">Her öncül görev, birinden 10 ' a değişen bir dizin değeri sağlar.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-142">Each antecedent task squares an index value that ranges from one to 10.</span></span> <span data-ttu-id="6ee2a-143">Öncüllerin başarıyla tamamlandıysanız ( <xref:System.Threading.Tasks.Task.Status%2A?displayProperty=nameWithType> özelliği ise <xref:System.Threading.Tasks.TaskStatus.RanToCompletion?displayProperty=nameWithType> ), <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> Devamlılık özelliği <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> her öncül tarafından döndürülen değerlerin bir dizisidir.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-143">If the antecedents complete successfully (their <xref:System.Threading.Tasks.Task.Status%2A?displayProperty=nameWithType> property is <xref:System.Threading.Tasks.TaskStatus.RanToCompletion?displayProperty=nameWithType>), the <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property of the continuation is an array of the <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> values returned by each antecedent.</span></span> <span data-ttu-id="6ee2a-144">Örnek, bir ve 10 arasındaki tüm sayıların karelerinin toplamını hesaplamak için bunları ekler.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-144">The example adds them to compute the sum of squares for all numbers between one and 10.</span></span>  
  
 [!code-csharp[TPL_Continuations#5](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/whenall1.cs#5)]
 [!code-vb[TPL_Continuations#5](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/whenall1.vb#5)]  
  
## <a name="continuation-options"></a><span data-ttu-id="6ee2a-145">Devamlılık seçenekleri</span><span class="sxs-lookup"><span data-stu-id="6ee2a-145">Continuation options</span></span>  
 <span data-ttu-id="6ee2a-146">Tek bir görev devamlılığı oluşturduğunuzda, <xref:System.Threading.Tasks.Task.ContinueWith%2A> <xref:System.Threading.Tasks.TaskContinuationOptions?displayProperty=nameWithType> devamlılığın başladığı koşulları belirtmek için bir sabit listesi değeri alan aşırı yüklemeyi kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-146">When you create a single-task continuation, you can use a <xref:System.Threading.Tasks.Task.ContinueWith%2A> overload that takes a <xref:System.Threading.Tasks.TaskContinuationOptions?displayProperty=nameWithType> enumeration value to specify the conditions under which the continuation starts.</span></span> <span data-ttu-id="6ee2a-147">Örneğin, Devamlılığın yalnızca öncül işlemi başarıyla tamamlandığında veya hatalı bir durumda tamamlanırsa çalıştırılacağını belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-147">For example, you can specify that the continuation is to run only if the antecedent completes successfully, or only if it completes in a faulted state.</span></span> <span data-ttu-id="6ee2a-148">Öncül, devamlılık çağırmaya hazırlandığında koşul doğru değilse, devamlılık doğrudan <xref:System.Threading.Tasks.TaskStatus.Canceled?displayProperty=nameWithType> duruma geçer ve daha sonra başlatılamaz.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-148">If the condition is not true when the antecedent is ready to invoke the continuation, the continuation transitions directly to the <xref:System.Threading.Tasks.TaskStatus.Canceled?displayProperty=nameWithType> state and subsequently cannot be started.</span></span>  
  
 <span data-ttu-id="6ee2a-149">Yöntemin aşırı yüklemeleri gibi çok sayıda çoklu görev devamlılık yöntemi <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAll%2A?displayProperty=nameWithType> de bir <xref:System.Threading.Tasks.TaskContinuationOptions?displayProperty=nameWithType> parametre içerir.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-149">A number of multi-task continuation methods, such as overloads of the <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAll%2A?displayProperty=nameWithType> method, also include a <xref:System.Threading.Tasks.TaskContinuationOptions?displayProperty=nameWithType> parameter.</span></span> <span data-ttu-id="6ee2a-150">Ancak, tüm numaralandırma üyelerinin yalnızca bir alt kümesi <xref:System.Threading.Tasks.TaskContinuationOptions?displayProperty=nameWithType> geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-150">Only a subset of all <xref:System.Threading.Tasks.TaskContinuationOptions?displayProperty=nameWithType> enumeration members are valid, however.</span></span> <span data-ttu-id="6ee2a-151"><xref:System.Threading.Tasks.TaskContinuationOptions?displayProperty=nameWithType>Numaralandırmada,, ve gibi karşılıkları olan değerleri belirtebilirsiniz <xref:System.Threading.Tasks.TaskCreationOptions?displayProperty=nameWithType> <xref:System.Threading.Tasks.TaskContinuationOptions.AttachedToParent?displayProperty=nameWithType> <xref:System.Threading.Tasks.TaskContinuationOptions.LongRunning?displayProperty=nameWithType> <xref:System.Threading.Tasks.TaskContinuationOptions.PreferFairness?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="6ee2a-151">You can specify <xref:System.Threading.Tasks.TaskContinuationOptions?displayProperty=nameWithType> values that have counterparts in the <xref:System.Threading.Tasks.TaskCreationOptions?displayProperty=nameWithType> enumeration, such as <xref:System.Threading.Tasks.TaskContinuationOptions.AttachedToParent?displayProperty=nameWithType>, <xref:System.Threading.Tasks.TaskContinuationOptions.LongRunning?displayProperty=nameWithType>, and <xref:System.Threading.Tasks.TaskContinuationOptions.PreferFairness?displayProperty=nameWithType>.</span></span> <span data-ttu-id="6ee2a-152">`NotOn` `OnlyOn` Çoklu görev devamlılığı olan veya seçeneklerden herhangi birini belirtirseniz, çalışma zamanında bir <xref:System.ArgumentOutOfRangeException> özel durum oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-152">If you specify any of the `NotOn` or `OnlyOn` options with a multi-task continuation, an <xref:System.ArgumentOutOfRangeException> exception will be thrown at run time.</span></span>  
  
 <span data-ttu-id="6ee2a-153">Görev devamlılık seçenekleri hakkında daha fazla bilgi için konusuna bakın <xref:System.Threading.Tasks.TaskContinuationOptions> .</span><span class="sxs-lookup"><span data-stu-id="6ee2a-153">For more information on task continuation options, see the <xref:System.Threading.Tasks.TaskContinuationOptions> topic.</span></span>  
  
## <a name="passing-data-to-a-continuation"></a><span data-ttu-id="6ee2a-154">Verileri Devamlıya geçirme</span><span class="sxs-lookup"><span data-stu-id="6ee2a-154">Passing Data to a Continuation</span></span>  
 <span data-ttu-id="6ee2a-155"><xref:System.Threading.Tasks.Task.ContinueWith%2A?displayProperty=nameWithType>Yöntemi, öncül öğesine bir başvuruyu bir bağımsız değişken olarak devamlılık Kullanıcı temsilcisine geçirir.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-155">The <xref:System.Threading.Tasks.Task.ContinueWith%2A?displayProperty=nameWithType> method passes a reference to the antecedent to the user delegate of the continuation as an argument.</span></span> <span data-ttu-id="6ee2a-156">Öncül bir <xref:System.Threading.Tasks.Task%601?displayProperty=nameWithType> nesneysa ve görev tamamlanana kadar çalışırsa, devamlılık <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> görevin özelliğine erişebilir.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-156">If the antecedent is a <xref:System.Threading.Tasks.Task%601?displayProperty=nameWithType> object, and the task ran until it was completed, then the continuation can access the <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property of the task.</span></span>  
  
 <span data-ttu-id="6ee2a-157"><xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType>Özellik, görev tamamlanana kadar engeller.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-157">The <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property blocks until the task has completed.</span></span> <span data-ttu-id="6ee2a-158">Ancak, görev iptal edildiyse veya hata olduysa, özelliğe erişmeye çalışmak <xref:System.Threading.Tasks.Task%601.Result%2A> bir <xref:System.AggregateException> özel durum oluşturur.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-158">However, if the task was canceled or faulted, attempting to access the <xref:System.Threading.Tasks.Task%601.Result%2A> property throws an <xref:System.AggregateException> exception.</span></span> <span data-ttu-id="6ee2a-159"><xref:System.Threading.Tasks.TaskContinuationOptions.OnlyOnRanToCompletion>Aşağıdaki örnekte gösterildiği gibi seçeneğini kullanarak bu sorundan kaçınabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-159">You can avoid this problem by using the <xref:System.Threading.Tasks.TaskContinuationOptions.OnlyOnRanToCompletion> option, as shown in the following example.</span></span>  
  
 [!code-csharp[TPL_Continuations#2](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/result1.cs#2)]
 [!code-vb[TPL_Continuations#2](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/result1.vb#2)]  
  
 <span data-ttu-id="6ee2a-160">Öncül başarıyla tamamlanmayı çalıştırmadığından bile devamlılığın çalıştırılmasını istiyorsanız özel duruma karşı koruma gerekir.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-160">If you want the continuation to run even if the antecedent did not run to successful completion, you must guard against the exception.</span></span> <span data-ttu-id="6ee2a-161">Bir yaklaşım, <xref:System.Threading.Tasks.Task.Status%2A?displayProperty=nameWithType> öncül öğesinin özelliğini test etmek ve yalnızca <xref:System.Threading.Tasks.Task%601.Result%2A> durum veya değilse özelliğe erişmeyi dener <xref:System.Threading.Tasks.TaskStatus.Faulted> <xref:System.Threading.Tasks.TaskStatus.Canceled> .</span><span class="sxs-lookup"><span data-stu-id="6ee2a-161">One approach is to test the <xref:System.Threading.Tasks.Task.Status%2A?displayProperty=nameWithType> property of the antecedent, and only attempt to access the <xref:System.Threading.Tasks.Task%601.Result%2A> property if the status is not <xref:System.Threading.Tasks.TaskStatus.Faulted> or <xref:System.Threading.Tasks.TaskStatus.Canceled>.</span></span> <span data-ttu-id="6ee2a-162"><xref:System.Threading.Tasks.Task.Exception%2A>Öncül öğesinin özelliğini de inceleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-162">You can also examine the <xref:System.Threading.Tasks.Task.Exception%2A> property of the antecedent.</span></span> <span data-ttu-id="6ee2a-163">Daha fazla bilgi için bkz. [özel durum işleme](exception-handling-task-parallel-library.md).</span><span class="sxs-lookup"><span data-stu-id="6ee2a-163">For more information, see [Exception Handling](exception-handling-task-parallel-library.md).</span></span> <span data-ttu-id="6ee2a-164">Aşağıdaki örnek, önceki örneği yalnızca durumu ise öncül öğesinin özelliğine erişmek için değiştirir <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> <xref:System.Threading.Tasks.TaskStatus.RanToCompletion?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="6ee2a-164">The following example modifies the previous example to access antecedent's <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property only if its status is <xref:System.Threading.Tasks.TaskStatus.RanToCompletion?displayProperty=nameWithType>.</span></span>  
  
 [!code-csharp[TPL_Continuations#7](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/result2.cs#7)]
 [!code-vb[TPL_Continuations#7](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/result2.vb#7)]  
  
## <a name="canceling-a-continuation"></a><span data-ttu-id="6ee2a-165">Devamlılığını iptal etme</span><span class="sxs-lookup"><span data-stu-id="6ee2a-165">Canceling a Continuation</span></span>  
 <span data-ttu-id="6ee2a-166"><xref:System.Threading.Tasks.Task.Status%2A?displayProperty=nameWithType>Devamlılık özelliği <xref:System.Threading.Tasks.TaskStatus.Canceled?displayProperty=nameWithType> aşağıdaki durumlarda olarak ayarlanır:</span><span class="sxs-lookup"><span data-stu-id="6ee2a-166">The <xref:System.Threading.Tasks.Task.Status%2A?displayProperty=nameWithType> property of a continuation is set to <xref:System.Threading.Tasks.TaskStatus.Canceled?displayProperty=nameWithType> in the following situations:</span></span>  
  
- <span data-ttu-id="6ee2a-167"><xref:System.OperationCanceledException>İptal isteğine yanıt olarak bir özel durum oluşturur.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-167">It throws an <xref:System.OperationCanceledException> exception in response to a cancellation request.</span></span> <span data-ttu-id="6ee2a-168">Herhangi bir görevde olduğu gibi, özel durum devamlılığın geçirildiği aynı belirteci içeriyorsa, birlikte iptalin iptali onayı olarak değerlendirilir.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-168">As with any task, if the exception contains the same token that was passed to the continuation, it is treated as an acknowledgement of cooperative cancellation.</span></span>  
  
- <span data-ttu-id="6ee2a-169">Devamlılık bir <xref:System.Threading.CancellationToken?displayProperty=nameWithType> <xref:System.Threading.CancellationToken.IsCancellationRequested%2A> özelliği olan `true` .</span><span class="sxs-lookup"><span data-stu-id="6ee2a-169">The continuation is passed a <xref:System.Threading.CancellationToken?displayProperty=nameWithType> whose <xref:System.Threading.CancellationToken.IsCancellationRequested%2A> property is `true`.</span></span> <span data-ttu-id="6ee2a-170">Bu durumda, devamlılık başlamaz ve durumuna geçiş yapar <xref:System.Threading.Tasks.TaskStatus.Canceled?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="6ee2a-170">In this case, the continuation does not start, and it transitions to the <xref:System.Threading.Tasks.TaskStatus.Canceled?displayProperty=nameWithType> state.</span></span>  
  
- <span data-ttu-id="6ee2a-171">Bağımsız değişkeni tarafından ayarlanan koşul karşılanmadığından devamlılık hiçbir şekilde <xref:System.Threading.Tasks.TaskContinuationOptions> çalışmaz.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-171">The continuation never runs because the condition set by its <xref:System.Threading.Tasks.TaskContinuationOptions> argument was not met.</span></span> <span data-ttu-id="6ee2a-172">Örneğin, bir öncül bir <xref:System.Threading.Tasks.TaskStatus.Faulted?displayProperty=nameWithType> duruma gittiyse, bu, bu, bu, bu, bu <xref:System.Threading.Tasks.TaskContinuationOptions.NotOnFaulted?displayProperty=nameWithType> işlem çalışır ancak <xref:System.Threading.Tasks.TaskStatus.Canceled> duruma geçer.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-172">For example, if an antecedent goes into a <xref:System.Threading.Tasks.TaskStatus.Faulted?displayProperty=nameWithType> state, its continuation that was passed the <xref:System.Threading.Tasks.TaskContinuationOptions.NotOnFaulted?displayProperty=nameWithType> option will not run but will transition to the <xref:System.Threading.Tasks.TaskStatus.Canceled> state.</span></span>  
  
 <span data-ttu-id="6ee2a-173">Bir görev ve devamlılık aynı mantıksal işlemin iki parçasını temsil ediyorsa, aşağıdaki örnekte gösterildiği gibi aynı iptal belirtecini her iki göreve da geçirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-173">If a task and its continuation represent two parts of the same logical operation, you can pass the same cancellation token to both tasks, as shown in the following example.</span></span> <span data-ttu-id="6ee2a-174">Bu, 33 ile bölünebilen tamsayıların bir listesini üreten bir öncül öğesinden oluşur ve bu da devamlıya geçirilir.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-174">It consists of an antecedent that generates a list of integers that are divisible by 33, which it passes to the continuation.</span></span> <span data-ttu-id="6ee2a-175">Devam eden devamlılık listeyi görüntüler.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-175">The continuation in turn displays the list.</span></span> <span data-ttu-id="6ee2a-176">Hem öncül hem de devamlılık rastgele aralıklarla düzenli olarak duraklatılır.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-176">Both the antecedent and the continuation pause regularly for random intervals.</span></span> <span data-ttu-id="6ee2a-177">Ayrıca, bir <xref:System.Threading.Timer?displayProperty=nameWithType> nesnesi, `Elapsed` beş saniyelik bir zaman aşımı aralığından sonra yöntemi yürütmek için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-177">In addition, a <xref:System.Threading.Timer?displayProperty=nameWithType> object is used to execute the `Elapsed` method after a five-second timeout interval.</span></span> <span data-ttu-id="6ee2a-178">Bu örnek <xref:System.Threading.CancellationTokenSource.Cancel%2A?displayProperty=nameWithType> , şu anda yürütülmekte olan görevin yöntemi aramasına neden olan yöntemini çağırır <xref:System.Threading.CancellationToken.ThrowIfCancellationRequested%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="6ee2a-178">This example calls the <xref:System.Threading.CancellationTokenSource.Cancel%2A?displayProperty=nameWithType> method, which causes the currently executing task to call the <xref:System.Threading.CancellationToken.ThrowIfCancellationRequested%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="6ee2a-179"><xref:System.Threading.CancellationTokenSource.Cancel%2A?displayProperty=nameWithType>Öncül veya devamlılık yürütüldüğü zaman yöntemin çağrılmayacağı, rastgele oluşturulan duraklamalar süresine bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-179">Whether the <xref:System.Threading.CancellationTokenSource.Cancel%2A?displayProperty=nameWithType> method is called when the antecedent or its continuation is executing depends on the duration of the randomly generated pauses.</span></span> <span data-ttu-id="6ee2a-180">Öncül iptal edilirse, devamlılık başlamacaktır.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-180">If the antecedent is canceled, the continuation will not start.</span></span> <span data-ttu-id="6ee2a-181">Öncül iptal edilmediğinde, belirteç devam etmek için hala kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-181">If the antecedent is not canceled, the token can still be used to cancel the continuation.</span></span>  
  
 [!code-csharp[TPL_Continuations#3](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/cancellation1.cs#3)]
 [!code-vb[TPL_Continuations#3](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/cancellation1.vb#3)]  
  
 <span data-ttu-id="6ee2a-182">Devamlılığın, devamlılığı oluştururken seçeneği belirtilerek devam eden bir iptal belirteci vermeden iptal edilse de devamlılığın yürütülmesini engelleyebilirsiniz <xref:System.Threading.Tasks.TaskContinuationOptions.NotOnCanceled?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="6ee2a-182">You can also prevent a continuation from executing if its antecedent is canceled without supplying the continuation a cancellation token by specifying the <xref:System.Threading.Tasks.TaskContinuationOptions.NotOnCanceled?displayProperty=nameWithType> option when you create the continuation.</span></span> <span data-ttu-id="6ee2a-183">Aşağıda basit bir örnek verilmiştir.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-183">The following is a simple example.</span></span>  
  
 [!code-csharp[TPL_Continuations#8](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/cancellation2.cs#8)]
 [!code-vb[TPL_Continuations#8](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/cancellation2.vb#8)]  
  
 <span data-ttu-id="6ee2a-184">Bir devamlılık duruma geçtikten sonra, <xref:System.Threading.Tasks.TaskStatus.Canceled> <xref:System.Threading.Tasks.TaskContinuationOptions> Bu devamlılıklar için belirtilen değere bağlı olarak, izleyen devamlılıkları etkileyebilir.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-184">After a continuation goes into the <xref:System.Threading.Tasks.TaskStatus.Canceled> state, it may affect continuations that follow, depending on the <xref:System.Threading.Tasks.TaskContinuationOptions> that were specified for those continuations.</span></span>  
  
 <span data-ttu-id="6ee2a-185">Bırakılan devamlılık başlamaz.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-185">Continuations that are disposed will not start.</span></span>  
  
## <a name="continuations-and-child-tasks"></a><span data-ttu-id="6ee2a-186">Devamlılıklar ve alt görevler</span><span class="sxs-lookup"><span data-stu-id="6ee2a-186">Continuations and Child Tasks</span></span>  
 <span data-ttu-id="6ee2a-187">Bir devamlılık, eklenen alt görevlerinin tümü tamamlanana kadar çalışmaz.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-187">A continuation does not run until the antecedent and all of its attached child tasks have completed.</span></span> <span data-ttu-id="6ee2a-188">Devamlılık, ayrılmış alt görevlerin bitmesini beklemez.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-188">The continuation does not wait for detached child tasks to finish.</span></span> <span data-ttu-id="6ee2a-189">Aşağıdaki iki örnek, bir devamlılık oluşturan bir öncül öğesine iliştirilmiş ve bu gruptan ayrılan alt görevleri gösterir.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-189">The following two examples illustrate child tasks that are attached to and detached from an antecedent that creates a continuation.</span></span> <span data-ttu-id="6ee2a-190">Aşağıdaki örnekte, devamlılık yalnızca tüm alt görevler tamamlandıktan sonra çalışır ve örneği birden çok kez çalıştırarak her seferinde aynı çıktıyı üretir.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-190">In the following example, the continuation runs only after all child tasks have completed, and running the example multiple times produces identical output each time.</span></span> <span data-ttu-id="6ee2a-191">Bu örnek, <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=nameWithType> Varsayılan olarak <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType> yöntemi, varsayılan görevi oluşturma seçeneği olan bir üst görev oluşturduğunda, yöntemi çağırarak öncül öğesini başlatır <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="6ee2a-191">The example launches the antecedent by calling the <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=nameWithType> method, since by default the <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType> method creates a parent task whose default task creation option is <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType>.</span></span>  
  
 [!code-csharp[TPL_Continuations#9](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/attached1.cs#9)]
 [!code-vb[TPL_Continuations#9](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/attached1.vb#9)]  
  
 <span data-ttu-id="6ee2a-192">Ancak alt görevler öncül öğesinden ayrılımışsa, alt görevlerin durumundan bağımsız olarak öncül sona erer tamamlanmaz devamlılık çalışır.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-192">If child tasks are detached from the antecedent, however, the continuation runs as soon as the antecedent has terminated, regardless of the state of the child tasks.</span></span> <span data-ttu-id="6ee2a-193">Sonuç olarak, aşağıdaki örnekte birden çok çalıştırma, görev zamanlayıcının her bir alt görevi nasıl ele dığına bağlı olarak değişken çıktı üretebilir.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-193">As a result, multiple runs of the following example can produce variable output that depends on how the task scheduler handled each child task.</span></span>  
  
 [!code-csharp[TPL_Continuations#10](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/detached1.cs#10)]
 [!code-vb[TPL_Continuations#10](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/detached1.vb#10)]  
  
 <span data-ttu-id="6ee2a-194">Öncül görevin son durumu, bağlı olan tüm alt görevlerin son durumuna bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-194">The final status of the antecedent task depends on the final status of any attached child tasks.</span></span> <span data-ttu-id="6ee2a-195">Ayrılmış alt görevlerin durumu üst öğeyi etkilemez.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-195">The status of detached child tasks does not affect the parent.</span></span> <span data-ttu-id="6ee2a-196">Daha fazla bilgi için bkz. [ekli ve ayrılmış alt görevler](attached-and-detached-child-tasks.md).</span><span class="sxs-lookup"><span data-stu-id="6ee2a-196">For more information, see [Attached and Detached Child Tasks](attached-and-detached-child-tasks.md).</span></span>  
  
## <a name="associating-state-with-continuations"></a><span data-ttu-id="6ee2a-197">Durumu devamlılıklar ile ilişkilendirme</span><span class="sxs-lookup"><span data-stu-id="6ee2a-197">Associating State with Continuations</span></span>  
 <span data-ttu-id="6ee2a-198">Rastgele durumu, bir görev devamlılığı ile ilişkilendirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-198">You can associate arbitrary state with a task continuation.</span></span> <span data-ttu-id="6ee2a-199"><xref:System.Threading.Tasks.Task.ContinueWith%2A>Yöntemi, her birinin <xref:System.Object> devamlılık durumunu temsil eden bir değer alan aşırı yüklenmiş sürümler sağlar.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-199">The <xref:System.Threading.Tasks.Task.ContinueWith%2A> method provides overloaded versions that each take an <xref:System.Object> value that represents the state of the continuation.</span></span> <span data-ttu-id="6ee2a-200">Daha sonra özelliği kullanarak bu durum nesnesine erişebilirsiniz <xref:System.Threading.Tasks.Task.AsyncState%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="6ee2a-200">You can later access this state object by using the <xref:System.Threading.Tasks.Task.AsyncState%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="6ee2a-201">Bu durum nesnesi `null` bir değer sağlamazsanız olur.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-201">This state object is `null` if you do not provide a value.</span></span>  
  
 <span data-ttu-id="6ee2a-202">Devamlılık durumu, [zaman uyumsuz programlama modeli (APM)](../asynchronous-programming-patterns/asynchronous-programming-model-apm.md) kullanan mevcut kodu tpl 'yi kullanacak şekilde dönüştürdüğünüzde faydalıdır.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-202">Continuation state is useful when you convert existing code that uses the [Asynchronous Programming Model (APM)](../asynchronous-programming-patterns/asynchronous-programming-model-apm.md) to use the TPL.</span></span> <span data-ttu-id="6ee2a-203">APM 'de, genellikle **BEGIN**_Method_ yönteminde nesne durumu sağlarsınız ve daha sonra özelliği kullanarak bu duruma erişebilirsiniz <xref:System.IAsyncResult.AsyncState%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="6ee2a-203">In the APM, you typically provide object state in the **Begin**_Method_ method and later access that state by using the <xref:System.IAsyncResult.AsyncState%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="6ee2a-204"><xref:System.Threading.Tasks.Task.ContinueWith%2A>Yöntemini kullanarak, TPL 'yi kullanmak IÇIN APM kullanan kodu dönüştürürken bu durumu koruyabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-204">By using the <xref:System.Threading.Tasks.Task.ContinueWith%2A> method, you can preserve this state when you convert code that uses the APM to use the TPL.</span></span>  
  
 <span data-ttu-id="6ee2a-205">Devamlılık durumu <xref:System.Threading.Tasks.Task> , Visual Studio hata ayıklayıcısındaki nesnelerle çalışırken da yararlı olabilir.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-205">Continuation state can also be useful when you work with <xref:System.Threading.Tasks.Task> objects in the Visual Studio debugger.</span></span> <span data-ttu-id="6ee2a-206">Örneğin, **paralel görevler** penceresinde, **görev** sütunu her görev için durum nesnesinin dize gösterimini görüntüler.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-206">For example, in the **Parallel Tasks** window, the **Task** column displays the string representation of the state object for each task.</span></span> <span data-ttu-id="6ee2a-207">**Paralel görevler** penceresi hakkında daha fazla bilgi için, bkz. [Görevler penceresini kullanma](/visualstudio/debugger/using-the-tasks-window).</span><span class="sxs-lookup"><span data-stu-id="6ee2a-207">For more information about the **Parallel Tasks** window, see [Using the Tasks Window](/visualstudio/debugger/using-the-tasks-window).</span></span>  
  
 <span data-ttu-id="6ee2a-208">Aşağıdaki örnek, devamlılık durumunun nasıl kullanılacağını göstermektedir.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-208">The following example shows how to use continuation state.</span></span> <span data-ttu-id="6ee2a-209">Bir devamlılık görevleri zinciri oluşturur.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-209">It creates a chain of continuation tasks.</span></span> <span data-ttu-id="6ee2a-210">Her görev, <xref:System.DateTime> yönteminin parametresi için geçerli zamanı (bir nesnesi) sağlar `state` <xref:System.Threading.Tasks.Task.ContinueWith%2A> .</span><span class="sxs-lookup"><span data-stu-id="6ee2a-210">Each task provides the current time, a <xref:System.DateTime> object, for the `state` parameter of the <xref:System.Threading.Tasks.Task.ContinueWith%2A> method.</span></span> <span data-ttu-id="6ee2a-211">Her <xref:System.DateTime> nesne, devamlılık görevinin oluşturulduğu saati temsil eder.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-211">Each <xref:System.DateTime> object represents the time at which the continuation task is created.</span></span> <span data-ttu-id="6ee2a-212">Her görev, sonucu <xref:System.DateTime> görevin bittiği süreyi temsil eden ikinci bir nesne olarak üretir.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-212">Each task produces as its result a second <xref:System.DateTime> object that represents the time at which the task finishes.</span></span> <span data-ttu-id="6ee2a-213">Tüm görevler bittikten sonra bu örnek, oluşturma zamanını ve her devamlılık görevinin bittiği saati görüntüler.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-213">After all tasks finish, this example displays the creation time and the time at which each continuation task finishes.</span></span>  
  
 [!code-csharp[TPL_ContinuationState#1](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuationstate/cs/continuationstate.cs#1)]
 [!code-vb[TPL_ContinuationState#1](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuationstate/vb/continuationstate.vb#1)]  
  
## <a name="handling-exceptions-thrown-from-continuations"></a><span data-ttu-id="6ee2a-214">Devamlılıklardan oluşan özel durumları işleme</span><span class="sxs-lookup"><span data-stu-id="6ee2a-214">Handling Exceptions Thrown from Continuations</span></span>  
 <span data-ttu-id="6ee2a-215">Öncül-devamlılık ilişkisi üst-alt ilişkisi değildir.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-215">An antecedent-continuation relationship is not a parent-child relationship.</span></span> <span data-ttu-id="6ee2a-216">Devamlılıklar tarafından oluşturulan özel durumlar, öncül öğesine yayılmaz.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-216">Exceptions thrown by continuations are not propagated to the antecedent.</span></span> <span data-ttu-id="6ee2a-217">Bu nedenle, devamlılıklar tarafından oluşturulan özel durumları aşağıdaki gibi başka bir görevde idare ettiğiniz şekilde işleyin:</span><span class="sxs-lookup"><span data-stu-id="6ee2a-217">Therefore, handle exceptions thrown by continuations as you would handle them in any other task, as follows:</span></span>  
  
- <span data-ttu-id="6ee2a-218"><xref:System.Threading.Tasks.Task.Wait%2A> <xref:System.Threading.Tasks.Task.WaitAll%2A> <xref:System.Threading.Tasks.Task.WaitAny%2A> Devamlılığın bekleneceği,, veya yöntemini ya da genel karşılığına sahip olabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-218">You can use the <xref:System.Threading.Tasks.Task.Wait%2A>, <xref:System.Threading.Tasks.Task.WaitAll%2A>, or <xref:System.Threading.Tasks.Task.WaitAny%2A> method, or its generic counterpart, to wait on the continuation.</span></span> <span data-ttu-id="6ee2a-219">Aşağıdaki örnekte gösterildiği gibi, bir öncül ve devamlılığını aynı `try` deyimde bekleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-219">You can wait for an antecedent and its continuations in the same `try` statement, as shown in the following example.</span></span>  
  
     [!code-csharp[TPL_Continuations#6](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/exception1.cs#6)]
     [!code-vb[TPL_Continuations#6](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/exception1.vb#6)]  
  
- <span data-ttu-id="6ee2a-220">İlk devamlılık özelliğini gözlemlemek için ikinci devamlılık kullanabilirsiniz <xref:System.Threading.Tasks.Task.Exception%2A> .</span><span class="sxs-lookup"><span data-stu-id="6ee2a-220">You can use a second continuation to observe the <xref:System.Threading.Tasks.Task.Exception%2A> property of the first continuation.</span></span> <span data-ttu-id="6ee2a-221">Aşağıdaki örnekte, bir görev var olmayan bir dosyadan okumaya çalışır.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-221">In the following example, a task attempts to read from a non-existent file.</span></span> <span data-ttu-id="6ee2a-222">Devamlılık daha sonra, öncül görevde özel durumla ilgili bilgileri görüntüler.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-222">The continuation then displays information about the exception in the antecedent task.</span></span>  
  
     [!code-csharp[TPL_Continuations#4](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/exception2.cs#4)]
     [!code-vb[TPL_Continuations#4](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/exception2.vb#4)]  
  
     <span data-ttu-id="6ee2a-223">Seçeneğiyle çalıştırıldığı için, <xref:System.Threading.Tasks.TaskContinuationOptions.OnlyOnFaulted?displayProperty=nameWithType> devamlılık yalnızca öncül içinde bir özel durum oluşursa ve bu nedenle, öncül özelliğinin özelliğin olmadığını varsayabilir <xref:System.Threading.Tasks.Task.Exception%2A> `null` .</span><span class="sxs-lookup"><span data-stu-id="6ee2a-223">Because it was run with the <xref:System.Threading.Tasks.TaskContinuationOptions.OnlyOnFaulted?displayProperty=nameWithType> option, the continuation executes only if an exception occurs in the antecedent, and therefore it can assume that the antecedent's <xref:System.Threading.Tasks.Task.Exception%2A> property is not `null`.</span></span> <span data-ttu-id="6ee2a-224">Devamlılığın, öncül içinde bir özel durum oluşturulup oluşturulmayacağını yürüttüğünde, <xref:System.Threading.Tasks.Task.Exception%2A> `null` Aşağıdaki kod parçasının gösterdiği gibi, öncül özelliğinin özel durumu işlemeye çalışmadan önce olmadığını denetlemesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-224">If the continuation executes whether or not an exception is thrown in the antecedent, it would have to check whether the antecedent's <xref:System.Threading.Tasks.Task.Exception%2A> property is not `null` before attempting to handle the exception, as the following code fragment shows.</span></span>  
  
     [!code-csharp[TPL_Continuations#11](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_continuations/cs/exception2.cs#11)]
     [!code-vb[TPL_Continuations#11](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_continuations/vb/exception2.vb#11)]  
  
     <span data-ttu-id="6ee2a-225">Daha fazla bilgi için bkz. [özel durum işleme](exception-handling-task-parallel-library.md).</span><span class="sxs-lookup"><span data-stu-id="6ee2a-225">For more information, see [Exception Handling](exception-handling-task-parallel-library.md).</span></span>  
  
- <span data-ttu-id="6ee2a-226">Devamlılık, seçeneği kullanılarak oluşturulan iliştirilmiş bir alt görev ise <xref:System.Threading.Tasks.TaskContinuationOptions.AttachedToParent?displayProperty=nameWithType> , diğer tüm bağlı alt bir örnekte olduğu gibi, özel durumları üst öğe tarafından çağıran iş parçacığına yayılır.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-226">If the continuation is an attached child task that was created by using the <xref:System.Threading.Tasks.TaskContinuationOptions.AttachedToParent?displayProperty=nameWithType> option, its exceptions will be propagated by the parent back to the calling thread, as is the case in any other attached child.</span></span> <span data-ttu-id="6ee2a-227">Daha fazla bilgi için bkz. [ekli ve ayrılmış alt görevler](attached-and-detached-child-tasks.md).</span><span class="sxs-lookup"><span data-stu-id="6ee2a-227">For more information, see [Attached and Detached Child Tasks](attached-and-detached-child-tasks.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6ee2a-228">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="6ee2a-228">See also</span></span>

- [<span data-ttu-id="6ee2a-229">Görev Paralel Kitaplığı (TPL)</span><span class="sxs-lookup"><span data-stu-id="6ee2a-229">Task Parallel Library (TPL)</span></span>](task-parallel-library-tpl.md)
