---
title: 'CA2101: P-Invoke dize bağımsız değişkenleri için sıralama belirtin (kod analizi)'
description: 'Code Analysis Rule CA2101 hakkında bilgi edinin: P-Invoke dize bağımsız değişkenleri için sıralama belirtin'
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
- SpecifyMarshalingForPInvokeStringArguments
- CA2101
helpviewer_keywords:
- CA2101
- SpecifyMarshalingForPInvokeStringArguments
author: gewarren
ms.author: gewarren
ms.openlocfilehash: bfd28fef3fabfde9cf81b3dab06a5438409f300d
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 02/06/2021
ms.locfileid: "99630754"
---
# <a name="ca2101-specify-marshaling-for-pinvoke-string-arguments"></a><span data-ttu-id="b81c8-103">CA2101: P/Invoke dize bağımsız değişkenleri için sıralama belirtin</span><span class="sxs-lookup"><span data-stu-id="b81c8-103">CA2101: Specify marshaling for P/Invoke string arguments</span></span>

| | <span data-ttu-id="b81c8-104">Değer</span><span class="sxs-lookup"><span data-stu-id="b81c8-104">Value</span></span> |
|-|-|
| <span data-ttu-id="b81c8-105">**Kural Kimliği**</span><span class="sxs-lookup"><span data-stu-id="b81c8-105">**Rule ID**</span></span> |<span data-ttu-id="b81c8-106">CA2101</span><span class="sxs-lookup"><span data-stu-id="b81c8-106">CA2101</span></span>|
| <span data-ttu-id="b81c8-107">**Kategori**</span><span class="sxs-lookup"><span data-stu-id="b81c8-107">**Category**</span></span> |[<span data-ttu-id="b81c8-108">Genelleştirme</span><span class="sxs-lookup"><span data-stu-id="b81c8-108">Globalization</span></span>](globalization-warnings.md)|
| <span data-ttu-id="b81c8-109">**Düzeltilme veya kırılmamış**</span><span class="sxs-lookup"><span data-stu-id="b81c8-109">**Fix is breaking or non-breaking**</span></span> |<span data-ttu-id="b81c8-110">Kırılmamış</span><span class="sxs-lookup"><span data-stu-id="b81c8-110">Non-breaking</span></span>|

## <a name="cause"></a><span data-ttu-id="b81c8-111">Nedeni</span><span class="sxs-lookup"><span data-stu-id="b81c8-111">Cause</span></span>

<span data-ttu-id="b81c8-112">Platform çağırma üyesi kısmen güvenilen çağıranlar için izin verir, bir dize parametresine sahiptir ve dizeyi açıkça sıralamaz.</span><span class="sxs-lookup"><span data-stu-id="b81c8-112">A platform invoke member allows for partially trusted callers, has a string parameter, and does not explicitly marshal the string.</span></span>

## <a name="rule-description"></a><span data-ttu-id="b81c8-113">Kural açıklaması</span><span class="sxs-lookup"><span data-stu-id="b81c8-113">Rule description</span></span>

<span data-ttu-id="b81c8-114">Unicode 'dan ANSI 'ye dönüştürdüğünüzde, tüm Unicode karakterlerin belirli bir ANSI kod sayfasında gösterilemeyeceği olasıdır.</span><span class="sxs-lookup"><span data-stu-id="b81c8-114">When you convert from Unicode to ANSI, it is possible that not all Unicode characters can be represented in a specific ANSI code page.</span></span> <span data-ttu-id="b81c8-115">*En uygun eşleme* , temsil edilemeyecek karakter için bir karakteri değiştirerek bu sorunu çözmeye çalışır.</span><span class="sxs-lookup"><span data-stu-id="b81c8-115">*Best-fit mapping* tries to solve this problem by substituting a character for the character that cannot be represented.</span></span> <span data-ttu-id="b81c8-116">Seçilen karakteri denetleyemediği için bu özelliğin kullanılması olası bir güvenlik açığına neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="b81c8-116">The use of this feature can cause a potential security vulnerability because you cannot control the character that is chosen.</span></span> <span data-ttu-id="b81c8-117">Örneğin, kötü amaçlı kod kasıtlı olarak, belirli bir kod sayfasında bulunmayan ve '.. ' gibi dosya sistemi özel karakterlerine dönüştürülen karakterleri içeren bir Unicode dizesi oluşturabilir.</span><span class="sxs-lookup"><span data-stu-id="b81c8-117">For example, malicious code could intentionally create a Unicode string that contains characters that are not found in a particular code page, which are converted to file system special characters such as '..'</span></span> <span data-ttu-id="b81c8-118">ya da '/'.</span><span class="sxs-lookup"><span data-stu-id="b81c8-118">or '/'.</span></span> <span data-ttu-id="b81c8-119">Ayrıca, dize ANSI 'ye dönüştürülmeden önce özel karakterler için güvenlik denetimlerinin sıklıkla meydana geldiğine göz önüne alın.</span><span class="sxs-lookup"><span data-stu-id="b81c8-119">Note also that security checks for special characters frequently occur before the string is converted to ANSI.</span></span>

<span data-ttu-id="b81c8-120">En uygun eşleme, yönetilmeyen dönüştürme için varsayılan değer olan WChar 'dan Mbfit 'e.</span><span class="sxs-lookup"><span data-stu-id="b81c8-120">Best-fit mapping is the default for the unmanaged conversion, WChar to MByte.</span></span> <span data-ttu-id="b81c8-121">En uygun eşlemeyi açıkça devre dışı bırakmadığınız takdirde, kodunuz bu sorundan dolayı açıktan yararlanabilecek bir güvenlik açığı içerebilir.</span><span class="sxs-lookup"><span data-stu-id="b81c8-121">Unless you explicitly disable best-fit mapping, your code might contain an exploitable security vulnerability because of this issue.</span></span>

> [!CAUTION]
> <span data-ttu-id="b81c8-122">[Kod erişim güvenliği](../../../framework/misc/code-access-security.md) (CAS) bir güvenlik sınırı olarak düşünülmemelidir.</span><span class="sxs-lookup"><span data-stu-id="b81c8-122">[Code Access Security](../../../framework/misc/code-access-security.md) (CAS) should not be considered a security boundary.</span></span>

## <a name="how-to-fix-violations"></a><span data-ttu-id="b81c8-123">İhlalleri çözme</span><span class="sxs-lookup"><span data-stu-id="b81c8-123">How to fix violations</span></span>

<span data-ttu-id="b81c8-124">Bu kuralın ihlalini onarmak için, dize veri türlerini açıkça sıralama.</span><span class="sxs-lookup"><span data-stu-id="b81c8-124">To fix a violation of this rule, explicitly marshal string data types.</span></span>

## <a name="when-to-suppress-warnings"></a><span data-ttu-id="b81c8-125">Uyarıların ne zaman bastırılamıyor</span><span class="sxs-lookup"><span data-stu-id="b81c8-125">When to suppress warnings</span></span>

<span data-ttu-id="b81c8-126">Bu kuraldan uyarıyı bastırmayın.</span><span class="sxs-lookup"><span data-stu-id="b81c8-126">Do not suppress a warning from this rule.</span></span>

## <a name="example"></a><span data-ttu-id="b81c8-127">Örnek</span><span class="sxs-lookup"><span data-stu-id="b81c8-127">Example</span></span>

<span data-ttu-id="b81c8-128">Aşağıdaki örnek, bu kuralı ihlal eden bir yöntemi gösterir ve sonra ihlalin nasıl düzeltileceğini gösterir.</span><span class="sxs-lookup"><span data-stu-id="b81c8-128">The following example shows a method that violates this rule, and then shows how to fix the violation.</span></span>

:::code language="csharp" source="snippets/csharp/all-rules/ca2101.cs" id="snippet1":::
