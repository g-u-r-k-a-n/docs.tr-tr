---
title: Bulut için hazırlık dayanıklı Hizmetleri oluşturun. Buluttaki geçici hataları benimseme
description: Azure bulut ve Windows kapsayıcıları ile mevcut .NET uygulamalarını modernleştirin | Bulut için hazırlık dayanıklı Hizmetleri oluşturun. Buluttaki geçici hataları benimseme
ms.date: 04/30/2018
ms.openlocfilehash: e6fae8140b55cb0308dca9f4b77e961501b41f8f
ms.sourcegitcommit: 22be09204266253d45ece46f51cc6f080f2b3fd6
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 11/07/2019
ms.locfileid: "73739403"
---
# <a name="build-resilient-services-ready-for-the-cloud-embrace-transient-failures-in-the-cloud"></a><span data-ttu-id="df5dc-105">Bulut için hazırlayın dayanıklı hizmetler oluşturun: bulutta geçici olmayan sorunları açma</span><span class="sxs-lookup"><span data-stu-id="df5dc-105">Build resilient services ready for the cloud: Embrace transient failures in the cloud</span></span>

<span data-ttu-id="df5dc-106">Dayanıklılık, hatalardan kurtulmakta ve çalışmaya devam edebilmesidir.</span><span class="sxs-lookup"><span data-stu-id="df5dc-106">Resiliency is the ability to recover from failures and continue to function.</span></span> <span data-ttu-id="df5dc-107">Dayanıklılık, hatalardan kaçınma, ancak hataların gerçekleşmesi ve sonra kapalı kalma süresini veya veri kaybını önleyen bir şekilde yanıt vermeyi kabul eder.</span><span class="sxs-lookup"><span data-stu-id="df5dc-107">Resiliency is not about avoiding failures, but accepting the fact that failures will occur, and then responding to them in a way that avoids downtime or data loss.</span></span> <span data-ttu-id="df5dc-108">Dayanıklılık amacı, bir hatadan sonra uygulamayı tam çalışır duruma döndürmektir.</span><span class="sxs-lookup"><span data-stu-id="df5dc-108">The goal of resiliency is to return the application to a fully functioning state after a failure.</span></span>

<span data-ttu-id="df5dc-109">Uygulamanız, en azından donanım tabanlı bir model yerine yazılım tabanlı bir dayanıklılık modeli uyguladığı zaman bulut için hazırlayın.</span><span class="sxs-lookup"><span data-stu-id="df5dc-109">Your application is ready for the cloud when, at a minimum, it implements a software-based model of resiliency, rather than a hardware-based model.</span></span> <span data-ttu-id="df5dc-110">Bulut uygulamanız, kesinlikle ortaya çıkabilecek kısmi hataların ayracına sahip olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="df5dc-110">Your cloud application must embrace the partial failures that will certainly occur.</span></span> <span data-ttu-id="df5dc-111">Beklenen kısmi hatalarla dayanıklılık elde etmek için uygulamanızı tasarlayın veya kısmen yeniden düzenleyin.</span><span class="sxs-lookup"><span data-stu-id="df5dc-111">Design or partially refactor your application to achieve resiliency with expected partial failures.</span></span> <span data-ttu-id="df5dc-112">Geçici ağ kesintileri ve düğümleri gibi kısmi arızalarla veya bulutta kilitlenen VM 'Ler ile sanal makinelere yönelik olarak tasarlanmalıdır.</span><span class="sxs-lookup"><span data-stu-id="df5dc-112">It should be designed to cope with partial failures, like transient network outages and nodes, or VMs crashing in the cloud.</span></span> <span data-ttu-id="df5dc-113">Bir Orchestrator kümesi içindeki farklı bir düğüme taşınmakta olan kapsayıcılar bile uygulama içinde aralıklı kısa hatalara neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="df5dc-113">Even containers being moved to a different node within an orchestrator cluster can cause intermittent short failures within the application.</span></span>

## <a name="handling-partial-failure"></a><span data-ttu-id="df5dc-114">Kısmi hata işleme</span><span class="sxs-lookup"><span data-stu-id="df5dc-114">Handling partial failure</span></span>

<span data-ttu-id="df5dc-115">Bulut tabanlı bir uygulamada, kısmen hatalı bir risk var.</span><span class="sxs-lookup"><span data-stu-id="df5dc-115">In a cloud-based application, there's an ever-present risk of partial failure.</span></span> <span data-ttu-id="df5dc-116">Örneğin, tek bir Web sitesi örneği veya kapsayıcısı başarısız olabilir ya da kısa bir süre için kullanılamayabilir veya yanıt veremez olabilir.</span><span class="sxs-lookup"><span data-stu-id="df5dc-116">For instance, a single website instance or a container might fail, or it might be unavailable or unresponsive for a short time.</span></span> <span data-ttu-id="df5dc-117">Ya da tek bir VM veya sunucu kilitlenebilir.</span><span class="sxs-lookup"><span data-stu-id="df5dc-117">Or, a single VM or server might crash.</span></span>

<span data-ttu-id="df5dc-118">İstemciler ve hizmetler ayrı süreçler olduğundan, bir hizmet istemci isteğine zamanında yanıt veremeyebilir.</span><span class="sxs-lookup"><span data-stu-id="df5dc-118">Because clients and services are separate processes, a service might not be able to respond in a timely manner to a client's request.</span></span> <span data-ttu-id="df5dc-119">Hizmet aşırı yüklenmiş ve isteklere yavaş yanıt verebilir ya da ağ sorunları nedeniyle kısa bir süredir erişilebilir olmayabilir.</span><span class="sxs-lookup"><span data-stu-id="df5dc-119">The service might be overloaded and respond slowly to requests, or it might not be accessible for a short time because of network issues.</span></span>

<span data-ttu-id="df5dc-120">Örneğin, Azure SQL veritabanı 'nda bir veritabanına erişen tek parçalı bir .NET uygulaması düşünün.</span><span class="sxs-lookup"><span data-stu-id="df5dc-120">For example, consider a monolithic .NET application that accesses a database in Azure SQL Database.</span></span> <span data-ttu-id="df5dc-121">Azure SQL veritabanı veya başka bir üçüncü taraf hizmeti kısa bir süre yanıt vermezse (bir Azure SQL veritabanı farklı bir düğüme veya sunucuya taşınabilir ve birkaç saniye boyunca yanıt vermeyebilir), Kullanıcı herhangi bir işlem gerçekleştirmeye çalıştığında, uygulama kilitlenebilir ve gösterebilir aynı anda bir özel durum w.</span><span class="sxs-lookup"><span data-stu-id="df5dc-121">If the Azure SQL database or any other third-party service is unresponsive for a brief time (an Azure SQL database might be moved to a different node or server, and be unresponsive for a few seconds), when the user tries to do any action, the application might crash and show an exception at the same moment.</span></span>

<span data-ttu-id="df5dc-122">HTTP Hizmetleri kullanan bir uygulamada benzer bir senaryo meydana gelebilir.</span><span class="sxs-lookup"><span data-stu-id="df5dc-122">A similar scenario might occur in an app that consumes HTTP services.</span></span> <span data-ttu-id="df5dc-123">Kısa, geçici bir başarısızlık sırasında ağ veya hizmetin kendisi bulutta bulunmayabilir.</span><span class="sxs-lookup"><span data-stu-id="df5dc-123">The network or the service itself might not be available in the cloud during a short, transient failure.</span></span>

<span data-ttu-id="df5dc-124">Şekil 4-9 ' de gösterildiği gibi dayanıklı bir uygulama, uygulamaya kaynakların geçici başarısızlıklarını işleme fırsatı vermek için "üstel geri alma ile yeniden denemeler" gibi teknikler uygulamalıdır.</span><span class="sxs-lookup"><span data-stu-id="df5dc-124">A resilient application like the one shown in Figure 4-9 should implement techniques like "retries with exponential backoff" to give the application an opportunity to handle transient failures in resources.</span></span> <span data-ttu-id="df5dc-125">Ayrıca, uygulamalarınızda "devre kesiciler" kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="df5dc-125">You also should use "circuit breakers" in your applications.</span></span> <span data-ttu-id="df5dc-126">Devre kesici, bir uygulamanın bir kaynağa erişmeye çalışmayı, aslında uzun süreli bir hata oluştuğunda sonlandırır.</span><span class="sxs-lookup"><span data-stu-id="df5dc-126">A circuit breaker stops an application from trying to access a resource when it's actually a long-term failure.</span></span> <span data-ttu-id="df5dc-127">Uygulama, devre kesici kullanarak bir hizmet reddine izin vermez.</span><span class="sxs-lookup"><span data-stu-id="df5dc-127">By using a circuit breaker, the application avoids provoking a denial of service to itself.</span></span>

![Üstel geri alma ile yeniden denemeler tarafından işlenen kısmi hataların diyagramı.](./media/build-resilient-services-ready-for-the-cloud-embrace-transient-failures-in-the-cloud/retry-partial-failures.png)

<span data-ttu-id="df5dc-129">**Şekil 4-9.**</span><span class="sxs-lookup"><span data-stu-id="df5dc-129">**Figure 4-9.**</span></span> <span data-ttu-id="df5dc-130">Üstel geri alma ile yeniden denemeler tarafından işlenen kısmi arızalar</span><span class="sxs-lookup"><span data-stu-id="df5dc-130">Partial failures handled by retries with exponential backoff</span></span>

<span data-ttu-id="df5dc-131">Bu teknikleri, hem HTTP kaynaklarında hem de veritabanı kaynaklarında kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="df5dc-131">You can use these techniques both in HTTP resources and in database resources.</span></span> <span data-ttu-id="df5dc-132">Şekil 4-9 ' de, uygulama 3 katmanlı bir mimariye dayanır, bu nedenle hizmet düzeyinde (HTTP) ve veri katmanı düzeyinde (TCP) Bu tekniklerin olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="df5dc-132">In Figure 4-9, the application is based on a 3-tier architecture, so you need these techniques at the services level (HTTP) and at the data tier level (TCP).</span></span> <span data-ttu-id="df5dc-133">Veritabanına ek olarak yalnızca tek bir uygulama katmanını kullanan tek parçalı bir uygulamada (ek hizmet veya mikro hizmet olmadan), veritabanı bağlantı düzeyindeki geçici hataların işlenmesi yeterli olabilir.</span><span class="sxs-lookup"><span data-stu-id="df5dc-133">In a monolithic application that uses only a single app tier in addition to the database (no additional services or microservices), handling transient failures at the database connection level might be enough.</span></span> <span data-ttu-id="df5dc-134">Bu senaryoda, veritabanı bağlantısının yalnızca belirli bir yapılandırması gerekir.</span><span class="sxs-lookup"><span data-stu-id="df5dc-134">In that scenario, just a particular configuration of the database connection is required.</span></span>

<span data-ttu-id="df5dc-135">Kullandığınız .NET sürümüne bağlı olarak veritabanına erişen dayanıklı iletişimler uygularken, bu, basit olabilir (örneğin, [Entity Framework 6 veya üzeri ile](/ef/ef6/fundamentals/connection-resiliency/retry-logic)).</span><span class="sxs-lookup"><span data-stu-id="df5dc-135">When implementing resilient communications that access the database, depending on the version of .NET you are using, it can be straightforward (for example, [with Entity Framework 6 or later](/ef/ef6/fundamentals/connection-resiliency/retry-logic).</span></span> <span data-ttu-id="df5dc-136">Veritabanı bağlantısını yapılandırmanın yalnızca bir önemi vardır.</span><span class="sxs-lookup"><span data-stu-id="df5dc-136">It's just a matter of configuring the database connection).</span></span> <span data-ttu-id="df5dc-137">Ya da, [geçici hata Işleme uygulama bloğu](https://docs.microsoft.com/previous-versions/msp-n-p/hh680934(v=pandp.50)) (.net 'in önceki sürümleri için) gibi ek kitaplıklar kullanmanız veya kendi kitaplığınızı uygulamanız gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="df5dc-137">Or, you might need to use additional libraries like the [Transient Fault Handling Application Block](https://docs.microsoft.com/previous-versions/msp-n-p/hh680934(v=pandp.50)) (for earlier versions of .NET), or even implement your own library.</span></span>

<span data-ttu-id="df5dc-138">HTTP yeniden denemeleri ve devre kesicileri uygularken .NET önerisi, .NET Core desteği içeren .NET Framework 4,0, .NET Framework 4,5 ve .NET Standard 1,1 ' i hedefleyen [Polly](https://github.com/App-vNext/Polly) kitaplığı kullanmaktır.</span><span class="sxs-lookup"><span data-stu-id="df5dc-138">When implementing HTTP retries and circuit breakers, the recommendation for .NET is to use the [Polly](https://github.com/App-vNext/Polly) library, which targets .NET Framework 4.0, .NET Framework 4.5, and .NET Standard 1.1, which includes .NET Core support.</span></span>

<span data-ttu-id="df5dc-139">Buluttaki kısmi hataların işlenmesine yönelik stratejileri nasıl uygulayacağınızı öğrenmek için aşağıdaki başvurulara bakın.</span><span class="sxs-lookup"><span data-stu-id="df5dc-139">To learn how to implement strategies for handling partial failures in the cloud, see the following references.</span></span>

### <a name="additional-resources"></a><span data-ttu-id="df5dc-140">Ek kaynaklar</span><span class="sxs-lookup"><span data-stu-id="df5dc-140">Additional resources</span></span>

- <span data-ttu-id="df5dc-141">**Kısmi başarısızlığı işlemek için esnek iletişim uygulama**</span><span class="sxs-lookup"><span data-stu-id="df5dc-141">**Implementing resilient communication to handle partial failure**</span></span>

    [https://docs.microsoft.com/dotnet/architecture/microservices/implement-resilient-applications/partial-failure-strategies](../../microservices/implement-resilient-applications/partial-failure-strategies.md)

- <span data-ttu-id="df5dc-142">**Entity Framework bağlantı dayanıklılığı ve yeniden deneme mantığı (sürüm 6 ve üzeri)**</span><span class="sxs-lookup"><span data-stu-id="df5dc-142">**Entity Framework connection resiliency and retry logic (version 6 and later)**</span></span>

    [https://docs.microsoft.com/ef/ef6/fundamentals/connection-resiliency/retry-logic](/ef/ef6/fundamentals/connection-resiliency/retry-logic)

- <span data-ttu-id="df5dc-143">**Geçici hata Işleme uygulama bloğu**</span><span class="sxs-lookup"><span data-stu-id="df5dc-143">**The Transient Fault Handling Application Block**</span></span>

- <https://docs.microsoft.com/previous-versions/msp-n-p/hh680934(v=pandp.50)>

- <span data-ttu-id="df5dc-144">**Esnek HTTP iletişimi için Polly kitaplığı**</span><span class="sxs-lookup"><span data-stu-id="df5dc-144">**Polly library for resilient HTTP communication**</span></span>

    https://github.com/App-vNext/Polly

>[!div class="step-by-step"]
><span data-ttu-id="df5dc-145">[Önceki](when-to-deploy-windows-containers-to-azure-container-service-kubernetes.md)
>[İleri](modernize-your-apps-with-monitoring-and-telemetry.md)</span><span class="sxs-lookup"><span data-stu-id="df5dc-145">[Previous](when-to-deploy-windows-containers-to-azure-container-service-kubernetes.md)
[Next](modernize-your-apps-with-monitoring-and-telemetry.md)</span></span>
