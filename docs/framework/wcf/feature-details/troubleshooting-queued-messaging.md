---
description: Daha fazla bilgi için bkz. sıraya alınan Mesajlaşma sorunlarını giderme
title: Kuyruğa Alınan İletilerde Sorun Giderme
ms.date: 03/30/2017
ms.assetid: a5f2836f-018d-42f5-a571-1e97e64ea5b0
ms.openlocfilehash: e7cf2706e7c0853f14bad449b6ecaa8dd5983755
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 02/06/2021
ms.locfileid: "99733092"
---
# <a name="troubleshooting-queued-messaging"></a><span data-ttu-id="e4605-103">Kuyruğa Alınan İletilerde Sorun Giderme</span><span class="sxs-lookup"><span data-stu-id="e4605-103">Troubleshooting Queued Messaging</span></span>

<span data-ttu-id="e4605-104">Bu bölüm, Windows Communication Foundation (WCF) içinde kuyrukları kullanmaya yönelik genel soruları ve sorun giderme yardımını içerir.</span><span class="sxs-lookup"><span data-stu-id="e4605-104">This section contains common questions and troubleshooting help for using queues in Windows Communication Foundation (WCF).</span></span>

## <a name="common-questions"></a><span data-ttu-id="e4605-105">Sık sorulan sorular</span><span class="sxs-lookup"><span data-stu-id="e4605-105">Common Questions</span></span>

<span data-ttu-id="e4605-106">**S:** WCF Beta 1 ' i kullandım ve MSMQ düzeltmesini yükledim.</span><span class="sxs-lookup"><span data-stu-id="e4605-106">**Q:** I used WCF Beta 1 and I installed the MSMQ hotfix.</span></span> <span data-ttu-id="e4605-107">Düzeltmeyi kaldırdım mıyım?</span><span class="sxs-lookup"><span data-stu-id="e4605-107">Do I need to remove the hotfix?</span></span>

<span data-ttu-id="e4605-108">**Y:** Evet.</span><span class="sxs-lookup"><span data-stu-id="e4605-108">**A:** Yes.</span></span> <span data-ttu-id="e4605-109">Bu düzeltme artık desteklenmiyor.</span><span class="sxs-lookup"><span data-stu-id="e4605-109">This hotfix is no longer supported.</span></span> <span data-ttu-id="e4605-110">WCF artık bir düzeltme gereksinimi olmadan MSMQ üzerinde çalışmaktadır.</span><span class="sxs-lookup"><span data-stu-id="e4605-110">WCF now works on MSMQ without a hotfix requirement.</span></span>

<span data-ttu-id="e4605-111">**S:** MSMQ için iki bağlama vardır: <xref:System.ServiceModel.NetMsmqBinding> ve <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> .</span><span class="sxs-lookup"><span data-stu-id="e4605-111">**Q:** There are two bindings for MSMQ: <xref:System.ServiceModel.NetMsmqBinding> and <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>.</span></span> <span data-ttu-id="e4605-112">Ne zaman kullanmalıyım?</span><span class="sxs-lookup"><span data-stu-id="e4605-112">What should I use and when?</span></span>

<span data-ttu-id="e4605-113">Y **:** <xref:System.ServiceModel.NetMsmqBinding>Ikı WCF uygulaması arasındaki sıraya alınmış iletişim IÇIN MSMQ 'yu bir taşıma olarak kullanmak istediğinizde kullanın.</span><span class="sxs-lookup"><span data-stu-id="e4605-113">**A:** Use the <xref:System.ServiceModel.NetMsmqBinding> when you want to use MSMQ as a transport for queued communication between two WCF applications.</span></span> <span data-ttu-id="e4605-114"><xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>Yenı WCF uygulamalarıyla iletişim kurmak için mevcut MSMQ uygulamalarını kullanmak istediğinizde kullanın.</span><span class="sxs-lookup"><span data-stu-id="e4605-114">Use the <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> when you want to use existing MSMQ applications to communicate with new WCF applications.</span></span>

<span data-ttu-id="e4605-115">**S:** Ve bağlamalarını kullanmak için MSMQ 'YU yükseltmem gerekiyor <xref:System.ServiceModel.NetMsmqBinding> `MsmqIntegration` mu?</span><span class="sxs-lookup"><span data-stu-id="e4605-115">**Q:** Do I have to upgrade MSMQ to use the <xref:System.ServiceModel.NetMsmqBinding> and `MsmqIntegration` bindings?</span></span>

<span data-ttu-id="e4605-116">Y **:** Eşleşen.</span><span class="sxs-lookup"><span data-stu-id="e4605-116">**A:** No.</span></span> <span data-ttu-id="e4605-117">Her iki bağlama da Windows XP ve Windows Server 2003 üzerinde MSMQ 3,0 ile çalışır.</span><span class="sxs-lookup"><span data-stu-id="e4605-117">Both bindings work with MSMQ 3.0 on Windows XP and Windows Server 2003.</span></span> <span data-ttu-id="e4605-118">Windows Vista 'da MSMQ 4,0 sürümüne yükselttiğinizde bağlamaların bazı özellikleri kullanılabilir hale gelir.</span><span class="sxs-lookup"><span data-stu-id="e4605-118">Certain features of the bindings become available when you upgrade to MSMQ 4.0 in Windows Vista.</span></span>

<span data-ttu-id="e4605-119">**S:** MSMQ <xref:System.ServiceModel.NetMsmqBinding> 4,0 ' de ve <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> bağlamaların hangi özellikleri mevcuttur, ancak MSMQ 3,0 ' de kullanılabilir mi?</span><span class="sxs-lookup"><span data-stu-id="e4605-119">**Q:** What features of the <xref:System.ServiceModel.NetMsmqBinding> and <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> bindings are available in MSMQ 4.0 but not in MSMQ 3.0?</span></span>

<span data-ttu-id="e4605-120">Y **:** MSMQ 4,0 ' de şu özellikler mevcuttur, ancak MSMQ 3,0 ' de kullanılabilir:</span><span class="sxs-lookup"><span data-stu-id="e4605-120">**A:** The following features are available in MSMQ 4.0 but not in MSMQ 3.0:</span></span>

- <span data-ttu-id="e4605-121">Özel atılacak mektup kuyruğu yalnızca MSMQ 4,0 ' de desteklenir.</span><span class="sxs-lookup"><span data-stu-id="e4605-121">Custom dead-letter queue is supported only on MSMQ 4.0.</span></span>

- <span data-ttu-id="e4605-122">MSMQ 3,0 ve 4,0, zarar iletilerini farklı işler.</span><span class="sxs-lookup"><span data-stu-id="e4605-122">MSMQ 3.0 and 4.0 handle poison messages differently.</span></span>

- <span data-ttu-id="e4605-123">Yalnızca MSMQ 4,0, uzaktan işlenen okumayı destekler.</span><span class="sxs-lookup"><span data-stu-id="e4605-123">Only MSMQ 4.0 supports remote transacted read.</span></span>

<span data-ttu-id="e4605-124">Daha fazla bilgi için bkz. [Windows Vista, Windows Server 2003 ve WINDOWS XP 'de kuyruğa alma özellikleri](diff-in-queue-in-vista-server-2003-windows-xp.md).</span><span class="sxs-lookup"><span data-stu-id="e4605-124">For more information, see [Differences in Queuing Features in Windows Vista, Windows Server 2003, and Windows XP](diff-in-queue-in-vista-server-2003-windows-xp.md).</span></span>

<span data-ttu-id="e4605-125">**S:** MSMQ 3,0 ' I kuyruğa alınmış iletişimin bir tarafında ve diğer tarafta MSMQ 4,0 kullanabilir miyim?</span><span class="sxs-lookup"><span data-stu-id="e4605-125">**Q:** Can I use MSMQ 3.0 on one side of a queued communication and MSMQ 4.0 on the other side?</span></span>

<span data-ttu-id="e4605-126">**Y:** Evet.</span><span class="sxs-lookup"><span data-stu-id="e4605-126">**A:** Yes.</span></span>

<span data-ttu-id="e4605-127">**S:** Mevcut MSMQ uygulamalarını yeni WCF istemcileri veya sunucularıyla bütünleştirmek istiyorum.</span><span class="sxs-lookup"><span data-stu-id="e4605-127">**Q:** I want to integrate existing MSMQ applications with new WCF clients or servers.</span></span> <span data-ttu-id="e4605-128">MSMQ altyapımın her iki tarafını da yükseltmem gerekiyor mu?</span><span class="sxs-lookup"><span data-stu-id="e4605-128">Do I need to upgrade both sides of my MSMQ infrastructure?</span></span>

<span data-ttu-id="e4605-129">Y **:** Eşleşen.</span><span class="sxs-lookup"><span data-stu-id="e4605-129">**A:** No.</span></span> <span data-ttu-id="e4605-130">Her iki taraftan da MSMQ 4,0 sürümüne yükseltmeniz gerekmez.</span><span class="sxs-lookup"><span data-stu-id="e4605-130">You do not have to upgrade to MSMQ 4.0 on either side.</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="e4605-131">Sorun giderme</span><span class="sxs-lookup"><span data-stu-id="e4605-131">Troubleshooting</span></span>

<span data-ttu-id="e4605-132">Bu bölüm, en yaygın sorun giderme sorunlarının yanıtlarını içerir.</span><span class="sxs-lookup"><span data-stu-id="e4605-132">This section contains answers to most common troubleshooting issues.</span></span> <span data-ttu-id="e4605-133">Bilinen sınırlamalar olan bazı sorunlar da sürüm notlarında açıklanmıştır.</span><span class="sxs-lookup"><span data-stu-id="e4605-133">Some issues that are known limitations are also described in the release notes.</span></span>

<span data-ttu-id="e4605-134">**S:** Özel bir sıra kullanmaya çalışıyorum ve şu özel durumu alıyorum: `System.InvalidOperationException` : URL geçersiz.</span><span class="sxs-lookup"><span data-stu-id="e4605-134">**Q:** I am trying to use a private queue and I get the following exception: `System.InvalidOperationException`: The URL is invalid.</span></span> <span data-ttu-id="e4605-135">Kuyruğun URL 'SI ' $ ' karakterini içeremez.</span><span class="sxs-lookup"><span data-stu-id="e4605-135">The URL for the queue cannot contain the '$' character.</span></span> <span data-ttu-id="e4605-136">Özel bir kuyruğu gidermek için net. MSMQ: gt Machine/Private/SıraAdı içindeki sözdizimini kullanın.</span><span class="sxs-lookup"><span data-stu-id="e4605-136">Use the syntax in net.msmq://machine/private/queueName to address a private queue.</span></span>

<span data-ttu-id="e4605-137">Y **:** Yapılandırmanızda ve kodunuzda sıra Tekdüzen Kaynak tanımlayıcısı 'nı (URI) denetleyin.</span><span class="sxs-lookup"><span data-stu-id="e4605-137">**A:** Check the queue Uniform Resource Identifier (URI) in your configuration and code.</span></span> <span data-ttu-id="e4605-138">URI 'de "$" karakterini kullanmayın.</span><span class="sxs-lookup"><span data-stu-id="e4605-138">Do not use the "$" character in the URI.</span></span> <span data-ttu-id="e4605-139">Örneğin, OrdersQueue adlı özel bir kuyruğu ele almak için URI 'yi olarak belirtin `net.msmq://localhost/private/ordersQueue` .</span><span class="sxs-lookup"><span data-stu-id="e4605-139">For example, to address a private queue named OrdersQueue, specify the URI as `net.msmq://localhost/private/ordersQueue`.</span></span>

<span data-ttu-id="e4605-140">**S:** `ServiceHost.Open()` Sıraya alınan uygulamamda çağırmak şu özel durumu oluşturur: `System.ArgumentException` : temel adres bir URI sorgu dizesi içeremez.</span><span class="sxs-lookup"><span data-stu-id="e4605-140">**Q:** Calling `ServiceHost.Open()` on my queued application throws the following exception: `System.ArgumentException`: A base address cannot contain a URI query string.</span></span> <span data-ttu-id="e4605-141">Neden?</span><span class="sxs-lookup"><span data-stu-id="e4605-141">Why?</span></span>

<span data-ttu-id="e4605-142">Y **:** Yapılandırma dosyanızdaki ve kodunuzda sıra URI 'sini kontrol edin.</span><span class="sxs-lookup"><span data-stu-id="e4605-142">**A:** Check the queue URI in your configuration file and in your code.</span></span> <span data-ttu-id="e4605-143">MSMQ kuyrukları '? ' karakterinin kullanımını desteklese de URI 'Ler, bu karakteri bir dize sorgusunun başlangıcı olarak yorumlar.</span><span class="sxs-lookup"><span data-stu-id="e4605-143">While MSMQ queues support the use of the '?' character, URIs interpret this character as the beginning of a string query.</span></span> <span data-ttu-id="e4605-144">Bu sorunu önlemek için, '? ' karakterlerini içermeyen sıra adlarını kullanın.</span><span class="sxs-lookup"><span data-stu-id="e4605-144">To avoid this issue, use queue names that do not contain '?' characters.</span></span>

<span data-ttu-id="e4605-145">**S:** Gönderme başarılı ancak alıcıda hiçbir hizmet işlemi çağrılmayacak.</span><span class="sxs-lookup"><span data-stu-id="e4605-145">**Q:** My send succeeded but no service operation is invoked on the receiver.</span></span> <span data-ttu-id="e4605-146">Neden?</span><span class="sxs-lookup"><span data-stu-id="e4605-146">Why?</span></span>

<span data-ttu-id="e4605-147">Y **:** Yanıtı öğrenmek için aşağıdaki onay listesinden çalışın:</span><span class="sxs-lookup"><span data-stu-id="e4605-147">**A:** To determine the answer, work through the following check list:</span></span>

- <span data-ttu-id="e4605-148">İşlem sırası gereksinimlerinin belirtilen sigortalarla uyumlu olduğundan emin olun.</span><span class="sxs-lookup"><span data-stu-id="e4605-148">Check that the transactional queue requirements are compatible with the assurances specified.</span></span> <span data-ttu-id="e4605-149">Aşağıdaki ilkelere göz önünde edin:</span><span class="sxs-lookup"><span data-stu-id="e4605-149">Note the following principles:</span></span>

  - <span data-ttu-id="e4605-150">Dayanıklı iletileri (veri birimleri ve oturumlar) <xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A>  =  yalnızca bir işlem kuyruğuna "tam bir kez" Assura () ile gönderebilirsiniz `true` .</span><span class="sxs-lookup"><span data-stu-id="e4605-150">You can send durable messages (datagrams and sessions) with "exactly once" assurances (<xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> = `true`) only to a transactional queue.</span></span>

  - <span data-ttu-id="e4605-151">Yalnızca "tam bir kez" asi ile oturum gönderebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e4605-151">You can send sessions only with "exactly once" assurances.</span></span>

  - <span data-ttu-id="e4605-152">İşlem sırasındaki bir oturumdaki iletileri almak için bir işlem gereklidir.</span><span class="sxs-lookup"><span data-stu-id="e4605-152">A transaction is required to receive messages in a session from a transactional queue.</span></span>

  - <span data-ttu-id="e4605-153"><xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A>  =  `false` Yalnızca işlem olmayan bir sıraya () sahip olmayan geçici veya dayanıklı iletiler (yalnızca veri birimleri) gönderebilir veya alabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e4605-153">You can send or receive volatile or durable messages (datagrams only) with no assurances (<xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> = `false`) only to a non-transactional queue.</span></span>

- <span data-ttu-id="e4605-154">Atılacak ileti sırasını denetleyin.</span><span class="sxs-lookup"><span data-stu-id="e4605-154">Check the dead-letter queue.</span></span> <span data-ttu-id="e4605-155">İletileri burada bulursanız, neden teslim edilmediğini saptayın.</span><span class="sxs-lookup"><span data-stu-id="e4605-155">If you find the messages there, determine why they were not delivered.</span></span>

- <span data-ttu-id="e4605-156">Bağlantı veya adresleme sorunları için giden kuyrukları denetleyin.</span><span class="sxs-lookup"><span data-stu-id="e4605-156">Check the outgoing queues for connectivity or addressing problems.</span></span>

<span data-ttu-id="e4605-157">**S:** Özel bir atılacak ileti sırası belirttim, ancak gönderen uygulamayı başlattığımda, atılacak ileti sırasının bulunamadığını veya gönderen uygulamanın atılacak ileti kuyruğu için izin bulunmadığını belirten bir özel durum alıyorum.</span><span class="sxs-lookup"><span data-stu-id="e4605-157">**Q:** I have specified a custom dead-letter queue, but when I start the sender application, I get an exception that either the dead-letter queue is not found, or the sending application has no permission to the dead-letter queue.</span></span> <span data-ttu-id="e4605-158">Bu neden gerçekleşiyor?</span><span class="sxs-lookup"><span data-stu-id="e4605-158">Why is this happening?</span></span>

<span data-ttu-id="e4605-159">Y **:** Özel atılacak ileti sırası URI 'SI, ilk kesimde bir "localhost" veya bilgisayar adı (örneğin, net. MSMQ://localhost/private/myAppdead-letter Queue) içermelidir.</span><span class="sxs-lookup"><span data-stu-id="e4605-159">**A:** The custom dead-letter queue URI must include a "localhost" or the computer name in the first segment, for example, net.msmq://localhost/private/myAppdead-letter queue.</span></span>

<span data-ttu-id="e4605-160">**S:** Her zaman özel bir atılacak ileti sırası tanımlanması veya varsayılan bir teslim edilemeyen ileti sırası olması gerekir mi?</span><span class="sxs-lookup"><span data-stu-id="e4605-160">**Q:** Is it always necessary to define a custom dead-letter queue, or is there a default dead-letter queue?</span></span>

<span data-ttu-id="e4605-161">Y **:** Asuriyler "tam olarak" ( <xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A>  =  `true` ) ise ve özel bir atılacak ileti sırası belirtmezseniz, varsayılan sistem genelinde işlem atılacak ileti sırası olur.</span><span class="sxs-lookup"><span data-stu-id="e4605-161">**A:** If assurances are "exactly once" (<xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> = `true`), and if you do not specify a custom dead-letter queue, the default is a system-wide transactional dead-letter queue.</span></span>

<span data-ttu-id="e4605-162">Eğer asursları None ( <xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A>  =  `false` ) ise, varsayılan, atılacak ileti sırası işlevselliği değildir.</span><span class="sxs-lookup"><span data-stu-id="e4605-162">If assurances are none (<xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> = `false`), then the default is no dead-letter queue functionality.</span></span>

<span data-ttu-id="e4605-163">**S:** Hizmetim SvcHost üzerinde oluşturulur. "EndpointListener Requirements ListenerFactory tarafından karşılanamıyor" iletisiyle birlikte aç.</span><span class="sxs-lookup"><span data-stu-id="e4605-163">**Q:** My service throws on SvcHost.Open with a message "EndpointListener requirements cannot be met by the ListenerFactory".</span></span> <span data-ttu-id="e4605-164">Neden?</span><span class="sxs-lookup"><span data-stu-id="e4605-164">Why?</span></span>

<span data-ttu-id="e4605-165">A.</span><span class="sxs-lookup"><span data-stu-id="e4605-165">A.</span></span> <span data-ttu-id="e4605-166">Hizmet sözleşmenizi denetleyin.</span><span class="sxs-lookup"><span data-stu-id="e4605-166">Check your service contract.</span></span> <span data-ttu-id="e4605-167">Tüm hizmet işlemlerine "ıoneway =" koymak için unutulmuş olabilirsiniz `true` .</span><span class="sxs-lookup"><span data-stu-id="e4605-167">You may have forgotten to put "IsOneWay=`true`" on all the service operations.</span></span> <span data-ttu-id="e4605-168">Kuyruklar yalnızca tek yönlü hizmet işlemlerini destekler.</span><span class="sxs-lookup"><span data-stu-id="e4605-168">Queues support only one-way service operations.</span></span>

<span data-ttu-id="e4605-169">**S:** Kuyrukta ileti var, ancak hiçbir hizmet işlemi çağrılmayacak.</span><span class="sxs-lookup"><span data-stu-id="e4605-169">**Q:** There are messages in the queue but no service operation is invoked.</span></span> <span data-ttu-id="e4605-170">Sorun nedir?</span><span class="sxs-lookup"><span data-stu-id="e4605-170">What is the problem?</span></span>

<span data-ttu-id="e4605-171">Y **:** Hizmet ana bilgisayarın hatalı olup olmadığını belirleme.</span><span class="sxs-lookup"><span data-stu-id="e4605-171">**A:** Determine if your service host is faulted.</span></span> <span data-ttu-id="e4605-172">İzlemeye veya uygulamaya bakarak kontrol edebilirsiniz `IErrorHandler` .</span><span class="sxs-lookup"><span data-stu-id="e4605-172">You can check by looking at the trace or implementing `IErrorHandler`.</span></span> <span data-ttu-id="e4605-173">Bir zarar iletisi algılanırsa, varsayılan olarak hizmet ana bilgisayar hataları.</span><span class="sxs-lookup"><span data-stu-id="e4605-173">Service host faults, by default, if a poison message is detected.</span></span>

<span data-ttu-id="e4605-174">**S:** Kuyrukta iletiler var, ancak Web 'de barındırılan sıraya alınmış hizmetm etkinleştirilmiyor.</span><span class="sxs-lookup"><span data-stu-id="e4605-174">**Q:** There are messages in the queue but my Web-hosted queued service is not getting activated.</span></span> <span data-ttu-id="e4605-175">Neden?</span><span class="sxs-lookup"><span data-stu-id="e4605-175">Why?</span></span>

<span data-ttu-id="e4605-176">Y **:** En yaygın nedenler izinlerdir.</span><span class="sxs-lookup"><span data-stu-id="e4605-176">**A:** The most common reason is permissions.</span></span>

1. <span data-ttu-id="e4605-177">`NetMsmqActivator`İşlemin çalıştığından ve `NetMsmqActivator` işlemin kimliğine kuyrukta okuma ve arama izni verildiğinden emin olun.</span><span class="sxs-lookup"><span data-stu-id="e4605-177">Ensure that the `NetMsmqActivator` process is running and the identity of the `NetMsmqActivator` process is given read and seek permission on the queue.</span></span>

2. <span data-ttu-id="e4605-178">, `NetMsmqActivator` Uzak bir makinedeki kuyrukları izliyorsanız, bunun `NetMsmqActivator` kısıtlı bir belirteç altında çalıştırılmadığından emin olun.</span><span class="sxs-lookup"><span data-stu-id="e4605-178">If the `NetMsmqActivator` is monitoring queues on a remote machine, ensure that `NetMsmqActivator` does not run under a restricted token.</span></span> <span data-ttu-id="e4605-179">Öğesini `NetMsmqActivator` Kısıtlanmamış bir belirteçle çalıştırmak için:</span><span class="sxs-lookup"><span data-stu-id="e4605-179">To run the `NetMsmqActivator` with an unrestricted token:</span></span>

    ```console
    sc sidtype NetMsmqActivator unrestricted
    ```

<span data-ttu-id="e4605-180">Güvenlikle ilgili olmayan Web ana bilgisayar sorunları için bkz. [kuyruğa alınmış bir uygulamayı barındıran Web](web-hosting-a-queued-application.md).</span><span class="sxs-lookup"><span data-stu-id="e4605-180">For non-security related Web host issues refer to: [Web Hosting a Queued Application](web-hosting-a-queued-application.md).</span></span>

<span data-ttu-id="e4605-181">**S:** Oturumlara erişmenin en kolay yolu nedir?</span><span class="sxs-lookup"><span data-stu-id="e4605-181">**Q:** What is the easiest way to access sessions?</span></span>

<span data-ttu-id="e4605-182">Y **:** `true`Oturumdaki son iletiye karşılık gelen Işlemde AutoComplete = ve `false` kalan tüm hizmet Işlemlerinde Otomatik Tamamla = seçeneğini ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="e4605-182">**A:** Set AutoComplete=`true` on the operation that corresponds to the last message in the session, and set AutoComplete=`false` on all remaining service operations.</span></span>

<span data-ttu-id="e4605-183">**S:** Hizmeti neden `ProtocolException` hem sıraya alınmış oturum iletilerini hem de sıraya alınmış veri birimi iletilerini içeren bir kuyruktan okurken neden bir oluştur?</span><span class="sxs-lookup"><span data-stu-id="e4605-183">**Q:** Why does my service throw a `ProtocolException` when reading from a queue that contains both queued session messages and queued datagram messages?</span></span>

<span data-ttu-id="e4605-184">Y **:** Sıraya alınan oturum iletilerinin ve sıraya alınmış veri birimi iletilerinin bulunduğu şekilde temel bir farklılık vardır.</span><span class="sxs-lookup"><span data-stu-id="e4605-184">**A:** There is a fundamental difference in the way queued session messages and queued datagram messages are composed.</span></span> <span data-ttu-id="e4605-185">Bu nedenle, sıraya alınan bir oturum iletisini okumasını bekleyen bir hizmet, bir sıraya alınmış veri birimi iletisi alamıyor ve sıradaki bir veri birimi iletisini okumak için bekleyen bir hizmet oturum iletisi alamaz.</span><span class="sxs-lookup"><span data-stu-id="e4605-185">Because of this, a service that is expecting to read a queued session message cannot receive a queued datagram message and a service expecting to read a queued datagram message cannot receive a session message.</span></span> <span data-ttu-id="e4605-186">Aynı sıradan her iki türdeki iletiyi okumaya çalışmak aşağıdaki özel durumu oluşturur:</span><span class="sxs-lookup"><span data-stu-id="e4605-186">Attempting to read both types of messages from the same queue throws the following exception:</span></span>

```console
System.ServiceModel.MsmqPoisonMessageException: The transport channel detected a poison message. This occurred because the message exceeded the maximum number of delivery attempts or because the channel detected a fundamental problem with the message. The inner exception may contain additional information.
---> System.ServiceModel.ProtocolException: An incoming MSMQ message contained invalid or unexpected .NET Message Framing information in its body. The message cannot be received. Ensure that the sender is using a compatible service contract with a matching SessionMode.
```

<span data-ttu-id="e4605-187">Bir uygulama aynı bilgisayardan hem sıraya alınmış oturum iletileri hem de sıraya alınmış veri birimi iletileri gönderiyorsa, sistem atılacak ileti sırası ve özel bir atılacak mektup sırası özellikle bu soruna açıktır.</span><span class="sxs-lookup"><span data-stu-id="e4605-187">The system dead-letter queue, as well as any custom dead-letter queue, is particularly susceptible to this issue if an application sends both queued session messages and queued datagram messages from the same computer.</span></span> <span data-ttu-id="e4605-188">Bir ileti başarıyla gönderilemezse, teslim edilemeyen ileti kuyruğuna taşınır.</span><span class="sxs-lookup"><span data-stu-id="e4605-188">If a message cannot be sent successfully, it is moved to the dead-letter queue.</span></span> <span data-ttu-id="e4605-189">Bu koşullarda, teslim edilemeyen ileti kuyruğunda hem oturum hem de veri birimi iletileri olması mümkündür.</span><span class="sxs-lookup"><span data-stu-id="e4605-189">Under these circumstances, it is possible to have both session and datagram messages in the dead-letter queue.</span></span> <span data-ttu-id="e4605-190">Her iki türden iletiyi bir kuyruktan okurken çalışma zamanında ayırmanın bir yolu yoktur, bu nedenle uygulamalar aynı bilgisayardan hem sıraya alınmış oturum iletilerini hem de sıraya alınmış veri birimi iletilerini göndermemelidir.</span><span class="sxs-lookup"><span data-stu-id="e4605-190">There is no way to separate both types of messages at runtime when reading from a queue, therefore, applications should not send both queued session messages and queued datagram messages from the same computer.</span></span>

### <a name="msmq-integration-specific-troubleshooting"></a><span data-ttu-id="e4605-191">MSMQ tümleştirmesi: belirli sorun giderme</span><span class="sxs-lookup"><span data-stu-id="e4605-191">MSMQ Integration: Specific Troubleshooting</span></span>

<span data-ttu-id="e4605-192">**S:** Bir ileti gönderdiğimde veya hizmet ana bilgisayarını açtığımda, düzenin yanlış olduğunu belirten bir hata alıyorum.</span><span class="sxs-lookup"><span data-stu-id="e4605-192">**Q:** When I send a message, or when I open the service host, I get an error that indicates the scheme is wrong.</span></span> <span data-ttu-id="e4605-193">Neden?</span><span class="sxs-lookup"><span data-stu-id="e4605-193">Why?</span></span>

<span data-ttu-id="e4605-194">Y **:** MSMQ tümleştirme bağlamasını kullandığınızda, MSMQ. formatname şemasını kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="e4605-194">**A:** When you use the MSMQ integration binding, you must use the msmq.formatname scheme.</span></span> <span data-ttu-id="e4605-195">Örneğin, MSMQ. FormatName: DIRECT = OS: .\Private $ \OrdersQueue.</span><span class="sxs-lookup"><span data-stu-id="e4605-195">For example, msmq.formatname:DIRECT=OS:.\private$\OrdersQueue.</span></span> <span data-ttu-id="e4605-196">Ancak özel atılacak ileti sırasını belirttiğinizde net. MSMQ şemasını kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="e4605-196">But when you specify the custom dead-letter queue, you must use the net.msmq scheme.</span></span>

<span data-ttu-id="e4605-197">**S:** Ortak veya özel biçim adı kullandığımda ve hizmet ana bilgisayarını Windows Vista 'da açtığınızda bir hata alıyorum.</span><span class="sxs-lookup"><span data-stu-id="e4605-197">**Q:** When I use a public or private format name and open the service host on Windows Vista, I get an error.</span></span> <span data-ttu-id="e4605-198">Neden?</span><span class="sxs-lookup"><span data-stu-id="e4605-198">Why?</span></span>

<span data-ttu-id="e4605-199">Y **:** Windows Vista 'daki WCF tümleştirme kanalı, zarar iletilerini işlemek için ana uygulama kuyruğu için bir alt sıra açılıp açılmadığını denetler.</span><span class="sxs-lookup"><span data-stu-id="e4605-199">**A:** The WCF integration channel on Windows Vista checks to see if a subqueue can be opened for the main application queue for handling poison messages.</span></span> <span data-ttu-id="e4605-200">Alt sıra adı, dinleyiciye geçirilen bir MSMQ. formatname URI 'sinden türetilir.</span><span class="sxs-lookup"><span data-stu-id="e4605-200">The subqueue name is derived from an msmq.formatname URI passed to the listener.</span></span> <span data-ttu-id="e4605-201">MSMQ 'daki alt sıra adı yalnızca bir doğrudan biçim adı olabilir.</span><span class="sxs-lookup"><span data-stu-id="e4605-201">The subqueue name in MSMQ can only be a direct format name.</span></span> <span data-ttu-id="e4605-202">Bu nedenle hatayı görürsünüz.</span><span class="sxs-lookup"><span data-stu-id="e4605-202">So you see the error.</span></span> <span data-ttu-id="e4605-203">Sıra URI 'sini doğrudan biçim adıyla değiştirin.</span><span class="sxs-lookup"><span data-stu-id="e4605-203">Change the queue URI to a direct format name.</span></span>

<span data-ttu-id="e4605-204">**S:** MSMQ uygulamasından bir ileti alırken ileti kuyrukta bulunur ve alan WCF uygulaması tarafından okunamaz.</span><span class="sxs-lookup"><span data-stu-id="e4605-204">**Q:** When receiving a message from an MSMQ application, the message sits in the queue and is not read by the receiving WCF application.</span></span> <span data-ttu-id="e4605-205">Neden?</span><span class="sxs-lookup"><span data-stu-id="e4605-205">Why?</span></span>

<span data-ttu-id="e4605-206">Y **:** İletinin gövdeye sahip olup olmadığını denetleyin.</span><span class="sxs-lookup"><span data-stu-id="e4605-206">**A:** Check to see whether the message has a body.</span></span> <span data-ttu-id="e4605-207">İletinin gövdesi yoksa, MSMQ tümleştirme kanalı iletiyi yoksayar.</span><span class="sxs-lookup"><span data-stu-id="e4605-207">If the message has no body, the MSMQ integration channel ignores the message.</span></span> <span data-ttu-id="e4605-208">`IErrorHandler`Özel durumlar hakkında bildirim almak ve izlemeleri denetlemek için uygulayın.</span><span class="sxs-lookup"><span data-stu-id="e4605-208">Implement `IErrorHandler` to be notified of exceptions and check the traces.</span></span>

### <a name="security-related-troubleshooting"></a><span data-ttu-id="e4605-209">Security-Related sorunlarını giderme</span><span class="sxs-lookup"><span data-stu-id="e4605-209">Security-Related Troubleshooting</span></span>

<span data-ttu-id="e4605-210">**S:** Çalışma grubu modunda varsayılan bağlama kullanan örneği çalıştırdığımda, iletiler gönderildi ancak alıcı tarafından hiçbir zaman alınmaz.</span><span class="sxs-lookup"><span data-stu-id="e4605-210">**Q:** When I run the sample that uses a default binding in workgroup mode, messages seem to get sent but are never received by the receiver.</span></span>

<span data-ttu-id="e4605-211">Y **:** Varsayılan olarak, iletiler Active Directory dizin hizmeti gerektiren MSMQ iç sertifikası kullanılarak imzalanır.</span><span class="sxs-lookup"><span data-stu-id="e4605-211">**A:** By default, messages are signed using an MSMQ internal certificate that requires the Active Directory directory service.</span></span> <span data-ttu-id="e4605-212">Çalışma grubu modunda Active Directory kullanılamadığından, iletiyi imzalama başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="e4605-212">In workgroup mode, because Active Directory is not available, signing the message fails.</span></span> <span data-ttu-id="e4605-213">Bu nedenle ileti, "bozuk imza" gibi atılacak ileti sırası ve hata nedeninden sonra belirtilir.</span><span class="sxs-lookup"><span data-stu-id="e4605-213">So the message lands in the dead-letter queue and failure cause, such as "Bad signature", is indicated.</span></span>

<span data-ttu-id="e4605-214">Geçici çözüm, güvenliği devre dışı bırakır.</span><span class="sxs-lookup"><span data-stu-id="e4605-214">The workaround is to turn off security.</span></span> <span data-ttu-id="e4605-215">Bu, <xref:System.ServiceModel.NetMsmqSecurity.Mode%2A>  =  <xref:System.ServiceModel.NetMsmqSecurityMode.None> çalışma grubu modunda çalışmasını sağlamak için ayarıyla yapılır.</span><span class="sxs-lookup"><span data-stu-id="e4605-215">This is done by setting <xref:System.ServiceModel.NetMsmqSecurity.Mode%2A> = <xref:System.ServiceModel.NetMsmqSecurityMode.None> to make it work in workgroup mode.</span></span>

<span data-ttu-id="e4605-216">Başka bir geçici çözüm de <xref:System.ServiceModel.MsmqTransportSecurity> <xref:System.ServiceModel.NetMsmqSecurity.Transport%2A> özelliğinden yararlanmak ve olarak ayarlamak <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> ve istemci sertifikasını ayarlamak.</span><span class="sxs-lookup"><span data-stu-id="e4605-216">Another workaround is to get the <xref:System.ServiceModel.MsmqTransportSecurity> from the <xref:System.ServiceModel.NetMsmqSecurity.Transport%2A> property and set it to <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate>, and set the client certificate.</span></span>

<span data-ttu-id="e4605-217">Ancak başka bir geçici çözüm de Active Directory tümleştirmeyle MSMQ yüklemektir.</span><span class="sxs-lookup"><span data-stu-id="e4605-217">Yet another workaround is to install MSMQ with Active Directory integration.</span></span>

<span data-ttu-id="e4605-218">**S:** Bir sıraya Active Directory için varsayılan bağlama (taşıma güvenliği açık) ile bir ileti gönderdiğimde, "iç sertifika bulunamadı" iletisini alıyorum.</span><span class="sxs-lookup"><span data-stu-id="e4605-218">**Q:** When I send a message with default binding (transport security turned on) in Active Directory to a queue, I get an "internal certificate not found" message.</span></span> <span data-ttu-id="e4605-219">Bu Nasıl yaparım? düzeltilsin mi?</span><span class="sxs-lookup"><span data-stu-id="e4605-219">How do I fix this?</span></span>

<span data-ttu-id="e4605-220">Y **:** Bu, gönderenin Active Directory sertifikanın yenilenmesi gerektiği anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="e4605-220">**A:** This means that the certificate in Active Directory for the sender must be renewed.</span></span> <span data-ttu-id="e4605-221">Bunu yapmak için, **Denetim Masası**, **Yönetim Araçları**, **Bilgisayar Yönetimi**' ni açın, **MSMQ**' ya sağ tıklayın ve **Özellikler**' i seçin.</span><span class="sxs-lookup"><span data-stu-id="e4605-221">To do so, open **Control Panel**, **Administrative Tools**, **Computer Management**, right-click **MSMQ**, and select **Properties**.</span></span> <span data-ttu-id="e4605-222">**Kullanıcı sertifikası** sekmesini seçin ve **Yenile** düğmesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="e4605-222">Select the **User Certificate** tab and click the **Renew** button.</span></span>

<span data-ttu-id="e4605-223">**S:** Kullanarak bir ileti gönderdiğimde <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> ve kullanılacak sertifikayı belirttiğinizde, "geçersiz sertifika" iletisi alıyorum.</span><span class="sxs-lookup"><span data-stu-id="e4605-223">**Q:** When I send a message using <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> and specify the certificate to use, I get an "Invalid certificate" message.</span></span> <span data-ttu-id="e4605-224">Bu Nasıl yaparım? düzeltilsin mi?</span><span class="sxs-lookup"><span data-stu-id="e4605-224">How do I fix this?</span></span>

<span data-ttu-id="e4605-225">Y **:** Sertifika modunda yerel makine sertifika deposu kullanamazsınız.</span><span class="sxs-lookup"><span data-stu-id="e4605-225">**A:** You cannot use a local machine certificate store with certificate mode.</span></span> <span data-ttu-id="e4605-226">Sertifika ek bileşenini kullanarak sertifikayı makine sertifika deposundan geçerli kullanıcı deposuna kopyalamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="e4605-226">You have to copy the certificate from the machine certificate store to the current user store using the Certificate snap-in.</span></span> <span data-ttu-id="e4605-227">Sertifika ek bileşenini almak için:</span><span class="sxs-lookup"><span data-stu-id="e4605-227">To get the Certificate snap-in:</span></span>

1. <span data-ttu-id="e4605-228">**Başlat**' a tıklayın, **Çalıştır**' ı seçin `mmc` ve ardından **Tamam**' a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="e4605-228">Click **Start**, select **Run**, type `mmc`, and click **OK**.</span></span>

2. <span data-ttu-id="e4605-229">**Microsoft Yönetim Konsolu**'nda **Dosya** menüsünü açın ve **ek bileşen Ekle/Kaldır**' ı seçin.</span><span class="sxs-lookup"><span data-stu-id="e4605-229">In the **Microsoft Management Console**, open the **File** menu and select **Add/Remove Snap-in**.</span></span>

3. <span data-ttu-id="e4605-230">**Ek bileşen Ekle/Kaldır** Iletişim kutusunda **Ekle** düğmesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="e4605-230">In the **Add/Remove Snap-in** dialog box, click the **Add** button.</span></span>

4. <span data-ttu-id="e4605-231">**Tek başına ek bileşen Ekle** Iletişim kutusunda Sertifikalar ' ı seçin ve **Ekle**' ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="e4605-231">In the **Add Standalone Snap-in** dialog box, select Certificates and click **Add**.</span></span>

5. <span data-ttu-id="e4605-232">**Sertifikalar** ek bileşeni iletişim kutusunda **Kullanıcı hesabım** ' ı seçin ve **son**' a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="e4605-232">In the **Certificates** snap-in dialog box, select **My user account,** and click **Finish**.</span></span>

6. <span data-ttu-id="e4605-233">Ardından, önceki adımları kullanarak ikinci bir sertifika ek bileşeni ekleyin, ancak bu kez **bilgisayar hesabı** ' nı seçin ve **İleri**' ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="e4605-233">Next, add a second Certificates snap-in using the previous steps, but this time select **Computer account** and click **Next**.</span></span>

7. <span data-ttu-id="e4605-234">**Yerel Bilgisayar** öğesini seçip **Tamamla** öğesini tıklatın.</span><span class="sxs-lookup"><span data-stu-id="e4605-234">Select **Local Computer** and click **Finish**.</span></span> <span data-ttu-id="e4605-235">Artık makine sertifika deposundaki sertifikaları mevcut Kullanıcı deposuna sürükleyip bırakabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e4605-235">You can now drag and drop certificates from the machine certificate store to the current user store.</span></span>

<span data-ttu-id="e4605-236">**S:** Hizmetlerim çalışma grubu modundaki başka bir bilgisayardaki bir kuyruktan okurken "erişim engellendi" özel durumu alıyorum.</span><span class="sxs-lookup"><span data-stu-id="e4605-236">**Q:** When my service reads from a queue on another computer in workgroup mode, I get an "access denied" exception.</span></span>

<span data-ttu-id="e4605-237">Y **:** Çalışma grubu modunda, uzak bir uygulamanın sıraya erişim kazanması için, uygulamanın sıraya erişim izni olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="e4605-237">**A:** In workgroup mode, for a remote application to gain access to the queue, the application must have permission to access the queue.</span></span> <span data-ttu-id="e4605-238">Kuyruğun erişim denetim listesine (ACL) "anonim oturum açma" ekleyin ve okuma izni verin.</span><span class="sxs-lookup"><span data-stu-id="e4605-238">Add "Anonymous login" to the queue's access control list (ACL) and give it read permission.</span></span>

<span data-ttu-id="e4605-239">**S:** Bir ağ hizmeti istemcisi (veya etki alanı hesabı olmayan herhangi bir istemci) sıraya alınmış bir ileti gönderdiğinde, gönderme işlemi geçersiz bir sertifika ile başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="e4605-239">**Q:** When a network service client (or any client that does not have a domain account) sends a queued message, the send fails with an invalid certificate.</span></span> <span data-ttu-id="e4605-240">Bu Nasıl yaparım? düzeltilsin mi?</span><span class="sxs-lookup"><span data-stu-id="e4605-240">How do I fix this?</span></span>

<span data-ttu-id="e4605-241">Y **:** Bağlama yapılandırmasını denetleyin.</span><span class="sxs-lookup"><span data-stu-id="e4605-241">**A:** Check the binding configuration.</span></span> <span data-ttu-id="e4605-242">İletiyi imzalamak için varsayılan bağlamada MSMQ aktarım güvenliği açıktır.</span><span class="sxs-lookup"><span data-stu-id="e4605-242">The default binding has MSMQ transport security turned on to sign the message.</span></span> <span data-ttu-id="e4605-243">Kapatın.</span><span class="sxs-lookup"><span data-stu-id="e4605-243">Turn it off.</span></span>

### <a name="remote-transacted-receives"></a><span data-ttu-id="e4605-244">Uzaktan Işlem temelli alır</span><span class="sxs-lookup"><span data-stu-id="e4605-244">Remote Transacted Receives</span></span>

<span data-ttu-id="e4605-245">**S:** A makinesinde bir kuyruk olduğunda ve B makinesindeki bir sıradan iletileri okuyan bir WCF hizmeti (uzaktan işlem temelli alma senaryosu) olduğunda İletiler kuyruktan okunmaz.</span><span class="sxs-lookup"><span data-stu-id="e4605-245">**Q:** When I have a queue on machine A, and a WCF service that reads messages from a queue on machine B (the remote transacted receive scenario), messages are not read from the queue.</span></span> <span data-ttu-id="e4605-246">İzleme bilgileri, alma Işleminin "Işlem içeri aktarılamıyor" iletisiyle başarısız olduğunu gösterir.</span><span class="sxs-lookup"><span data-stu-id="e4605-246">Tracing information indicates the receive failed with the message "Transaction cannot be imported."</span></span> <span data-ttu-id="e4605-247">Bunu onarmak için ne yapabilirim?</span><span class="sxs-lookup"><span data-stu-id="e4605-247">What can I do to fix this?</span></span>

<span data-ttu-id="e4605-248">Y **:** Bunun üç olası nedeni vardır:</span><span class="sxs-lookup"><span data-stu-id="e4605-248">**A:** There are three possible reasons for this:</span></span>

- <span data-ttu-id="e4605-249">Etki alanı modundaysanız, uzaktan işlem alma, Microsoft Dağıtılmış İşlem Düzenleyicisi (MSDTC) ağ erişimi gerektirir.</span><span class="sxs-lookup"><span data-stu-id="e4605-249">If you are in domain mode, remote transacted receive requires Microsoft Distributed Transaction Coordinator (MSDTC) network access.</span></span> <span data-ttu-id="e4605-250">Bu ayarı, **Bileşen Ekle/Kaldır**'ı kullanarak etkinleştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e4605-250">You can enable this using **Add/Remove Components**.</span></span>

  ![Ağ DTC erişimini etkinleştirmeyi gösteren ekran görüntüsü.](./media/troubleshooting-queued-messaging/enable-distributed-transaction-coordinator-access.jpg)

- <span data-ttu-id="e4605-252">İşlem yöneticisiyle iletişim kurmak için kimlik doğrulama modunu denetleyin.</span><span class="sxs-lookup"><span data-stu-id="e4605-252">Check the authentication mode for communicating with the transaction manager.</span></span> <span data-ttu-id="e4605-253">Çalışma grubu modundaysanız, "kimlik doğrulaması gerekli değil" seçilmelidir.</span><span class="sxs-lookup"><span data-stu-id="e4605-253">If you are in workgroup mode, "No Authentication Required" must be selected.</span></span> <span data-ttu-id="e4605-254">Etki alanı modundaysanız, "karşılıklı kimlik doğrulaması gerekir" seçilmelidir.</span><span class="sxs-lookup"><span data-stu-id="e4605-254">If you are in domain mode, then "Mutual Authentication Required" must be selected.</span></span>

  <span data-ttu-id="e4605-255">![XA işlemlerini etkinleştirme](media/4f3695e0-fb0b-4c5b-afac-75f8860d2bb0.jpg "4f3695e0-FB0B-4c5b-AFAC-75f8860d2bb0")</span><span class="sxs-lookup"><span data-stu-id="e4605-255">![Enabling XA transactions](media/4f3695e0-fb0b-4c5b-afac-75f8860d2bb0.jpg "4f3695e0-fb0b-4c5b-afac-75f8860d2bb0")</span></span>

- <span data-ttu-id="e4605-256">MSDTC 'nin **Internet bağlantısı güvenlik duvarı** ayarları 'ndaki özel durumlar listesinde olduğundan emin olun.</span><span class="sxs-lookup"><span data-stu-id="e4605-256">Make sure that MSDTC is in the list of exceptions in the **Internet Connection Firewall** settings.</span></span>

- <span data-ttu-id="e4605-257">Windows Vista kullandığınızdan emin olun.</span><span class="sxs-lookup"><span data-stu-id="e4605-257">Ensure that you are using Windows Vista.</span></span> <span data-ttu-id="e4605-258">Windows Vista 'da MSMQ, uzaktan işlenen okumayı destekler.</span><span class="sxs-lookup"><span data-stu-id="e4605-258">MSMQ on Windows Vista supports remote transacted read.</span></span> <span data-ttu-id="e4605-259">Önceki Windows sürümlerindeki MSMQ, uzaktan işlenen okumayı desteklemez.</span><span class="sxs-lookup"><span data-stu-id="e4605-259">MSMQ on earlier Windows releases does not support remote transacted read.</span></span>

<span data-ttu-id="e4605-260">**S:** Kuyruktan okuma hizmeti bir ağ hizmeti olduğunda (örneğin, bir Web ana bilgisayarında), kuyruktan okurken neden bir erişim reddedildi özel durumu ortaya aldım?</span><span class="sxs-lookup"><span data-stu-id="e4605-260">**Q:** When the service reading from the queue is a network service, for example, in a Web host, why do I get an access-denied exception is raised when reading from the queue?</span></span>

<span data-ttu-id="e4605-261">Y **:** Ağ hizmetinin kuyruktan okuyabağlanabildiğinden emin olmak için kuyruk ACL 'sine ağ hizmeti okuma erişimi eklenmelidir.</span><span class="sxs-lookup"><span data-stu-id="e4605-261">**A:** Network service read access must be added to the queue ACL to ensure that a network service can read from the queue.</span></span>

<span data-ttu-id="e4605-262">**S:** MSMQ etkinleştirme hizmetini, uzak bir makinedeki bir kuyruktaki iletilere göre uygulamaları etkinleştirmek için kullanabilir miyim?</span><span class="sxs-lookup"><span data-stu-id="e4605-262">**Q:** Can I use the MSMQ activation service to activate applications based on messages in a queue on a remote machine?</span></span>

<span data-ttu-id="e4605-263">**Y:** Evet.</span><span class="sxs-lookup"><span data-stu-id="e4605-263">**A:** Yes.</span></span> <span data-ttu-id="e4605-264">Bunu yapmak için MSMQ etkinleştirme hizmetini bir ağ hizmeti olarak çalışacak şekilde yapılandırmanız ve uzak makinedeki sıraya ağ hizmeti erişimi eklemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="e4605-264">To do this, you must configure the MSMQ activation service to run as a network service, and add network service access to the queue on the remote machine.</span></span>

## <a name="using-custom-msmq-bindings-with-receivecontext-enabled"></a><span data-ttu-id="e4605-265">ReceiveContext etkin özel MSMQ bağlamaları kullanma</span><span class="sxs-lookup"><span data-stu-id="e4605-265">Using Custom MSMQ Bindings with ReceiveContext Enabled</span></span>

<span data-ttu-id="e4605-266">Etkin bir MSMQ bağlama kullanılırken <xref:System.ServiceModel.Channels.ReceiveContext> , gelen bir iletiyi işlemek bir iş parçacığı havuzu iş parçacığı kullanır çünkü yerel MSMQ, zaman uyumsuz alma işlemleri için g/ç tamamlamayı desteklemez <xref:System.ServiceModel.Channels.ReceiveContext> .</span><span class="sxs-lookup"><span data-stu-id="e4605-266">When using a custom MSMQ binding with <xref:System.ServiceModel.Channels.ReceiveContext> enabled, processing an incoming message uses a thread pool thread because native MSMQ doesn't support I/O completion for asynchronous <xref:System.ServiceModel.Channels.ReceiveContext> receives.</span></span> <span data-ttu-id="e4605-267">Bunun nedeni, bu tür bir iletinin işlenmesi için iç işlemleri kullanması <xref:System.ServiceModel.Channels.ReceiveContext> ve MSMQ zaman uyumsuz işlemeyi desteklemez.</span><span class="sxs-lookup"><span data-stu-id="e4605-267">This is because processing such a message uses internal transactions for <xref:System.ServiceModel.Channels.ReceiveContext> and MSMQ doesn't support asynchronous processing.</span></span> <span data-ttu-id="e4605-268">Bu sorunu geçici olarak çözmek için, <xref:System.ServiceModel.Description.SynchronousReceiveBehavior> zaman uyumlu işlemeyi zorlamak veya 1 olarak ayarlamak üzere uç noktaya ekleyebilirsiniz <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior.MaxPendingReceives%2A> .</span><span class="sxs-lookup"><span data-stu-id="e4605-268">To work around this issue, you can add a <xref:System.ServiceModel.Description.SynchronousReceiveBehavior> to the endpoint to force synchronous processing or set <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior.MaxPendingReceives%2A> to 1.</span></span>
