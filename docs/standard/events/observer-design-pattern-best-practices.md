---
title: Gözlemci Tasarım Deseni En İyi Yöntemleri
ms.date: 03/30/2017
ms.technology: dotnet-standard
helpviewer_keywords:
- observer design pattern [.NET Framework], best practices
- best practices [.NET Framework], observer design pattern
ms.assetid: c834760f-ddd4-417f-abb7-a059679d5b8c
ms.openlocfilehash: 2da29e0baf429142707d0ddd39b1a11c13a17a90
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/15/2020
ms.locfileid: "73141543"
---
# <a name="observer-design-pattern-best-practices"></a><span data-ttu-id="141e7-102">Gözlemci Tasarım Deseni En İyi Yöntemleri</span><span class="sxs-lookup"><span data-stu-id="141e7-102">Observer Design Pattern Best Practices</span></span>
<span data-ttu-id="141e7-103">.NET Framework'de gözlemci tasarım deseni bir arabirim kümesi olarak uygulanır.</span><span class="sxs-lookup"><span data-stu-id="141e7-103">In the .NET Framework, the observer design pattern is implemented as a set of interfaces.</span></span> <span data-ttu-id="141e7-104">Arabirim, <xref:System.IObservable%601?displayProperty=nameWithType> gözlemcilerin bildirimlerden aboneliğini iptal <xref:System.IDisposable> etmelerine olanak tanıyan bir uygulama sağlamaktan da sorumlu olan veri sağlayıcısını temsil eder.</span><span class="sxs-lookup"><span data-stu-id="141e7-104">The <xref:System.IObservable%601?displayProperty=nameWithType> interface represents the data provider, which is also responsible for providing an <xref:System.IDisposable> implementation that lets observers unsubscribe from notifications.</span></span> <span data-ttu-id="141e7-105">Arayüz <xref:System.IObserver%601?displayProperty=nameWithType> gözlemciyi temsil eder.</span><span class="sxs-lookup"><span data-stu-id="141e7-105">The <xref:System.IObserver%601?displayProperty=nameWithType> interface represents the observer.</span></span> <span data-ttu-id="141e7-106">Bu konu, bu arabirimleri kullanarak gözlemci tasarım deseni uygularken geliştiricilerin izlemesi gereken en iyi uygulamaları açıklar.</span><span class="sxs-lookup"><span data-stu-id="141e7-106">This topic describes the best practices that developers should follow when implementing the observer design pattern using these interfaces.</span></span>  
  
## <a name="threading"></a><span data-ttu-id="141e7-107">İş Parçacığı Oluşturma</span><span class="sxs-lookup"><span data-stu-id="141e7-107">Threading</span></span>  
 <span data-ttu-id="141e7-108">Genellikle, bir sağlayıcı, <xref:System.IObservable%601.Subscribe%2A?displayProperty=nameWithType> belirli bir koleksiyon nesnesi tarafından temsil edilen bir abone listesine belirli <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType> bir gözlemci ekleyerek yöntemi uygular ve belirli bir gözlemciyi abone listesinden kaldırarak yöntemi uygular.</span><span class="sxs-lookup"><span data-stu-id="141e7-108">Typically, a provider implements the <xref:System.IObservable%601.Subscribe%2A?displayProperty=nameWithType> method by adding a particular observer to a subscriber list that is represented by some collection object, and it implements the <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType> method by removing a particular observer from the subscriber list.</span></span> <span data-ttu-id="141e7-109">Bir gözlemci bu yöntemleri istediği zaman arayabilir.</span><span class="sxs-lookup"><span data-stu-id="141e7-109">An observer can call these methods at any time.</span></span> <span data-ttu-id="141e7-110">Buna ek olarak, sağlayıcı/gözlemci sözleşmesi <xref:System.IObserver%601.OnCompleted%2A?displayProperty=nameWithType> geri arama yönteminden sonra aboneliği niçin sorumlu olduğunu belirtmediği için, sağlayıcı ve gözlemci aynı üyeyi listeden çıkarmaya çalışabilir.</span><span class="sxs-lookup"><span data-stu-id="141e7-110">In addition, because the provider/observer contract does not specify who is responsible for unsubscribing after the <xref:System.IObserver%601.OnCompleted%2A?displayProperty=nameWithType> callback method, the provider and observer may both try to remove the same member from the list.</span></span> <span data-ttu-id="141e7-111">Bu olasılık nedeniyle, <xref:System.IObservable%601.Subscribe%2A> hem <xref:System.IDisposable.Dispose%2A> yöntem hem de iş parçacığı güvenli olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="141e7-111">Because of this possibility, both the <xref:System.IObservable%601.Subscribe%2A> and <xref:System.IDisposable.Dispose%2A> methods should be thread-safe.</span></span> <span data-ttu-id="141e7-112">Genellikle, bu eşzamanlı bir [koleksiyon](../../../docs/standard/parallel-programming/data-structures-for-parallel-programming.md) veya kilit kullanarak içerir.</span><span class="sxs-lookup"><span data-stu-id="141e7-112">Typically, this involves using a [concurrent collection](../../../docs/standard/parallel-programming/data-structures-for-parallel-programming.md) or a lock.</span></span> <span data-ttu-id="141e7-113">İş parçacığı güvenli olmayan uygulamalar, bunların güvenli olmadığını açıkça belgelemelidir.</span><span class="sxs-lookup"><span data-stu-id="141e7-113">Implementations that are not thread-safe should explicitly document that they are not.</span></span>  
  
 <span data-ttu-id="141e7-114">Herhangi bir ek garanti sağlayıcı / gözlemci sözleşme üstüne bir katman halinde belirtilmelidir.</span><span class="sxs-lookup"><span data-stu-id="141e7-114">Any additional guarantees have to be specified in a layer on top of the provider/observer contract.</span></span> <span data-ttu-id="141e7-115">Uygulayıcılar, gözlemci sözleşmesi yle ilgili kullanıcı karışıklığını önlemek için ek gereksinimler dayattığında açıkça çağrılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="141e7-115">Implementers should clearly call out when they impose additional requirements to avoid user confusion about the observer contract.</span></span>  
  
## <a name="handling-exceptions"></a><span data-ttu-id="141e7-116">Özel Durumları İşleme</span><span class="sxs-lookup"><span data-stu-id="141e7-116">Handling Exceptions</span></span>  
 <span data-ttu-id="141e7-117">Bir veri sağlayıcısı ve bir gözlemci arasındaki gevşek bağlantı nedeniyle, gözlemci tasarım desenindeki istisnaların bilgilendirici olması amaçlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="141e7-117">Because of the loose coupling between a data provider and an observer, exceptions in the observer design pattern are intended to be informational.</span></span> <span data-ttu-id="141e7-118">Bu, sağlayıcıların ve gözlemcilerin gözlemci tasarım modelindeki özel durumları nasıl ele alacaklarını etkiler.</span><span class="sxs-lookup"><span data-stu-id="141e7-118">This affects how providers and observers handle exceptions in the observer design pattern.</span></span>  
  
### <a name="the-provider----calling-the-onerror-method"></a><span data-ttu-id="141e7-119">Sağlayıcı -- OnError Yöntemini Çağırma</span><span class="sxs-lookup"><span data-stu-id="141e7-119">The Provider -- Calling the OnError Method</span></span>  
 <span data-ttu-id="141e7-120">Yöntem, <xref:System.IObserver%601.OnError%2A> <xref:System.IObserver%601.OnNext%2A?displayProperty=nameWithType> tıpkı yöntem gibi gözlemcilere bir bilgilendirme mesajı olarak tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="141e7-120">The <xref:System.IObserver%601.OnError%2A> method is intended as an informational message to observers, much like the <xref:System.IObserver%601.OnNext%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="141e7-121">Ancak, <xref:System.IObserver%601.OnNext%2A> yöntem bir gözlemciye geçerli veya güncelleştirilmiş verileri <xref:System.IObserver%601.OnError%2A> sağlamak üzere tasarlanmıştır, ancak yöntem sağlayıcının geçerli verileri sağlayamadığını belirtmek için tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="141e7-121">However, the <xref:System.IObserver%601.OnNext%2A> method is designed to provide an observer with current or updated data, whereas the <xref:System.IObserver%601.OnError%2A> method is designed to indicate that the provider is unable to provide valid data.</span></span>  
  
 <span data-ttu-id="141e7-122">Sağlayıcı, özel durumları işlerken ve <xref:System.IObserver%601.OnError%2A> yöntemi ararken aşağıdaki en iyi uygulamaları izlemelidir:</span><span class="sxs-lookup"><span data-stu-id="141e7-122">The provider should follow these best practices when handling exceptions and calling the <xref:System.IObserver%601.OnError%2A> method:</span></span>  
  
- <span data-ttu-id="141e7-123">Sağlayıcı, belirli gereksinimleri varsa kendi özel durumlarını ele almalıdır.</span><span class="sxs-lookup"><span data-stu-id="141e7-123">The provider must handle its own exceptions if it has any specific requirements.</span></span>  
  
- <span data-ttu-id="141e7-124">Sağlayıcı, gözlemcilerin özel durumları belirli bir şekilde ele almalarını beklememeli veya gerektirmemelidir.</span><span class="sxs-lookup"><span data-stu-id="141e7-124">The provider should not expect or require that observers handle exceptions in any particular way.</span></span>  
  
- <span data-ttu-id="141e7-125">Sağlayıcı, güncelleştirmeleri <xref:System.IObserver%601.OnError%2A> sağlama yeteneğini tehlikeye atan bir özel durum işlediğinde yöntemi aramalıdır.</span><span class="sxs-lookup"><span data-stu-id="141e7-125">The provider should call the <xref:System.IObserver%601.OnError%2A> method when it handles an exception that compromises its ability to provide updates.</span></span> <span data-ttu-id="141e7-126">Bu tür istisnalar hakkındaki bilgiler gözlemciye iletilebilir.</span><span class="sxs-lookup"><span data-stu-id="141e7-126">Information on such exceptions can be passed to the observer.</span></span> <span data-ttu-id="141e7-127">Diğer durumlarda, gözlemcilere bir istisna bildiriminde bulunmanız gerekmez.</span><span class="sxs-lookup"><span data-stu-id="141e7-127">In other cases, there is no need to notify observers of an exception.</span></span>  
  
 <span data-ttu-id="141e7-128">Sağlayıcı <xref:System.IObserver%601.OnError%2A> veya <xref:System.IObserver%601.OnCompleted%2A?displayProperty=nameWithType> yöntemi çağırdıktan sonra, başka bildirim olmamalıdır ve sağlayıcı gözlemcilerinin aboneliğini iptal edebilir.</span><span class="sxs-lookup"><span data-stu-id="141e7-128">Once the provider calls the <xref:System.IObserver%601.OnError%2A> or <xref:System.IObserver%601.OnCompleted%2A?displayProperty=nameWithType> method, there should be no further notifications, and the provider can unsubscribe its observers.</span></span> <span data-ttu-id="141e7-129">Ancak, gözlemciler bir bildirim almadan <xref:System.IObserver%601.OnError%2A> <xref:System.IObserver%601.OnCompleted%2A?displayProperty=nameWithType> önce ve sonra da dahil olmak üzere, istedikleri zaman aboneliklerini iptal edebilirler.</span><span class="sxs-lookup"><span data-stu-id="141e7-129">However, the observers can also unsubscribe themselves at any time, including both before and after they receive an <xref:System.IObserver%601.OnError%2A> or <xref:System.IObserver%601.OnCompleted%2A?displayProperty=nameWithType> notification.</span></span> <span data-ttu-id="141e7-130">Gözlemci tasarım deseni, sağlayıcının veya gözlemcinin aboneliğin sorumlusunun olup olmadığını belirlemez; bu nedenle, her ikisi nin de aboneliğini iptal etmeye çalışabilme olasılığı vardır.</span><span class="sxs-lookup"><span data-stu-id="141e7-130">The observer design pattern does not dictate whether the provider or the observer is responsible for unsubscribing; therefore, there is a possibility that both may attempt to unsubscribe.</span></span> <span data-ttu-id="141e7-131">Genellikle, gözlemciler aboneliğini iptal ettiklerinde, abone koleksiyonundan kaldırılırlar.</span><span class="sxs-lookup"><span data-stu-id="141e7-131">Typically, when observers unsubscribe, they are removed from a subscribers collection.</span></span> <span data-ttu-id="141e7-132">Tek iş parçacığı uygulamasında, <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType> uygulama nesne başvurusunun geçerli olduğundan ve nesnenin kaldırmayı denemeden önce abone koleksiyonunun bir üyesi olduğundan emin olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="141e7-132">In a single-threaded application, the <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType> implementation should ensure that an object reference is valid and that the object is a member of the subscribers collection before attempting to remove it.</span></span> <span data-ttu-id="141e7-133">Çok iş parçacığı uygulamasında, nesne gibi iş parçacığı <xref:System.Collections.Concurrent.BlockingCollection%601?displayProperty=nameWithType> güvenli bir koleksiyon nesnesi kullanılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="141e7-133">In a multithreaded application, a thread-safe collection object, such as a <xref:System.Collections.Concurrent.BlockingCollection%601?displayProperty=nameWithType> object, should be used.</span></span>  
  
### <a name="the-observer----implementing-the-onerror-method"></a><span data-ttu-id="141e7-134">Gözlemci -- OnError Yönteminin Uygulanması</span><span class="sxs-lookup"><span data-stu-id="141e7-134">The Observer -- Implementing the OnError Method</span></span>  
 <span data-ttu-id="141e7-135">Bir gözlemci bir sağlayıcıdan hata bildirimi aldığında, gözlemci özel durumu bilgilendirici olarak ele almalıdır ve belirli bir eylemde bulunmaları gerekmemelidir.</span><span class="sxs-lookup"><span data-stu-id="141e7-135">When an observer receives an error notification from a provider, the observer should treat the exception as informational and should not be required to take any particular action.</span></span>  
  
 <span data-ttu-id="141e7-136">Gözlemci, bir sağlayıcıdan gelen bir <xref:System.IObserver%601.OnError%2A> yöntem çağrısına yanıt verirken aşağıdaki en iyi uygulamaları izlemelidir:</span><span class="sxs-lookup"><span data-stu-id="141e7-136">The observer should follow these best practices when responding to an <xref:System.IObserver%601.OnError%2A> method call from a provider:</span></span>  
  
- <span data-ttu-id="141e7-137">Gözlemci, arayüz uygulamalarından istisnalar atmamalıdır, <xref:System.IObserver%601.OnNext%2A> örneğin. <xref:System.IObserver%601.OnError%2A></span><span class="sxs-lookup"><span data-stu-id="141e7-137">The observer should not throw exceptions from its interface implementations, such as <xref:System.IObserver%601.OnNext%2A> or <xref:System.IObserver%601.OnError%2A>.</span></span> <span data-ttu-id="141e7-138">Ancak, gözlemci özel durumlar atarsa, bu özel durumların işlenmemiş olmasını beklemelidir.</span><span class="sxs-lookup"><span data-stu-id="141e7-138">However, if the observer does throw exceptions, it should expect these exceptions to go unhandled.</span></span>  
  
- <span data-ttu-id="141e7-139">Çağrı yığınını korumak için, <xref:System.Exception> <xref:System.IObserver%601.OnError%2A> yöntemine geçirilen bir nesneyi atmak isteyen bir gözlemci, onu atmadan önce özel durumu saran bir gözlemci olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="141e7-139">To preserve the call stack, an observer that wishes to throw an <xref:System.Exception> object that was passed to its <xref:System.IObserver%601.OnError%2A> method should wrap the exception before throwing it.</span></span> <span data-ttu-id="141e7-140">Bu amaç için standart bir özel durum nesnesi kullanılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="141e7-140">A standard exception object should be used for this purpose.</span></span>  
  
## <a name="additional-best-practices"></a><span data-ttu-id="141e7-141">Ek En İyi Uygulamalar</span><span class="sxs-lookup"><span data-stu-id="141e7-141">Additional Best Practices</span></span>  
 <span data-ttu-id="141e7-142"><xref:System.IObservable%601.Subscribe%2A?displayProperty=nameWithType> Yöntemde kaydını kaldırmaya çalışmak geçersiz bir başvuruyla sonuçlanabilir.</span><span class="sxs-lookup"><span data-stu-id="141e7-142">Attempting to unregister in the <xref:System.IObservable%601.Subscribe%2A?displayProperty=nameWithType> method may result in a null reference.</span></span> <span data-ttu-id="141e7-143">Bu nedenle, bu uygulamadan kaçınmanızı öneririz.</span><span class="sxs-lookup"><span data-stu-id="141e7-143">Therefore, we recommend that you avoid this practice.</span></span>  
  
 <span data-ttu-id="141e7-144">Birden çok sağlayıcıya gözlemci eklemek mümkün olsa da, önerilen <xref:System.IObserver%601> desen yalnızca <xref:System.IObservable%601> bir örneğe bir örnek eklemektir.</span><span class="sxs-lookup"><span data-stu-id="141e7-144">Although it is possible to attach an observer to multiple providers, the recommended pattern is to attach an <xref:System.IObserver%601> instance to only one <xref:System.IObservable%601> instance.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="141e7-145">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="141e7-145">See also</span></span>

- [<span data-ttu-id="141e7-146">Gözlemci Tasarım Deseni</span><span class="sxs-lookup"><span data-stu-id="141e7-146">Observer Design Pattern</span></span>](../../../docs/standard/events/observer-design-pattern.md)
- [<span data-ttu-id="141e7-147">Nasıl yapılır: Gözlemci Uygulama</span><span class="sxs-lookup"><span data-stu-id="141e7-147">How to: Implement an Observer</span></span>](../../../docs/standard/events/how-to-implement-an-observer.md)
- [<span data-ttu-id="141e7-148">Nasıl yapılır: Sağlayıcıyı Uygulama</span><span class="sxs-lookup"><span data-stu-id="141e7-148">How to: Implement a Provider</span></span>](../../../docs/standard/events/how-to-implement-a-provider.md)
