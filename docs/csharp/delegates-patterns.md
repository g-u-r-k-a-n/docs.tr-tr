---
title: Temsilciler için Ortak Desenler
description: Bileşenleriniz arasında güçlü bir bağlantı dan kaçınmak için kodunuzda temsilci kullanmanın yaygın desenleri hakkında bilgi edinin.
ms.date: 06/20/2016
ms.assetid: 0ff8fdfd-6a11-4327-b061-0f2526f35b43
ms.openlocfilehash: 22ab88e5b139381e3a8921baa20df035f1405146
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/14/2020
ms.locfileid: "79399667"
---
# <a name="common-patterns-for-delegates"></a><span data-ttu-id="f42e3-103">Temsilciler için Ortak Desenler</span><span class="sxs-lookup"><span data-stu-id="f42e3-103">Common Patterns for Delegates</span></span>

[<span data-ttu-id="f42e3-104">Önceki</span><span class="sxs-lookup"><span data-stu-id="f42e3-104">Previous</span></span>](delegates-strongly-typed.md)

<span data-ttu-id="f42e3-105">Temsilciler, bileşenler arasında en az bağlantı içeren yazılım tasarımlarını etkinleştiren bir mekanizma sağlar.</span><span class="sxs-lookup"><span data-stu-id="f42e3-105">Delegates provide a mechanism that enables software designs involving minimal coupling between components.</span></span>

<span data-ttu-id="f42e3-106">Bu tür bir tasarım için mükemmel bir örnek LINQ olduğunu.</span><span class="sxs-lookup"><span data-stu-id="f42e3-106">One excellent example for this kind of design is LINQ.</span></span> <span data-ttu-id="f42e3-107">LINQ Sorgu İfade Sseni tüm özellikleri için temsilcilere dayanır.</span><span class="sxs-lookup"><span data-stu-id="f42e3-107">The LINQ Query Expression Pattern relies on delegates for all of its features.</span></span> <span data-ttu-id="f42e3-108">Bu basit örneği göz önünde bulundurun:</span><span class="sxs-lookup"><span data-stu-id="f42e3-108">Consider this simple example:</span></span>

```csharp
var smallNumbers = numbers.Where(n => n < 10);
```

<span data-ttu-id="f42e3-109">Bu, sayıların sırasını yalnızca 10 değerinden küçük olanlara filtreler.</span><span class="sxs-lookup"><span data-stu-id="f42e3-109">This filters the sequence of numbers to only those less than the value 10.</span></span>
<span data-ttu-id="f42e3-110">Yöntem, `Where` filtreden hangi dizinin öğelerinin geçtiğini belirleyen bir temsilci kullanır.</span><span class="sxs-lookup"><span data-stu-id="f42e3-110">The `Where` method uses a delegate that determines which elements of a sequence pass the filter.</span></span> <span data-ttu-id="f42e3-111">Bir LINQ sorgusu oluşturduğunuzda, bu özel amaç için temsilcinin uygulanmasını sağlarsınız.</span><span class="sxs-lookup"><span data-stu-id="f42e3-111">When you create a LINQ query, you supply the implementation of the delegate for this specific purpose.</span></span>

<span data-ttu-id="f42e3-112">Nerede yöntemi için prototip:</span><span class="sxs-lookup"><span data-stu-id="f42e3-112">The prototype for the Where method is:</span></span>

```csharp
public static IEnumerable<TSource> Where<TSource> (this IEnumerable<TSource> source, Func<TSource, bool> predicate);
```

<span data-ttu-id="f42e3-113">Bu örnek, LINQ'nin bir parçası olan tüm yöntemlerle yinelenir.</span><span class="sxs-lookup"><span data-stu-id="f42e3-113">This example is repeated with all the methods that are part of LINQ.</span></span> <span data-ttu-id="f42e3-114">Bunların tümü, belirli sorguyu yöneten kod için temsilcilere güvenir.</span><span class="sxs-lookup"><span data-stu-id="f42e3-114">They all rely on delegates for the code that manages the specific query.</span></span> <span data-ttu-id="f42e3-115">Bu API tasarım deseni öğrenmek ve anlamak için çok güçlü bir tanesidir.</span><span class="sxs-lookup"><span data-stu-id="f42e3-115">This API design pattern is a very powerful one to learn and understand.</span></span>

<span data-ttu-id="f42e3-116">Bu basit örnek, temsilcilerin bileşenler arasında çok az bağlantı gerektirdiğini göstermektedir.</span><span class="sxs-lookup"><span data-stu-id="f42e3-116">This simple example illustrates how delegates require very little coupling between components.</span></span> <span data-ttu-id="f42e3-117">Belirli bir taban sınıftan türeyen bir sınıf oluşturmanız gerekmez.</span><span class="sxs-lookup"><span data-stu-id="f42e3-117">You don't need to create a class that derives from a particular base class.</span></span> <span data-ttu-id="f42e3-118">Belirli bir arabirim uygulamanız gerekmez.</span><span class="sxs-lookup"><span data-stu-id="f42e3-118">You don't need to implement a specific interface.</span></span>
<span data-ttu-id="f42e3-119">Tek gereksinim, eldeki göreviçin temel olan bir yöntemin uygulanmasını sağlamaktır.</span><span class="sxs-lookup"><span data-stu-id="f42e3-119">The only requirement is to provide the implementation of one method that is fundamental to the task at hand.</span></span>

## <a name="building-your-own-components-with-delegates"></a><span data-ttu-id="f42e3-120">Temsilcilerle Kendi Bileşenlerinizi Oluşturma</span><span class="sxs-lookup"><span data-stu-id="f42e3-120">Building Your Own Components with Delegates</span></span>

<span data-ttu-id="f42e3-121">Bu örneği, temsilcilere dayanan bir tasarım kullanarak bir bileşen oluşturarak oluşturalım.</span><span class="sxs-lookup"><span data-stu-id="f42e3-121">Let's build on that example by creating a component using a design that relies on delegates.</span></span>

<span data-ttu-id="f42e3-122">Büyük bir sistemde günlük iletileri için kullanılabilecek bir bileşen tanımlayalım.</span><span class="sxs-lookup"><span data-stu-id="f42e3-122">Let's define a component that could be used for log messages in a large system.</span></span> <span data-ttu-id="f42e3-123">Kitaplık bileşenleri birçok farklı ortamlarda, birden çok farklı platformda kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="f42e3-123">The library components could be used in many different environments, on multiple different platforms.</span></span> <span data-ttu-id="f42e3-124">Günlükleri yöneten bileşende birçok ortak özellik vardır.</span><span class="sxs-lookup"><span data-stu-id="f42e3-124">There are a lot of common features in the component that manages the logs.</span></span> <span data-ttu-id="f42e3-125">Sistemdeki herhangi bir bileşenden gelen iletileri kabul etmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="f42e3-125">It will need to accept messages from any component in the system.</span></span> <span data-ttu-id="f42e3-126">Bu iletilerin, temel bileşenin yönetebileceği farklı öncelikleri olacaktır.</span><span class="sxs-lookup"><span data-stu-id="f42e3-126">Those messages will have different priorities, which the core component can manage.</span></span> <span data-ttu-id="f42e3-127">İletilerin son arşivlenmiş biçiminde zaman damgaları olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="f42e3-127">The messages should have timestamps in their final archived form.</span></span> <span data-ttu-id="f42e3-128">Daha gelişmiş senaryolar için iletileri kaynak bileşene göre filtrelendirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f42e3-128">For more advanced scenarios, you could filter messages by the source component.</span></span>

<span data-ttu-id="f42e3-129">Özelliğin sık sık değişecek bir yönü vardır: iletilerin yazıldığı yer.</span><span class="sxs-lookup"><span data-stu-id="f42e3-129">There is one aspect of the feature that will change often: where messages are written.</span></span> <span data-ttu-id="f42e3-130">Bazı ortamlarda hata konsoluna yazılabilirler.</span><span class="sxs-lookup"><span data-stu-id="f42e3-130">In some environments, they may be written to the error console.</span></span> <span data-ttu-id="f42e3-131">Diğerlerinde, bir dosya.</span><span class="sxs-lookup"><span data-stu-id="f42e3-131">In others, a file.</span></span> <span data-ttu-id="f42e3-132">Diğer olasılıklar veritabanı depolama, işletim sistemi olay günlükleri veya diğer belge depolama içerir.</span><span class="sxs-lookup"><span data-stu-id="f42e3-132">Other possibilities include database storage, OS event logs, or other document storage.</span></span>

<span data-ttu-id="f42e3-133">Farklı senaryolarda kullanılabilecek çıktı kombinasyonları da vardır.</span><span class="sxs-lookup"><span data-stu-id="f42e3-133">There are also combinations of output that might be used in different scenarios.</span></span> <span data-ttu-id="f42e3-134">Konsola ve dosyaya ileti yazmak isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f42e3-134">You may want to write messages to the console and to a file.</span></span>

<span data-ttu-id="f42e3-135">Delegelere dayalı bir tasarım büyük bir esneklik sağlar ve gelecekte eklenebilir depolama mekanizmaları desteklemek için kolaylaştırır.</span><span class="sxs-lookup"><span data-stu-id="f42e3-135">A design based on delegates will provide a great deal of flexibility, and make it easy to support storage mechanisms that may be added in the future.</span></span>

<span data-ttu-id="f42e3-136">Bu tasarım altında, birincil günlük bileşeni sanal olmayan, hatta mühürlü bir sınıf olabilir.</span><span class="sxs-lookup"><span data-stu-id="f42e3-136">Under this design, the primary log component can be a non-virtual, even sealed class.</span></span> <span data-ttu-id="f42e3-137">İletileri farklı depolama ortamlarına yazmak için istediğiniz temsilci kümesini takabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f42e3-137">You can plug in any set of delegates to write the messages to different storage media.</span></span> <span data-ttu-id="f42e3-138">Çok noktaya yayın temsilcilerinin desteğiyle, iletilerin birden çok konuma (dosya ve konsol) yazılması gereken senaryoları desteklemeyi kolaylaştırır.</span><span class="sxs-lookup"><span data-stu-id="f42e3-138">The built in support for multicast delegates makes it easy to support scenarios where messages must be written to multiple locations (a file, and a console).</span></span>

## <a name="a-first-implementation"></a><span data-ttu-id="f42e3-139">İlk Uygulama</span><span class="sxs-lookup"><span data-stu-id="f42e3-139">A First Implementation</span></span>

<span data-ttu-id="f42e3-140">Küçük başlayalım: ilk uygulama yeni iletileri kabul eder ve ekli temsilci kullanarak bunları yazar.</span><span class="sxs-lookup"><span data-stu-id="f42e3-140">Let's start small: the initial implementation will accept new messages, and write them using any attached delegate.</span></span> <span data-ttu-id="f42e3-141">Konsola ileti yazan bir temsilciyle başlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f42e3-141">You can start with one delegate that writes messages to the console.</span></span>

[!code-csharp[LoggerImplementation](../../samples/snippets/csharp/delegates-and-events/Logger.cs#FirstImplementation "A first Logger implementation.")]

<span data-ttu-id="f42e3-142">Yukarıdaki statik sınıf işe yada bilen en basit şeydir.</span><span class="sxs-lookup"><span data-stu-id="f42e3-142">The static class above is the simplest thing that can work.</span></span> <span data-ttu-id="f42e3-143">Konsola mesaj yazan yöntem için tek bir uygulama yazmamız gerekir:</span><span class="sxs-lookup"><span data-stu-id="f42e3-143">We need to write the single implementation for the method that writes messages to the console:</span></span>

[!code-csharp[LogToConsole](../../samples/snippets/csharp/delegates-and-events/LoggingMethods.cs#LogToConsole "A Console logger.")]

<span data-ttu-id="f42e3-144">Son olarak, temsilciyi logger'da bildirilen WriteMessage temsilcisine ekleyerek bağlamanız gerekir:</span><span class="sxs-lookup"><span data-stu-id="f42e3-144">Finally, you need to hook up the delegate by attaching it to the WriteMessage delegate declared in the logger:</span></span>

[!code-csharp[ConnectDelegate](../../samples/snippets/csharp/delegates-and-events/Program.cs#ConnectDelegate "Connect to the delegate")]

## <a name="practices"></a><span data-ttu-id="f42e3-145">Uygulama</span><span class="sxs-lookup"><span data-stu-id="f42e3-145">Practices</span></span>

<span data-ttu-id="f42e3-146">Bizim örnek şimdiye kadar oldukça basit, ama yine de bazı delegeler içeren tasarımlar için önemli kurallar göstermektedir.</span><span class="sxs-lookup"><span data-stu-id="f42e3-146">Our sample so far is fairly simple, but it still demonstrates some of the important guidelines for designs involving delegates.</span></span>

<span data-ttu-id="f42e3-147">Çekirdek Çerçeve'de tanımlanan temsilci türlerinin kullanılması, kullanıcıların temsilcilerle çalışmasını kolaylaştırır.</span><span class="sxs-lookup"><span data-stu-id="f42e3-147">Using the delegate types defined in the Core Framework makes it easier for users to work with the delegates.</span></span> <span data-ttu-id="f42e3-148">Yeni türleri tanımlamanız gerekmez ve kitaplığınızı kullanan geliştiricilerin yeni, özel leştirilmiş temsilci türlerini öğrenmesi gerekmez.</span><span class="sxs-lookup"><span data-stu-id="f42e3-148">You don't need to define new types, and developers using your library do not need to learn new, specialized delegate types.</span></span>

<span data-ttu-id="f42e3-149">Kullanılan arabirimler olabildiğince az ve esnektir: Yeni bir çıktı kaydedici oluşturmak için bir yöntem oluşturmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="f42e3-149">The interfaces used are as minimal and as flexible as possible: To create a new output logger, you must create one method.</span></span> <span data-ttu-id="f42e3-150">Bu yöntem statik bir yöntem veya örnek bir yöntem olabilir.</span><span class="sxs-lookup"><span data-stu-id="f42e3-150">That method may be a static method, or an instance method.</span></span> <span data-ttu-id="f42e3-151">Herhangi bir erişimi olabilir.</span><span class="sxs-lookup"><span data-stu-id="f42e3-151">It may have any access.</span></span>

## <a name="formatting-output"></a><span data-ttu-id="f42e3-152">Çıktıyı Biçimlendirme</span><span class="sxs-lookup"><span data-stu-id="f42e3-152">Formatting Output</span></span>

<span data-ttu-id="f42e3-153">Bu ilk sürümü biraz daha sağlam hale getirelim ve sonra diğer günlük mekanizmaları oluşturmaya başlayalım.</span><span class="sxs-lookup"><span data-stu-id="f42e3-153">Let's make this first version a bit more robust, and then start creating other logging mechanisms.</span></span>

<span data-ttu-id="f42e3-154">Ardından, günlük sınıfınızın daha yapılandırılmış `LogMessage()` iletiler oluşturması için yönteme birkaç bağımsız değişken ekleyelim:</span><span class="sxs-lookup"><span data-stu-id="f42e3-154">Next, let's add a few arguments to the `LogMessage()` method so that your log class creates more structured messages:</span></span>

[!code-csharp[Severity](../../samples/snippets/csharp/delegates-and-events/Logger.cs#Severity "Define severities")]
[!code-csharp[NextLogger](../../samples/snippets/csharp/delegates-and-events/Logger.cs#LoggerTwo "Refine the Logger")]

<span data-ttu-id="f42e3-155">Ardından, günlüğün çıktısına gönderilen `Severity` iletileri filtrelemek için bu bağımsız değişkenden yararlanalım.</span><span class="sxs-lookup"><span data-stu-id="f42e3-155">Next, let's make use of that `Severity` argument to filter the messages that are sent to the log's output.</span></span>

[!code-csharp[FinalLogger](../../samples/snippets/csharp/delegates-and-events/Logger.cs#LoggerFinal "Finish the Logger")]

## <a name="practices"></a><span data-ttu-id="f42e3-156">Uygulama</span><span class="sxs-lookup"><span data-stu-id="f42e3-156">Practices</span></span>

<span data-ttu-id="f42e3-157">Günlük altyapısına yeni özellikler eklediniz.</span><span class="sxs-lookup"><span data-stu-id="f42e3-157">You've added new features to the logging infrastructure.</span></span> <span data-ttu-id="f42e3-158">Logger bileşeni çok gevşek herhangi bir çıktı mekanizması ile birleştiğinden, bu yeni özellikler logger temsilcisi ni uygulayan kodun herhangi biri üzerinde hiçbir etkisi olmadan eklenebilir.</span><span class="sxs-lookup"><span data-stu-id="f42e3-158">Because the logger component is very loosely coupled to any output mechanism, these new features can be added with no impact on any of the code implementing the logger delegate.</span></span>

<span data-ttu-id="f42e3-159">Bunu oluşturmaya devam ettikçe, bu gevşek bağlantının sitenin bölümlerini diğer konumlarda değişiklik yapmadan daha fazla esneklik sağladığına dair daha fazla örnek görürsünüz.</span><span class="sxs-lookup"><span data-stu-id="f42e3-159">As you keep building this, you'll see more examples of how this loose coupling enables greater flexibility in updating parts of the site without any changes to other locations.</span></span> <span data-ttu-id="f42e3-160">Aslında, daha büyük bir uygulamada, kaydedici çıktı sınıfları farklı bir derleme de olabilir ve hatta yeniden olması gerekmez.</span><span class="sxs-lookup"><span data-stu-id="f42e3-160">In fact, in a larger application, the logger output classes might be in a different assembly, and not even need to be rebuilt.</span></span>

## <a name="building-a-second-output-engine"></a><span data-ttu-id="f42e3-161">İkinci Çıkış Motoru Oluşturma</span><span class="sxs-lookup"><span data-stu-id="f42e3-161">Building a Second Output Engine</span></span>

<span data-ttu-id="f42e3-162">Log bileşeni iyi geliyor.</span><span class="sxs-lookup"><span data-stu-id="f42e3-162">The Log component is coming along well.</span></span> <span data-ttu-id="f42e3-163">İletileri bir dosyaya kaydeden bir çıktı motoru daha ekleyelim.</span><span class="sxs-lookup"><span data-stu-id="f42e3-163">Let's add one more output engine that logs messages to a file.</span></span> <span data-ttu-id="f42e3-164">Bu biraz daha ilgili çıkış motoru olacak.</span><span class="sxs-lookup"><span data-stu-id="f42e3-164">This will be a slightly more involved output engine.</span></span> <span data-ttu-id="f42e3-165">Dosya işlemlerini kapsülleyen ve her yazıdan sonra dosyanın her zaman kapalı olmasını sağlayan bir sınıf olacaktır.</span><span class="sxs-lookup"><span data-stu-id="f42e3-165">It will be a class that encapsulates the file operations, and ensures that the file is always closed after each write.</span></span> <span data-ttu-id="f42e3-166">Bu, her ileti oluşturulduktan sonra tüm verilerin diske atilmesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="f42e3-166">That ensures that all the data is flushed to disk after each message is generated.</span></span>

<span data-ttu-id="f42e3-167">İşte bu dosya tabanlı logger:</span><span class="sxs-lookup"><span data-stu-id="f42e3-167">Here is that file based logger:</span></span>

[!code-csharp[FileLogger](../../samples/snippets/csharp/delegates-and-events/FileLogger.cs#FileLogger "Log to files")]

<span data-ttu-id="f42e3-168">Bu sınıfı oluşturduktan sonra, bu sınıfı anında atabilirsiniz ve logileti yöntemini Logger bileşenine bağlar:</span><span class="sxs-lookup"><span data-stu-id="f42e3-168">Once you've created this class, you can instantiate it and it attaches its LogMessage method to the Logger component:</span></span>

[!code-csharp[FileLogger](../../samples/snippets/csharp/delegates-and-events/Program.cs#FileLogger "Log to files")]

<span data-ttu-id="f42e3-169">Bu ikisi birbirini dışlamıyor.</span><span class="sxs-lookup"><span data-stu-id="f42e3-169">These two are not mutually exclusive.</span></span> <span data-ttu-id="f42e3-170">Hem günlük yöntemleriek hem de konsola ve dosyaya iletiler oluşturabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="f42e3-170">You could attach both log methods and generate messages to the console and a file:</span></span>

```csharp
var fileOutput = new FileLogger("log.txt");
Logger.WriteMessage += LoggingMethods.LogToConsole; // LoggingMethods is the static class we utilized earlier
```

<span data-ttu-id="f42e3-171">Daha sonra, aynı uygulamada bile, sisteme başka bir sorun olmadan temsilcilerden birini kaldırabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="f42e3-171">Later, even in the same application, you can remove one of the delegates without any other issues to the system:</span></span>

```csharp
Logger.WriteMessage -= LoggingMethods.LogToConsole;
```

## <a name="practices"></a><span data-ttu-id="f42e3-172">Uygulama</span><span class="sxs-lookup"><span data-stu-id="f42e3-172">Practices</span></span>

<span data-ttu-id="f42e3-173">Şimdi, günlük alt sistemi için ikinci bir çıktı işleyicisi eklediniz.</span><span class="sxs-lookup"><span data-stu-id="f42e3-173">Now, you've added a second output handler for the logging sub-system.</span></span>
<span data-ttu-id="f42e3-174">Bu doğru dosya sistemini desteklemek için biraz daha fazla altyapı gerekir.</span><span class="sxs-lookup"><span data-stu-id="f42e3-174">This one needs a bit more infrastructure to correctly support the file system.</span></span> <span data-ttu-id="f42e3-175">Temsilci bir örnek yöntemidir.</span><span class="sxs-lookup"><span data-stu-id="f42e3-175">The delegate is an instance method.</span></span> <span data-ttu-id="f42e3-176">Aynı zamanda özel bir yöntem.</span><span class="sxs-lookup"><span data-stu-id="f42e3-176">It's also a private method.</span></span>
<span data-ttu-id="f42e3-177">Temsilci altyapısı temsilcileri bağlayabildiği için daha fazla erişilebilirliğe gerek yoktur.</span><span class="sxs-lookup"><span data-stu-id="f42e3-177">There's no need for greater accessibility because the delegate infrastructure can connect the delegates.</span></span>

<span data-ttu-id="f42e3-178">İkinci olarak, temsilci tabanlı tasarım, herhangi bir ek kod olmadan birden çok çıkış yöntemi sağlar.</span><span class="sxs-lookup"><span data-stu-id="f42e3-178">Second, the delegate-based design enables multiple output methods without any extra code.</span></span> <span data-ttu-id="f42e3-179">Birden çok çıktı yöntemini desteklemek için ek altyapı oluşturmanız gerekmez.</span><span class="sxs-lookup"><span data-stu-id="f42e3-179">You don't need to build any additional infrastructure to support multiple output methods.</span></span> <span data-ttu-id="f42e3-180">Onlar sadece çağırma listesinde başka bir yöntem haline gelir.</span><span class="sxs-lookup"><span data-stu-id="f42e3-180">They simply become another method on the invocation list.</span></span>

<span data-ttu-id="f42e3-181">Dosya günlüğe kaydetme çıktısı yöntemindeki koda özellikle dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="f42e3-181">Pay special attention to the code in the file logging output method.</span></span> <span data-ttu-id="f42e3-182">Herhangi bir özel durum atmaması için kodlanır.</span><span class="sxs-lookup"><span data-stu-id="f42e3-182">It is coded to ensure that it does not throw any exceptions.</span></span> <span data-ttu-id="f42e3-183">Bu her zaman kesinlikle gerekli olmasa da, genellikle iyi bir uygulamadır.</span><span class="sxs-lookup"><span data-stu-id="f42e3-183">While this isn't always strictly necessary, it's often a good practice.</span></span> <span data-ttu-id="f42e3-184">Temsilci yöntemlerinden biri özel durum oluşturursa, çağrı üzerinde kalan temsilciler çağrılmaz.</span><span class="sxs-lookup"><span data-stu-id="f42e3-184">If either of the delegate methods throws an exception, the remaining delegates that are on the invocation won't be invoked.</span></span>

<span data-ttu-id="f42e3-185">Son not olarak, dosya kaydedicisi her günlük iletisindeki dosyayı açıp kapatarak kaynaklarını yönetmelidir.</span><span class="sxs-lookup"><span data-stu-id="f42e3-185">As a last note, the file logger must manage its resources by opening and closing the file on each log message.</span></span> <span data-ttu-id="f42e3-186">Dosyayı açık tutmayı ve tamamlandığında dosyayı kapatmak için IDisposable'i uygulamayı seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f42e3-186">You could choose to keep the file open and implement IDisposable to close the file when you are completed.</span></span>
<span data-ttu-id="f42e3-187">Her iki yöntemin de avantajları ve dezavantajları vardır.</span><span class="sxs-lookup"><span data-stu-id="f42e3-187">Either method has its advantages and disadvantages.</span></span> <span data-ttu-id="f42e3-188">Her ikisi de sınıflar arasında biraz daha bağlantı oluşturmak yok.</span><span class="sxs-lookup"><span data-stu-id="f42e3-188">Both do create a bit more coupling between the classes.</span></span>

<span data-ttu-id="f42e3-189">Logger sınıfındaki kodun her iki senaryoyu da desteklemek için güncelleştirilmemesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="f42e3-189">None of the code in the Logger class would need to be updated in order to support either scenario.</span></span>

## <a name="handling-null-delegates"></a><span data-ttu-id="f42e3-190">Null Delegeleri Taşıma</span><span class="sxs-lookup"><span data-stu-id="f42e3-190">Handling Null Delegates</span></span>

<span data-ttu-id="f42e3-191">Son olarak, Çıkış Mekanizması seçilmediğinde bu gibi durumlar için sağlam olacak şekilde LogMessage yöntemini güncelleştirelim.</span><span class="sxs-lookup"><span data-stu-id="f42e3-191">Finally, let's update the LogMessage method so that it is robust for those cases when no output mechanism is selected.</span></span> <span data-ttu-id="f42e3-192">Geçerli uygulama, temsilcinin `NullReferenceException` `WriteMessage` eklenmiş bir davet listesi yoksa bir atma olacaktır.</span><span class="sxs-lookup"><span data-stu-id="f42e3-192">The current implementation will throw a `NullReferenceException` when the `WriteMessage` delegate does not have an invocation list attached.</span></span>
<span data-ttu-id="f42e3-193">Hiçbir yöntem eklenmediğinde sessizce devam eden bir tasarımı tercih edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f42e3-193">You may prefer a design that silently continues when no methods have been attached.</span></span> <span data-ttu-id="f42e3-194">Bu `Delegate.Invoke()` yöntem ile birlikte, null koşullu işleci kullanarak kolaydır:</span><span class="sxs-lookup"><span data-stu-id="f42e3-194">This is easy using the null conditional operator, combined with the `Delegate.Invoke()` method:</span></span>

```csharp
public static void LogMessage(string msg)
{
    WriteMessage?.Invoke(msg);
}
```

<span data-ttu-id="f42e3-195">Null koşullu işleç (`?.`) kısa devreler sol`WriteMessage` operand (bu durumda) null, hangi hiçbir girişimi bir mesaj günlük için yapılır anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="f42e3-195">The null conditional operator (`?.`) short-circuits when the left operand (`WriteMessage` in this case) is null, which means no attempt is made to log a message.</span></span>

<span data-ttu-id="f42e3-196">Belgelerde listelenen `Invoke()` yöntemi bulamazsınız `System.Delegate` veya `System.MulticastDelegate`.</span><span class="sxs-lookup"><span data-stu-id="f42e3-196">You won't find the `Invoke()` method listed in the documentation for `System.Delegate` or `System.MulticastDelegate`.</span></span> <span data-ttu-id="f42e3-197">Derleyici, bildirilen herhangi `Invoke` bir temsilci türü için güvenli bir tür yöntemi oluşturur.</span><span class="sxs-lookup"><span data-stu-id="f42e3-197">The compiler generates a type safe `Invoke` method for any delegate type declared.</span></span> <span data-ttu-id="f42e3-198">Bu örnekte, `Invoke` bu tek `string` bir bağımsız değişken alır ve geçersiz bir dönüş türü vardır anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="f42e3-198">In this example, that means `Invoke` takes a single `string` argument, and has a void return type.</span></span>

## <a name="summary-of-practices"></a><span data-ttu-id="f42e3-199">Uygulamaların Özeti</span><span class="sxs-lookup"><span data-stu-id="f42e3-199">Summary of Practices</span></span>

<span data-ttu-id="f42e3-200">Diğer yazarlar ve diğer özelliklerle genişletilebilen bir günlük bileşeninin başlangıcını gördünüz.</span><span class="sxs-lookup"><span data-stu-id="f42e3-200">You've seen the beginnings of a log component that could be expanded with other writers, and other features.</span></span> <span data-ttu-id="f42e3-201">Tasarımda temsilciler kullanılarak bu farklı bileşenler çok gevşek bir şekilde birleşir.</span><span class="sxs-lookup"><span data-stu-id="f42e3-201">By using delegates in the design these different components are very loosely coupled.</span></span> <span data-ttu-id="f42e3-202">Bu çeşitli avantajlar sağlar.</span><span class="sxs-lookup"><span data-stu-id="f42e3-202">This provides several advantages.</span></span> <span data-ttu-id="f42e3-203">Yeni çıkış mekanizmaları oluşturmak ve bunları sisteme eklemek çok kolaydır.</span><span class="sxs-lookup"><span data-stu-id="f42e3-203">It's very easy to create new output mechanisms and attach them to the system.</span></span> <span data-ttu-id="f42e3-204">Bu diğer mekanizmalar yalnızca bir yöntem gerekir: günlük iletisi yazan yöntem.</span><span class="sxs-lookup"><span data-stu-id="f42e3-204">These other mechanisms only need one method: the method that writes the log message.</span></span> <span data-ttu-id="f42e3-205">Yeni özellikler eklendiğinde çok esnek bir tasarımdır.</span><span class="sxs-lookup"><span data-stu-id="f42e3-205">It's a design that is very resilient when new features are added.</span></span> <span data-ttu-id="f42e3-206">Herhangi bir yazar için gerekli sözleşme bir yöntem uygulamaktır.</span><span class="sxs-lookup"><span data-stu-id="f42e3-206">The contract required for any writer is to implement one method.</span></span> <span data-ttu-id="f42e3-207">Bu yöntem statik veya örnek yöntemi olabilir.</span><span class="sxs-lookup"><span data-stu-id="f42e3-207">That method could be a static or instance method.</span></span> <span data-ttu-id="f42e3-208">Bu kamu, özel veya başka bir yasal erişim olabilir.</span><span class="sxs-lookup"><span data-stu-id="f42e3-208">It could be public, private, or any other legal access.</span></span>

<span data-ttu-id="f42e3-209">Logger sınıfı, son kesme değişiklikleri getirmeden herhangi bir sayıda geliştirme veya değişiklik yapabilir.</span><span class="sxs-lookup"><span data-stu-id="f42e3-209">The Logger class can make any number of enhancements or changes without introducing breaking changes.</span></span> <span data-ttu-id="f42e3-210">Herhangi bir sınıf gibi, değişiklikleri bozma riski olmadan ortak API değiştiremezsiniz.</span><span class="sxs-lookup"><span data-stu-id="f42e3-210">Like any class, you cannot modify the public API without the risk of breaking changes.</span></span> <span data-ttu-id="f42e3-211">Ancak, kaydedici ve herhangi bir çıkış motorları arasındaki bağlantı yalnızca temsilci aracılığıyla olduğundan, başka türleri (arabirimler veya temel sınıflar gibi) dahil.</span><span class="sxs-lookup"><span data-stu-id="f42e3-211">But, because the coupling between the logger and any output engines is only through the delegate, no other types (like interfaces or base classes) are involved.</span></span> <span data-ttu-id="f42e3-212">Bağlantı mümkün olduğunca küçük.</span><span class="sxs-lookup"><span data-stu-id="f42e3-212">The coupling is as small as possible.</span></span>

[<span data-ttu-id="f42e3-213">Sonraki</span><span class="sxs-lookup"><span data-stu-id="f42e3-213">Next</span></span>](events-overview.md)
