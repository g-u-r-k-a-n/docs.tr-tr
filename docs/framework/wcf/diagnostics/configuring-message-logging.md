---
title: İleti Günlüğe Kaydetmeyi Yapılandırma
ms.date: 03/30/2017
helpviewer_keywords:
- message logging [WCF]
ms.assetid: 0ff4c857-8f09-4b85-9dc0-89084706e4c9
ms.openlocfilehash: 283f43239d6cf5aea5ea668397a52313ff526e2a
ms.sourcegitcommit: 59e36e65ac81cdd094a5a84617625b2a0ff3506e
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/27/2020
ms.locfileid: "80345194"
---
# <a name="configuring-message-logging"></a><span data-ttu-id="f4f80-102">İleti Günlüğe Kaydetmeyi Yapılandırma</span><span class="sxs-lookup"><span data-stu-id="f4f80-102">Configuring Message Logging</span></span>

<span data-ttu-id="f4f80-103">Bu konu, farklı senaryolar için ileti günlüğe kaydetmeyi nasıl yapılandırabileceğinizi açıklar.</span><span class="sxs-lookup"><span data-stu-id="f4f80-103">This topic describes how you can configure message logging for different scenarios.</span></span>

## <a name="enabling-message-logging"></a><span data-ttu-id="f4f80-104">İleti Günlüğe Kaydetmeyi Etkinleştirme</span><span class="sxs-lookup"><span data-stu-id="f4f80-104">Enabling Message Logging</span></span>

<span data-ttu-id="f4f80-105">Windows Communication Foundation (WCF) iletileri varsayılan olarak günlüğe kaydetmez.</span><span class="sxs-lookup"><span data-stu-id="f4f80-105">Windows Communication Foundation (WCF) does not log messages by default.</span></span> <span data-ttu-id="f4f80-106">İleti günlüğe kaydetmeyi etkinleştirmek için, `System.ServiceModel.MessageLogging` izleme kaynağına bir `<messagelogging>` izleme dinleyicisi eklemeniz ve yapılandırma dosyasındaki öğe için öznitelikleri ayarlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-106">To activate message logging, you must add a trace listener to the `System.ServiceModel.MessageLogging` trace source and set attributes for the `<messagelogging>` element in the configuration file.</span></span>

<span data-ttu-id="f4f80-107">Aşağıdaki örnekte, günlüğe kaydetmenin nasıl etkinleştirilen ve ek seçenekler belirtin.</span><span class="sxs-lookup"><span data-stu-id="f4f80-107">The following example shows how to enable logging and specify additional options.</span></span>

```xml
<system.diagnostics>
  <sources>
    <source name="System.ServiceModel.MessageLogging">
      <listeners>
         <add name="messages"
              type="System.Diagnostics.XmlWriterTraceListener"
              initializeData="c:\logs\messages.svclog" />
        </listeners>
    </source>
  </sources>
</system.diagnostics>

<system.serviceModel>
  <diagnostics>
    <messageLogging
         logEntireMessage="true"
         logMalformedMessages="false"
         logMessagesAtServiceLevel="true"
         logMessagesAtTransportLevel="false"
         maxMessagesToLog="3000"
         maxSizeOfMessageToLog="2000"/>
  </diagnostics>
</system.serviceModel>
```

<span data-ttu-id="f4f80-108">İleti günlüğe kaydetme ayarları hakkında daha fazla bilgi için, [İzleme ve İleti Günlüğe Kaydetme için Önerilen Ayarlar'a](./tracing/recommended-settings-for-tracing-and-message-logging.md)bakın.</span><span class="sxs-lookup"><span data-stu-id="f4f80-108">For more information about message logging settings, see [Recommended Settings for Tracing and Message Logging](./tracing/recommended-settings-for-tracing-and-message-logging.md).</span></span>

<span data-ttu-id="f4f80-109">Kullanmak istediğiniz `add` dinleyicinin adını ve türünü belirtmek için kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f4f80-109">You can use `add` to specify the name and type of the listener you want to use.</span></span> <span data-ttu-id="f4f80-110">Örnek yapılandırmada Dinleyiciye "iletiler" adı verilir ve kullanılacak tür olarak`System.Diagnostics.XmlWriterTraceListener`standart .NET Framework izleme dinleyicisi ( ) ekler.</span><span class="sxs-lookup"><span data-stu-id="f4f80-110">In the example configuration, the Listener is named "messages" and adds the standard .NET Framework trace listener (`System.Diagnostics.XmlWriterTraceListener`) as the type to use.</span></span> <span data-ttu-id="f4f80-111">Kullanıyorsanız, `System.Diagnostics.XmlWriterTraceListener`yapılandırma dosyasında çıktı dosyası konumunu ve adını belirtmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-111">If you use `System.Diagnostics.XmlWriterTraceListener`, you must specify the output file location and name in the configuration file.</span></span> <span data-ttu-id="f4f80-112">Bu, günlük `initializeData` dosyasının adına ayarlayarak yapılır.</span><span class="sxs-lookup"><span data-stu-id="f4f80-112">This is done by setting `initializeData` to the name of the log file.</span></span> <span data-ttu-id="f4f80-113">Aksi takdirde, sistem bir özel durum atar.</span><span class="sxs-lookup"><span data-stu-id="f4f80-113">Otherwise, the system throws an exception.</span></span> <span data-ttu-id="f4f80-114">Ayrıca, varsayılan bir dosyaya günlük ler yakan özel bir dinleyici de uygulayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f4f80-114">You can also implement a custom listener that emits logs to a default file.</span></span>

> [!NOTE]
> <span data-ttu-id="f4f80-115">İleti günlüğü disk alanına eriştiğinden, belirli bir hizmet için diske yazılan ileti lerin sayısını sınırlaştırmıştırmıştır.</span><span class="sxs-lookup"><span data-stu-id="f4f80-115">Because message logging accesses disk space, you should limit the number of messages that are written to disk for a particular service.</span></span> <span data-ttu-id="f4f80-116">İleti sınırına ulaşıldığında, Bilgi düzeyinde bir izleme üretilir ve tüm ileti günlüğe kaydetme etkinlikleri durur.</span><span class="sxs-lookup"><span data-stu-id="f4f80-116">When the message limit is reached, a trace at the Information level is produced and all message logging activities stop.</span></span>

<span data-ttu-id="f4f80-117">Günlük düzeyi ve ek seçenekler, Günlük Düzeyi ve Seçenekler bölümünde tartışılır.</span><span class="sxs-lookup"><span data-stu-id="f4f80-117">The logging level, as well as the additional options, are discussed in the Logging Level and Options section.</span></span>

<span data-ttu-id="f4f80-118">A'nın `switchValue` `source` özniteliği yalnızca izleme için geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-118">The `switchValue` attribute of a `source` is only valid for tracing.</span></span> <span data-ttu-id="f4f80-119">İzleme kaynağı `switchValue` için aşağıdaki gibi bir öznitelik belirtirseniz, bunun bir etkisi yoktur. `System.ServiceModel.MessageLogging`</span><span class="sxs-lookup"><span data-stu-id="f4f80-119">If you specify a `switchValue` attribute for the `System.ServiceModel.MessageLogging` trace source as follows, it has no effect.</span></span>

```xml
<source name="System.ServiceModel.MessageLogging" switchValue="Verbose">
</source>
```

<span data-ttu-id="f4f80-120">İzleme kaynağını devre dışı kılmış olmak istiyorsanız, `logMessagesAtServiceLevel` `logMalformedMessages`bunun `logMessagesAtTransportLevel` yerine öğenin özniteliklerini ve özniteliklerini `messageLogging` kullanmalısınız.</span><span class="sxs-lookup"><span data-stu-id="f4f80-120">If you want to disable the trace source, you should use the `logMessagesAtServiceLevel`, `logMalformedMessages`, and `logMessagesAtTransportLevel` attributes of the `messageLogging` element instead.</span></span> <span data-ttu-id="f4f80-121">Tüm bu öznitelikleri `false`' ye ayarlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-121">You should set all these attributes to `false`.</span></span> <span data-ttu-id="f4f80-122">Bu, önceki kod örneğindeki yapılandırma dosyasını kullanarak, Configuration Editor UI arabirimi üzerinden veya WMI kullanılarak yapılabilir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-122">This can be done by using the configuration file in the previous code example, through the Configuration Editor UI interface, or using WMI.</span></span> <span data-ttu-id="f4f80-123">Configuration Editor aracı hakkında daha fazla bilgi için [Configuration Editor Tool (SvcConfigEditor.exe)](../configuration-editor-tool-svcconfigeditor-exe.md)bakın.</span><span class="sxs-lookup"><span data-stu-id="f4f80-123">For more information about the Configuration Editor tool, see [Configuration Editor Tool (SvcConfigEditor.exe)](../configuration-editor-tool-svcconfigeditor-exe.md).</span></span> <span data-ttu-id="f4f80-124">WMI hakkında daha fazla bilgi için, [tanılama için Windows Yönetim Araçları kullanma'ya](./wmi/index.md)bakın.</span><span class="sxs-lookup"><span data-stu-id="f4f80-124">For more information about WMI, see [Using Windows Management Instrumentation for Diagnostics](./wmi/index.md).</span></span>

## <a name="logging-levels-and-options"></a><span data-ttu-id="f4f80-125">Günlük Düzeyleri ve Seçenekleri</span><span class="sxs-lookup"><span data-stu-id="f4f80-125">Logging Levels and Options</span></span>

<span data-ttu-id="f4f80-126">Gelen iletiler için günlüğe kaydetme, ileti oluşturulduktan hemen sonra, ileti hizmet düzeyinde ki kullanıcı koduna gelmeden hemen önce ve hatalı biçimlendirilmiş iletiler algılandığında gerçekleşir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-126">For incoming messages, logging happens immediately after the message is formed, immediately before the message gets to user code in the service level, and when malformed messages are detected.</span></span>

<span data-ttu-id="f4f80-127">Giden iletiler için günlüğe kaydetme, ileti kullanıcı kodundan ayrıldıktan hemen sonra ve ileti kabloya girmeden hemen önce gerçekleşir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-127">For outgoing messages, logging happens immediately after the message leaves user code and immediately before the message goes on the wire.</span></span>

<span data-ttu-id="f4f80-128">WCF iletileri iki farklı düzeyde, hizmet ve taşıma da kaydeder.</span><span class="sxs-lookup"><span data-stu-id="f4f80-128">WCF logs messages at two different levels, service and transport.</span></span> <span data-ttu-id="f4f80-129">Hatalı biçimlendirilmiş iletiler de günlüğe kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-129">Malformed messages are also logged.</span></span> <span data-ttu-id="f4f80-130">Üç kategori birbirinden bağımsızdır ve yapılandırmada ayrı olarak etkinleştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-130">The three categories are independent from each other and can be activated separately in configuration.</span></span>

<span data-ttu-id="f4f80-131">Öğenin `logMessagesAtServiceLevel`, ve `logMalformedMessages` `logMessagesAtTransportLevel` özniteliklerini ayarlayarak günlüğe kaydetme düzeyini denetleyebilirsiniz. `messageLogging`</span><span class="sxs-lookup"><span data-stu-id="f4f80-131">You can control the logging level by setting the `logMessagesAtServiceLevel`, `logMalformedMessages`, and `logMessagesAtTransportLevel` attributes of the `messageLogging` element.</span></span>

### <a name="service-level"></a><span data-ttu-id="f4f80-132">Hizmet Düzeyi</span><span class="sxs-lookup"><span data-stu-id="f4f80-132">Service Level</span></span>

<span data-ttu-id="f4f80-133">Bu katmanda günlüğe kaydedilen iletiler, kullanıcı kodunu girmek (almak üzere) veya ayrılmak üzeredir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-133">Messages logged at this layer are about to enter (on receiving) or leave (on sending) user code.</span></span> <span data-ttu-id="f4f80-134">Filtreler tanımlanmışsa, yalnızca filtrelerle eşleşen iletiler günlüğe kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-134">If filters have been defined, only messages that match the filters are logged.</span></span> <span data-ttu-id="f4f80-135">Aksi takdirde, hizmet düzeyindeki tüm iletiler günlüğe kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-135">Otherwise, all messages at the service level are logged.</span></span> <span data-ttu-id="f4f80-136">Güvenilir İleti iletileri dışında altyapı iletileri (hareketler, eş kanal ve güvenlik) de bu düzeyde günlüğe kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-136">Infrastructure messages (transactions, peer channel, and security) are also logged at this level, except for Reliable Messaging messages.</span></span> <span data-ttu-id="f4f80-137">Akışlı iletilerde yalnızca üstbilgi günlüğe kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-137">On streamed messages, only the headers are logged.</span></span> <span data-ttu-id="f4f80-138">Buna ek olarak, güvenli iletiler bu düzeyde şifresi çözülür kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-138">In addition, secure messages are logged decrypted at this level.</span></span>

### <a name="transport-level"></a><span data-ttu-id="f4f80-139">Ulaşım Seviyesi</span><span class="sxs-lookup"><span data-stu-id="f4f80-139">Transport Level</span></span>

<span data-ttu-id="f4f80-140">Bu katmanda günlüğe kaydedilen iletiler, kablo üzerinde veya taşıma dan sonra kodlanacak veya çözülmeye hazırdır.</span><span class="sxs-lookup"><span data-stu-id="f4f80-140">Messages logged at this layer are ready to be encoded or decoded for or after transportation on the wire.</span></span> <span data-ttu-id="f4f80-141">Filtreler tanımlanmışsa, yalnızca filtrelerle eşleşen iletiler günlüğe kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-141">If filters have been defined, only messages that match the filters are logged.</span></span> <span data-ttu-id="f4f80-142">Aksi takdirde, aktarım katmanındaki tüm iletiler günlüğe kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-142">Otherwise, all messages at the transport layer are logged.</span></span> <span data-ttu-id="f4f80-143">Güvenilir ileti iletileri de dahil olmak üzere tüm altyapı iletileri bu katmanda günlüğe kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-143">All infrastructure messages are logged at this layer, including reliable messaging messages.</span></span> <span data-ttu-id="f4f80-144">Akışlı iletilerde yalnızca üstbilgi günlüğe kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-144">On streamed messages, only the headers are logged.</span></span> <span data-ttu-id="f4f80-145">Ayrıca, HTTPS gibi güvenli bir aktarım kullanılmadığı dışında, güvenli iletiler bu düzeyde şifrelenmişolarak kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-145">In addition, secure messages are logged as encrypted at this level, except if a secure transport such as HTTPS is used.</span></span>

### <a name="malformed-level"></a><span data-ttu-id="f4f80-146">Hatalı Biçimlendirilmiş Seviye</span><span class="sxs-lookup"><span data-stu-id="f4f80-146">Malformed Level</span></span>

<span data-ttu-id="f4f80-147">Hatalı biçimlendirilmiş iletiler, işlemin herhangi bir aşamasında WCF yığını tarafından reddedilen iletilerdir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-147">Malformed messages are messages that are rejected by the WCF stack at any stage of processing.</span></span> <span data-ttu-id="f4f80-148">Hatalı biçimlendirilmiş iletiler olduğu gibi günlüğe kaydedilir: eğer öyleyse, uygun olmayan XML ile şifrelenir, ve saire.</span><span class="sxs-lookup"><span data-stu-id="f4f80-148">Malformed messages are logged as-is: encrypted if they are so, with non-proper XML, and so on.</span></span> <span data-ttu-id="f4f80-149">`maxSizeOfMessageToLog`cdata olarak günlüğe kaydedilecek iletinin boyutunu tanımlamıştır.</span><span class="sxs-lookup"><span data-stu-id="f4f80-149">`maxSizeOfMessageToLog` defined the size of the message to be logged as CDATA.</span></span> <span data-ttu-id="f4f80-150">Varsayılan olarak, `maxSizeOfMessageToLog` 256K eşittir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-150">By default, `maxSizeOfMessageToLog` is equal to 256K.</span></span> <span data-ttu-id="f4f80-151">Bu öznitelik hakkında daha fazla bilgi için Diğer Seçenekler bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="f4f80-151">For more information about this attribute, see the Other Options section.</span></span>

### <a name="other-options"></a><span data-ttu-id="f4f80-152">Diğer Seçenekler</span><span class="sxs-lookup"><span data-stu-id="f4f80-152">Other Options</span></span>

<span data-ttu-id="f4f80-153">Günlüğe kaydetme düzeylerine ek olarak, kullanıcı aşağıdaki seçenekleri belirtebilir:</span><span class="sxs-lookup"><span data-stu-id="f4f80-153">In addition to the logging levels, the user can specify the following options:</span></span>

- <span data-ttu-id="f4f80-154">Tüm İletiyi`logEntireMessage` (öznitelik) günlüğe kaydedin: Bu değer, iletinin tamamının (ileti üstbilgisi ve gövdesi) günlüğe kaydedilip günlüğe kaydolmadığını belirtir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-154">Log Entire Message (`logEntireMessage` attribute): This value specifies whether the entire message (message header and body) is logged.</span></span> <span data-ttu-id="f4f80-155">Varsayılan değer, `false`yalnızca üstbilginin günlüğe kaydedildiği anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-155">The default value is `false`, meaning that only the header is logged.</span></span> <span data-ttu-id="f4f80-156">Bu ayar hizmet ve aktarım ileti günlüğe kaydetme düzeylerini etkiler...</span><span class="sxs-lookup"><span data-stu-id="f4f80-156">This setting affects service and transport message logging levels..</span></span>

- <span data-ttu-id="f4f80-157">Günlüğe kaydolacak`maxMessagesToLog` maksimum iletiler (öznitelik): Bu değer, günlüğe kaydolacak en fazla ileti sayısını belirtir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-157">Max messages to log (`maxMessagesToLog` attribute): This value specifies the maximum number of messages to log.</span></span> <span data-ttu-id="f4f80-158">Tüm iletiler (hizmet, aktarım ve yanlış biçimlendirilmiş iletiler) bu kotaya dahil edilir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-158">All messages (service, transport, and malformed messages) are counted towards this quota.</span></span> <span data-ttu-id="f4f80-159">Kotaya ulaşıldığında, bir izleme yayımlanır ve ek ileti günlüğe kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-159">When the quota is reached, a trace is emitted and no additional message is logged.</span></span> <span data-ttu-id="f4f80-160">Varsayılan değer 10000'dir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-160">The default value is 10000.</span></span>

- <span data-ttu-id="f4f80-161">Günlük için iletinin`maxSizeOfMessageToLog` maksimum boyutu (öznitelik): Bu değer, bayt oturum açmak için iletilerin maksimum boyutunu belirtir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-161">Max size of message to log (`maxSizeOfMessageToLog` attribute): This value specifies the maximum size of messages to log in bytes.</span></span> <span data-ttu-id="f4f80-162">Boyut sınırını aşan iletiler günlüğe kaydedilmez ve bu ileti için başka bir etkinlik gerçekleştirilmez.</span><span class="sxs-lookup"><span data-stu-id="f4f80-162">Messages that exceed the size limit are not logged, and no other activity is performed for that message.</span></span> <span data-ttu-id="f4f80-163">Bu ayar tüm izleme düzeylerini etkiler.</span><span class="sxs-lookup"><span data-stu-id="f4f80-163">This setting affects all trace levels.</span></span> <span data-ttu-id="f4f80-164">ServiceModel izleme sayılmalı, kullanıcıyı bilgilendirmek için ilk günlüğe kaydetme noktasından (ServiceModelSend\* veya TransportReceive) bir Uyarı düzeyi izleme saçar.</span><span class="sxs-lookup"><span data-stu-id="f4f80-164">If ServiceModel tracing is on, a Warning level trace is emitted at the first logging point (ServiceModelSend\* or TransportReceive) to notify the user.</span></span> <span data-ttu-id="f4f80-165">Hizmet düzeyi ve aktarım düzeyi iletileri için varsayılan değer 256K iken, hatalı biçimlendirilmiş iletilerin varsayılan değeri 4K'dır.</span><span class="sxs-lookup"><span data-stu-id="f4f80-165">The default value for service level and transport level messages is 256K, while the default value for malformed messages is 4K.</span></span>

  > [!CAUTION]
  > <span data-ttu-id="f4f80-166">Karşılaştırmak için hesaplanan ileti `maxSizeOfMessageToLog` boyutu, serileştirmeden önce bellekteki ileti boyutudur.</span><span class="sxs-lookup"><span data-stu-id="f4f80-166">The message size that is computed to compare against `maxSizeOfMessageToLog` is the message size in memory before serialization.</span></span> <span data-ttu-id="f4f80-167">Bu boyut, günlüğe kaydedilen ileti dizesinin gerçek uzunluğundan farklı olabilir ve birçok durumda gerçek boyuttan daha büyüktür.</span><span class="sxs-lookup"><span data-stu-id="f4f80-167">This size can differ from the actual length of the message string that is being logged, and in many occasions is bigger than the actual size.</span></span> <span data-ttu-id="f4f80-168">Sonuç olarak, iletiler günlüğe kaydedilemeyebilir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-168">As a result, messages may not be logged.</span></span> <span data-ttu-id="f4f80-169">Bu gerçeği, özniteliğinin `maxSizeOfMessageToLog` beklenen ileti boyutundan %10 daha büyük olduğunu belirterek açıklayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f4f80-169">You can account for this fact by specifying the `maxSizeOfMessageToLog` attribute to be 10% larger than the expected message size.</span></span> <span data-ttu-id="f4f80-170">Ayrıca, hatalı biçimlendirilmiş iletiler günlüğe kaydedilirse, ileti günlükleri tarafından kullanılan gerçek disk alanı, belirtilen `maxSizeOfMessageToLog`değerin 5 katına kadar olabilir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-170">In addition, if malformed messages are logged, the actual disk space utilized by the message logs can be up to 5 times the size of the value specified by `maxSizeOfMessageToLog`.</span></span>

<span data-ttu-id="f4f80-171">Yapılandırma dosyasında izleme dinleyicisi tanımlanmamışsa, belirtilen günlük düzeyine bakılmaksızın günlüğe kaydetme çıktısı oluşturulmaz.</span><span class="sxs-lookup"><span data-stu-id="f4f80-171">If no trace listener is defined in the configuration file, no logging output is generated regardless of the specified logging level.</span></span>

<span data-ttu-id="f4f80-172">Bu bölümde açıklanan öznitelikler gibi ileti günlüğe kaydetme seçenekleri, Windows Yönetim Araçları (WMI) kullanılarak çalışma zamanında değiştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-172">Message logging options, such as the attributes described in this section, can be changed at runtime using Windows Management Instrumentation (WMI).</span></span> <span data-ttu-id="f4f80-173">Bu [AppDomainInfo](./wmi/appdomaininfo.md) örneğine erişerek yapılabilir, hangi bu Boolean `LogMessagesAtServiceLevel` `LogMessagesAtTransportLevel`özellikleri `LogMalformedMessages`ortaya çıkarır: , , ve .</span><span class="sxs-lookup"><span data-stu-id="f4f80-173">This can be done by accessing the [AppDomainInfo](./wmi/appdomaininfo.md) instance, which exposes these Boolean properties: `LogMessagesAtServiceLevel`, `LogMessagesAtTransportLevel`, and `LogMalformedMessages`.</span></span> <span data-ttu-id="f4f80-174">Bu nedenle, ileti günlüğe kaydetme için bir izleme dinleyicisi yapılandırırsanız, ancak bu seçenekleri `false` yapılandırmada ayarlarsanız, bunları daha sonra uygulama çalışırken değiştirebilirsiniz. `true`</span><span class="sxs-lookup"><span data-stu-id="f4f80-174">Therefore, if you configure a trace listener for message logging, but set these options to `false` in configuration, you can later change them to `true` when the application is running.</span></span> <span data-ttu-id="f4f80-175">Bu, çalışma zamanında ileti günlüğe kaydetmeyi etkin bir şekilde sağlar.</span><span class="sxs-lookup"><span data-stu-id="f4f80-175">This effectively enables message logging at runtime.</span></span> <span data-ttu-id="f4f80-176">Benzer şekilde, yapılandırma dosyanızda ileti günlüğe kaydetmeyi etkinleştiriseniz, WMI kullanarak çalışma zamanında devre dışı kalabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f4f80-176">Similarly, if you enable message logging in your configuration file, you can disable it at runtime using WMI.</span></span> <span data-ttu-id="f4f80-177">Daha fazla bilgi için [bkz.](./wmi/index.md)</span><span class="sxs-lookup"><span data-stu-id="f4f80-177">For more information, see [Using Windows Management Instrumentation for Diagnostics](./wmi/index.md).</span></span>

<span data-ttu-id="f4f80-178">İleti `source` günlüğündeki alan, iletinin hangi bağlamda günlüğe kaydedildiğini belirtir: istek iletisi gönderirken/alırken, istek-yanıt veya tek yönlü istek için, hizmet modelinde veya aktarım katmanında veya yanlış biçimlendirilmiş bir ileti durumunda.</span><span class="sxs-lookup"><span data-stu-id="f4f80-178">The `source` field in a message log specifies in which context the message is logged: when sending/receiving a request message, for a request-reply or 1-way request, at service model or transport layer, or in the case of a malformed message.</span></span>

<span data-ttu-id="f4f80-179">Yanlış biçimlendirilmiş iletiler için, `source` 'ye `Malformed`eşittir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-179">For malformed messages, `source`  is equal to `Malformed`.</span></span> <span data-ttu-id="f4f80-180">Aksi takdirde, kaynak bağlamı temel alan aşağıdaki değerlere sahiptir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-180">Otherwise, source has the following values based on the context.</span></span>

<span data-ttu-id="f4f80-181">İstek/Yanıt Için</span><span class="sxs-lookup"><span data-stu-id="f4f80-181">For Request/Reply</span></span>

||<span data-ttu-id="f4f80-182">İstek Gönder</span><span class="sxs-lookup"><span data-stu-id="f4f80-182">Send Request</span></span>|<span data-ttu-id="f4f80-183">İstek Alma</span><span class="sxs-lookup"><span data-stu-id="f4f80-183">Receive Request</span></span>|<span data-ttu-id="f4f80-184">Yanıt Gönder</span><span class="sxs-lookup"><span data-stu-id="f4f80-184">Send Reply</span></span>|<span data-ttu-id="f4f80-185">Yanıt Al</span><span class="sxs-lookup"><span data-stu-id="f4f80-185">Receive Reply</span></span>|
|-|------------------|---------------------|----------------|-------------------|
|<span data-ttu-id="f4f80-186">Hizmet Modeli katmanı</span><span class="sxs-lookup"><span data-stu-id="f4f80-186">Service Model layer</span></span>|<span data-ttu-id="f4f80-187">Hizmet</span><span class="sxs-lookup"><span data-stu-id="f4f80-187">Service</span></span><br /><br /> <span data-ttu-id="f4f80-188">Düzey</span><span class="sxs-lookup"><span data-stu-id="f4f80-188">Level</span></span><br /><br /> <span data-ttu-id="f4f80-189">Gönder</span><span class="sxs-lookup"><span data-stu-id="f4f80-189">Send</span></span><br /><br /> <span data-ttu-id="f4f80-190">İstek</span><span class="sxs-lookup"><span data-stu-id="f4f80-190">Request</span></span>|<span data-ttu-id="f4f80-191">Hizmet</span><span class="sxs-lookup"><span data-stu-id="f4f80-191">Service</span></span><br /><br /> <span data-ttu-id="f4f80-192">Düzey</span><span class="sxs-lookup"><span data-stu-id="f4f80-192">Level</span></span><br /><br /> <span data-ttu-id="f4f80-193">Al</span><span class="sxs-lookup"><span data-stu-id="f4f80-193">Receive</span></span><br /><br /> <span data-ttu-id="f4f80-194">İstek</span><span class="sxs-lookup"><span data-stu-id="f4f80-194">Request</span></span>|<span data-ttu-id="f4f80-195">Hizmet</span><span class="sxs-lookup"><span data-stu-id="f4f80-195">Service</span></span><br /><br /> <span data-ttu-id="f4f80-196">Düzey</span><span class="sxs-lookup"><span data-stu-id="f4f80-196">Level</span></span><br /><br /> <span data-ttu-id="f4f80-197">Gönder</span><span class="sxs-lookup"><span data-stu-id="f4f80-197">Send</span></span><br /><br /> <span data-ttu-id="f4f80-198">Yanıtla</span><span class="sxs-lookup"><span data-stu-id="f4f80-198">Reply</span></span>|<span data-ttu-id="f4f80-199">Hizmet</span><span class="sxs-lookup"><span data-stu-id="f4f80-199">Service</span></span><br /><br /> <span data-ttu-id="f4f80-200">Düzey</span><span class="sxs-lookup"><span data-stu-id="f4f80-200">Level</span></span><br /><br /> <span data-ttu-id="f4f80-201">Al</span><span class="sxs-lookup"><span data-stu-id="f4f80-201">Receive</span></span><br /><br /> <span data-ttu-id="f4f80-202">Yanıtla</span><span class="sxs-lookup"><span data-stu-id="f4f80-202">Reply</span></span>|
|<span data-ttu-id="f4f80-203">Taşıma katmanı</span><span class="sxs-lookup"><span data-stu-id="f4f80-203">Transport layer</span></span>|<span data-ttu-id="f4f80-204">Aktarım</span><span class="sxs-lookup"><span data-stu-id="f4f80-204">Transport</span></span><br /><br /> <span data-ttu-id="f4f80-205">Gönder</span><span class="sxs-lookup"><span data-stu-id="f4f80-205">Send</span></span>|<span data-ttu-id="f4f80-206">Aktarım</span><span class="sxs-lookup"><span data-stu-id="f4f80-206">Transport</span></span><br /><br /> <span data-ttu-id="f4f80-207">Al</span><span class="sxs-lookup"><span data-stu-id="f4f80-207">Receive</span></span>|<span data-ttu-id="f4f80-208">Aktarım</span><span class="sxs-lookup"><span data-stu-id="f4f80-208">Transport</span></span><br /><br /> <span data-ttu-id="f4f80-209">Gönder</span><span class="sxs-lookup"><span data-stu-id="f4f80-209">Send</span></span>|<span data-ttu-id="f4f80-210">Aktarım</span><span class="sxs-lookup"><span data-stu-id="f4f80-210">Transport</span></span><br /><br /> <span data-ttu-id="f4f80-211">Al</span><span class="sxs-lookup"><span data-stu-id="f4f80-211">Receive</span></span>|

<span data-ttu-id="f4f80-212">Tek Yönlü İstek İçin</span><span class="sxs-lookup"><span data-stu-id="f4f80-212">For One-way Request</span></span>

||<span data-ttu-id="f4f80-213">İstek Gönder</span><span class="sxs-lookup"><span data-stu-id="f4f80-213">Send Request</span></span>|<span data-ttu-id="f4f80-214">İstek Alma</span><span class="sxs-lookup"><span data-stu-id="f4f80-214">Receive Request</span></span>|
|-|------------------|---------------------|
|<span data-ttu-id="f4f80-215">Hizmet Modeli katmanı</span><span class="sxs-lookup"><span data-stu-id="f4f80-215">Service Model layer</span></span>|<span data-ttu-id="f4f80-216">Hizmet</span><span class="sxs-lookup"><span data-stu-id="f4f80-216">Service</span></span><br /><br /> <span data-ttu-id="f4f80-217">Düzey</span><span class="sxs-lookup"><span data-stu-id="f4f80-217">Level</span></span><br /><br /> <span data-ttu-id="f4f80-218">Gönder</span><span class="sxs-lookup"><span data-stu-id="f4f80-218">Send</span></span><br /><br /> <span data-ttu-id="f4f80-219">Datagram</span><span class="sxs-lookup"><span data-stu-id="f4f80-219">Datagram</span></span>|<span data-ttu-id="f4f80-220">Hizmet</span><span class="sxs-lookup"><span data-stu-id="f4f80-220">Service</span></span><br /><br /> <span data-ttu-id="f4f80-221">Düzey</span><span class="sxs-lookup"><span data-stu-id="f4f80-221">Level</span></span><br /><br /> <span data-ttu-id="f4f80-222">Al</span><span class="sxs-lookup"><span data-stu-id="f4f80-222">Receive</span></span><br /><br /> <span data-ttu-id="f4f80-223">Datagram</span><span class="sxs-lookup"><span data-stu-id="f4f80-223">Datagram</span></span>|
|<span data-ttu-id="f4f80-224">Taşıma katmanı</span><span class="sxs-lookup"><span data-stu-id="f4f80-224">Transport layer</span></span>|<span data-ttu-id="f4f80-225">Aktarım</span><span class="sxs-lookup"><span data-stu-id="f4f80-225">Transport</span></span><br /><br /> <span data-ttu-id="f4f80-226">Gönder</span><span class="sxs-lookup"><span data-stu-id="f4f80-226">Send</span></span>|<span data-ttu-id="f4f80-227">Aktarım</span><span class="sxs-lookup"><span data-stu-id="f4f80-227">Transport</span></span><br /><br /> <span data-ttu-id="f4f80-228">Al</span><span class="sxs-lookup"><span data-stu-id="f4f80-228">Receive</span></span>|

## <a name="message-filters"></a><span data-ttu-id="f4f80-229">İleti Filtreleri</span><span class="sxs-lookup"><span data-stu-id="f4f80-229">Message Filters</span></span>

<span data-ttu-id="f4f80-230">İleti filtreleri yapılandırma `messageLogging` bölümünün yapılandırma `diagnostics` öğesinde tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="f4f80-230">Message filters are defined in the `messageLogging` configuration element of the `diagnostics` configuration section.</span></span> <span data-ttu-id="f4f80-231">Bunlar servis ve taşıma düzeyinde uygulanır.</span><span class="sxs-lookup"><span data-stu-id="f4f80-231">They are applied at the service and transport level.</span></span> <span data-ttu-id="f4f80-232">Bir veya daha fazla filtre tanımlandığında, yalnızca filtrelerden en az biriyle eşleşen iletiler günlüğe kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-232">When one or more filters are defined, only messages that match at least one of the filters are logged.</span></span> <span data-ttu-id="f4f80-233">Filtre tanımlanmamışsa, tüm iletiler geçer.</span><span class="sxs-lookup"><span data-stu-id="f4f80-233">If no filter is defined, all messages pass through.</span></span>

<span data-ttu-id="f4f80-234">Filtreler tam XPath sözdizimini destekler ve yapılandırma dosyasında göründükleri sırada uygulanır.</span><span class="sxs-lookup"><span data-stu-id="f4f80-234">Filters support the full XPath syntax and are applied in the order they appear in the configuration file.</span></span> <span data-ttu-id="f4f80-235">Sözdizimi olarak yanlış filtre yapılandırma özel durumuyla sonuçlanır.</span><span class="sxs-lookup"><span data-stu-id="f4f80-235">A syntactically incorrect filter results in a configuration exception.</span></span>

<span data-ttu-id="f4f80-236">Filtreler ayrıca, xpath DOM'daki filtreyle eşleşecek şekilde incelenebilen maksimum düğüm sayısını sınırlayan özniteliği kullanarak `nodeQuota` bir güvenlik özelliği de sağlar.</span><span class="sxs-lookup"><span data-stu-id="f4f80-236">Filters also provide a safety feature using the `nodeQuota` attribute, which limits the maximum number of nodes in the XPath DOM that can be examined to match the filter.</span></span>

<span data-ttu-id="f4f80-237">Aşağıdaki örnek, yalnızca SOAP üstbilgi bölümü olan iletileri kaydeden bir filtrenin nasıl yapılandırılabildiğini gösterir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-237">The following example shows how to configure a filter that records only messages that have a SOAP header section.</span></span>

```xml
<messageLogging logEntireMessage="true"
    logMalformedMessages="true"
    logMessagesAtServiceLevel="true"
    logMessagesAtTransportLevel="true"
    maxMessagesToLog="420">
    <filters>
        <add nodeQuota="10" xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
                 /soap:Envelope/soap:Header
        </add>
     </filters>
</messageLogging>
```

<span data-ttu-id="f4f80-238">Filtreler iletinin gövdesine uygulanamaz.</span><span class="sxs-lookup"><span data-stu-id="f4f80-238">Filters cannot be applied to the body of a message.</span></span> <span data-ttu-id="f4f80-239">İletigövdesini işlemeye çalışan filtreler filtreler listesinden kaldırılır.</span><span class="sxs-lookup"><span data-stu-id="f4f80-239">Filters that attempt to manipulate the body of a message are removed from the list of filters.</span></span> <span data-ttu-id="f4f80-240">Bunu gösteren bir olay da yayılır.</span><span class="sxs-lookup"><span data-stu-id="f4f80-240">An event is also emitted that indicates this.</span></span> <span data-ttu-id="f4f80-241">Örneğin, aşağıdaki filtre filtre tablosundan kaldırılır.</span><span class="sxs-lookup"><span data-stu-id="f4f80-241">For example, the following filter would be removed from the filter table.</span></span>

```xml
<add xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">/s:Envelope/s:Body[contains(text(), "Hello")]</add>
```

## <a name="configuring-a-custom-listener"></a><span data-ttu-id="f4f80-242">Özel Dinleyici Yapılandırma</span><span class="sxs-lookup"><span data-stu-id="f4f80-242">Configuring a Custom Listener</span></span>

<span data-ttu-id="f4f80-243">Ayrıca, özel bir dinleyiciyi ek seçeneklerle yapılandırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f4f80-243">You can also configure a custom listener with additional options.</span></span> <span data-ttu-id="f4f80-244">Özel bir dinleyici, günlüğe kaydetmeden önce iletilerden uygulamaya özgü KIŞISEL öğeleri filtrelemede yararlı olabilir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-244">A custom listener can be useful in filtering application-specific PII elements from messages before logging.</span></span> <span data-ttu-id="f4f80-245">Aşağıdaki örnek, özel bir dinleyici yapılandırmasını gösterir.</span><span class="sxs-lookup"><span data-stu-id="f4f80-245">The following example demonstrates a custom listener configuration.</span></span>

```xml
<system.diagnostics>
   <sources>
     <source name="System.ServiceModel.MessageLogging">
           <listeners>
             <add name="MyListener"
                    type="YourCustomListener"
                    initializeData="c:\logs\messages.svclog"
                    maxDiskSpace="1000"/>
           </listeners>
     </source>
   </sources>
</system.diagnostics>
```

<span data-ttu-id="f4f80-246">Özniteliğin `type` türün nitelikli bir derleme adı olarak ayarlanmasını gerektiğini unutmayın.</span><span class="sxs-lookup"><span data-stu-id="f4f80-246">You should be aware that the `type` attribute should be set to a qualified assembly name of the type.</span></span>

## <a name="see-also"></a><span data-ttu-id="f4f80-247">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="f4f80-247">See also</span></span>

- [<span data-ttu-id="f4f80-248">\<mesajGünlük></span><span class="sxs-lookup"><span data-stu-id="f4f80-248">\<messageLogging></span></span>](../../configure-apps/file-schema/wcf/messagelogging.md)
- [<span data-ttu-id="f4f80-249">Günlüğe İleti Kaydetme</span><span class="sxs-lookup"><span data-stu-id="f4f80-249">Message Logging</span></span>](message-logging.md)
- [<span data-ttu-id="f4f80-250">İzleme ve İletileri Günlüğe Kaydetme için Önerilen Ayarlar</span><span class="sxs-lookup"><span data-stu-id="f4f80-250">Recommended Settings for Tracing and Message Logging</span></span>](./tracing/recommended-settings-for-tracing-and-message-logging.md)
