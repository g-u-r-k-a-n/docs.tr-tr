---
title: Görsel Katmanda Tıklama Testi
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- hit testing functionality [WPF]
- visual layer [WPF], hit testing functionality
ms.assetid: b1a64b61-14be-4d75-b89a-5c67bebb2c7b
ms.openlocfilehash: d4d304353e91147c57297dcc4525759ff1474b4f
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/12/2020
ms.locfileid: "79186411"
---
# <a name="hit-testing-in-the-visual-layer"></a><span data-ttu-id="aa6fa-102">Görsel Katmanda Tıklama Testi</span><span class="sxs-lookup"><span data-stu-id="aa6fa-102">Hit Testing in the Visual Layer</span></span>
<span data-ttu-id="aa6fa-103">Bu konu, görsel katman tarafından sağlanan isabet testi işlevselliği genel bir bakış sağlar.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-103">This topic provides an overview of hit testing functionality provided by the visual layer.</span></span> <span data-ttu-id="aa6fa-104">Hit test desteği, bir geometri nin veya nokta değerinin, birden <xref:System.Windows.Media.Visual>çok nesne seçmek için seçim dikdörtgeni gibi kullanıcı arabirimi davranışı uygulamanıza olanak tanıyan bir geometrinin veya nokta değerinin işlenmiş içeriğinde olup olmadığını belirlemenize olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-104">Hit testing support allows you to determine whether a geometry or point value falls within the rendered content of a <xref:System.Windows.Media.Visual>, allowing you to implement user interface behavior such as a selection rectangle to select multiple objects.</span></span>  

<a name="hit_testing_scenarios"></a>
## <a name="hit-testing-scenarios"></a><span data-ttu-id="aa6fa-105">Hit Test Senaryoları</span><span class="sxs-lookup"><span data-stu-id="aa6fa-105">Hit Testing Scenarios</span></span>  
 <span data-ttu-id="aa6fa-106">Sınıf, <xref:System.Windows.UIElement> belirli <xref:System.Windows.UIElement.InputHitTest%2A> bir koordinat değerini kullanarak bir öğeye karşı test vurmak için izin veren yöntemi sağlar.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-106">The <xref:System.Windows.UIElement> class provides the <xref:System.Windows.UIElement.InputHitTest%2A> method, which allows you to hit test against an element using a given coordinate value.</span></span> <span data-ttu-id="aa6fa-107">Çoğu durumda, <xref:System.Windows.UIElement.InputHitTest%2A> yöntem öğelerin isabet testi uygulamak için istenen işlevselliği sağlar.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-107">In many cases, the <xref:System.Windows.UIElement.InputHitTest%2A> method provides the desired functionality for implementing hit testing of elements.</span></span> <span data-ttu-id="aa6fa-108">Ancak, görsel katmanda isabet testi uygulamanız gerekebileceği birkaç senaryo vardır.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-108">However, there are several scenarios in which you may need to implement hit testing at the visual layer.</span></span>  
  
- <span data-ttu-id="aa6fa-109"><xref:System.Windows.UIElement> Nesne olmayanlara karşı vur testi: Bu, nesne olmayan<xref:System.Windows.UIElement> nesneleri <xref:System.Windows.Media.DrawingVisual> veya grafik nesneleri test isabet varsa geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-109">Hit testing against non-<xref:System.Windows.UIElement> objects: This applies if you are hit testing non-<xref:System.Windows.UIElement> objects, such as <xref:System.Windows.Media.DrawingVisual> or graphics objects.</span></span>  
  
- <span data-ttu-id="aa6fa-110">Bir geometri kullanarak vurma testi: Bu, bir noktanın koordinat değeri yerine bir geometri nesnesi kullanarak test ehit gerekiyorsa geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-110">Hit testing using a geometry: This applies if you need to hit test using a geometry object rather than the coordinate value of a point.</span></span>  
  
- <span data-ttu-id="aa6fa-111">Birden çok nesneye karşı vur testi: Bu, çakışan nesneler gibi birden çok nesneye karşı test tuşuna basmanız gerektiğinde geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-111">Hit testing against multiple objects: This applies when you need to hit test against multiple objects, such as overlapping objects.</span></span> <span data-ttu-id="aa6fa-112">Sadece ilki değil, bir geometri veya noktayla kesişen tüm görseller için sonuç alabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-112">You can get results for all visuals intersecting a geometry or point, not just the first one.</span></span>  
  
- <span data-ttu-id="aa6fa-113">Isabet <xref:System.Windows.UIElement> testi ilkesini yok sayma: Bu, <xref:System.Windows.UIElement> bir öğenin devre dışı bırakılmış veya görünmez olup olmadığı gibi faktörleri dikkate alan isabet testi ilkesini yoksaymanız gerektiğinde geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-113">Ignoring <xref:System.Windows.UIElement> hit testing policy: This applies when you need to ignore the <xref:System.Windows.UIElement> hit testing policy, which takes into consideration such factors as whether an element is disabled or invisible.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="aa6fa-114">Görsel katmanda isabet testini gösteren tam bir kod örneği için, [Win32 İnteroperation Sample ile](https://github.com/microsoft/WPF-Samples/tree/master/Visual%20Layer/VisualsHitTesting) [DrawingVisuals Örnek](https://github.com/Microsoft/WPF-Samples/tree/master/Visual%20Layer/DrawingVisual) ve Hit Test kullanarak Hit Testi'ne bakın.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-114">For a complete code sample illustrating hit testing at the visual layer, see [Hit Test Using DrawingVisuals Sample](https://github.com/Microsoft/WPF-Samples/tree/master/Visual%20Layer/DrawingVisual) and [Hit Test with Win32 Interoperation Sample](https://github.com/microsoft/WPF-Samples/tree/master/Visual%20Layer/VisualsHitTesting).</span></span>  
  
<a name="hit_testing_support"></a>
## <a name="hit-testing-support"></a><span data-ttu-id="aa6fa-115">Hit Test Desteği</span><span class="sxs-lookup"><span data-stu-id="aa6fa-115">Hit Testing Support</span></span>  
 <span data-ttu-id="aa6fa-116">Sınıftaki <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> <xref:System.Windows.Media.VisualTreeHelper> yöntemlerin amacı, bir geometri veya nokta koordinat değeri, denetim veya grafik öğesi gibi belirli bir nesnenin işlenen içeriği içinde olup olmadığını belirlemektir.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-116">The purpose of the <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> methods in the <xref:System.Windows.Media.VisualTreeHelper> class is to determine whether a geometry or point coordinate value is within the rendered content of a given object, such as a control or graphic element.</span></span> <span data-ttu-id="aa6fa-117">Örneğin, bir nesnenin sınırlayıcı dikdörtgeni içindeki fare tıklamasının dairenin geometrisine düşüp düşmediğini belirlemek için isabet testi kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-117">For example, you could use hit testing to determine whether a mouse click within the bounding rectangle of an object falls within the geometry of a circle.</span></span> <span data-ttu-id="aa6fa-118">Ayrıca, kendi özel isabet testi hesaplamalarınızı gerçekleştirmek için isabet testinin varsayılan uygulamasını geçersiz kılmayı da seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-118">You can also choose to override the default implementation of hit testing to perform your own custom hit test calculations.</span></span>  
  
 <span data-ttu-id="aa6fa-119">Aşağıdaki resimde dikdörtgen olmayan bir nesnenin bölgesi ile sınırlayıcı dikdörtgeni arasındaki ilişki gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-119">The following illustration shows the relationship between a non-rectangular object's region and its bounding rectangle.</span></span>  
  
 <span data-ttu-id="aa6fa-120">![Geçerli isabet testi bölgesinin diyagramı](./media/wcpsdk-mmgraphics-visuals-hittest-1.png "wcpsdk_mmgraphics_visuals_hittest_1")</span><span class="sxs-lookup"><span data-stu-id="aa6fa-120">![Diagram of valid hit test region](./media/wcpsdk-mmgraphics-visuals-hittest-1.png "wcpsdk_mmgraphics_visuals_hittest_1")</span></span>  
<span data-ttu-id="aa6fa-121">Geçerli isabet testi bölgesinin diyagramı</span><span class="sxs-lookup"><span data-stu-id="aa6fa-121">Diagram of valid hit test region</span></span>  
  
<a name="hit_testing_and_z-order"></a>
## <a name="hit-testing-and-z-order"></a><span data-ttu-id="aa6fa-122">Hit Test ve Z-Order</span><span class="sxs-lookup"><span data-stu-id="aa6fa-122">Hit Testing and Z-Order</span></span>  
 <span data-ttu-id="aa6fa-123">Görsel [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] katman, yalnızca en üstteki nesneye değil, bir nokta veya geometri altındaki tüm nesnelere karşı isabet testini destekler.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-123">The [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] visual layer supports hit testing against all objects under a point or geometry, not just the top-most object.</span></span> <span data-ttu-id="aa6fa-124">Sonuçlar z sırasına göre döndürülür.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-124">Results are returned in z-order.</span></span> <span data-ttu-id="aa6fa-125">Ancak, <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> yönteme parametre olarak geçtiğiniz görsel nesne, işgöremezliğin hangi bölümünün test edileceğini belirler.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-125">However, the visual object that you pass as the parameter to the <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> method determines which portion of the visual tree that will be hit test.</span></span> <span data-ttu-id="aa6fa-126">Tüm görsel ağaca veya herhangi bir bölümüne karşı test vurabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-126">You can hit test against the entire visual tree, or any portion of it.</span></span>  
  
 <span data-ttu-id="aa6fa-127">Aşağıdaki resimde, daire nesnesi hem kare hem de üçgen nesnelerin üstündedir.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-127">In the following illustration, the circle object is on top of both the square and triangle objects.</span></span> <span data-ttu-id="aa6fa-128">Yalnızca z-sıra değeri en üstte olan görsel nesneyi test etmekle ilgileniyorsanız, ilk öğeden <xref:System.Windows.Media.HitTestResultBehavior.Stop> sonra <xref:System.Windows.Media.HitTestResultCallback> isabet testi geçişini durdurmak için görsel isabet testi numaralandırmasını ayarlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-128">If you are only interested in hit testing the visual object whose z-order value is top-most, you can set the visual hit test enumeration to return <xref:System.Windows.Media.HitTestResultBehavior.Stop> from the <xref:System.Windows.Media.HitTestResultCallback> to stop the hit test traversal after the first item.</span></span>  
  
 <span data-ttu-id="aa6fa-129">![Görsel bir ağacın z&#45;sırası diyagramı](./media/wcpsdk-mmgraphics-visuals-hittest-2.png "wcpsdk_mmgraphics_visuals_hittest_2")</span><span class="sxs-lookup"><span data-stu-id="aa6fa-129">![Diagram of the z&#45;order of a visual tree](./media/wcpsdk-mmgraphics-visuals-hittest-2.png "wcpsdk_mmgraphics_visuals_hittest_2")</span></span>  
<span data-ttu-id="aa6fa-130">Görsel bir ağacın z sırası diyagramı</span><span class="sxs-lookup"><span data-stu-id="aa6fa-130">Diagram of the z-order of a visual tree</span></span>  
  
 <span data-ttu-id="aa6fa-131">Tüm görsel nesneleri belirli bir nokta veya geometri altında sayısallandırmak <xref:System.Windows.Media.HitTestResultCallback>istiyorsanız, 'den dön. <xref:System.Windows.Media.HitTestResultBehavior.Continue></span><span class="sxs-lookup"><span data-stu-id="aa6fa-131">If you want to enumerate all visual objects under a specific point or geometry, return <xref:System.Windows.Media.HitTestResultBehavior.Continue> from the <xref:System.Windows.Media.HitTestResultCallback>.</span></span> <span data-ttu-id="aa6fa-132">Bu, tamamen gizlenmiş olsalar bile, diğer nesnelerin altında olan görsel nesneler için test tuşuna basabileceğiniz anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-132">This means you can hit test for visual objects that are beneath other objects, even if they are wholly obscured.</span></span> <span data-ttu-id="aa6fa-133">Daha fazla bilgi için "Hit Test Sonuçları Geri Aramasını Kullanma" bölümündeki örnek koda bakın.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-133">See the sample code in the section "Using a Hit Test Results Callback" for more information.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="aa6fa-134">Saydam olan görsel bir nesne de test isabet olabilir.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-134">A visual object that is transparent can also be hit test.</span></span>  
  
<a name="using_default_hit_testing"></a>
## <a name="using-default-hit-testing"></a><span data-ttu-id="aa6fa-135">Varsayılan Isabet Testini Kullanma</span><span class="sxs-lookup"><span data-stu-id="aa6fa-135">Using Default Hit Testing</span></span>  
 <span data-ttu-id="aa6fa-136">Görsel bir nesne ve karşı sınamak için bir nokta <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> koordinat değeri belirtmek için yöntemi kullanarak, bir nokta görsel bir nesnenin geometrisi içinde olup olmadığını belirleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-136">You can identify whether a point is within the geometry of a visual object, by using the <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> method to specify a visual object and a point coordinate value to test against.</span></span> <span data-ttu-id="aa6fa-137">Görsel nesne parametresi, isabet testi araması için görsel ağaçtaki başlangıç noktasını tanımlar.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-137">The visual object parameter identifies the starting point in the visual tree for the hit test search.</span></span> <span data-ttu-id="aa6fa-138">Geometrisi koordinatı içeren görsel ağaçta görsel bir nesne bulunursa, <xref:System.Windows.Media.HitTestResult.VisualHit%2A> <xref:System.Windows.Media.HitTestResult> nesnenin özelliğine ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-138">If a visual object is found in the visual tree whose geometry contains the coordinate, it is set to the <xref:System.Windows.Media.HitTestResult.VisualHit%2A> property of a <xref:System.Windows.Media.HitTestResult> object.</span></span> <span data-ttu-id="aa6fa-139">Daha <xref:System.Windows.Media.HitTestResult> sonra <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> yöntemden döndürülür.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-139">The <xref:System.Windows.Media.HitTestResult> is then returned from the <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> method.</span></span> <span data-ttu-id="aa6fa-140">Nokta görsel alt ağaç ile içermiyorsa test <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> isabet, döndürür. `null`</span><span class="sxs-lookup"><span data-stu-id="aa6fa-140">If the point is not contained with the visual sub-tree you are hit testing, <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> returns `null`.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="aa6fa-141">Varsayılan isabet testi her zaman z sırasına göre en üstteki nesneyi döndürür.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-141">Default hit testing always returns the top-most object in the z-order.</span></span> <span data-ttu-id="aa6fa-142">Tüm görsel nesneleri tanımlamak için, kısmen veya tamamen gizlenmiş olanlar bile, bir isabet testi sonucu geri arama kullanın.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-142">In order to identify all visual objects, even those that may be partly or wholly obscured, use a hit test result callback.</span></span>  
  
 <span data-ttu-id="aa6fa-143"><xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> Yöntemiçin nokta parametresi olarak geçtiğiniz koordinat değeri, test ettiğiniz görsel nesnenin koordinat alanına göre olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-143">The coordinate value you pass as the point parameter for the <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> method has to be relative to the coordinate space of the visual object you are hit testing against.</span></span> <span data-ttu-id="aa6fa-144">Örneğin, ebeveynin koordinat alanında (100, 100) tanımlanan görsel nesneler içinde yse, (0, 0) ile bir alt güngörsel teste basmak, ebeveynin koordinat uzağındaki (100, 100) hit sınırlamaya eşdeğerdir.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-144">For example, if you have nested visual objects defined at (100, 100) in the parent's coordinate space, then hit testing a child visual at (0, 0) is equivalent to hit testing at (100, 100) in the parent's coordinate space.</span></span>  
  
 <span data-ttu-id="aa6fa-145">Aşağıdaki kod, isabet testi için kullanılan olayları <xref:System.Windows.UIElement> yakalamak için kullanılan bir nesne için fare olay işleyicilerinin nasıl ayarlanır olduğunu gösterir.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-145">The following code shows how to set up mouse event handlers for a <xref:System.Windows.UIElement> object that is used to capture events used for hit testing.</span></span>  
  
 [!code-csharp[HitTestingOverview#100](~/samples/snippets/csharp/VS_Snippets_Wpf/HitTestingOverview/CSharp/Window1.xaml.cs#100)]
 [!code-vb[HitTestingOverview#100](~/samples/snippets/visualbasic/VS_Snippets_Wpf/HitTestingOverview/visualbasic/window1.xaml.vb#100)]  
  
### <a name="how-the-visual-tree-affects-hit-testing"></a><span data-ttu-id="aa6fa-146">Görsel Ağaç Hit Testini Nasıl Etkiler?</span><span class="sxs-lookup"><span data-stu-id="aa6fa-146">How the Visual Tree Affects Hit Testing</span></span>  
 <span data-ttu-id="aa6fa-147">Görsel ağaçtaki başlangıç noktası, nesnelerin isabet testi numaralandırması sırasında hangi nesnelerin döndürülderken döndürülderken belirler.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-147">The starting point in the visual tree determines which objects are returned during the hit test enumeration of objects.</span></span> <span data-ttu-id="aa6fa-148">Teste vurmak istediğiniz birden çok nesne varsa, görsel ağaçta başlangıç noktası olarak kullanılan görsel nesne, ilgi çeken tüm nesnelerin ortak atası olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-148">If you have multiple objects you want to hit test, the visual object used as the starting point in the visual tree must be the common ancestor of all objects of interest.</span></span> <span data-ttu-id="aa6fa-149">Örneğin, aşağıdaki diyagramda hem düğme öğesini hem de görsel çizimi test etmek istiyorsanız, görsel ağaçtaki başlangıç noktasını her ikisinin de ortak atasına ayarlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-149">For example, if you were interested in hit testing both the button element and drawing visual in the following diagram, you would have to set the starting point in the visual tree to the common ancestor of both.</span></span> <span data-ttu-id="aa6fa-150">Bu durumda, tuval öğesi hem düğme öğesinin hem de görsel çizimin ortak atasıdır.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-150">In this case, the canvas element is the common ancestor of both the button element and the drawing visual.</span></span>  
  
 <span data-ttu-id="aa6fa-151">![Görsel ağaç hiyerarşisi diyagramı](./media/wcpsdk-mmgraphics-visuals-overview-01.gif "wcpsdk_mmgraphics_visuals_overview_01")</span><span class="sxs-lookup"><span data-stu-id="aa6fa-151">![Diagram of a visual tree hierarchy](./media/wcpsdk-mmgraphics-visuals-overview-01.gif "wcpsdk_mmgraphics_visuals_overview_01")</span></span>  
<span data-ttu-id="aa6fa-152">Görsel ağaç hiyerarşisi diyagramı</span><span class="sxs-lookup"><span data-stu-id="aa6fa-152">Diagram of a visual tree hierarchy</span></span>  
  
> [!NOTE]
> <span data-ttu-id="aa6fa-153">Özellik, <xref:System.Windows.UIElement.IsHitTestVisible%2A> türetilmiş bir <xref:System.Windows.UIElement>nesnenin, işlenen içeriğinin bir bölümünden isabet testi sonucu olarak döndürülebileceğini bildiren bir değer alır veya ayarlar.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-153">The <xref:System.Windows.UIElement.IsHitTestVisible%2A> property gets or sets a value that declares whether a <xref:System.Windows.UIElement>-derived object can possibly be returned as a hit test result from some portion of its rendered content.</span></span> <span data-ttu-id="aa6fa-154">Bu, isabet testinde hangi görsel nesnelerin yer aldığını belirlemek için görsel ağacı seçerek değiştirmenize olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-154">This allows you to selectively alter the visual tree to determine which visual objects are involved in a hit test.</span></span>  
  
<a name="using_a_hit_test_result_callback"></a>
## <a name="using-a-hit-test-result-callback"></a><span data-ttu-id="aa6fa-155">Hit Test Sonucu Geri Arama Kullanma</span><span class="sxs-lookup"><span data-stu-id="aa6fa-155">Using a Hit Test Result Callback</span></span>  
 <span data-ttu-id="aa6fa-156">Geometrisi belirli bir koordinat değeri içeren görsel bir ağaçtaki tüm görsel nesneleri sayısalatabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-156">You can enumerate all visual objects in a visual tree whose geometry contains a specified coordinate value.</span></span> <span data-ttu-id="aa6fa-157">Bu, diğer görsel nesneler tarafından kısmen veya tamamen gizlenmiş olabilecek tüm görsel nesneleri, hatta tüm görsel nesneleri tanımlamanızı sağlar.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-157">This allows you to identify all visual objects, even those that may be partly or wholly obscured by other visual objects.</span></span> <span data-ttu-id="aa6fa-158">Görsel bir ağaçtaki görsel nesneleri sayısallandırmak <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> için, isabet testi geri arama işleviyle yöntemi kullanın.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-158">To enumerate visual objects in a visual tree use the <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> method with a hit test callback function.</span></span> <span data-ttu-id="aa6fa-159">Belirttiğiniz koordinat değeri görsel bir nesnede bulunduğunda, isabet testi geri arama işlevi sistem tarafından çağrılır.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-159">The hit test callback function is called by the system when the coordinate value you specify is contained in a visual object.</span></span>  
  
 <span data-ttu-id="aa6fa-160">Hit test sonuçları numaralandırma sırasında, görsel ağacı değiştiren herhangi bir işlem yapmamalısınız.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-160">During the hit test results enumeration, you should not perform any operation that modifies the visual tree.</span></span> <span data-ttu-id="aa6fa-161">Bir nesnenin geçilirken görsel ağaçtan eklenmesi veya çıkarılması öngörülemeyen davranışlara neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-161">Adding or removing an object from the visual tree while it is being traversed can result in unpredictable behavior.</span></span> <span data-ttu-id="aa6fa-162"><xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> Yöntem döndükten sonra görsel ağacı güvenle değiştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-162">You can safely modify the visual tree after the <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> method returns.</span></span> <span data-ttu-id="aa6fa-163">Hit test sonuçları numaralandırması sırasında <xref:System.Collections.ArrayList>değerleri depolamak için bir veri yapısı sağlamak isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-163">You may want to provide a data structure, such as an <xref:System.Collections.ArrayList>, to store values during the hit test results enumeration.</span></span>  
  
 [!code-csharp[HitTestingOverview#101](~/samples/snippets/csharp/VS_Snippets_Wpf/HitTestingOverview/CSharp/Window1.xaml.cs#101)]
 [!code-vb[HitTestingOverview#101](~/samples/snippets/visualbasic/VS_Snippets_Wpf/HitTestingOverview/visualbasic/window1.xaml.vb#101)]  
  
 <span data-ttu-id="aa6fa-164">Isabet testi geri arama yöntemi, görsel ağaçtaki belirli bir görsel nesne üzerinde isabet testi tanımlandığında gerçekleştirdiğiniz eylemleri tanımlar.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-164">The hit test callback method defines the actions you perform when a hit test is identified on a particular visual object in the visual tree.</span></span> <span data-ttu-id="aa6fa-165">Eylemleri gerçekleştirdikten sonra, diğer <xref:System.Windows.Media.HitTestResultBehavior> görsel nesnelerin numaralandırmasına devam edip etmeyeceğini belirleyen bir değer döndürün.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-165">After you perform the actions, you return a <xref:System.Windows.Media.HitTestResultBehavior> value that determines whether to continue the enumeration of any other visual objects or not.</span></span>  
  
 [!code-csharp[HitTestingOverview#102](~/samples/snippets/csharp/VS_Snippets_Wpf/HitTestingOverview/CSharp/Window1.xaml.cs#102)]
 [!code-vb[HitTestingOverview#102](~/samples/snippets/visualbasic/VS_Snippets_Wpf/HitTestingOverview/visualbasic/window1.xaml.vb#102)]  
  
> [!NOTE]
> <span data-ttu-id="aa6fa-166">Isabet eden görsel nesnelerin numaralandırma sırası z-sırasına göredir.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-166">The order of enumeration of hit visual objects is by z-order.</span></span> <span data-ttu-id="aa6fa-167">En üstteki z-sıra düzeyindeki görsel nesne numaralandırılmış ilk nesnedir.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-167">The visual object at the top-most z-order level is the first object enumerated.</span></span> <span data-ttu-id="aa6fa-168">Numaralandırılmış diğer görsel nesneler z-sıra düzeyi azalır.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-168">Any other visual objects enumerated are at decreasing z-order level.</span></span> <span data-ttu-id="aa6fa-169">Bu numaralandırma sırası görsellerin işleme sırasına karşılık gelir.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-169">This order of enumeration corresponds to the rendering order of the visuals.</span></span>  
  
 <span data-ttu-id="aa6fa-170">Görsel nesnelerin numaralandırmasını, isabet testi geri arama işlevinde istediğiniz zaman döndürerek <xref:System.Windows.Media.HitTestResultBehavior.Stop>durdurabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-170">You can stop the enumeration of visual objects at any time in the hit test callback function by returning <xref:System.Windows.Media.HitTestResultBehavior.Stop>.</span></span>  
  
 [!code-csharp[HitTestingOverview#103](~/samples/snippets/csharp/VS_Snippets_Wpf/HitTestingOverview/CSharp/Window1.xaml.cs#103)]
 [!code-vb[HitTestingOverview#103](~/samples/snippets/visualbasic/VS_Snippets_Wpf/HitTestingOverview/visualbasic/window1.xaml.vb#103)]  
  
<a name="using_a_hit_test_filter_callback"></a>
## <a name="using-a-hit-test-filter-callback"></a><span data-ttu-id="aa6fa-171">Hit Test Filtresi Geri Arama Kullanma</span><span class="sxs-lookup"><span data-stu-id="aa6fa-171">Using a Hit Test Filter Callback</span></span>  
 <span data-ttu-id="aa6fa-172">Isabet testi sonuçlarına geçirilen nesneleri kısıtlamak için isteğe bağlı isabet testi filtresi kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-172">You can use an optional hit test filter to restrict the objects that are passed on to the hit test results.</span></span> <span data-ttu-id="aa6fa-173">Bu, isabet test sonuçlarınızda işlemekle ilgilenmediğiniz görsel ağacın bölümlerini yoksaymanızı sağlar.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-173">This allows you to ignore parts of the visual tree that you are not interested in processing in your hit test results.</span></span> <span data-ttu-id="aa6fa-174">Isabet testi filtresi uygulamak için, bir isabet testi filtresi geri arama işlevi tanımlar ve <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> yöntemi aradığınızda bir parametre değeri olarak geçersiniz.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-174">To implement a hit test filter, you define a hit test filter callback function and pass it as a parameter value when you call the <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> method.</span></span>  
  
 [!code-csharp[HitTestingOverview#104](~/samples/snippets/csharp/VS_Snippets_Wpf/HitTestingOverview/CSharp/Window1.xaml.cs#104)]
 [!code-vb[HitTestingOverview#104](~/samples/snippets/visualbasic/VS_Snippets_Wpf/HitTestingOverview/visualbasic/window1.xaml.vb#104)]  
  
 <span data-ttu-id="aa6fa-175">İsteğe bağlı isabet testi filtresi geri arama işlevini sağlamak `null` istemiyorsanız, yöntem <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> için parametresi olarak bir değer geçirin.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-175">If you do not want to supply the optional hit test filter callback function, pass a `null` value as its parameter for the <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> method.</span></span>  
  
 [!code-csharp[HitTestingOverview#105](~/samples/snippets/csharp/VS_Snippets_Wpf/HitTestingOverview/CSharp/Window1.xaml.cs#105)]
 [!code-vb[HitTestingOverview#105](~/samples/snippets/visualbasic/VS_Snippets_Wpf/HitTestingOverview/visualbasic/window1.xaml.vb#105)]  
  
 <span data-ttu-id="aa6fa-176">![Isabet testi filtresi kullanarak görsel bir ağacı budama](./media/filteredvisualtree-01.png "FilteredVisualTree_01")</span><span class="sxs-lookup"><span data-stu-id="aa6fa-176">![Pruning a visual tree using a hit test filter](./media/filteredvisualtree-01.png "FilteredVisualTree_01")</span></span>  
<span data-ttu-id="aa6fa-177">Görsel bir ağacı budama</span><span class="sxs-lookup"><span data-stu-id="aa6fa-177">Pruning a visual tree</span></span>  
  
 <span data-ttu-id="aa6fa-178">Hit test filtresi geri arama işlevi, işlenen içeriği belirttiğiniz koordinatları içeren tüm görselleri ayarlamanızı sağlar.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-178">The hit test filter callback function allows you to enumerate through all the visuals whose rendered content contains the coordinates you specify.</span></span> <span data-ttu-id="aa6fa-179">Ancak, isabet test sonuçları geri arama işleviişleme ilgilenmiyor görsel ağacın belirli dalları yoksaymak isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-179">However, you may want to ignore certain branches of the visual tree that you are not interested in processing in your hit test results callback function.</span></span> <span data-ttu-id="aa6fa-180">Isabet testi filtresi geri arama işlevinin geri dönüş değeri, görsel nesnelerin numaralandırmasının ne tür bir eylem alması gerektiğini belirler.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-180">The return value of the hit test filter callback function determines what type of action the enumeration of the visual objects should take.</span></span> <span data-ttu-id="aa6fa-181">Örneğin, değeri döndürünürseniz, <xref:System.Windows.Media.HitTestFilterBehavior.ContinueSkipSelfAndChildren>geçerli görsel nesneyi ve onun çocuklarını isabet testi sonuçları numaralandırmasından kaldırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-181">For example, if you return the value, <xref:System.Windows.Media.HitTestFilterBehavior.ContinueSkipSelfAndChildren>, you can remove the current visual object and its children from the hit test results enumeration.</span></span> <span data-ttu-id="aa6fa-182">Bu, isabet testi sonuçları geri arama işlevinin bu nesneleri numaralandırmasında görmeyeceğim anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-182">This means that the hit test results callback function will not see these objects in its enumeration.</span></span> <span data-ttu-id="aa6fa-183">Nesnelerin görsel ağacı budama isabet test sonuçları numaralandırma geçiş sırasında işlem miktarını azaltır.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-183">Pruning the visual tree of objects decreases the amount of processing during the hit test results enumeration pass.</span></span> <span data-ttu-id="aa6fa-184">Aşağıdaki kod örneğinde, filtre etiketleri ve onların torunlarını atlar ve hit diğer her şeyi sınar.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-184">In the following code example, the filter skips labels and their descendants and hit tests everything else.</span></span>  
  
 [!code-csharp[HitTestingOverview#106](~/samples/snippets/csharp/VS_Snippets_Wpf/HitTestingOverview/CSharp/Window1.xaml.cs#106)]
 [!code-vb[HitTestingOverview#106](~/samples/snippets/visualbasic/VS_Snippets_Wpf/HitTestingOverview/visualbasic/window1.xaml.vb#106)]  
  
> [!NOTE]
> <span data-ttu-id="aa6fa-185">Hit test filtresi geri arama bazen hit test sonuçları geri arama çağrılmadığını durumlarda çağrılır.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-185">The hit test filter callback will sometimes be called in cases where the hit test results callback is not called.</span></span>  
  
<a name="overriding_default_hit_testing"></a>
## <a name="overriding-default-hit-testing"></a><span data-ttu-id="aa6fa-186">Varsayılan Isabet Testini Geçersiz Kılma</span><span class="sxs-lookup"><span data-stu-id="aa6fa-186">Overriding Default Hit Testing</span></span>  
 <span data-ttu-id="aa6fa-187"><xref:System.Windows.Media.Visual.HitTestCore%2A> Yöntemi geçersiz kılarak görsel bir nesnenin varsayılan isabet testi desteğini geçersiz kılabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-187">You can override a visual object’s default hit testing support by overriding the <xref:System.Windows.Media.Visual.HitTestCore%2A> method.</span></span> <span data-ttu-id="aa6fa-188">Bu, <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> yöntemi çağırdığınızda, geçersiz kılınan uygulamanın <xref:System.Windows.Media.Visual.HitTestCore%2A> çağrılması anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-188">This means that when you invoke the <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> method, your overridden implementation of <xref:System.Windows.Media.Visual.HitTestCore%2A> is called.</span></span> <span data-ttu-id="aa6fa-189">Bir isabet testi görsel nesnenin sınırlayıcı dikdörtgen içine düştüğünde, koordinat görsel nesnenin işlenen içeriğinin dışına düşse bile, geçersiz kılınan yönteme denir.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-189">Your overridden method is called when a hit test falls within the bounding rectangle of the visual object, even if the coordinate falls outside the rendered content of the visual object.</span></span>  
  
 [!code-csharp[HitTestingOverview#107](~/samples/snippets/csharp/VS_Snippets_Wpf/HitTestingOverview/CSharp/Window1.xaml.cs#107)]
 [!code-vb[HitTestingOverview#107](~/samples/snippets/visualbasic/VS_Snippets_Wpf/HitTestingOverview/visualbasic/window1.xaml.vb#107)]  
  
 <span data-ttu-id="aa6fa-190">Hem sınırlayan dikdörtgen hem de görsel bir nesnenin işlenen içeriğine karşı test vurmak istediğiniz zamanlar olabilir.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-190">There may be times when you want to hit test against both the bounding rectangle and the rendered content of a visual object.</span></span> <span data-ttu-id="aa6fa-191">Geçersiz kılınan `PointHitTestParameters` <xref:System.Windows.Media.Visual.HitTestCore%2A> yöntemdeki parametre değerini temel yönteme <xref:System.Windows.Media.Visual.HitTestCore%2A>parametre olarak kullanarak, görsel nesnenin sınırlayan dikdörtgeninin çarpmasına dayalı eylemleri gerçekleştirebilir ve ardından görsel nesnenin işlenen içeriğine karşı ikinci bir isabet testi gerçekleştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-191">By using the `PointHitTestParameters` parameter value in your overridden <xref:System.Windows.Media.Visual.HitTestCore%2A> method as the parameter to the base method <xref:System.Windows.Media.Visual.HitTestCore%2A>, you can perform actions based on a hit of the bounding rectangle of a visual object, and then perform a second hit test against the rendered content of the visual object.</span></span>  
  
 [!code-csharp[HitTestingOverview#108](~/samples/snippets/csharp/VS_Snippets_Wpf/HitTestingOverview/CSharp/Window1.xaml.cs#108)]
 [!code-vb[HitTestingOverview#108](~/samples/snippets/visualbasic/VS_Snippets_Wpf/HitTestingOverview/visualbasic/window1.xaml.vb#108)]  
  
## <a name="see-also"></a><span data-ttu-id="aa6fa-192">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="aa6fa-192">See also</span></span>

- <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A>
- <xref:System.Windows.Media.HitTestResult>
- <xref:System.Windows.Media.HitTestResultCallback>
- <xref:System.Windows.Media.HitTestFilterCallback>
- <xref:System.Windows.UIElement.IsHitTestVisible%2A>
- [<span data-ttu-id="aa6fa-193">Çizim Görselleri Örnek Kullanarak Test Hit</span><span class="sxs-lookup"><span data-stu-id="aa6fa-193">Hit Test Using DrawingVisuals Sample</span></span>](https://github.com/Microsoft/WPF-Samples/tree/master/Visual%20Layer/DrawingVisual)
- [<span data-ttu-id="aa6fa-194">Win32 İnterİşleme Örneği ile Vur Testi</span><span class="sxs-lookup"><span data-stu-id="aa6fa-194">Hit Test with Win32 Interoperation Sample</span></span>](https://github.com/microsoft/WPF-Samples/tree/master/Visual%20Layer/VisualsHitTesting)
- [<span data-ttu-id="aa6fa-195">Görselde Tıklama Testi Geometrisi</span><span class="sxs-lookup"><span data-stu-id="aa6fa-195">Hit Test Geometry in a Visual</span></span>](how-to-hit-test-geometry-in-a-visual.md)
- [<span data-ttu-id="aa6fa-196">Win32 Konak Kapsayıcısı Kullanan Tıklama Testi</span><span class="sxs-lookup"><span data-stu-id="aa6fa-196">Hit Test Using a Win32 Host Container</span></span>](how-to-hit-test-using-a-win32-host-container.md)
