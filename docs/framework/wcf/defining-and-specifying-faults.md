---
description: 'Daha fazla bilgi edinin: hataları tanımlama ve belirtme'
title: Hataları Tanımlama ve Belirtme
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- handling faults [WCF], specifying
- handling faults [WCF], defining
ms.assetid: c00c84f1-962d-46a7-b07f-ebc4f80fbfc1
ms.openlocfilehash: cf8c4dafaf3958cbb0be6fd096049d13f70685bd
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 02/06/2021
ms.locfileid: "99646120"
---
# <a name="defining-and-specifying-faults"></a><span data-ttu-id="36324-103">Hataları Tanımlama ve Belirtme</span><span class="sxs-lookup"><span data-stu-id="36324-103">Defining and Specifying Faults</span></span>

<span data-ttu-id="36324-104">SOAP hataları bir hizmetten istemciye hata koşulu bilgilerini ve çift yönlü durumda bir istemciden hizmete birlikte çalışabilen bir şekilde bir hizmeti sağlar.</span><span class="sxs-lookup"><span data-stu-id="36324-104">SOAP faults convey error condition information from a service to a client and, in the duplex case, from a client to a service in an interoperable way.</span></span> <span data-ttu-id="36324-105">Bu konu, özel hata içeriğinin ne zaman ve nasıl tanımlanacağını ve hangi işlemlerin bu işlemleri döndürebileceğinizi açıklamaktadır.</span><span class="sxs-lookup"><span data-stu-id="36324-105">This topic discusses when and how to define custom fault content and specify which operations can return them.</span></span> <span data-ttu-id="36324-106">Bir hizmetin veya çift yönlü istemcinin bu hataları nasıl gönderebileceği ve bir istemci ya da hizmet uygulamasının bu hataları nasıl işleyeceği hakkında daha fazla bilgi için bkz. [hata gönderme ve alma](sending-and-receiving-faults.md).</span><span class="sxs-lookup"><span data-stu-id="36324-106">For more information about how a service, or duplex client, can send those faults and how a client or service application handles these faults, see [Sending and Receiving Faults](sending-and-receiving-faults.md).</span></span> <span data-ttu-id="36324-107">Windows Communication Foundation (WCF) uygulamalarında hata işlemeye genel bir bakış için bkz. [anlaşmalar ve hizmetlerde hataları belirtme ve işleme](specifying-and-handling-faults-in-contracts-and-services.md).</span><span class="sxs-lookup"><span data-stu-id="36324-107">For an overview of error handling in Windows Communication Foundation (WCF) applications, see [Specifying and Handling Faults in Contracts and Services](specifying-and-handling-faults-in-contracts-and-services.md).</span></span>  
  
## <a name="overview"></a><span data-ttu-id="36324-108">Genel Bakış</span><span class="sxs-lookup"><span data-stu-id="36324-108">Overview</span></span>  

 <span data-ttu-id="36324-109">Tanımlanan SOAP hataları, <xref:System.ServiceModel.FaultContractAttribute?displayProperty=nameWithType> Özel BIR SOAP hata türünü belirten bir işlemin öğesine sahip olduğu olanlardır.</span><span class="sxs-lookup"><span data-stu-id="36324-109">Declared SOAP faults are those in which an operation has a <xref:System.ServiceModel.FaultContractAttribute?displayProperty=nameWithType> that specifies a custom SOAP fault type.</span></span> <span data-ttu-id="36324-110">Bildirilmemiş SOAP hataları bir işlem için sözleşmede belirtilmemiş olanlardır.</span><span class="sxs-lookup"><span data-stu-id="36324-110">Undeclared SOAP faults are those that are not specified in the contract for an operation.</span></span> <span data-ttu-id="36324-111">Bu konu, bu hata koşullarını belirlemenize ve hizmetiniz için, istemcilerin özel SOAP hatalarıyla ilgili olarak bu hata koşullarını doğru bir şekilde işlemek için kullanabileceği bir hata sözleşmesi oluşturmanıza yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="36324-111">This topic helps you identify those error conditions and create a fault contract for your service that clients can use to properly handle those error conditions when notified by custom SOAP faults.</span></span> <span data-ttu-id="36324-112">Temel görevler sırasıyla:</span><span class="sxs-lookup"><span data-stu-id="36324-112">The basic tasks are, in order:</span></span>  
  
1. <span data-ttu-id="36324-113">Hizmetinizin bir istemcisinin hakkında bilgi sahibi olması gereken hata koşullarını tanımlayın.</span><span class="sxs-lookup"><span data-stu-id="36324-113">Define the error conditions that a client of your service should know about.</span></span>  
  
2. <span data-ttu-id="36324-114">Bu hata koşulları için SOAP hatalarının özel içeriğini tanımlayın.</span><span class="sxs-lookup"><span data-stu-id="36324-114">Define the custom content of the SOAP faults for those error conditions.</span></span>  
  
3. <span data-ttu-id="36324-115">İşlemlerinizi, oluşturdukları belirli SOAP hatalarının WSDL 'deki istemcilere gösterilmesini sağlayacak şekilde işaretleyin.</span><span class="sxs-lookup"><span data-stu-id="36324-115">Mark your operations so that the specific SOAP faults that they throw are exposed to clients in WSDL.</span></span>  
  
### <a name="defining-error-conditions-that-clients-should-know-about"></a><span data-ttu-id="36324-116">Istemcilerin hakkında bilgi sahibi olması gereken hata koşullarını tanımlama</span><span class="sxs-lookup"><span data-stu-id="36324-116">Defining Error Conditions That Clients Should Know About</span></span>  

 <span data-ttu-id="36324-117">SOAP hataları, belirli bir işlem için hata bilgilerini taşıyan genel olarak açıklanan iletilerdir.</span><span class="sxs-lookup"><span data-stu-id="36324-117">SOAP faults are publicly described messages that carry fault information for a particular operation.</span></span> <span data-ttu-id="36324-118">Bunlar, WSDL 'deki diğer işlem iletileriyle birlikte açıklandıklarından, ve bu nedenle, bir işlem çağırırken bu tür hataları işleme almayı bekler.</span><span class="sxs-lookup"><span data-stu-id="36324-118">Because they are described along with other operation messages in WSDL, clients know and, therefore, expect to handle such faults when invoking an operation.</span></span> <span data-ttu-id="36324-119">Ancak, WCF Hizmetleri yönetilen kodda yazıldığı için, Yönetilen koddaki hangi hata koşullarının hatalara dönüştürüleceğini ve istemciye döndürülmesine karar verilmesi, istemci ile sahip olduğunuz biçimsel hata konuşmasından hizmetinize hata koşullarını ve hatalarını ayırma fırsatı sağlar.</span><span class="sxs-lookup"><span data-stu-id="36324-119">But because WCF services are written in managed code, deciding which error conditions in managed code are to be converted into faults and returned to the client provides you the opportunity to separate error conditions and bugs in your service from the formal error conversation you have with a client.</span></span>  
  
 <span data-ttu-id="36324-120">Örneğin, aşağıdaki kod örneğinde iki tamsayı alan ve başka bir tamsayı döndüren bir işlem gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="36324-120">For example, the following code example shows an operation that takes two integers and returns another integer.</span></span> <span data-ttu-id="36324-121">Burada birkaç özel durum oluşturulabilir, bu nedenle hata sözleşmesini tasarlarken, istemciniz için hangi hata koşullarının önemli olduğunu belirlemelisiniz.</span><span class="sxs-lookup"><span data-stu-id="36324-121">Several exceptions can be thrown here, so when designing the fault contract, you must determine which error conditions are important for your client.</span></span> <span data-ttu-id="36324-122">Bu durumda, hizmet <xref:System.DivideByZeroException?displayProperty=nameWithType> özel durumu tespit etmelidir.</span><span class="sxs-lookup"><span data-stu-id="36324-122">In this case, the service should detect the <xref:System.DivideByZeroException?displayProperty=nameWithType> exception.</span></span>  
  
```csharp  
[ServiceContract]  
public class CalculatorService  
{  
    [OperationContract]
    int Divide(int a, int b)  
    {  
      if (b==0) throw new Exception("Division by zero!");  
      return a/b;  
    }  
}  
```  
  
```vb
<ServiceContract> _
Public Class CalculatorService
    <OperationContract> _
    Public Function Divide(a As Integer, b As Integer) As Integer
        If b = 0 Then Throw New DivideByZeroException("Division by zero!")
        Return a / b
    End Function
End Class
```
  
 <span data-ttu-id="36324-123">Önceki örnekte, işlem sıfıra bölmek için özel bir SOAP hatası döndürebilir, matematik işlemlerine özel bir hata verebilir, ancak sıfıra bölmek için özel bir hata, birkaç farklı hata durumunda birden çok hata veya hiç SOAP hatası içermez.</span><span class="sxs-lookup"><span data-stu-id="36324-123">In the preceding example the operation can either return a custom SOAP fault that is specific to dividing by zero, a custom fault that is specific to math operations but that contains information specific to dividing by zero, multiple faults for several different error situations, or no SOAP fault at all.</span></span>  
  
### <a name="define-the-content-of-error-conditions"></a><span data-ttu-id="36324-124">Hata koşullarının Içeriğini tanımlayın</span><span class="sxs-lookup"><span data-stu-id="36324-124">Define the Content of Error Conditions</span></span>  

 <span data-ttu-id="36324-125">Bir hata koşulu, özel bir SOAP hatasını tamamen döndürebilmiş bir şekilde tanımlandıktan sonra, bir sonraki adım bu hatanın içeriğini tanımlamak ve içerik yapısının serileştirildiğinden emin olmak olacaktır.</span><span class="sxs-lookup"><span data-stu-id="36324-125">Once an error condition has been identified as one that can usefully return a custom SOAP fault, the next step is to define the contents of that fault and ensure that the content structure can be serialized.</span></span> <span data-ttu-id="36324-126">Yukarıdaki bölümdeki kod örneğinde bir işleme özgü bir hata gösterilir `Divide` , ancak hizmette başka işlemler varsa, `Calculator` tek BIR özel SOAP hatası istemciye tüm hesap makinesi hata koşulları 'nın dahil olduğu konusunda bilgi verebilir `Divide` .</span><span class="sxs-lookup"><span data-stu-id="36324-126">The code example in the preceding section shows an error specific to a `Divide` operation, but if there are other operations on the `Calculator` service, then a single custom SOAP fault can inform the client of all calculator error conditions, `Divide` included.</span></span> <span data-ttu-id="36324-127">Aşağıdaki kod örneği, `MathFault` dahil olmak üzere tüm matematik işlemlerini kullanarak yapılan hataları bildirebilen özel BIR SOAP hatası oluşturmayı gösterir `Divide` .</span><span class="sxs-lookup"><span data-stu-id="36324-127">The following code example shows the creation of a custom SOAP fault, `MathFault`, which can report errors made using all math operations, including `Divide`.</span></span> <span data-ttu-id="36324-128">Sınıf bir işlem ( `Operation` özellik) ve sorunu tanımlayan bir değer ( `ProblemType` özellik) belirtebilir, ancak sınıfın ve bu özelliklerin özel bir soap hatasında istemciye aktarılması için seri hale getirilebilir olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="36324-128">While the class can specify an operation (the `Operation` property) and a value that describes the problem (the `ProblemType` property), the class and these properties must be serializable to be transferred to the client in a custom SOAP fault.</span></span> <span data-ttu-id="36324-129">Bu nedenle, <xref:System.Runtime.Serialization.DataContractAttribute?displayProperty=nameWithType> ve <xref:System.Runtime.Serialization.DataMemberAttribute?displayProperty=nameWithType> öznitelikleri tür ve özelliklerini seri hale getirilebilir ve mümkün olduğunca birlikte çalışabilir hale getirmek için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="36324-129">Therefore, the <xref:System.Runtime.Serialization.DataContractAttribute?displayProperty=nameWithType> and <xref:System.Runtime.Serialization.DataMemberAttribute?displayProperty=nameWithType> attributes are used to make the type and its properties serializable and as interoperable as possible.</span></span>  
  
 [!code-csharp[Faults#2](../../../samples/snippets/csharp/VS_Snippets_CFX/faults/cs/service.cs#2)]
 [!code-vb[Faults#2](../../../samples/snippets/visualbasic/VS_Snippets_CFX/faults/vb/service.vb#2)]  
  
 <span data-ttu-id="36324-130">Verilerinizin seri hale getirilebilir olduğundan emin olmak hakkında daha fazla bilgi için bkz. [hizmet sözleşmeleri içinde veri aktarımı belirtme](./feature-details/specifying-data-transfer-in-service-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="36324-130">For more information about how to ensure your data is serializable, see [Specifying Data Transfer in Service Contracts](./feature-details/specifying-data-transfer-in-service-contracts.md).</span></span> <span data-ttu-id="36324-131">Sağlayan serileştirme desteğinin bir listesi için <xref:System.Runtime.Serialization.DataContractSerializer?displayProperty=nameWithType> bkz. [veri sözleşmesi serileştiricisi tarafından desteklenen türler](./feature-details/types-supported-by-the-data-contract-serializer.md).</span><span class="sxs-lookup"><span data-stu-id="36324-131">For a list of the serialization support that <xref:System.Runtime.Serialization.DataContractSerializer?displayProperty=nameWithType> provides, see [Types Supported by the Data Contract Serializer](./feature-details/types-supported-by-the-data-contract-serializer.md).</span></span>  
  
### <a name="mark-operations-to-establish-the-fault-contract"></a><span data-ttu-id="36324-132">Hata sözleşmesini kurmak için Işlemleri işaretle</span><span class="sxs-lookup"><span data-stu-id="36324-132">Mark Operations to Establish the Fault Contract</span></span>  

 <span data-ttu-id="36324-133">Özel bir SOAP hatasının parçası olarak döndürülen bir seri hale getirilebilir veri yapısı tanımlandığında, son adım işlem sözleşmenizi bu türden bir SOAP hatası oluşturan şekilde işaretlemenize neden olur.</span><span class="sxs-lookup"><span data-stu-id="36324-133">Once a serializable data structure that is returned as part of a custom SOAP fault is defined, the last step is to mark your operation contract as throwing a SOAP fault of that type.</span></span> <span data-ttu-id="36324-134">Bunu yapmak için, özniteliğini kullanın <xref:System.ServiceModel.FaultContractAttribute?displayProperty=nameWithType> ve oluşturmakta olduğunuz özel veri türünün türünü geçirin.</span><span class="sxs-lookup"><span data-stu-id="36324-134">To do this, use the <xref:System.ServiceModel.FaultContractAttribute?displayProperty=nameWithType> attribute and pass the type of the custom data type that you have constructed.</span></span> <span data-ttu-id="36324-135">Aşağıdaki kod örneği, <xref:System.ServiceModel.FaultContractAttribute> `Divide` işlemin türünde bir soap hatası döndürecan belirtmek için özniteliğini nasıl kullanacağınızı gösterir `MathFault` .</span><span class="sxs-lookup"><span data-stu-id="36324-135">The following code example shows how to use the <xref:System.ServiceModel.FaultContractAttribute> attribute to specify that the `Divide` operation can return a SOAP fault of type `MathFault`.</span></span> <span data-ttu-id="36324-136">Diğer matematik tabanlı işlemler artık, döndürebilecekleri bir de belirtebilir `MathFault` .</span><span class="sxs-lookup"><span data-stu-id="36324-136">Other math-based operations can now also specify that they can return a `MathFault`.</span></span>  
  
 [!code-csharp[Faults#1](../../../samples/snippets/csharp/VS_Snippets_CFX/faults/cs/service.cs#1)]
 [!code-vb[Faults#1](../../../samples/snippets/visualbasic/VS_Snippets_CFX/faults/vb/service.vb#1)]  
  
 <span data-ttu-id="36324-137">Bir işlem, birden fazla özniteliğe sahip işlemi işaretleyerek birden fazla özel hata döndürdüğünü belirtebilir <xref:System.ServiceModel.FaultContractAttribute> .</span><span class="sxs-lookup"><span data-stu-id="36324-137">An operation can specify that it returns more than one custom fault by marking that operation with more than one <xref:System.ServiceModel.FaultContractAttribute> attribute.</span></span>  
  
 <span data-ttu-id="36324-138">Bir sonraki adım, işlem uygulamanızda hata sözleşmesinin uygulanması için [hataları gönderme ve alma](sending-and-receiving-faults.md)konusunda açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="36324-138">The next step, to implement the fault contract in your operation implementation, is described in the topic [Sending and Receiving Faults](sending-and-receiving-faults.md).</span></span>  
  
#### <a name="soap-wsdl-and-interoperability-considerations"></a><span data-ttu-id="36324-139">SOAP, WSDL ve birlikte çalışabilirlik konuları</span><span class="sxs-lookup"><span data-stu-id="36324-139">SOAP, WSDL, and Interoperability Considerations</span></span>  

 <span data-ttu-id="36324-140">Bazı durumlarda, özellikle diğer platformlarla birlikte çalışırken, bir hatanın SOAP iletisinde veya WSDL meta verilerinde açıklanma şeklini denetlemek önemli olabilir.</span><span class="sxs-lookup"><span data-stu-id="36324-140">In some circumstances, especially when interoperating with other platforms, it may be important to control the way a fault appears in a SOAP message or the way it is described in the WSDL metadata.</span></span>  
  
 <span data-ttu-id="36324-141"><xref:System.ServiceModel.FaultContractAttribute>Öznitelik, <xref:System.ServiceModel.FaultContractAttribute.Name%2A> Bu hata için meta VERILERDE oluşturulan wsdl hata öğesi adının denetimine izin veren bir özelliğe sahiptir.</span><span class="sxs-lookup"><span data-stu-id="36324-141">The <xref:System.ServiceModel.FaultContractAttribute> attribute has a <xref:System.ServiceModel.FaultContractAttribute.Name%2A> property that allows control of the WSDL fault element name that is generated in the metadata for that fault.</span></span>  
  
 <span data-ttu-id="36324-142">SOAP standardına göre bir hata `Action` ,, `Code` ve bir olabilir `Reason` .</span><span class="sxs-lookup"><span data-stu-id="36324-142">According to the SOAP standard, a fault can have an `Action`, a `Code`, and a `Reason`.</span></span> <span data-ttu-id="36324-143">, `Action` Özelliği tarafından denetlenir <xref:System.ServiceModel.FaultContractAttribute.Action%2A> .</span><span class="sxs-lookup"><span data-stu-id="36324-143">The `Action` is controlled by the <xref:System.ServiceModel.FaultContractAttribute.Action%2A> property.</span></span> <span data-ttu-id="36324-144"><xref:System.ServiceModel.FaultException.Code%2A>Özelliği ve <xref:System.ServiceModel.FaultException.Reason%2A> özelliği <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> , genel 'in üst sınıfı olan sınıfının her iki özelliğidir <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="36324-144">The <xref:System.ServiceModel.FaultException.Code%2A> property and <xref:System.ServiceModel.FaultException.Reason%2A> property are both properties of the <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> class, which is the parent class of the generic <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType>.</span></span> <span data-ttu-id="36324-145">`Code`Özelliği bir üye içeriyor <xref:System.ServiceModel.FaultCode.SubCode%2A> .</span><span class="sxs-lookup"><span data-stu-id="36324-145">The `Code` property includes a <xref:System.ServiceModel.FaultCode.SubCode%2A> member.</span></span>  
  
 <span data-ttu-id="36324-146">Hata üreten hizmetlere erişirken bazı sınırlamalar vardır.</span><span class="sxs-lookup"><span data-stu-id="36324-146">When accessing non-services that generate faults, certain limitations exist.</span></span> <span data-ttu-id="36324-147">WCF yalnızca şemanın açıkladığı ve veri sözleşmeleri ile uyumlu olan ayrıntı türlerine sahip hataları destekler.</span><span class="sxs-lookup"><span data-stu-id="36324-147">WCF supports only faults with detail types that the schema describes and that are compatible with data contracts.</span></span> <span data-ttu-id="36324-148">Örneğin, yukarıda belirtildiği gibi, WCF, ayrıntı türlerinde XML özniteliklerini kullanan hataları ya da ayrıntı bölümünde birden fazla en üst düzey öğeyle hataları desteklemez.</span><span class="sxs-lookup"><span data-stu-id="36324-148">For example, as mentioned above, WCF does not support faults that use XML attributes in their detail types, or faults with more than one top-level element in the detail section.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="36324-149">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="36324-149">See also</span></span>

- <xref:System.ServiceModel.FaultContractAttribute>
- <xref:System.Runtime.Serialization.DataContractAttribute>
- <xref:System.Runtime.Serialization.DataMemberAttribute>
- [<span data-ttu-id="36324-150">Sözleşme ve Hizmetlerde Hataları Belirtme ve İşleme</span><span class="sxs-lookup"><span data-stu-id="36324-150">Specifying and Handling Faults in Contracts and Services</span></span>](specifying-and-handling-faults-in-contracts-and-services.md)
- [<span data-ttu-id="36324-151">Hataları Gönderme ve Alma</span><span class="sxs-lookup"><span data-stu-id="36324-151">Sending and Receiving Faults</span></span>](sending-and-receiving-faults.md)
- [<span data-ttu-id="36324-152">Nasıl yapılır: Hizmet Sözleşmelerinde Hata Bildirme</span><span class="sxs-lookup"><span data-stu-id="36324-152">How to: Declare Faults in Service Contracts</span></span>](how-to-declare-faults-in-service-contracts.md)
- [<span data-ttu-id="36324-153">Koruma Düzeylerini Anlama</span><span class="sxs-lookup"><span data-stu-id="36324-153">Understanding Protection Level</span></span>](understanding-protection-level.md)
- [<span data-ttu-id="36324-154">Nasıl yapılır: ProtectionLevel Özelliğini Ayarlama</span><span class="sxs-lookup"><span data-stu-id="36324-154">How to: Set the ProtectionLevel Property</span></span>](how-to-set-the-protectionlevel-property.md)
- [<span data-ttu-id="36324-155">Hizmet Sözleşmelerinde Veri Aktarımını Belirtme</span><span class="sxs-lookup"><span data-stu-id="36324-155">Specifying Data Transfer in Service Contracts</span></span>](./feature-details/specifying-data-transfer-in-service-contracts.md)
