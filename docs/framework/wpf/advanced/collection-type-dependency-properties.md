---
title: Koleksiyon Türü Bağımlılık Özellikleri
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- properties [WPF], dependency
- properties [WPF], collection-type
- dependency properties [WPF]
- collection-type properties [WPF]
ms.assetid: 99f96a42-3ab7-4f64-a16b-2e10d654e97c
ms.openlocfilehash: f7f8c25844f41dd8915c0f4404d6714b4c81233c
ms.sourcegitcommit: 944ddc52b7f2632f30c668815f92b378efd38eea
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 11/03/2019
ms.locfileid: "73458466"
---
# <a name="collection-type-dependency-properties"></a><span data-ttu-id="5d379-102">Koleksiyon Türü Bağımlılık Özellikleri</span><span class="sxs-lookup"><span data-stu-id="5d379-102">Collection-Type Dependency Properties</span></span>
<span data-ttu-id="5d379-103">Bu konu, özelliğin türünün bir koleksiyon türü olduğu bir bağımlılık özelliğinin nasıl uygulanacağı hakkında rehberlik ve önerilen desenler sağlar.</span><span class="sxs-lookup"><span data-stu-id="5d379-103">This topic provides guidance and suggested patterns for how to implement a dependency property where the type of the property is a collection type.</span></span>  

<a name="implementing"></a>   
## <a name="implementing-a-collection-type-dependency-property"></a><span data-ttu-id="5d379-104">Koleksiyon türü bağımlılık özelliği uygulama</span><span class="sxs-lookup"><span data-stu-id="5d379-104">Implementing a Collection-Type Dependency Property</span></span>  
 <span data-ttu-id="5d379-105">Genel olarak bir bağımlılık özelliği için, takip ettiğiniz uygulama deseninin, bu özelliğin bir alan veya diğer yapı yerine bir <xref:System.Windows.DependencyProperty> tanımlayıcı tarafından desteklendiği bir CLR özellik sarmalayıcısı tanımlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="5d379-105">For a dependency property in general, the implementation pattern that you follow is that you define a CLR property wrapper, where that property is backed by a <xref:System.Windows.DependencyProperty> identifier rather than a field or other construct.</span></span> <span data-ttu-id="5d379-106">Koleksiyon türü özelliğini uygularken bu aynı kalıbı takip edersiniz.</span><span class="sxs-lookup"><span data-stu-id="5d379-106">You follow this same pattern when you implement a collection-type property.</span></span> <span data-ttu-id="5d379-107">Ancak, bir koleksiyon türü özelliği, koleksiyonda bulunan tür her bir <xref:System.Windows.DependencyObject> veya <xref:System.Windows.Freezable> türetilmiş sınıf olduğunda, düzene yönelik bazı karmaşıklıklar getirir.</span><span class="sxs-lookup"><span data-stu-id="5d379-107">However, a collection-type property introduces some complexity to the pattern whenever the type that is contained within the collection is itself a <xref:System.Windows.DependencyObject> or <xref:System.Windows.Freezable> derived class.</span></span>  
  
<a name="initializing"></a>   
## <a name="initializing-the-collection-beyond-the-default-value"></a><span data-ttu-id="5d379-108">Koleksiyon varsayılan değerin ötesinde başlatılıyor</span><span class="sxs-lookup"><span data-stu-id="5d379-108">Initializing the Collection Beyond the Default Value</span></span>  
 <span data-ttu-id="5d379-109">Bir bağımlılık özelliği oluşturduğunuzda, özelliğin varsayılan değerini başlangıç alanı değeri olarak belirtmeyin.</span><span class="sxs-lookup"><span data-stu-id="5d379-109">When you create a dependency property, you do not specify the property default value as the initial field value.</span></span> <span data-ttu-id="5d379-110">Bunun yerine, bağımlılık özelliği meta verileri aracılığıyla varsayılan değeri belirtirsiniz.</span><span class="sxs-lookup"><span data-stu-id="5d379-110">Instead, you specify the default value through the dependency property metadata.</span></span> <span data-ttu-id="5d379-111">Eğer özelliği bir başvuru türü ise, bağımlılık özelliği meta verilerinde belirtilen varsayılan değer örnek başına varsayılan değer değildir; Bunun yerine, türün tüm örnekleri için geçerli olan varsayılan bir değerdir.</span><span class="sxs-lookup"><span data-stu-id="5d379-111">If your property is a reference type, the default value specified in dependency property metadata is not a default value per instance; instead it is a default value that applies to all instances of the type.</span></span> <span data-ttu-id="5d379-112">Bu nedenle, bir koleksiyon özelliği meta verileri tarafından tanımlanan tekil statik koleksiyonu, yeni oluşturulan örnekler için çalışma varsayılan değeri olarak kullanmamaya dikkat etmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="5d379-112">Therefore you must be careful to not use the singular static collection defined by the collection property metadata as the working default value for newly created instances of your type.</span></span> <span data-ttu-id="5d379-113">Bunun yerine, koleksiyon değerini sınıf Oluşturucu mantığınızın bir parçası olarak benzersiz bir (örnek) koleksiyona ayarladığınızdan emin olmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="5d379-113">Instead, you must make sure that you deliberately set the collection value to a unique (instance) collection as part of your class constructor logic.</span></span> <span data-ttu-id="5d379-114">Aksi takdirde, istemeden tek bir sınıf oluşturmuş olursunuz.</span><span class="sxs-lookup"><span data-stu-id="5d379-114">Otherwise you will have created an unintentional singleton class.</span></span>  
  
 <span data-ttu-id="5d379-115">Aşağıdaki örneği göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="5d379-115">Consider the following example.</span></span> <span data-ttu-id="5d379-116">Örneğin aşağıdaki bölümünde bir sınıf `Aquarium`tanımı gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="5d379-116">The following section of the example shows the definition for a class `Aquarium`.</span></span> <span data-ttu-id="5d379-117">Sınıfı, bir <xref:System.Windows.FrameworkElement> tür kısıtlaması ile genel <xref:System.Collections.Generic.List%601> türünü kullanan `AquariumObjects`koleksiyon türü bağımlılık özelliğini tanımlar.</span><span class="sxs-lookup"><span data-stu-id="5d379-117">The class defines the collection type dependency property `AquariumObjects`, which uses the generic <xref:System.Collections.Generic.List%601> type with a <xref:System.Windows.FrameworkElement> type constraint.</span></span> <span data-ttu-id="5d379-118">Bağımlılık özelliği için <xref:System.Windows.DependencyProperty.Register%28System.String%2CSystem.Type%2CSystem.Type%2CSystem.Windows.PropertyMetadata%29> çağrısında, meta veriler varsayılan değeri yeni bir genel <xref:System.Collections.Generic.List%601>olarak belirler.</span><span class="sxs-lookup"><span data-stu-id="5d379-118">In the <xref:System.Windows.DependencyProperty.Register%28System.String%2CSystem.Type%2CSystem.Type%2CSystem.Windows.PropertyMetadata%29> call for the dependency property, the metadata establishes the default value to be a new generic <xref:System.Collections.Generic.List%601>.</span></span>  
  
 [!code-csharp[PropertiesOvwSupport2#CollectionProblemDefinition](~/samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport2/CSharp/page.xaml.cs#collectionproblemdefinition)]
 [!code-vb[PropertiesOvwSupport2#CollectionProblemDefinition](~/samples/snippets/visualbasic/VS_Snippets_Wpf/PropertiesOvwSupport2/visualbasic/page.xaml.vb#collectionproblemdefinition)]  
  
 <span data-ttu-id="5d379-119">Ancak, yalnızca kodu gösterildiği gibi bıraktıysanız, bu tek liste varsayılan değeri tüm `Aquarium`örnekleri için paylaşılır.</span><span class="sxs-lookup"><span data-stu-id="5d379-119">However, if you just left the code as shown, that single list default value is shared for all instances of `Aquarium`.</span></span> <span data-ttu-id="5d379-120">İki ayrı `Aquarium` örneğinin örneğini nasıl örneklendiribileceğinizi ve bunların her birine tek bir farklı `Fish` nasıl ekleneceğini göstermek için tasarlanan aşağıdaki test kodunu çalıştırdıysanız, ortaya çıkmış bir sonuç görürsünüz:</span><span class="sxs-lookup"><span data-stu-id="5d379-120">If you ran the following test code, which is intended to show how you would instantiate two separate `Aquarium` instances and add a single different `Fish` to each of them, you would see a surprising result:</span></span>  
  
 [!code-csharp[PropertiesOvwSupport#CollectionProblemTestCode](~/samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page4.xaml.cs#collectionproblemtestcode)]
 [!code-vb[PropertiesOvwSupport#CollectionProblemTestCode](~/samples/snippets/visualbasic/VS_Snippets_Wpf/PropertiesOvwSupport/visualbasic/page4.xaml.vb#collectionproblemtestcode)]  
  
 <span data-ttu-id="5d379-121">Her koleksiyonun bir sayısına sahip olması yerine, her koleksiyonun iki sayısı vardır!</span><span class="sxs-lookup"><span data-stu-id="5d379-121">Instead of each collection having a count of one, each collection has a count of two!</span></span> <span data-ttu-id="5d379-122">Bunun nedeni, her bir `Aquarium` Meta verilerdeki tek bir Oluşturucu çağrısından kaynaklanan ve bu nedenle tüm örnekler arasında paylaşıldığı varsayılan değer koleksiyonuna `Fish` ekledik.</span><span class="sxs-lookup"><span data-stu-id="5d379-122">This is because each `Aquarium` added its `Fish` to the default value collection, which resulted from a single constructor call in the metadata and is therefore shared between all instances.</span></span> <span data-ttu-id="5d379-123">Bu durum neredeyse hiçbir şekilde istediğiniz şeydir.</span><span class="sxs-lookup"><span data-stu-id="5d379-123">This situation is almost never what you want.</span></span>  
  
 <span data-ttu-id="5d379-124">Bu sorunu düzeltmek için, koleksiyon bağımlılığı özellik değerini, sınıf Oluşturucu çağrısının bir parçası olarak benzersiz bir örneğe sıfırlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="5d379-124">To correct this problem, you must reset the collection dependency property value to a unique instance, as part of the class constructor call.</span></span> <span data-ttu-id="5d379-125">Özelliği salt okunurdur bir bağımlılık özelliği olduğundan, yalnızca sınıfı içinde erişilebilir olan <xref:System.Windows.DependencyPropertyKey> kullanarak onu ayarlamak için <xref:System.Windows.DependencyObject.SetValue%28System.Windows.DependencyPropertyKey%2CSystem.Object%29> yöntemini kullanırsınız.</span><span class="sxs-lookup"><span data-stu-id="5d379-125">Because the property is a read-only dependency property, you use the <xref:System.Windows.DependencyObject.SetValue%28System.Windows.DependencyPropertyKey%2CSystem.Object%29> method to set it, using the <xref:System.Windows.DependencyPropertyKey> that is only accessible within the class.</span></span>  
  
 [!code-csharp[PropertiesOvwSupport#CollectionProblemCtor](~/samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page4.xaml.cs#collectionproblemctor)]
 [!code-vb[PropertiesOvwSupport#CollectionProblemCtor](~/samples/snippets/visualbasic/VS_Snippets_Wpf/PropertiesOvwSupport/visualbasic/page4.xaml.vb#collectionproblemctor)]  
  
 <span data-ttu-id="5d379-126">Artık aynı test kodunu yeniden çalıştırdıysanız, her `Aquarium` kendi benzersiz koleksiyonunu desteklediği beklenen sonuçları görebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="5d379-126">Now, if you ran that same test code again, you could see more expected results, where each `Aquarium` supported its own unique collection.</span></span>  
  
 <span data-ttu-id="5d379-127">Koleksiyon özelliğinin okuma-yazma olmasını seçtiyseniz bu düzende küçük bir değişim olur.</span><span class="sxs-lookup"><span data-stu-id="5d379-127">There would be a slight variation on this pattern if you chose to have your collection property be read-write.</span></span> <span data-ttu-id="5d379-128">Bu durumda, başlatma yapmak için oluşturucudan ortak küme erişimcisini çağırabilirsiniz. Bu, genel bir <xref:System.Windows.DependencyProperty> tanımlayıcısı kullanarak, küme sarmalayıcı içinde <xref:System.Windows.DependencyObject.SetValue%28System.Windows.DependencyProperty%2CSystem.Object%29> anahtar olmayan imzayı çağırmaya devam eder.</span><span class="sxs-lookup"><span data-stu-id="5d379-128">In that case, you could call the public set accessor from the constructor to do the initialization, which would still be calling the nonkey signature of <xref:System.Windows.DependencyObject.SetValue%28System.Windows.DependencyProperty%2CSystem.Object%29> within your set wrapper, using a public <xref:System.Windows.DependencyProperty> identifier.</span></span>  
  
## <a name="reporting-binding-value-changes-from-collection-properties"></a><span data-ttu-id="5d379-129">Koleksiyon özelliklerindeki değer değişikliklerini raporlama</span><span class="sxs-lookup"><span data-stu-id="5d379-129">Reporting Binding Value Changes from Collection Properties</span></span>  
 <span data-ttu-id="5d379-130">Kendisi bir bağımlılık özelliği olan bir koleksiyon özelliği, alt özelliklerine yapılan değişiklikleri otomatik olarak raporlamaz.</span><span class="sxs-lookup"><span data-stu-id="5d379-130">A collection property that is itself a dependency property does not automatically report changes to its subproperties.</span></span> <span data-ttu-id="5d379-131">Bir koleksiyona bağlamalar oluşturuyorsanız, bu, bağlamanın değişiklikleri raporlamasına engel olabilir ve bu nedenle bazı veri bağlama senaryolarını geçersiz hale getirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="5d379-131">If you are creating bindings into a collection, this can prevent the binding from reporting changes, thus invalidating some data binding scenarios.</span></span> <span data-ttu-id="5d379-132">Ancak, koleksiyon türü <xref:System.Windows.FreezableCollection%601> koleksiyon türü olarak kullanırsanız, koleksiyonda içerilen öğelerin alt özellik değişiklikleri doğru şekilde raporlanır ve bağlama beklendiği gibi çalışacaktır.</span><span class="sxs-lookup"><span data-stu-id="5d379-132">However, if you use the collection type <xref:System.Windows.FreezableCollection%601> as your collection type, then subproperty changes to contained elements in the collection are properly reported, and binding works as expected.</span></span>  
  
 <span data-ttu-id="5d379-133">Bağımlılık nesne koleksiyonunda alt özellik bağlamasını etkinleştirmek için, koleksiyon özelliğini <xref:System.Windows.FreezableCollection%601>türü olarak oluşturun ve bu koleksiyonun herhangi bir <xref:System.Windows.DependencyObject> türetilmiş sınıfa bir tür kısıtlaması vardır.</span><span class="sxs-lookup"><span data-stu-id="5d379-133">To enable subproperty binding in a dependency object collection, create the collection property as type <xref:System.Windows.FreezableCollection%601>, with a type constraint for that collection to any <xref:System.Windows.DependencyObject> derived class.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5d379-134">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="5d379-134">See also</span></span>

- <xref:System.Windows.FreezableCollection%601>
- [<span data-ttu-id="5d379-135">WPF için XAML ve Özel Sınıflar</span><span class="sxs-lookup"><span data-stu-id="5d379-135">XAML and Custom Classes for WPF</span></span>](xaml-and-custom-classes-for-wpf.md)
- [<span data-ttu-id="5d379-136">Veri Bağlamaya Genel Bakış</span><span class="sxs-lookup"><span data-stu-id="5d379-136">Data Binding Overview</span></span>](../../../desktop-wpf/data/data-binding-overview.md)
- [<span data-ttu-id="5d379-137">Bağımlılık Özelliklerine Genel Bakış</span><span class="sxs-lookup"><span data-stu-id="5d379-137">Dependency Properties Overview</span></span>](dependency-properties-overview.md)
- [<span data-ttu-id="5d379-138">Özel Bağımlılık Özellikleri</span><span class="sxs-lookup"><span data-stu-id="5d379-138">Custom Dependency Properties</span></span>](custom-dependency-properties.md)
- [<span data-ttu-id="5d379-139">Bağımlılık Özelliği Meta Verisi</span><span class="sxs-lookup"><span data-stu-id="5d379-139">Dependency Property Metadata</span></span>](dependency-property-metadata.md)
