---
description: "Daha fazla bilgi edinin: PLıNQ 'te birleştirme seçenekleri"
title: PLINQ'te Birleştirme Seçenekleri
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- PLINQ queries, merge options
ms.assetid: e8f7be3b-88de-4f33-ab14-dc008e76c1ba
ms.openlocfilehash: c58b0134ef6c469b5f13a1d6c43a850bb586d360
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 02/06/2021
ms.locfileid: "99731467"
---
# <a name="merge-options-in-plinq"></a><span data-ttu-id="0594a-103">PLINQ'te Birleştirme Seçenekleri</span><span class="sxs-lookup"><span data-stu-id="0594a-103">Merge Options in PLINQ</span></span>

<span data-ttu-id="0594a-104">Bir sorgu paralel olarak yürütülerek PLıNQ, kaynak dizisini birden çok iş parçacığının aynı anda farklı parçalar üzerinde, genellikle ayrı iş parçacıklarında çalışabilmesi için bölümler.</span><span class="sxs-lookup"><span data-stu-id="0594a-104">When a query is executing as parallel, PLINQ partitions the source sequence so that multiple threads can work on different parts concurrently, typically on separate threads.</span></span> <span data-ttu-id="0594a-105">Sonuçlar bir iş parçacığında tüketilecektir (örneğin, bir `foreach` ( `For Each` Visual Basic) döngüsünde, her iş parçacığının sonuçlarının tek bir sırayla birleştirilmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="0594a-105">If the results are to be consumed on one thread, for example, in a `foreach` (`For Each` in Visual Basic) loop, then the results from every thread must be merged back into one sequence.</span></span> <span data-ttu-id="0594a-106">PLıNQ tarafından gerçekleştirilen birleştirme türü sorguda bulunan işleçlere bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="0594a-106">The kind of merge that PLINQ performs depends on the operators that are present in the query.</span></span> <span data-ttu-id="0594a-107">Örneğin, sonuçlara yeni bir sıra uygulayan işleçler tüm iş parçacıklarından tüm öğeleri arabelleğe almalıdır.</span><span class="sxs-lookup"><span data-stu-id="0594a-107">For example, operators that impose a new order on the results must buffer all elements from all threads.</span></span> <span data-ttu-id="0594a-108">Tüketim iş parçacığının perspektifinden (aynı zamanda uygulama kullanıcısının), tam olarak arabelleğe alınmış bir sorgu, ilk sonucunu oluşturmadan önce fark edilebilir bir süre için çalıştırılabilir.</span><span class="sxs-lookup"><span data-stu-id="0594a-108">From the perspective of the consuming thread (which is also that of the application user) a fully buffered query might run for a noticeable period of time before it produces its first result.</span></span> <span data-ttu-id="0594a-109">Diğer işleçler, varsayılan olarak kısmen arabelleğe alınır; sonuçları toplu işlerle sonuçlarlar.</span><span class="sxs-lookup"><span data-stu-id="0594a-109">Other operators, by default, are partially buffered; they yield their results in batches.</span></span> <span data-ttu-id="0594a-110">Bir işleç, <xref:System.Linq.ParallelEnumerable.ForAll%2A> Varsayılan olarak ara belleğe alınmadı.</span><span class="sxs-lookup"><span data-stu-id="0594a-110">One operator, <xref:System.Linq.ParallelEnumerable.ForAll%2A> is not buffered by default.</span></span> <span data-ttu-id="0594a-111">Tüm iş parçacıklarından tüm öğeleri hemen oluşturur.</span><span class="sxs-lookup"><span data-stu-id="0594a-111">It yields all elements from all threads immediately.</span></span>  
  
 <span data-ttu-id="0594a-112"><xref:System.Linq.ParallelEnumerable.WithMergeOptions%2A>Yöntemini kullanarak, aşağıdaki örnekte gösterildiği gibi, PLıNQ için ne tür birleştirme yapılacağını belirten bir ipucu sağlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0594a-112">By using the <xref:System.Linq.ParallelEnumerable.WithMergeOptions%2A> method, as shown in the following example, you can provide a hint to PLINQ that indicates what kind of merging to perform.</span></span>  
  
 [!code-csharp[PLINQ#26](../../../samples/snippets/csharp/VS_Snippets_Misc/plinq/cs/plinqsamples.cs#26)]
 [!code-vb[PLINQ#26](../../../samples/snippets/visualbasic/VS_Snippets_Misc/plinq/vb/plinq2_vb.vb#26)]  
  
 <span data-ttu-id="0594a-113">Tüm örnek için bkz. [nasıl yapılır: PLıNQ 'Te birleştirme seçeneklerini belirtme](how-to-specify-merge-options-in-plinq.md).</span><span class="sxs-lookup"><span data-stu-id="0594a-113">For the complete example, see [How to: Specify Merge Options in PLINQ](how-to-specify-merge-options-in-plinq.md).</span></span>  
  
 <span data-ttu-id="0594a-114">Belirli bir sorgu istenen seçeneği desteklenemez, bu durumda seçenek yalnızca yok sayılır.</span><span class="sxs-lookup"><span data-stu-id="0594a-114">If the particular query cannot support the requested option, then the option will just be ignored.</span></span> <span data-ttu-id="0594a-115">Çoğu durumda, PLıNQ sorgusu için bir birleştirme seçeneği belirtmeniz gerekmez.</span><span class="sxs-lookup"><span data-stu-id="0594a-115">In most cases, you do not have to specify a merge option for a PLINQ query.</span></span> <span data-ttu-id="0594a-116">Ancak, bazı durumlarda bir sorgunun varsayılan olmayan bir modda en iyi şekilde yürütüldüğünü test ederek ve ölçüyle fark edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="0594a-116">However, in some cases you may find by testing and measurement that a query executes best in a non-default mode.</span></span> <span data-ttu-id="0594a-117">Bu seçeneğin yaygın kullanımı, bir öbek birleştirme işlecinin, daha fazla yanıt veren bir kullanıcı arabirimi sağlamak için sonuçlarını akışını zorlamaktır.</span><span class="sxs-lookup"><span data-stu-id="0594a-117">A common use of this option is to force a chunk-merging operator to stream its results in order to provide a more responsive user interface.</span></span>  
  
## <a name="parallelmergeoptions"></a><span data-ttu-id="0594a-118">ParallelMergeOptions</span><span class="sxs-lookup"><span data-stu-id="0594a-118">ParallelMergeOptions</span></span>  

 <span data-ttu-id="0594a-119"><xref:System.Linq.ParallelMergeOptions>Sabit listesi, desteklenen sorgu şekilleri için, sonuçları bir iş parçacığında kullanılırken sorgunun son çıkışının nasıl yapılacağını belirten aşağıdaki seçenekleri içerir:</span><span class="sxs-lookup"><span data-stu-id="0594a-119">The <xref:System.Linq.ParallelMergeOptions> enumeration includes the following options that specify, for supported query shapes, how the final output of the query is yielded when the results are consumed on one thread:</span></span>  
  
- `Not Buffered`  
  
     <span data-ttu-id="0594a-120">Seçeneği, her bir <xref:System.Linq.ParallelMergeOptions.NotBuffered> işlenen öğenin, üretildiğinde her iş parçacığından döndürülmesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="0594a-120">The <xref:System.Linq.ParallelMergeOptions.NotBuffered> option causes each processed element to be returned from each thread as soon as it is produced.</span></span> <span data-ttu-id="0594a-121">Bu davranış, çıktıyı "akışa alma" ile benzerdir.</span><span class="sxs-lookup"><span data-stu-id="0594a-121">This behavior is analogous to "streaming" the output.</span></span> <span data-ttu-id="0594a-122"><xref:System.Linq.ParallelEnumerable.AsOrdered%2A>Sorguda işleç varsa, `NotBuffered` kaynak öğelerin sırasını korur.</span><span class="sxs-lookup"><span data-stu-id="0594a-122">If the <xref:System.Linq.ParallelEnumerable.AsOrdered%2A> operator is present in the query, `NotBuffered` preserves the order of the source elements.</span></span> <span data-ttu-id="0594a-123">`NotBuffered`, Sonuçları kullanılabilir duruma geldiğinde ortaya almaya başlasa da, tüm sonuçların üretilmesi için geçen toplam süre, diğer birleştirme seçeneklerinden birini kullanmaktan daha uzun olabilir.</span><span class="sxs-lookup"><span data-stu-id="0594a-123">Although `NotBuffered` starts yielding results as soon as they're available, the total time to produce all the results might still be longer than using one of the other merge options.</span></span>  
  
- `Auto Buffered`  
  
     <span data-ttu-id="0594a-124">Bu <xref:System.Linq.ParallelMergeOptions.AutoBuffered> seçenek sorgunun öğeleri bir arabelleğe toplamasına ve sonra düzenli aralıklarla arabellek içeriklerini tek seferde tüketim iş parçacığına getirmesine neden olur.</span><span class="sxs-lookup"><span data-stu-id="0594a-124">The <xref:System.Linq.ParallelMergeOptions.AutoBuffered> option causes the query to collect elements into a buffer and then periodically yield the buffer contents all at once to the consuming thread.</span></span> <span data-ttu-id="0594a-125">Bu, kaynak verileri "akış" davranışının kullanılması yerine "parçalar" halinde ortaya yüklemeye benzer `NotBuffered` .</span><span class="sxs-lookup"><span data-stu-id="0594a-125">This is analogous to yielding the source data in "chunks" instead of using the "streaming" behavior of `NotBuffered`.</span></span> <span data-ttu-id="0594a-126">`AutoBuffered``NotBuffered`ilk öğeyi tüketim iş parçacığında kullanılabilir hale getirmek daha uzun sürebilir.</span><span class="sxs-lookup"><span data-stu-id="0594a-126">`AutoBuffered` may take longer than `NotBuffered` to make the first element available on the consuming thread.</span></span> <span data-ttu-id="0594a-127">Arabelleğin boyutu ve kesin hale göre davranışı yapılandırılabilir değildir ve sorguyla ilgili çeşitli faktörlere bağlı olarak farklılık gösterebilir.</span><span class="sxs-lookup"><span data-stu-id="0594a-127">The size of the buffer and the exact yielding behavior are not configurable and may vary, depending on various factors that relate to the query.</span></span>  
  
- `FullyBuffered`  
  
     <span data-ttu-id="0594a-128"><xref:System.Linq.ParallelMergeOptions.FullyBuffered>Seçeneği, herhangi bir öğeden herhangi biri alınmadan önce tüm sorgunun çıkışının arabelleğe alınmasına neden olur.</span><span class="sxs-lookup"><span data-stu-id="0594a-128">The <xref:System.Linq.ParallelMergeOptions.FullyBuffered> option causes the output of the whole query to be buffered before any of the elements are yielded.</span></span> <span data-ttu-id="0594a-129">Bu seçeneği kullandığınızda, ilk öğe tüketim iş parçacığında kullanılabilir olmadan önce daha uzun sürebilir, ancak tüm sonuçlar yine de diğer seçenekler kullanılarak daha hızlı oluşturulabilir.</span><span class="sxs-lookup"><span data-stu-id="0594a-129">When you use this option, it can take longer before the first element is available on the consuming thread, but the complete results might still be produced faster than by using the other options.</span></span>  
  
## <a name="query-operators-that-support-merge-options"></a><span data-ttu-id="0594a-130">Birleştirme seçeneklerini destekleyen sorgu Işleçleri</span><span class="sxs-lookup"><span data-stu-id="0594a-130">Query Operators that Support Merge Options</span></span>  

 <span data-ttu-id="0594a-131">Aşağıdaki tabloda, belirtilen kısıtlamalara tabi olan tüm birleştirme seçeneği modlarını destekleyen işleçler listelenmektedir.</span><span class="sxs-lookup"><span data-stu-id="0594a-131">The following table lists the operators that support all merge option modes, subject to the specified restrictions.</span></span>  
  
|<span data-ttu-id="0594a-132">Operatör</span><span class="sxs-lookup"><span data-stu-id="0594a-132">Operator</span></span>|<span data-ttu-id="0594a-133">Kısıtlamalar</span><span class="sxs-lookup"><span data-stu-id="0594a-133">Restrictions</span></span>|  
|--------------|------------------|  
|<xref:System.Linq.ParallelEnumerable.AsEnumerable%2A>|<span data-ttu-id="0594a-134">Yok</span><span class="sxs-lookup"><span data-stu-id="0594a-134">None</span></span>|  
|<xref:System.Linq.ParallelEnumerable.Cast%2A>|<span data-ttu-id="0594a-135">Yok</span><span class="sxs-lookup"><span data-stu-id="0594a-135">None</span></span>|  
|<xref:System.Linq.ParallelEnumerable.Concat%2A>|<span data-ttu-id="0594a-136">Yalnızca bir dizi veya liste kaynağına sahip sıralı olmayan sorgular.</span><span class="sxs-lookup"><span data-stu-id="0594a-136">Non-ordered queries that have an Array or List source only.</span></span>|  
|<xref:System.Linq.ParallelEnumerable.DefaultIfEmpty%2A>|<span data-ttu-id="0594a-137">Yok</span><span class="sxs-lookup"><span data-stu-id="0594a-137">None</span></span>|  
|<xref:System.Linq.ParallelEnumerable.OfType%2A>|<span data-ttu-id="0594a-138">Yok</span><span class="sxs-lookup"><span data-stu-id="0594a-138">None</span></span>|  
|<xref:System.Linq.ParallelEnumerable.Reverse%2A>|<span data-ttu-id="0594a-139">Yalnızca bir dizi veya liste kaynağına sahip sıralı olmayan sorgular.</span><span class="sxs-lookup"><span data-stu-id="0594a-139">Non-ordered queries that have an Array or List source only.</span></span>|  
|<xref:System.Linq.ParallelEnumerable.Select%2A>|<span data-ttu-id="0594a-140">Yok</span><span class="sxs-lookup"><span data-stu-id="0594a-140">None</span></span>|  
|<xref:System.Linq.ParallelEnumerable.SelectMany%2A>|<span data-ttu-id="0594a-141">Yok</span><span class="sxs-lookup"><span data-stu-id="0594a-141">None</span></span>|  
|<xref:System.Linq.ParallelEnumerable.Skip%2A>|<span data-ttu-id="0594a-142">Yok</span><span class="sxs-lookup"><span data-stu-id="0594a-142">None</span></span>|  
|<xref:System.Linq.ParallelEnumerable.Take%2A>|<span data-ttu-id="0594a-143">Yok</span><span class="sxs-lookup"><span data-stu-id="0594a-143">None</span></span>|  
|<xref:System.Linq.ParallelEnumerable.Where%2A>|<span data-ttu-id="0594a-144">Yok</span><span class="sxs-lookup"><span data-stu-id="0594a-144">None</span></span>|  
  
 <span data-ttu-id="0594a-145">Tüm diğer PLıNQ sorgu işleçleri Kullanıcı tarafından sağlanmış birleştirme seçeneklerini yok sayabilir.</span><span class="sxs-lookup"><span data-stu-id="0594a-145">All other PLINQ query operators might ignore user-provided merge options.</span></span> <span data-ttu-id="0594a-146">Örneğin, ve gibi bazı sorgu işleçleri <xref:System.Linq.ParallelEnumerable.Reverse%2A> , <xref:System.Linq.ParallelEnumerable.OrderBy%2A> Tümü üretilene ve yeniden oluşturulana kadar herhangi bir öğe alamaz.</span><span class="sxs-lookup"><span data-stu-id="0594a-146">Some query operators, for example, <xref:System.Linq.ParallelEnumerable.Reverse%2A> and <xref:System.Linq.ParallelEnumerable.OrderBy%2A>, cannot yield any elements until all have been produced and reordered.</span></span> <span data-ttu-id="0594a-147">Bu nedenle, gibi <xref:System.Linq.ParallelMergeOptions> bir işleci de içeren bir sorguda kullanıldığında <xref:System.Linq.ParallelEnumerable.Reverse%2A> , bu işleç sonuçlarını üretene kadar birleştirme davranışı sorguya uygulanmaz.</span><span class="sxs-lookup"><span data-stu-id="0594a-147">Therefore, when <xref:System.Linq.ParallelMergeOptions> is used in a query that also contains an operator such as <xref:System.Linq.ParallelEnumerable.Reverse%2A>, the merge behavior will not be applied in the query until after that operator has produced its results.</span></span>  
  
 <span data-ttu-id="0594a-148">Bazı işleçlerin birleştirme seçeneklerini işleme yeteneği, kaynak dizinin türüne ve <xref:System.Linq.ParallelEnumerable.AsOrdered%2A> işlecin daha önce sorguda kullanılıp kullanılmadığını bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="0594a-148">The ability of some operators to handle merge options depends on the type of the source sequence, and whether the <xref:System.Linq.ParallelEnumerable.AsOrdered%2A> operator was used earlier in the query.</span></span> <span data-ttu-id="0594a-149"><xref:System.Linq.ParallelEnumerable.ForAll%2A> her zaman, <xref:System.Linq.ParallelMergeOptions.NotBuffered> öğelerini hemen oluşturur.</span><span class="sxs-lookup"><span data-stu-id="0594a-149"><xref:System.Linq.ParallelEnumerable.ForAll%2A> is always <xref:System.Linq.ParallelMergeOptions.NotBuffered> ; it yields its elements immediately.</span></span> <span data-ttu-id="0594a-150"><xref:System.Linq.ParallelEnumerable.OrderBy%2A> her zaman, <xref:System.Linq.ParallelMergeOptions.FullyBuffered> Tüm listeyi vermeden önce sıralamalıdır.</span><span class="sxs-lookup"><span data-stu-id="0594a-150"><xref:System.Linq.ParallelEnumerable.OrderBy%2A> is always <xref:System.Linq.ParallelMergeOptions.FullyBuffered>; it must sort the whole list before it yields.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0594a-151">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="0594a-151">See also</span></span>

- [<span data-ttu-id="0594a-152">Paralel LINQ (PLINQ)</span><span class="sxs-lookup"><span data-stu-id="0594a-152">Parallel LINQ (PLINQ)</span></span>](introduction-to-plinq.md)
- [<span data-ttu-id="0594a-153">Nasıl yapılır: PLINQ'te Birleştirme Seçeneklerini Belirtme</span><span class="sxs-lookup"><span data-stu-id="0594a-153">How to: Specify Merge Options in PLINQ</span></span>](how-to-specify-merge-options-in-plinq.md)
