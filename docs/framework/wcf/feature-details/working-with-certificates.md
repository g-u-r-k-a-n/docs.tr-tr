---
title: Sertifikalarla Çalışma
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- certificates [WCF]
ms.assetid: 6ffb8682-8f07-4a45-afbb-8d2487e9dbc3
ms.openlocfilehash: e61437efd87c30758c36d642bb9269ad2966c951
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 06/09/2020
ms.locfileid: "84600120"
---
# <a name="working-with-certificates"></a><span data-ttu-id="3212d-102">Sertifikalarla Çalışma</span><span class="sxs-lookup"><span data-stu-id="3212d-102">Working with Certificates</span></span>

<span data-ttu-id="3212d-103">Program Windows Communication Foundation (WCF) güvenliği, X. 509.440 dijital sertifikalar genellikle istemcilerin ve sunucuların kimliğini doğrulamak, iletileri şifrelemek ve dijital olarak imzalamak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="3212d-103">To program Windows Communication Foundation (WCF) security, X.509 digital certificates are commonly used to authenticate clients and servers, encrypt, and digitally sign messages.</span></span> <span data-ttu-id="3212d-104">Bu konu, X. 509.952 dijital sertifika özelliklerini ve WCF 'de nasıl kullanılacağını kısaca açıklar ve bu kavramları açıklayan konuların bağlantılarını ve WCF ve sertifikaları kullanarak genel görevlerin nasıl gerçekleştirileceğini gösterir.</span><span class="sxs-lookup"><span data-stu-id="3212d-104">This topic briefly explains X.509 digital certificate features and how to use them in WCF, and includes links to topics that explain these concepts further or that show how to accomplish common tasks using WCF and certificates.</span></span>

<span data-ttu-id="3212d-105">Kısaca dijital sertifika, bir *genel anahtar altyapısının* (PKI) bir parçasıdır. Bu, bir dijital sertifikalar, sertifika yetkilileri ve genel anahtar şifrelemesi kullanılarak elektronik bir işlemde yer alan her bir tarafın geçerliliğini doğrulayan ve doğrulayan diğer kayıt yetkililerinden oluşur.</span><span class="sxs-lookup"><span data-stu-id="3212d-105">In brief, a digital certificate is a part of a *public key infrastructure* (PKI), which is a system of digital certificates, certificate authorities, and other registration authorities that verify and authenticate the validity of each party involved in an electronic transaction through the use of public key cryptography.</span></span> <span data-ttu-id="3212d-106">Sertifika yetkilisi sertifikaları ve her sertifika, *Konu* (sertifikanın verildiği varlık), geçerlilik tarihleri (sertifika geçerli olduğunda), veren (sertifikayı veren varlık) ve ortak anahtar gibi verileri içeren alanlar kümesine sahiptir.</span><span class="sxs-lookup"><span data-stu-id="3212d-106">A certification authority issues certificates and each certificate has a set of fields that contain data, such as *subject* (the entity to which the certificate is issued), validity dates (when the certificate is valid), issuer (the entity that issued the certificate), and a public key.</span></span> <span data-ttu-id="3212d-107">WCF 'de, bu özelliklerin her biri bir olarak işlenir <xref:System.IdentityModel.Claims.Claim> ve her talep iki türe ayrılır: kimlik ve sağ.</span><span class="sxs-lookup"><span data-stu-id="3212d-107">In WCF, each of these properties is processed as a <xref:System.IdentityModel.Claims.Claim>, and each claim is further divided into two types: identity and right.</span></span> <span data-ttu-id="3212d-108">X. 509.440 sertifikaları hakkında daha fazla bilgi için bkz. [x. 509.440 ortak anahtar sertifikaları](/windows/desktop/SecCertEnroll/about-x-509-public-key-certificates).</span><span class="sxs-lookup"><span data-stu-id="3212d-108">For more information about X.509 certificates see [X.509 Public Key Certificates](/windows/desktop/SecCertEnroll/about-x-509-public-key-certificates).</span></span> <span data-ttu-id="3212d-109">WCF 'de talepler ve yetkilendirme hakkında daha fazla bilgi için bkz. [kimlik modeliyle talepleri ve Yetkilendirmeyi Yönetme](managing-claims-and-authorization-with-the-identity-model.md).</span><span class="sxs-lookup"><span data-stu-id="3212d-109">For more information about Claims and Authorization in WCF see [Managing Claims and Authorization with the Identity Model](managing-claims-and-authorization-with-the-identity-model.md).</span></span> <span data-ttu-id="3212d-110">PKI uygulama hakkında daha fazla bilgi için bkz. [Windows Server 2012 R2 Ile kurumsal pkı Active Directory Sertifika Hizmetleri](https://docs.microsoft.com/archive/blogs/yungchou/enterprise-pki-with-windows-server-2012-r2-active-directory-certificate-services-part-1-of-2).</span><span class="sxs-lookup"><span data-stu-id="3212d-110">For more information about implementing a PKI, see [Enterprise PKI with Windows Server 2012 R2 Active Directory Certificate Services](https://docs.microsoft.com/archive/blogs/yungchou/enterprise-pki-with-windows-server-2012-r2-active-directory-certificate-services-part-1-of-2).</span></span>

<span data-ttu-id="3212d-111">Bir sertifikanın birincil işlevi, sertifika sahibinin kimliğini başkalarına doğrulamasıdır.</span><span class="sxs-lookup"><span data-stu-id="3212d-111">The primary function of a certificate is to authenticate the identity of the owner of the certificate to others.</span></span> <span data-ttu-id="3212d-112">Bir sertifika, sahibin *ortak anahtarını* içerir, ancak sahibi özel anahtarı korur.</span><span class="sxs-lookup"><span data-stu-id="3212d-112">A certificate contains the *public key* of the owner, while the owner retains the private key.</span></span> <span data-ttu-id="3212d-113">Ortak anahtar, sertifikanın sahibine gönderilen iletileri şifrelemek için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="3212d-113">The public key can be used to encrypt messages sent to the owner of the certificate.</span></span> <span data-ttu-id="3212d-114">Yalnızca sahibi özel anahtara erişebilir, bu nedenle yalnızca sahip bu iletilerin şifresini çözebilir.</span><span class="sxs-lookup"><span data-stu-id="3212d-114">Only the owner has access to the private key, so only the owner can decrypt those messages.</span></span>

<span data-ttu-id="3212d-115">Sertifikalar, genellikle bir üçüncü taraf sertifika veren olan bir sertifika yetkilisi tarafından verilmelidir.</span><span class="sxs-lookup"><span data-stu-id="3212d-115">Certificates must be issued by a certification authority, which is often a third-party  issuer of certificates.</span></span> <span data-ttu-id="3212d-116">Bir Windows etki alanında, etki alanındaki bilgisayarlara sertifika vermek için kullanılabilecek bir sertifika yetkilisi bulunur.</span><span class="sxs-lookup"><span data-stu-id="3212d-116">On a Windows domain, a certification authority is included that can be used to issue certificates to computers on the domain.</span></span>

## <a name="viewing-certificates"></a><span data-ttu-id="3212d-117">Sertifikaları görüntüleme</span><span class="sxs-lookup"><span data-stu-id="3212d-117">Viewing Certificates</span></span>

<span data-ttu-id="3212d-118">Sertifikalarla çalışmak için genellikle bunları görüntülemeniz ve özelliklerini incelemesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="3212d-118">To work with certificates, it is often necessary to view them and examine their properties.</span></span> <span data-ttu-id="3212d-119">Bu, Microsoft Yönetim Konsolu (MMC) ek bileşeni aracıyla kolayca yapılır.</span><span class="sxs-lookup"><span data-stu-id="3212d-119">This is easily done with the Microsoft Management Console (MMC) snap-in tool.</span></span> <span data-ttu-id="3212d-120">Daha fazla bilgi için bkz. [nasıl yapılır: MMC ek bileşeni Ile sertifikaları görüntüleme](how-to-view-certificates-with-the-mmc-snap-in.md).</span><span class="sxs-lookup"><span data-stu-id="3212d-120">For more information, see [How to: View Certificates with the MMC Snap-in](how-to-view-certificates-with-the-mmc-snap-in.md).</span></span>

## <a name="certificate-stores"></a><span data-ttu-id="3212d-121">Sertifika depoları</span><span class="sxs-lookup"><span data-stu-id="3212d-121">Certificate Stores</span></span>

<span data-ttu-id="3212d-122">Sertifikalar mağazalarda bulunur.</span><span class="sxs-lookup"><span data-stu-id="3212d-122">Certificates are found in stores.</span></span> <span data-ttu-id="3212d-123">Alt depolara daha fazla bölündüğü iki ana depo konumu vardır.</span><span class="sxs-lookup"><span data-stu-id="3212d-123">Two major store locations exist that are further divided into sub-stores.</span></span> <span data-ttu-id="3212d-124">Bir bilgisayarda yöneticisiyseniz, her iki ana deposu da MMC ek bileşeni aracını kullanarak görüntüleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3212d-124">If you are the administrator on a computer, you can view both major stores by using the MMC snap-in tool.</span></span> <span data-ttu-id="3212d-125">Yönetici olmayanlar yalnızca geçerli kullanıcı deposunu görüntüleyebilir.</span><span class="sxs-lookup"><span data-stu-id="3212d-125">Non-administrators can view only the current user store.</span></span>

- <span data-ttu-id="3212d-126">**Yerel makine deposu**.</span><span class="sxs-lookup"><span data-stu-id="3212d-126">**The local machine store**.</span></span> <span data-ttu-id="3212d-127">Bu, ASP.NET gibi makine işlemlerinin eriştiği sertifikaları içerir.</span><span class="sxs-lookup"><span data-stu-id="3212d-127">This contains the certificates accessed by machine processes, such as ASP.NET.</span></span> <span data-ttu-id="3212d-128">Sunucu kimlik doğrulaması yapan sertifikaları istemcilere depolamak için bu konumu kullanın.</span><span class="sxs-lookup"><span data-stu-id="3212d-128">Use this location to store certificates that authenticate the server to clients.</span></span>

- <span data-ttu-id="3212d-129">**Geçerli kullanıcı deposu**.</span><span class="sxs-lookup"><span data-stu-id="3212d-129">**The current user store**.</span></span> <span data-ttu-id="3212d-130">Etkileşimli uygulamalar, genellikle bilgisayarın geçerli kullanıcısı için sertifikaları buraya yerleştirir.</span><span class="sxs-lookup"><span data-stu-id="3212d-130">Interactive applications typically place certificates here for the computer's current user.</span></span> <span data-ttu-id="3212d-131">Bir istemci uygulaması oluşturuyorsanız, bu, genellikle bir kullanıcının kimliğini doğrulamak için sertifikalar yerleştirdiğiniz yerdir.</span><span class="sxs-lookup"><span data-stu-id="3212d-131">If you are creating a client application, this is where you typically place certificates that authenticate a user to a service.</span></span>

<span data-ttu-id="3212d-132">Bu iki depo daha fazla alt depolarına bölünmüştür.</span><span class="sxs-lookup"><span data-stu-id="3212d-132">These two stores are further divided into sub-stores.</span></span> <span data-ttu-id="3212d-133">WCF ile programlama yaparken bunların en önemlileri şunlardır:</span><span class="sxs-lookup"><span data-stu-id="3212d-133">The most important of these when programming with WCF include:</span></span>

- <span data-ttu-id="3212d-134">**Güvenilen kök sertifika yetkilileri**.</span><span class="sxs-lookup"><span data-stu-id="3212d-134">**Trusted Root Certification Authorities**.</span></span> <span data-ttu-id="3212d-135">Bu depodaki sertifikaları, bu depodaki bir sertifika yetkilisi sertifikasına geri izleyebileceğiniz bir sertifika zinciri oluşturmak için kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3212d-135">You can use the certificates in this store to create a chain of certificates, which can be traced back to a certification authority certificate in this store.</span></span>

  > [!IMPORTANT]
  > <span data-ttu-id="3212d-136">Sertifika, güvenilen bir üçüncü taraf sertifika yetkilisinden gelmese de, yerel bilgisayar bu depoya yerleştirilmiş herhangi bir sertifikaya dolaylı olarak güvenir.</span><span class="sxs-lookup"><span data-stu-id="3212d-136">The local computer implicitly trusts any certificate placed in this store, even if the certificate does not come from a trusted third-party certification authority.</span></span> <span data-ttu-id="3212d-137">Bu nedenle, verenle tam olarak güvenmediğiniz ve sonuçları anlamadığınız müddetçe bu depoya herhangi bir sertifika yerleştirmeyin.</span><span class="sxs-lookup"><span data-stu-id="3212d-137">For this reason, do not place any certificate into this store unless you fully trust the issuer and understand the consequences.</span></span>

- <span data-ttu-id="3212d-138">**Kişisel**.</span><span class="sxs-lookup"><span data-stu-id="3212d-138">**Personal**.</span></span> <span data-ttu-id="3212d-139">Bu depo, bir bilgisayarın kullanıcısı ile ilişkili sertifikalar için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="3212d-139">This store is used for certificates associated with a user of a computer.</span></span> <span data-ttu-id="3212d-140">Genellikle bu mağaza, güvenilen kök sertifika yetkilileri deposunda bulunan sertifika yetkilisi sertifikalarından biri tarafından verilen sertifikalar için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="3212d-140">Typically this store is used for certificates issued by one of the certification authority certificates found in the Trusted Root Certification Authorities store.</span></span> <span data-ttu-id="3212d-141">Alternatif olarak, burada bulunan bir sertifika bir uygulama tarafından kendine verilmiş ve güvenilir olabilir.</span><span class="sxs-lookup"><span data-stu-id="3212d-141">Alternatively, a certificate found here may be self-issued and trusted by an application.</span></span>

<span data-ttu-id="3212d-142">Sertifika depoları hakkında daha fazla bilgi için bkz. [sertifika depoları](/windows/desktop/secauthn/certificate-stores).</span><span class="sxs-lookup"><span data-stu-id="3212d-142">For more information about certificate stores, see [Certificate Stores](/windows/desktop/secauthn/certificate-stores).</span></span>

### <a name="selecting-a-store"></a><span data-ttu-id="3212d-143">Mağaza seçme</span><span class="sxs-lookup"><span data-stu-id="3212d-143">Selecting a Store</span></span>

<span data-ttu-id="3212d-144">Bir sertifikanın depolanacağı yeri seçme, hizmet veya istemcinin nasıl ve ne zaman çalıştığını bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="3212d-144">Selecting where to store a certificate depends how and when the service or client runs.</span></span> <span data-ttu-id="3212d-145">Aşağıdaki genel kurallar geçerlidir:</span><span class="sxs-lookup"><span data-stu-id="3212d-145">The following general rules apply:</span></span>

- <span data-ttu-id="3212d-146">WCF hizmeti bir Windows hizmetinde barındırılıyorsa **yerel makine** deposunu kullanın.</span><span class="sxs-lookup"><span data-stu-id="3212d-146">If the WCF service is hosted in a Windows service use the **local machine** store.</span></span> <span data-ttu-id="3212d-147">Sertifikaları yerel makine deposuna yüklemek için yönetici ayrıcalıklarının gerekli olduğunu unutmayın.</span><span class="sxs-lookup"><span data-stu-id="3212d-147">Note that administrator privileges are required to install certificates into the local machine store.</span></span>

- <span data-ttu-id="3212d-148">Hizmet veya istemci, bir kullanıcı hesabı altında çalışan bir uygulama ise, **Geçerli Kullanıcı** deposunu kullanın.</span><span class="sxs-lookup"><span data-stu-id="3212d-148">If the service or client is an application that runs under a user account, then use the **current user** store.</span></span>

### <a name="accessing-stores"></a><span data-ttu-id="3212d-149">Mağazalara erişme</span><span class="sxs-lookup"><span data-stu-id="3212d-149">Accessing Stores</span></span>

<span data-ttu-id="3212d-150">Depolar, tıpkı bir bilgisayardaki klasörler gibi erişim denetim listeleriyle (ACL 'Ler) korunur.</span><span class="sxs-lookup"><span data-stu-id="3212d-150">Stores are protected by access control lists (ACLs), just like folders on a computer.</span></span> <span data-ttu-id="3212d-151">Internet Information Services (IIS) tarafından barındırılan bir hizmet oluştururken ASP.NET işlemi ASP.NET hesabı altında çalışır.</span><span class="sxs-lookup"><span data-stu-id="3212d-151">When creating a service hosted by Internet Information Services (IIS), the ASP.NET process runs under the ASP.NET account.</span></span> <span data-ttu-id="3212d-152">Bu hesabın, bir hizmetin kullandığı sertifikaları içeren mağazaya erişimi olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="3212d-152">That account must have access to the store that contains the certificates a service uses.</span></span> <span data-ttu-id="3212d-153">Ana mağazaların her biri varsayılan bir erişim listesiyle korunur, ancak listeler değiştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="3212d-153">Each of the major stores is protected with a default access list, but the lists can be modified.</span></span> <span data-ttu-id="3212d-154">Bir depoya erişmek için ayrı bir rol oluşturursanız, bu rol erişim iznini vermeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="3212d-154">If you create a separate role to access a store, you must grant that role access permission.</span></span> <span data-ttu-id="3212d-155">WinHttpCertConfig. exe aracını kullanarak erişim listesini değiştirme hakkında bilgi edinmek için bkz. [nasıl yapılır: geliştirme sırasında kullanılmak üzere geçici sertifikalar oluşturma](how-to-create-temporary-certificates-for-use-during-development.md).</span><span class="sxs-lookup"><span data-stu-id="3212d-155">To learn how to modify the access list using the WinHttpCertConfig.exe tool, see [How to: Create Temporary Certificates for Use During Development](how-to-create-temporary-certificates-for-use-during-development.md).</span></span>

## <a name="chain-trust-and-certificate-authorities"></a><span data-ttu-id="3212d-156">Zincir güveni ve sertifika yetkilileri</span><span class="sxs-lookup"><span data-stu-id="3212d-156">Chain Trust and Certificate Authorities</span></span>

<span data-ttu-id="3212d-157">Sertifikalar, her ayrı sertifikanın sertifikayı veren CA 'ya bağlandığı bir hiyerarşide oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="3212d-157">Certificates are created in a hierarchy where each individual certificate is linked to the CA that issued the certificate.</span></span> <span data-ttu-id="3212d-158">Bu bağlantı, CA 'nın sertifikasına ait olur.</span><span class="sxs-lookup"><span data-stu-id="3212d-158">This link is to the CA’s certificate.</span></span> <span data-ttu-id="3212d-159">CA 'nın sertifikası, özgün CA 'nın sertifikasını veren CA 'ya bağlanır.</span><span class="sxs-lookup"><span data-stu-id="3212d-159">The CA’s certificate then links to the CA that issued the original CA’s certificate.</span></span> <span data-ttu-id="3212d-160">Bu işlem, kök CA sertifikasına ulaşılana kadar yinelenir.</span><span class="sxs-lookup"><span data-stu-id="3212d-160">This process is repeated up until the Root CA’s certificate is reached.</span></span> <span data-ttu-id="3212d-161">Kök CA 'nın sertifikası, doğal olarak güvenilirdir.</span><span class="sxs-lookup"><span data-stu-id="3212d-161">The Root CA’s certificate is inherently trusted.</span></span>

<span data-ttu-id="3212d-162">Dijital sertifikalar, *güven zinciri*olarak da adlandırılan bu hiyerarşiye bağlı olarak bir varlığın kimliğini doğrulamak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="3212d-162">Digital certificates are used to authenticate an entity by relying on this hierarchy, also called a *chain of trust*.</span></span> <span data-ttu-id="3212d-163">Herhangi bir sertifikaya çift tıklayarak ve ardından **sertifika yolu** sekmesine TıKLAYARAK, MMC ek bileşenini kullanarak herhangi bir sertifikanın zincirini görüntüleyebilirsiniz. Bir sertifika yetkilisi için sertifika zincirlerini alma hakkında daha fazla bilgi için bkz. [nasıl yapılır: Imzaları doğrulamak Için kullanılan sertifika yetkilisi sertifika zincirini belirtme](specify-the-certificate-authority-chain-verify-signatures-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="3212d-163">You can view any certificate's chain using the MMC snap-in by double-clicking any certificate, then clicking the **Certificate Path** tab. For more information about importing certificate chains for a Certification authority, see [How to: Specify the Certificate Authority Certificate Chain Used to Verify Signatures](specify-the-certificate-authority-chain-verify-signatures-wcf.md).</span></span>

> [!NOTE]
> <span data-ttu-id="3212d-164">Herhangi bir veren, verenin sertifikasını Güvenilen kök yetkili sertifika deposuna yerleştirerek güvenilen bir kök yetkilisi belirlenebilir.</span><span class="sxs-lookup"><span data-stu-id="3212d-164">Any issuer can be designated a trusted root authority by placing the issuer's certificate in the trusted root authority certificate store.</span></span>

### <a name="disabling-chain-trust"></a><span data-ttu-id="3212d-165">Zincir güvenini devre dışı bırakma</span><span class="sxs-lookup"><span data-stu-id="3212d-165">Disabling Chain Trust</span></span>

<span data-ttu-id="3212d-166">Yeni bir hizmet oluştururken, güvenilen kök sertifika tarafından verilmemiş bir sertifika kullanıyor olabilirsiniz veya veren sertifika, güvenilen kök sertifika yetkilileri deposunda bulunmayabilir.</span><span class="sxs-lookup"><span data-stu-id="3212d-166">When creating a new service, you may be using a certificate that is not issued by a trusted root certificate, or the issuing certificate itself may not be in the Trusted Root Certification Authorities store.</span></span> <span data-ttu-id="3212d-167">Yalnızca geliştirme amacıyla, bir sertifika için güven zincirini denetleyen mekanizmayı geçici olarak devre dışı bırakabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3212d-167">For development purposes only, you can temporarily disable the mechanism that checks the chain of trust for a certificate.</span></span> <span data-ttu-id="3212d-168">Bunu yapmak için, özelliğini ya `CertificateValidationMode` da olarak ayarlayın `PeerTrust` `PeerOrChainTrust` .</span><span class="sxs-lookup"><span data-stu-id="3212d-168">To do this, set the `CertificateValidationMode` property to either `PeerTrust` or `PeerOrChainTrust`.</span></span> <span data-ttu-id="3212d-169">Her iki mod da, sertifikanın kendi kendine yayınlanan (eş güven) veya bir güven zincirinin parçası olduğunu belirtir.</span><span class="sxs-lookup"><span data-stu-id="3212d-169">Either mode specifies that the certificate can either be self-issued (peer trust) or part of a chain of trust.</span></span> <span data-ttu-id="3212d-170">Özelliğini aşağıdaki sınıfların herhangi birinde ayarlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3212d-170">You can set the property on any of the following classes.</span></span>

|<span data-ttu-id="3212d-171">Sınıf</span><span class="sxs-lookup"><span data-stu-id="3212d-171">Class</span></span>|<span data-ttu-id="3212d-172">Özellik</span><span class="sxs-lookup"><span data-stu-id="3212d-172">Property</span></span>|
|-----------|--------------|
|<xref:System.ServiceModel.Security.X509ClientCertificateAuthentication>|<xref:System.ServiceModel.Security.X509ClientCertificateAuthentication.CertificateValidationMode%2A?displayProperty=nameWithType>|
|<xref:System.ServiceModel.Security.X509PeerCertificateAuthentication>|<xref:System.ServiceModel.Security.X509PeerCertificateAuthentication.CertificateValidationMode%2A?displayProperty=nameWithType>|
|<xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication>|<xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication.CertificateValidationMode%2A?displayProperty=nameWithType>|
|<xref:System.ServiceModel.Security.IssuedTokenServiceCredential>|<xref:System.ServiceModel.Security.IssuedTokenServiceCredential.CertificateValidationMode%2A?displayProperty=nameWithType>|

<span data-ttu-id="3212d-173">Özelliği yapılandırma kullanarak da ayarlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3212d-173">You can also set the property using configuration.</span></span> <span data-ttu-id="3212d-174">Doğrulama modunu belirtmek için aşağıdaki öğeler kullanılır:</span><span class="sxs-lookup"><span data-stu-id="3212d-174">The following elements are used to specify the validation mode:</span></span>

- [\<authentication>](../../configure-apps/file-schema/wcf/authentication-of-servicecertificate-element.md)

- [\<peerAuthentication>](../../configure-apps/file-schema/wcf/peerauthentication-element.md)

- [\<messageSenderAuthentication>](../../configure-apps/file-schema/wcf/messagesenderauthentication-element.md)

## <a name="custom-authentication"></a><span data-ttu-id="3212d-175">Özel kimlik doğrulaması</span><span class="sxs-lookup"><span data-stu-id="3212d-175">Custom Authentication</span></span>

<span data-ttu-id="3212d-176">`CertificateValidationMode`Özelliği, sertifikaların nasıl doğrulandığını özelleştirmenize de olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="3212d-176">The `CertificateValidationMode` property also enables you to customize how certificates are authenticated.</span></span> <span data-ttu-id="3212d-177">Varsayılan olarak, düzeyi olarak ayarlanır `ChainTrust` .</span><span class="sxs-lookup"><span data-stu-id="3212d-177">By default, the level is set to `ChainTrust`.</span></span> <span data-ttu-id="3212d-178">Değerini kullanmak için <xref:System.ServiceModel.Security.X509CertificateValidationMode.Custom> , `CustomCertificateValidatorType` bir derlemeyi ve sertifikayı doğrulamak için kullanılan türünü de özniteliğini ayarlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="3212d-178">To use the <xref:System.ServiceModel.Security.X509CertificateValidationMode.Custom> value, you must also set the `CustomCertificateValidatorType` attribute to an assembly and type used to validate the certificate.</span></span> <span data-ttu-id="3212d-179">Özel Doğrulayıcı oluşturmak için soyut sınıftan devralması gerekir <xref:System.IdentityModel.Selectors.X509CertificateValidator> .</span><span class="sxs-lookup"><span data-stu-id="3212d-179">To create a custom validator, you must inherit from the abstract <xref:System.IdentityModel.Selectors.X509CertificateValidator> class.</span></span>

<span data-ttu-id="3212d-180">Özel bir Authenticator oluştururken, geçersiz kılmak için en önemli Yöntem <xref:System.IdentityModel.Selectors.X509CertificateValidator.Validate%2A> yöntemidir.</span><span class="sxs-lookup"><span data-stu-id="3212d-180">When creating a custom authenticator, the most important method to override is the <xref:System.IdentityModel.Selectors.X509CertificateValidator.Validate%2A> method.</span></span> <span data-ttu-id="3212d-181">Özel kimlik doğrulama örneği için bkz. [X. 509.440 sertifika Doğrulayıcısı](../samples/x-509-certificate-validator.md) örneği.</span><span class="sxs-lookup"><span data-stu-id="3212d-181">For an example of custom authentication, see the [X.509 Certificate Validator](../samples/x-509-certificate-validator.md) sample.</span></span> <span data-ttu-id="3212d-182">Daha fazla bilgi için bkz. [özel kimlik bilgileri ve kimlik bilgisi doğrulaması](../extending/custom-credential-and-credential-validation.md).</span><span class="sxs-lookup"><span data-stu-id="3212d-182">For more information, see [Custom Credential and Credential Validation](../extending/custom-credential-and-credential-validation.md).</span></span>

## <a name="using-the-powershell-new-selfsignedcertificate-cmdlet-to-build-a-certificate-chain"></a><span data-ttu-id="3212d-183">Bir sertifika zinciri oluşturmak için PowerShell New-SelfSignedCertificate cmdlet 'Ini kullanma</span><span class="sxs-lookup"><span data-stu-id="3212d-183">Using the PowerShell New-SelfSignedCertificate Cmdlet to Build a Certificate Chain</span></span>

<span data-ttu-id="3212d-184">PowerShell New-SelfSignedCertificate cmdlet 'i X. 509.952 sertifikaları ve özel anahtar/ortak anahtar çiftleri oluşturur.</span><span class="sxs-lookup"><span data-stu-id="3212d-184">The PowerShell New-SelfSignedCertificate cmdlet creates X.509 certificates and private key/public key pairs.</span></span> <span data-ttu-id="3212d-185">Özel anahtarı diske kaydedebilir ve ardından yeni sertifikalar vermek ve imzalamak için kullanabilir ve böylece zincirleme sertifikaların bir hiyerarşisinin benzetimini yapabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3212d-185">You can save the private key to disk and then use it to issue and sign new certificates, thus simulating a hierarchy of chained certificates.</span></span> <span data-ttu-id="3212d-186">Cmdlet 'i, yalnızca hizmet geliştirirken bir yardım olarak kullanılmak üzere tasarlanmıştır ve gerçek dağıtıma yönelik sertifikalar oluşturmak için asla kullanılmamalıdır.</span><span class="sxs-lookup"><span data-stu-id="3212d-186">The cmdlet is intended for use only as an aid when developing services and should never be used to create certificates for actual deployment.</span></span> <span data-ttu-id="3212d-187">Bir WCF hizmeti geliştirirken, New-SelfSignedCertificate cmdlet 'i ile bir güven zinciri oluşturmak için aşağıdaki adımları kullanın.</span><span class="sxs-lookup"><span data-stu-id="3212d-187">When developing a WCF service, use the following steps to build a chain of trust with the New-SelfSignedCertificate cmdlet.</span></span>

#### <a name="to-build-a-chain-of-trust-with-the-new-selfsignedcertificate-cmdlet"></a><span data-ttu-id="3212d-188">New-SelfSignedCertificate cmdlet 'i ile bir güven zinciri oluşturmak için</span><span class="sxs-lookup"><span data-stu-id="3212d-188">To build a chain of trust with the New-SelfSignedCertificate cmdlet</span></span>

1. <span data-ttu-id="3212d-189">New-SelfSignedCertificate cmdlet 'ini kullanarak geçici bir kök yetkilisi (otomatik imzalı) sertifikası oluşturun.</span><span class="sxs-lookup"><span data-stu-id="3212d-189">Create a temporary root authority (self-signed) certificate using the New-SelfSignedCertificate cmdlet.</span></span> <span data-ttu-id="3212d-190">Özel anahtarı diske kaydedin.</span><span class="sxs-lookup"><span data-stu-id="3212d-190">Save the private key to the disk.</span></span>

2. <span data-ttu-id="3212d-191">Ortak anahtarı içeren başka bir sertifika vermek için yeni sertifikayı kullanın.</span><span class="sxs-lookup"><span data-stu-id="3212d-191">Use the new certificate to issue another certificate that contains the public key.</span></span>

3. <span data-ttu-id="3212d-192">Kök yetkilisi sertifikasını Güvenilen kök sertifika yetkilileri deposuna aktarın.</span><span class="sxs-lookup"><span data-stu-id="3212d-192">Import the root authority certificate into the Trusted Root Certification Authorities store.</span></span>

4. <span data-ttu-id="3212d-193">Adım adım yönergeler için bkz. [nasıl yapılır: geliştirme sırasında kullanılmak üzere geçici sertifikalar oluşturma](how-to-create-temporary-certificates-for-use-during-development.md).</span><span class="sxs-lookup"><span data-stu-id="3212d-193">For step-by-step instructions, see [How to: Create Temporary Certificates for Use During Development](how-to-create-temporary-certificates-for-use-during-development.md).</span></span>

## <a name="which-certificate-to-use"></a><span data-ttu-id="3212d-194">Hangi sertifikayı kullanacak?</span><span class="sxs-lookup"><span data-stu-id="3212d-194">Which Certificate to Use?</span></span>

<span data-ttu-id="3212d-195">Sertifikalar hakkında sık sorulan sorular, hangi sertifikanın kullanılacağı ve neden.</span><span class="sxs-lookup"><span data-stu-id="3212d-195">Common questions about certificates are which certificate to use, and why.</span></span> <span data-ttu-id="3212d-196">Yanıt, bir istemciyi veya hizmeti programlayıp programlamanıza bağlı olarak değişir.</span><span class="sxs-lookup"><span data-stu-id="3212d-196">The answer depends on whether you are programming a client or service.</span></span> <span data-ttu-id="3212d-197">Aşağıdaki bilgiler genel bir kılavuz sağlar ve bu sorulara kapsamlı bir yanıt değildir.</span><span class="sxs-lookup"><span data-stu-id="3212d-197">The following information provides a general guideline and is not an exhaustive answer to these questions.</span></span>

### <a name="service-certificates"></a><span data-ttu-id="3212d-198">Hizmet sertifikaları</span><span class="sxs-lookup"><span data-stu-id="3212d-198">Service Certificates</span></span>

<span data-ttu-id="3212d-199">Hizmet sertifikalarında, istemcilerin istemci kimliğini doğrulama birincil görevi vardır.</span><span class="sxs-lookup"><span data-stu-id="3212d-199">Service certificates have the primary task of authenticating the server to clients.</span></span> <span data-ttu-id="3212d-200">İlk denetimlerden biri, bir istemcinin sunucu kimliğini doğruladığında, **Konu** alanının değerini hizmetle iletişim kurmak Için kullanılan Tekdüzen Kaynak tanımlayıcısı (URI) ile karşılaştırmaktır: her IKISININ de DNS eşleşmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="3212d-200">One of the initial checks when a client authenticates a server is to compare the value of the **Subject** field to the Uniform Resource Identifier (URI) used to contact the service: the DNS of both must match.</span></span> <span data-ttu-id="3212d-201">Örneğin, hizmetin URI 'SI `http://www.contoso.com/endpoint/` daha sonra **Konu** alanının da değeri içermesi gerekir `www.contoso.com` .</span><span class="sxs-lookup"><span data-stu-id="3212d-201">For example, if the URI of the service is `http://www.contoso.com/endpoint/` then the **Subject** field must also contain the value `www.contoso.com`.</span></span>

<span data-ttu-id="3212d-202">Alanın, her biri değeri belirtmek için bir başlatma ile birlikte birden çok değer içerebileceğini unutmayın.</span><span class="sxs-lookup"><span data-stu-id="3212d-202">Note that the field can contain several values, each prefixed with an initialization to indicate the value.</span></span> <span data-ttu-id="3212d-203">En yaygın olarak, başlatma, örneğin, ortak ad için "CN" dir `CN = www.contoso.com` .</span><span class="sxs-lookup"><span data-stu-id="3212d-203">Most commonly, the initialization is "CN" for common name, for example, `CN = www.contoso.com`.</span></span> <span data-ttu-id="3212d-204">**Konu** alanının boş olması da mümkündür, bu durumda **konu alternatif adı** alanı **DNS ad** değerini içerebilir.</span><span class="sxs-lookup"><span data-stu-id="3212d-204">It is also possible for the **Subject** field to be blank, in which case the **Subject Alternative Name** field can contain the **DNS Name** value.</span></span>

<span data-ttu-id="3212d-205">Ayrıca, sertifikanın **amaçlanan amaçlar** alanının değeri, "sunucu kimlik doğrulaması" veya "Istemci kimlik doğrulaması" gibi uygun bir değer içermelidir.</span><span class="sxs-lookup"><span data-stu-id="3212d-205">Also note the value of the **Intended Purposes** field of the certificate should include an appropriate value, such as "Server Authentication" or "Client Authentication".</span></span>

### <a name="client-certificates"></a><span data-ttu-id="3212d-206">İstemci Sertifikaları</span><span class="sxs-lookup"><span data-stu-id="3212d-206">Client Certificates</span></span>

<span data-ttu-id="3212d-207">İstemci sertifikaları genellikle üçüncü taraf bir sertifika yetkilisi tarafından verilmez.</span><span class="sxs-lookup"><span data-stu-id="3212d-207">Client certificates are not typically issued by a third-party certification authority.</span></span> <span data-ttu-id="3212d-208">Bunun yerine, geçerli kullanıcı konumunun kişisel deposu genellikle, "Istemci kimlik doğrulaması" amacını taşıyan bir kök yetkilisi tarafından verilen sertifikaları içerir.</span><span class="sxs-lookup"><span data-stu-id="3212d-208">Instead, the Personal store of the current user location typically contains certificates placed there by a root authority, with an intended purpose of "Client Authentication".</span></span> <span data-ttu-id="3212d-209">İstemci, karşılıklı kimlik doğrulaması gerektiğinde böyle bir sertifikayı kullanabilir.</span><span class="sxs-lookup"><span data-stu-id="3212d-209">The client can use such a certificate when mutual authentication is required.</span></span>

## <a name="online-revocation-and-offline-revocation"></a><span data-ttu-id="3212d-210">Çevrimiçi Iptal ve çevrimdışı Iptal</span><span class="sxs-lookup"><span data-stu-id="3212d-210">Online Revocation and Offline Revocation</span></span>

### <a name="certificate-validity"></a><span data-ttu-id="3212d-211">Sertifika geçerliliği</span><span class="sxs-lookup"><span data-stu-id="3212d-211">Certificate Validity</span></span>

<span data-ttu-id="3212d-212">Her sertifika, *geçerlilik süresi*olarak adlandırılan belirli bir süre için geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="3212d-212">Every certificate is valid only for a given period of time, called the *validity period*.</span></span> <span data-ttu-id="3212d-213">Geçerlilik süresi, bir X. 509.952 sertifikası tarafından **geçerli olan** ve **geçerli** bir alan tarafından tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="3212d-213">The validity period is defined by the **Valid from** and **Valid to** fields of an X.509 certificate.</span></span> <span data-ttu-id="3212d-214">Kimlik doğrulama sırasında sertifika, sertifikanın hala geçerlilik süresi içinde olup olmadığını belirlemekte denetlenir.</span><span class="sxs-lookup"><span data-stu-id="3212d-214">During authentication, the certificate is checked to determine whether the certificate is still within the validity period.</span></span>

### <a name="certificate-revocation-list"></a><span data-ttu-id="3212d-215">Sertifika Iptal listesi</span><span class="sxs-lookup"><span data-stu-id="3212d-215">Certificate Revocation List</span></span>

<span data-ttu-id="3212d-216">Geçerlilik süresi boyunca herhangi bir zamanda, sertifika yetkilisi bir sertifikayı iptal edebilir.</span><span class="sxs-lookup"><span data-stu-id="3212d-216">At any time during the validity period, the certification authority can revoke a certificate.</span></span> <span data-ttu-id="3212d-217">Bu, sertifikanın özel anahtarıyla ilgili bir uzlaşma olması gibi birçok nedenden kaynaklanabilir.</span><span class="sxs-lookup"><span data-stu-id="3212d-217">This can occur for many reasons, such as a compromise of the private key of the certificate.</span></span>

<span data-ttu-id="3212d-218">Bu gerçekleştiğinde, iptal edilen sertifikadan gelen tüm zincirler de geçersiz olur ve kimlik doğrulama yordamları sırasında güvenilir değildir.</span><span class="sxs-lookup"><span data-stu-id="3212d-218">When this occurs, any chains that descend from the revoked certificate are also invalid, and are not trusted during authentication procedures.</span></span> <span data-ttu-id="3212d-219">Hangi sertifikaların iptal edildiğini öğrenmek için, her veren bir zaman ve Tarih damgalı *sertifika iptal listesi* (CRL) yayınlar.</span><span class="sxs-lookup"><span data-stu-id="3212d-219">To find out which certificates are revoked, each issuer publishes a time- and date-stamped *certificate revocation list* (CRL).</span></span> <span data-ttu-id="3212d-220">Liste, `RevocationMode` aşağıdaki sınıfların veya özelliği sabit listesi değerlerinden birine ayarlanarak çevrimiçi iptal veya çevrimdışı iptali kullanılarak denetlenebilir `DefaultRevocationMode` <xref:System.Security.Cryptography.X509Certificates.X509RevocationMode> : <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication> , <xref:System.ServiceModel.Security.X509PeerCertificateAuthentication> , <xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication> ve <xref:System.ServiceModel.Security.IssuedTokenServiceCredential> sınıfları.</span><span class="sxs-lookup"><span data-stu-id="3212d-220">The list can be checked using either online revocation or offline revocation by setting the `RevocationMode` or `DefaultRevocationMode` property of the following classes to one of the <xref:System.Security.Cryptography.X509Certificates.X509RevocationMode> enumeration values: <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication>, <xref:System.ServiceModel.Security.X509PeerCertificateAuthentication>, <xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication>, and the <xref:System.ServiceModel.Security.IssuedTokenServiceCredential> classes.</span></span> <span data-ttu-id="3212d-221">Tüm özellikler için varsayılan değer `Online` .</span><span class="sxs-lookup"><span data-stu-id="3212d-221">The default value for all properties is `Online`.</span></span>

<span data-ttu-id="3212d-222">Ayrıca, yapılandırma modunu `revocationMode` hem [\<authentication>](../../configure-apps/file-schema/wcf/authentication-of-clientcertificate-element.md) (öğesinin) hem de (öğesinin) özniteliğini kullanarak ayarlayabilirsiniz [\<serviceBehaviors>](../../configure-apps/file-schema/wcf/servicebehaviors.md) [\<authentication>](../../configure-apps/file-schema/wcf/authentication-of-clientcertificate-element.md) [\<endpointBehaviors>](../../configure-apps/file-schema/wcf/endpointbehaviors.md) .</span><span class="sxs-lookup"><span data-stu-id="3212d-222">You can also set the mode in configuration using the `revocationMode` attribute of both the [\<authentication>](../../configure-apps/file-schema/wcf/authentication-of-clientcertificate-element.md) (of the [\<serviceBehaviors>](../../configure-apps/file-schema/wcf/servicebehaviors.md)) and the [\<authentication>](../../configure-apps/file-schema/wcf/authentication-of-clientcertificate-element.md) (of the [\<endpointBehaviors>](../../configure-apps/file-schema/wcf/endpointbehaviors.md)).</span></span>

## <a name="the-setcertificate-method"></a><span data-ttu-id="3212d-223">SetCertificate yöntemi</span><span class="sxs-lookup"><span data-stu-id="3212d-223">The SetCertificate Method</span></span>

<span data-ttu-id="3212d-224">WCF 'de, bir hizmet veya istemcinin bir iletiyi doğrulamak, şifrelemek veya dijital olarak imzalamak için kullanması gereken bir sertifikayı veya sertifika kümesini belirtmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="3212d-224">In WCF, you must often specify a certificate or set of certificates a service or client is to use to authenticate, encrypt, or digitally sign a message.</span></span> <span data-ttu-id="3212d-225">Bunu, `SetCertificate` X. 509.440 sertifikalarını temsil eden çeşitli sınıfların yöntemini kullanarak programlı bir şekilde yapabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3212d-225">You can do this programmatically by using the `SetCertificate` method of various classes that represent X.509 certificates.</span></span> <span data-ttu-id="3212d-226">Aşağıdaki sınıflar, `SetCertificate` bir sertifika belirtmek için yöntemini kullanır.</span><span class="sxs-lookup"><span data-stu-id="3212d-226">The following classes use the `SetCertificate` method to specify a certificate.</span></span>

|<span data-ttu-id="3212d-227">Sınıf</span><span class="sxs-lookup"><span data-stu-id="3212d-227">Class</span></span>|<span data-ttu-id="3212d-228">Yöntem</span><span class="sxs-lookup"><span data-stu-id="3212d-228">Method</span></span>|
|-----------|------------|
|<xref:System.ServiceModel.Security.PeerCredential>|<xref:System.ServiceModel.Security.PeerCredential.SetCertificate%2A>|
|<xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential>|<xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A>|
|<xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential>|<xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential.SetCertificate%2A>|
|<xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential>|
|<xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential.SetCertificate%2A>|

<span data-ttu-id="3212d-229">`SetCertificate`Yöntemi, bir depo konumu ve mağaza tanımlayarak çalışarak, sertifikanın alanını belirten bir "Find" türü ( `x509FindType` parametre) ve alanda bulunacak bir değer.</span><span class="sxs-lookup"><span data-stu-id="3212d-229">The `SetCertificate` method works by designating a store location and store, a "find" type (`x509FindType` parameter) that specifies a field of the certificate, and a value to find in the field.</span></span> <span data-ttu-id="3212d-230">Örneğin, aşağıdaki kod bir <xref:System.ServiceModel.ServiceHost> örnek oluşturur ve hizmeti kimlik doğrulaması için kullanılan hizmet sertifikasını yöntemiyle istemcilere ayarlar `SetCertificate` .</span><span class="sxs-lookup"><span data-stu-id="3212d-230">For example, the following code creates a <xref:System.ServiceModel.ServiceHost> instance and sets the service certificate used to authenticate the service to clients with the `SetCertificate` method.</span></span>

[!code-csharp[c_WorkingWithCertificates#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_workingwithcertificates/cs/source.cs#1)]
[!code-vb[c_WorkingWithCertificates#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_workingwithcertificates/vb/source.vb#1)]

### <a name="multiple-certificates-with-the-same-value"></a><span data-ttu-id="3212d-231">Aynı değere sahip birden fazla sertifika</span><span class="sxs-lookup"><span data-stu-id="3212d-231">Multiple Certificates with the Same Value</span></span>

<span data-ttu-id="3212d-232">Bir mağaza aynı konu adına sahip birden çok sertifika içerebilir.</span><span class="sxs-lookup"><span data-stu-id="3212d-232">A store may contain multiple certificates with the same subject name.</span></span> <span data-ttu-id="3212d-233">Yani, `x509FindType` <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindBySubjectName> veya <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindBySubjectDistinguishedName> ' nin aynı değere sahip olduğunu belirtirseniz, hangi sertifikanın gerekli olduğunu ayırt etmenin bir yolu olmadığından bir özel durum oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="3212d-233">This means that if you specify that the `x509FindType` is <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindBySubjectName> or <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindBySubjectDistinguishedName>, and more than one certificate has the same value, an exception is thrown because there is no way to distinguish which certificate is required.</span></span> <span data-ttu-id="3212d-234">' A ayarlayarak bunu azaltabilirsiniz `x509FindType` <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByThumbprint> .</span><span class="sxs-lookup"><span data-stu-id="3212d-234">You can mitigate this by setting the `x509FindType` to <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByThumbprint>.</span></span> <span data-ttu-id="3212d-235">Parmak izi alanı, bir depodaki belirli bir sertifikayı bulmak için kullanılabilecek benzersiz bir değer içerir.</span><span class="sxs-lookup"><span data-stu-id="3212d-235">The thumbprint field contains a unique value that can be used to find a specific certificate in a store.</span></span> <span data-ttu-id="3212d-236">Bununla birlikte, bunun kendi dezavantajı vardır: sertifika iptal edildiğinde veya yenilendiğinde, `SetCertificate` parmak izi de geçmiş olduğundan yöntem başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="3212d-236">However, this has its own disadvantage: if the certificate is revoked or renewed, the `SetCertificate` method fails because the thumbprint is also gone.</span></span> <span data-ttu-id="3212d-237">Ya da sertifika artık geçerli değilse, kimlik doğrulaması başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="3212d-237">Or, if the certificate is no longer valid, authentication fails.</span></span> <span data-ttu-id="3212d-238">Bunu hafifletmenin yolu, `x590FindType` parametresini olarak ayarlamak <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByIssuerName> ve verenin adını belirtmektir.</span><span class="sxs-lookup"><span data-stu-id="3212d-238">The way to mitigate this is to set the `x590FindType` parameter to <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByIssuerName> and specify the issuer's name.</span></span> <span data-ttu-id="3212d-239">Belirli bir veren gerekmiyorsa, gibi diğer numaralandırma değerlerinden birini de ayarlayabilirsiniz <xref:System.Security.Cryptography.X509Certificates.X509FindType> <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByTimeValid> .</span><span class="sxs-lookup"><span data-stu-id="3212d-239">If no particular issuer is required, you can also set one of the other <xref:System.Security.Cryptography.X509Certificates.X509FindType> enumeration values, such as <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByTimeValid>.</span></span>

## <a name="certificates-in-configuration"></a><span data-ttu-id="3212d-240">Yapılandırmadaki sertifikalar</span><span class="sxs-lookup"><span data-stu-id="3212d-240">Certificates in Configuration</span></span>

<span data-ttu-id="3212d-241">Sertifikaları, yapılandırma kullanarak da ayarlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3212d-241">You can also set certificates by using configuration.</span></span> <span data-ttu-id="3212d-242">Bir hizmet oluşturuyorsanız, Sertifikalar dahil olmak üzere kimlik bilgileri altında belirtilir [\<serviceBehaviors>](../../configure-apps/file-schema/wcf/servicebehaviors.md) .</span><span class="sxs-lookup"><span data-stu-id="3212d-242">If you are creating a service, credentials, including certificates, are specified under the [\<serviceBehaviors>](../../configure-apps/file-schema/wcf/servicebehaviors.md).</span></span> <span data-ttu-id="3212d-243">Bir istemciyi programlarken, sertifikalar altında belirtilir [\<endpointBehaviors>](../../configure-apps/file-schema/wcf/endpointbehaviors.md) .</span><span class="sxs-lookup"><span data-stu-id="3212d-243">When you are programming a client, certificates are specified under the [\<endpointBehaviors>](../../configure-apps/file-schema/wcf/endpointbehaviors.md).</span></span>

## <a name="mapping-a-certificate-to-a-user-account"></a><span data-ttu-id="3212d-244">Bir sertifikayı bir kullanıcı hesabıyla eşleme</span><span class="sxs-lookup"><span data-stu-id="3212d-244">Mapping a Certificate to a User Account</span></span>

<span data-ttu-id="3212d-245">IIS ve Active Directory özelliği bir sertifikayı Windows Kullanıcı hesabına eşleyebilme yeteneğidir.</span><span class="sxs-lookup"><span data-stu-id="3212d-245">A feature of IIS and Active Directory is the ability to map a certificate to a Windows user account.</span></span> <span data-ttu-id="3212d-246">Özelliği hakkında daha fazla bilgi için bkz. [sertifikaları kullanıcı hesaplarıyla eşleme](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc736706(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="3212d-246">For more information about the feature, see [Map certificates to user accounts](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc736706(v=ws.10)).</span></span>

<span data-ttu-id="3212d-247">Active Directory eşleme kullanma hakkında daha fazla bilgi için bkz. [Istemci sertifikalarını dizin hizmeti eşleme Ile eşleme](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc758484(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="3212d-247">For more information about using Active Directory mapping, see [Mapping Client Certificates with Directory Service Mapping](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc758484(v=ws.10)).</span></span>

<span data-ttu-id="3212d-248">Bu özellik etkin olduğunda, <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication.MapClientCertificateToWindowsAccount%2A> <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication> sınıfının özelliğini olarak ayarlayabilirsiniz `true` .</span><span class="sxs-lookup"><span data-stu-id="3212d-248">With this capability enabled, you can set the <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication.MapClientCertificateToWindowsAccount%2A> property of the <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication> class to `true`.</span></span> <span data-ttu-id="3212d-249">Yapılandırma bölümünde, `mapClientCertificateToWindowsAccount` [\<authentication>](../../configure-apps/file-schema/wcf/authentication-of-servicecertificate-element.md) öğesinin özniteliğini `true` aşağıdaki kodda gösterildiği gibi olarak ayarlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3212d-249">In configuration, you can set the `mapClientCertificateToWindowsAccount` attribute of the [\<authentication>](../../configure-apps/file-schema/wcf/authentication-of-servicecertificate-element.md) element to `true`, as shown in the following code.</span></span>

```xml
<serviceBehaviors>
 <behavior name="MappingBehavior">
  <serviceCredentials>
   <clientCertificate>
    <authentication certificateValidationMode="None" mapClientCertificateToWindowsAccount="true" />
   </clientCertificate>
  </serviceCredentials>
 </behavior>
</serviceBehaviors>
```

<span data-ttu-id="3212d-250">Bir Windows Kullanıcı hesabını temsil eden belirtece bir X. 509.440 sertifikası eşleme, bir ayrıcalık yükselmesi olarak değerlendirilir, çünkü eşlendikten sonra, korunan kaynaklara erişim kazanmak için Windows belirteci kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="3212d-250">Mapping an X.509 certificate to the token that represents a Windows user account is considered an elevation of privilege because, once mapped, the Windows token can be used to gain access to protected resources.</span></span> <span data-ttu-id="3212d-251">Bu nedenle, etki alanı ilkesi, eşleme öncesinde, X. 509.440 sertifikasının ilkeyle uyumlu olmasını gerektirir.</span><span class="sxs-lookup"><span data-stu-id="3212d-251">Therefore, domain policy requires the X.509 certificate to comply with its policy prior to mapping.</span></span> <span data-ttu-id="3212d-252">*Schannel* güvenlik paketi bu gereksinimi zorlar.</span><span class="sxs-lookup"><span data-stu-id="3212d-252">The *SChannel* security package enforces this requirement.</span></span>

<span data-ttu-id="3212d-253">WCF, .NET Framework 3,5 veya sonraki sürümleri kullanırken, sertifikanın bir Windows hesabına eşlenmesini sağlamak için etki alanı ilkesine uymasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="3212d-253">When using .NET Framework 3.5 or later versions, WCF ensures the certificate conforms to domain policy before it is mapped to a Windows account.</span></span>

<span data-ttu-id="3212d-254">WCF 'nin ilk sürümünde, eşleme etki alanı ilkesine danışmadan yapılır.</span><span class="sxs-lookup"><span data-stu-id="3212d-254">In the first release of WCF, mapping is done without consulting the domain policy.</span></span> <span data-ttu-id="3212d-255">Bu nedenle, ilk sürüm altında çalışırken çalışmak için kullanılan eski uygulamalar, eşleme etkinse ve X. 509.440 sertifikası etki alanı ilkesini karşılamazsa başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="3212d-255">Therefore it is possible that older applications that used to work when running under the first release, fails if the mapping is enabled and the X.509 certificate does not satisfy the domain policy.</span></span>

## <a name="see-also"></a><span data-ttu-id="3212d-256">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="3212d-256">See also</span></span>

- <xref:System.ServiceModel.Channels>
- <xref:System.ServiceModel.Security>
- <xref:System.ServiceModel>
- <xref:System.Security.Cryptography.X509Certificates.X509FindType>
- [<span data-ttu-id="3212d-257">Hizmet ve İstemcileri Güvenli Hale Getirme</span><span class="sxs-lookup"><span data-stu-id="3212d-257">Securing Services and Clients</span></span>](securing-services-and-clients.md)
