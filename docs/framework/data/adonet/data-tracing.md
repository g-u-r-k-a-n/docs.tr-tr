---
title: ADO.NET’te Veri İzleme
ms.date: 03/30/2017
ms.assetid: a6a752a5-d2a9-4335-a382-b58690ccb79f
ms.openlocfilehash: be82500920ce9d5f8bc7ee979cf8ec5006f4f12b
ms.sourcegitcommit: 30a558d23e3ac5a52071121a52c305c85fe15726
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 12/25/2019
ms.locfileid: "75347797"
---
# <a name="data-tracing-in-adonet"></a><span data-ttu-id="81ed4-102">ADO.NET’te Veri İzleme</span><span class="sxs-lookup"><span data-stu-id="81ed4-102">Data Tracing in ADO.NET</span></span>

<span data-ttu-id="81ed4-103">ADO.NET, SQL Server, Oracle, OLE DB ve ODBC için .NET veri sağlayıcılarının yanı sıra ADO.NET <xref:System.Data.DataSet>ve SQL Server ağ protokollerini destekleyen yerleşik veri izleme işlevselliğine sahiptir.</span><span class="sxs-lookup"><span data-stu-id="81ed4-103">ADO.NET features built-in data tracing functionality that is supported by the .NET data providers for SQL Server, Oracle, OLE DB and ODBC, as well as the ADO.NET <xref:System.Data.DataSet>, and the SQL Server network protocols.</span></span>

<span data-ttu-id="81ed4-104">Veri erişimi API 'SI çağrılarını izlemek, aşağıdaki sorunları tanılamanıza yardımcı olabilir:</span><span class="sxs-lookup"><span data-stu-id="81ed4-104">Tracing data access API calls can help diagnose the following problems:</span></span>

- <span data-ttu-id="81ed4-105">İstemci programı ile veritabanı arasında şema uyumsuzluğu.</span><span class="sxs-lookup"><span data-stu-id="81ed4-105">Schema mismatch between client program and the database.</span></span>

- <span data-ttu-id="81ed4-106">Veritabanı kullanım dışı veya ağ kitaplığı sorunları.</span><span class="sxs-lookup"><span data-stu-id="81ed4-106">Database unavailability or network library problems.</span></span>

- <span data-ttu-id="81ed4-107">Bir uygulama tarafından sabit olarak kodlanmış veya üretilen hatalı SQL.</span><span class="sxs-lookup"><span data-stu-id="81ed4-107">Incorrect SQL whether hard coded or generated by an application.</span></span>

- <span data-ttu-id="81ed4-108">Yanlış programlama mantığı.</span><span class="sxs-lookup"><span data-stu-id="81ed4-108">Incorrect programming logic.</span></span>

- <span data-ttu-id="81ed4-109">Birden çok ADO.NET bileşeni veya ADO.NET ile kendi bileşenleriniz arasındaki etkileşimden kaynaklanan sorunlar.</span><span class="sxs-lookup"><span data-stu-id="81ed4-109">Issues resulting from the interaction between multiple ADO.NET components or between ADO.NET and your own components.</span></span>

<span data-ttu-id="81ed4-110">Farklı izleme teknolojilerini desteklemek için, izleme Genişletilebilir olduğundan, geliştirici bir sorunu uygulama yığınının herhangi bir düzeyinde izleyebilir.</span><span class="sxs-lookup"><span data-stu-id="81ed4-110">To support different trace technologies, tracing is extensible, so a developer can trace a problem at any level of the application stack.</span></span> <span data-ttu-id="81ed4-111">İzleme yalnızca ADO.NET özelliği olmamasına karşın, Microsoft sağlayıcıları Genelleştirilmiş izleme ve araç API 'Lerinden yararlanır.</span><span class="sxs-lookup"><span data-stu-id="81ed4-111">Although tracing is not an ADO.NET-only feature, Microsoft providers take advantage of generalized tracing and instrumentation APIs.</span></span>

<span data-ttu-id="81ed4-112">ADO.NET ' de yönetilen izlemeyi ayarlama ve yapılandırma hakkında daha fazla bilgi için bkz. [veri erişimini izleme](https://docs.microsoft.com/previous-versions/sql/sql-server-2012/hh880086(v=msdn.10)).</span><span class="sxs-lookup"><span data-stu-id="81ed4-112">For more information about setting and configuring managed tracing in ADO.NET, see [Tracing Data Access](https://docs.microsoft.com/previous-versions/sql/sql-server-2012/hh880086(v=msdn.10)).</span></span>

## <a name="accessing-diagnostic-information-in-the-extended-events-log"></a><span data-ttu-id="81ed4-113">Genişletilmiş olaylar günlüğündeki tanılama bilgilerine erişme</span><span class="sxs-lookup"><span data-stu-id="81ed4-113">Accessing Diagnostic Information in the Extended Events Log</span></span>

<span data-ttu-id="81ed4-114">SQL Server için .NET Framework Veri Sağlayıcısı, veri erişimi izleme ([veri erişimi izleme](https://docs.microsoft.com/previous-versions/sql/sql-server-2012/hh880086(v=msdn.10))), istemci olaylarının bağlantı hatalarıyla, sunucunun bağlantı halkası arabelleği ve genişletilmiş olaylar günlüğündeki uygulama performansı bilgileri gibi tanılama bilgileriyle ilişkilendirilmesi daha kolay hale getirmek için güncelleştirilmiştir.</span><span class="sxs-lookup"><span data-stu-id="81ed4-114">In the .NET Framework Data Provider for SQL Server, data access tracing ([Data Access Tracing](https://docs.microsoft.com/previous-versions/sql/sql-server-2012/hh880086(v=msdn.10))) has been updated to make it easier to correlate client events with diagnostic information, such as connection failures, from the server's connectivity ring buffer and application performance information in the extended events log.</span></span> <span data-ttu-id="81ed4-115">Genişletilmiş olaylar günlüğünü okuma hakkında daha fazla bilgi için bkz. [olay oturumu verilerini görüntüleme](https://docs.microsoft.com/previous-versions/sql/sql-server-2012/hh710068(v=sql.110)).</span><span class="sxs-lookup"><span data-stu-id="81ed4-115">For information about reading the extended events log, see [View Event Session Data](https://docs.microsoft.com/previous-versions/sql/sql-server-2012/hh710068(v=sql.110)).</span></span>

<span data-ttu-id="81ed4-116">Bağlantı işlemleri için, ADO.NET bir istemci bağlantı KIMLIĞI gönderir.</span><span class="sxs-lookup"><span data-stu-id="81ed4-116">For connection operations, ADO.NET will send a client connection ID.</span></span> <span data-ttu-id="81ed4-117">Bağlantı başarısız olursa, bağlantı halkası arabelleğine (bağlantı[sorunlarını SQL Server 2008 ' de bağlantı sorunlarını giderme](https://blogs.msdn.microsoft.com/sql_protocols/2008/05/20/connectivity-troubleshooting-in-sql-server-2008-with-the-connectivity-ring-buffer/)) erişebilir ve `ClientConnectionID` alanını bulabilir ve bağlantı hatası hakkında tanılama bilgileri alabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="81ed4-117">If the connection fails, you can access the connectivity ring buffer ([Connectivity troubleshooting in SQL Server 2008 with the Connectivity Ring Buffer](https://blogs.msdn.microsoft.com/sql_protocols/2008/05/20/connectivity-troubleshooting-in-sql-server-2008-with-the-connectivity-ring-buffer/)) and find the `ClientConnectionID` field and get diagnostic information about the connection failure.</span></span> <span data-ttu-id="81ed4-118">İstemci bağlantı kimlikleri, yalnızca bir hata oluşursa halka arabelleğine kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="81ed4-118">Client connection IDs are logged in the ring buffer only if an error occurs.</span></span> <span data-ttu-id="81ed4-119">(Ön oturum açma paketini göndermeden önce bir bağlantı başarısız olursa, bir istemci bağlantı KIMLIĞI oluşturulmaz.) İstemci bağlantı KIMLIĞI, 16 baytlık bir GUID 'dir.</span><span class="sxs-lookup"><span data-stu-id="81ed4-119">(If a connection fails before sending the prelogin packet, a client connection ID will not be generated.) The client connection ID is a 16-byte GUID.</span></span> <span data-ttu-id="81ed4-120">Ayrıca, genişletilmiş olaylar oturumunda `client_connection_id` eylemi olaylara eklenirse, istemci bağlantı KIMLIĞINI genişletilmiş olaylar hedef çıktısında bulabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="81ed4-120">You can also find the client connection ID in the extended events target output, if the `client_connection_id` action is added to events in an extended events session.</span></span> <span data-ttu-id="81ed4-121">Veri erişimi izlemeyi etkinleştirebilir ve bağlantı komutunu yeniden çalıştırabilir ve daha fazla istemci sürücü tanılama yardımına ihtiyacınız varsa, veri erişim izleme içindeki `ClientConnectionID` alanını gözlemleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="81ed4-121">You can enable data access tracing and rerun the connection command and observe the `ClientConnectionID` field in the data access trace, if you need further client driver diagnostic assistance.</span></span>

<span data-ttu-id="81ed4-122">İstemci bağlantı KIMLIĞINI `SqlConnection.ClientConnectionID` özelliğini kullanarak programlı bir şekilde alabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="81ed4-122">You can get the client connection ID programmatically by using the `SqlConnection.ClientConnectionID` property.</span></span>

<span data-ttu-id="81ed4-123">`ClientConnectionID`, bir bağlantıyı başarıyla kuran bir <xref:System.Data.SqlClient.SqlConnection> nesnesi için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="81ed4-123">The `ClientConnectionID` is available for a <xref:System.Data.SqlClient.SqlConnection> object that successfully establishes  a connection.</span></span> <span data-ttu-id="81ed4-124">Bir bağlantı girişimi başarısız olursa, `ClientConnectionID` `SqlException.ToString`aracılığıyla bulunabilir.</span><span class="sxs-lookup"><span data-stu-id="81ed4-124">If a connection attempt fails, `ClientConnectionID` may be available via `SqlException.ToString`.</span></span>

<span data-ttu-id="81ed4-125">ADO.NET ayrıca iş parçacığına özgü etkinlik KIMLIĞI gönderir.</span><span class="sxs-lookup"><span data-stu-id="81ed4-125">ADO.NET also sends a thread-specific activity ID.</span></span> <span data-ttu-id="81ed4-126">Oturumlar TRACK_CAUSALITY seçeneği etkin olarak başlatılırsa, etkinlik KIMLIĞI genişletilmiş olaylar oturumlarında yakalanır.</span><span class="sxs-lookup"><span data-stu-id="81ed4-126">The activity ID is captured in the extended events sessions if the sessions are started with the TRACK_CAUSALITY option enabled.</span></span> <span data-ttu-id="81ed4-127">Etkin bir bağlantıyla ilgili performans sorunları için, etkinliğin KIMLIĞINI istemcinin veri erişimi izleme (`ActivityID` alanından) alabilir ve ardından genişletilmiş olaylar çıkışında etkinlik KIMLIĞINI bulabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="81ed4-127">For performance issues with an active connection, you can get the activity ID from the client's data access trace (`ActivityID` field) and then locate the activity ID in the extended events output.</span></span> <span data-ttu-id="81ed4-128">Genişletilmiş olaylardaki etkinlik KIMLIĞI, dört baytlık bir sıra numarasıyla birlikte bir 16 baytlık GUID 'dir (istemci bağlantı KIMLIĞI GUID 'SI ile aynı değildir).</span><span class="sxs-lookup"><span data-stu-id="81ed4-128">The activity ID in extended events is a 16-byte GUID (not the same as the GUID for the client connection ID) appended with a four-byte sequence number.</span></span> <span data-ttu-id="81ed4-129">Sıra numarası bir iş parçacığı içindeki bir isteğin sırasını temsil eder ve iş parçacığı için Batch ve RPC deyimlerinin göreli sıralamasını gösterir.</span><span class="sxs-lookup"><span data-stu-id="81ed4-129">The sequence number represents the order of a request within a thread and indicates the relative ordering of batch and RPC statements for the thread.</span></span> <span data-ttu-id="81ed4-130">`ActivityID` Şu anda SQL Batch deyimleri ve RPC istekleri için veri erişimi izleme etkin olduğunda ve veri erişimi izleme yapılandırma sözcüğünün 18 biti açık olduğunda, isteğe bağlı olarak gönderilir.</span><span class="sxs-lookup"><span data-stu-id="81ed4-130">The `ActivityID` is currently optionally sent for SQL batch statements and RPC requests when data access tracing is enabled on and the 18th bit in the data access tracing configuration word is turned ON.</span></span>

<span data-ttu-id="81ed4-131">Aşağıda, bir halka arabelleğinde depolanacak bir genişletilmiş olaylar oturumu başlatmak için Transact-SQL kullanan bir örnek verilmiştir ve bir istemciden RPC ve Batch işlemlerinde gönderilen etkinlik KIMLIĞI kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="81ed4-131">The following is a sample that uses Transact-SQL to start an extended events session that will be stored in a ring buffer and will record the activity ID sent from a client on RPC and batch operations.</span></span>

```sql
create event session MySession on server
add event connectivity_ring_buffer_recorded,
add event sql_statement_starting (action (client_connection_id)),
add event sql_statement_completed (action (client_connection_id)),
add event rpc_starting (action (client_connection_id)),
add event rpc_completed (action (client_connection_id))
add target ring_buffer with (track_causality=on)
```

## <a name="see-also"></a><span data-ttu-id="81ed4-132">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="81ed4-132">See also</span></span>

- [<span data-ttu-id="81ed4-133">.NET Framework'te Ağ İzleme</span><span class="sxs-lookup"><span data-stu-id="81ed4-133">Network Tracing in the .NET Framework</span></span>](../../network-programming/network-tracing.md)
- [<span data-ttu-id="81ed4-134">İzleme ve İşaretleme Uygulamaları</span><span class="sxs-lookup"><span data-stu-id="81ed4-134">Tracing and Instrumenting Applications</span></span>](../../debug-trace-profile/tracing-and-instrumenting-applications.md)
- [<span data-ttu-id="81ed4-135">ADO.NET’e Genel Bakış</span><span class="sxs-lookup"><span data-stu-id="81ed4-135">ADO.NET Overview</span></span>](ado-net-overview.md)
