---
title: .NET Core komut satırı araçları mimarisi
description: .NET Core araç katmanları ve son sürümlerde nelerin değiştiğini öğrenin.
ms.date: 03/06/2017
ms.openlocfilehash: 0064e7354f073be618bcf6a79962ab495927fadd
ms.sourcegitcommit: 19014f9c081ca2ff19652ca12503828db8239d48
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 02/04/2020
ms.locfileid: "76980216"
---
# <a name="high-level-overview-of-changes-in-the-net-core-tools"></a><span data-ttu-id="45f6f-103">.NET Core araçlarındaki değişikliklere yüksek düzeyde genel bakış</span><span class="sxs-lookup"><span data-stu-id="45f6f-103">High-level overview of changes in the .NET Core tools</span></span>

<span data-ttu-id="45f6f-104">Bu belge, .NET Core araçları 'nın katmanlanmasında ve CLı komutlarının uygulanması üzerindeki değişikliklerle ilgili bilgilerle, *Project. JSON* 'dan MSBuild 'e ve *csproj* proje sistemine geçiş ile ilişkili değişiklikleri açıklamaktadır.</span><span class="sxs-lookup"><span data-stu-id="45f6f-104">This document describes the changes associated with moving from *project.json* to MSBuild and the *csproj* project system with information on the changes to the layering of the .NET Core tooling and the implementation of the CLI commands.</span></span> <span data-ttu-id="45f6f-105">Bu değişiklikler, 7 Mart 2017 ' de .NET Core SDK 1,0 ve Visual Studio 2017 sürümü ile oluştu, ancak başlangıçta .NET Core SDK [](https://devblogs.microsoft.com/dotnet/announcing-net-core-tools-1-0/)Preview 3 sürümü ile uygulandı.</span><span class="sxs-lookup"><span data-stu-id="45f6f-105">These changes occurred with the release of .NET Core SDK 1.0 and Visual Studio 2017 on March 7, 2017 (see the [announcement](https://devblogs.microsoft.com/dotnet/announcing-net-core-tools-1-0/)) but were initially implemented with the release of the .NET Core SDK Preview 3.</span></span>

## <a name="moving-away-from-projectjson"></a><span data-ttu-id="45f6f-106">Project. JSON öğesinden uzağa taşıma</span><span class="sxs-lookup"><span data-stu-id="45f6f-106">Moving away from project.json</span></span>

<span data-ttu-id="45f6f-107">.NET Core için araçdaki en büyük değişiklik, Project [. JSON 'dan csproj 'a](https://devblogs.microsoft.com/dotnet/changes-to-project-json/) proje sistemi olarak geçilendir.</span><span class="sxs-lookup"><span data-stu-id="45f6f-107">The biggest change in the tooling for .NET Core is certainly the [move away from project.json to csproj](https://devblogs.microsoft.com/dotnet/changes-to-project-json/) as the project system.</span></span> <span data-ttu-id="45f6f-108">Komut satırı araçlarının en son sürümleri *Project. JSON* dosyalarını desteklemez.</span><span class="sxs-lookup"><span data-stu-id="45f6f-108">The latest versions of the command-line tools don't support *project.json* files.</span></span> <span data-ttu-id="45f6f-109">Bu, Project. JSON tabanlı uygulamaları ve kitaplıkları derlemek, çalıştırmak veya yayımlamak için kullanılamayan anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="45f6f-109">That means that it cannot be used to build, run, or publish project.json based applications and libraries.</span></span> <span data-ttu-id="45f6f-110">Araçların bu sürümünü kullanmak için, mevcut projelerinizi geçirin veya yenilerini başlatın.</span><span class="sxs-lookup"><span data-stu-id="45f6f-110">To use this version of the tools, migrate your existing projects or start new ones.</span></span>

<span data-ttu-id="45f6f-111">Bu taşımanın bir parçası olarak, Project. JSON projelerini derlemek için geliştirilmiş olan özel derleme altyapısı, aynı şekilde [MSBuild](https://github.com/Microsoft/msbuild)adlı ve tam özellikli bir yapı altyapısı ile değiştirilmiştir.</span><span class="sxs-lookup"><span data-stu-id="45f6f-111">As part of this move, the custom build engine that was developed to build project.json projects was replaced with a mature and fully capable build engine called [MSBuild](https://github.com/Microsoft/msbuild).</span></span> <span data-ttu-id="45f6f-112">MSBuild, .NET Community 'de iyi bilinen bir altyapıdır.</span><span class="sxs-lookup"><span data-stu-id="45f6f-112">MSBuild is a well-known engine in the .NET community.</span></span> <span data-ttu-id="45f6f-113">Platformun ilk sürümünden bu yana önemli bir teknoloji oldu.</span><span class="sxs-lookup"><span data-stu-id="45f6f-113">It has been a key technology since the platform's first release.</span></span> <span data-ttu-id="45f6f-114">.NET Core uygulamaları oluşturması gerektiğinden, MSBuild .NET Core 'a eklenmiştir ve .NET Core 'un üzerinde çalıştığı tüm platformlarda kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="45f6f-114">Because it needs to build .NET Core applications, MSBuild has been ported to .NET Core and can be used on any platform that .NET Core runs on.</span></span> <span data-ttu-id="45f6f-115">.NET Core 'un asıl adedlerinden biri platformlar arası bir geliştirme yığınıdır ve bu taşımanın bu taahhüdünü bozmadığından emin yaptık.</span><span class="sxs-lookup"><span data-stu-id="45f6f-115">One of the main promises of .NET Core is that of a cross-platform development stack, and we have made sure that this move does not break that promise.</span></span>

> [!TIP]
> <span data-ttu-id="45f6f-116">MSBuild 'e yeni başladıysanız ve bu konuda daha fazla bilgi edinmek istiyorsanız, [MSBuild kavramlarını](/visualstudio/msbuild/msbuild-concepts) okuyun makalesini okuyun.</span><span class="sxs-lookup"><span data-stu-id="45f6f-116">If you are new to MSBuild and would like to learn more about it, you can start by reading the [MSBuild concepts](/visualstudio/msbuild/msbuild-concepts) article.</span></span>

## <a name="the-tooling-layers"></a><span data-ttu-id="45f6f-117">Araç katmanları</span><span class="sxs-lookup"><span data-stu-id="45f6f-117">The tooling layers</span></span>

<span data-ttu-id="45f6f-118">Var olan proje sisteminin yanı sıra altyapı anahtarları oluşturma ile, doğal olarak takip eden soru, bu değişikliklerden herhangi biri, tüm .NET Core araçları ekosisteminin genel "katmanlama" düzeyini değiştirir.</span><span class="sxs-lookup"><span data-stu-id="45f6f-118">With the move away from the existing project system as well as with building engine switches, the question that naturally follows is do any of these changes change the overall "layering" of the whole .NET Core tooling ecosystem?</span></span> <span data-ttu-id="45f6f-119">Yeni BITS ve bileşenler var mı?</span><span class="sxs-lookup"><span data-stu-id="45f6f-119">Are there new bits and components?</span></span>

<span data-ttu-id="45f6f-120">Aşağıdaki resimde gösterildiği gibi Önizleme 2 katmanlarındaki hızlı yenileyici ile başlayalım:</span><span class="sxs-lookup"><span data-stu-id="45f6f-120">Let's start with a quick refresher on Preview 2 layering as shown in the following picture:</span></span>

![Preview 2 araçları üst düzey mimari](media/cli-msbuild-architecture/p2-arch.png)

<span data-ttu-id="45f6f-122">Araçların katmanlama işlemi oldukça basittir.</span><span class="sxs-lookup"><span data-stu-id="45f6f-122">The layering of the tools is quite simple.</span></span> <span data-ttu-id="45f6f-123">En altta, temel .NET Core CLI.</span><span class="sxs-lookup"><span data-stu-id="45f6f-123">At the bottom, the foundation is the .NET Core CLI.</span></span> <span data-ttu-id="45f6f-124">Visual Studio veya Visual Studio Code gibi diğer tüm diğer, daha üst düzey araçlar, projeleri oluşturmak, bağımlılıkları geri yüklemek vb. için CLı 'ye bağımlıdır.</span><span class="sxs-lookup"><span data-stu-id="45f6f-124">All other, higher-level tools, such as Visual Studio or Visual Studio Code, depend and rely on the CLI to build projects, restore dependencies, and so on.</span></span> <span data-ttu-id="45f6f-125">Örneğin, Visual Studio bir geri yükleme işlemi gerçekleştirmek istiyorsam, CLı 'daki `dotnet restore` ([bkz. Note](#dotnet-restore-note)) komutuna çağrı yapar.</span><span class="sxs-lookup"><span data-stu-id="45f6f-125">For example, if Visual Studio wanted to perform a restore operation, it would call into `dotnet restore` ([see note](#dotnet-restore-note)) command in the CLI.</span></span>

<span data-ttu-id="45f6f-126">Yeni proje sistemine taşıma ile önceki diyagramda değişiklik yapılır:</span><span class="sxs-lookup"><span data-stu-id="45f6f-126">With the move to the new project system, the previous diagram changes:</span></span>

![.NET Core SDK 1.0.0 üst düzey mimari](media/cli-msbuild-architecture/p3-arch.png)

<span data-ttu-id="45f6f-128">Temel fark, CLı 'nin temel katman olmadığı bir şekilde değildir; Bu rol artık "paylaşılan SDK bileşeni" tarafından doldurulmuştur.</span><span class="sxs-lookup"><span data-stu-id="45f6f-128">The main difference is that the CLI is not the foundational layer anymore; this role is now filled by the "shared SDK component".</span></span> <span data-ttu-id="45f6f-129">Bu paylaşılan SDK bileşeni, kod derlenirken, yayımlamaktan, NuGet paketlerinde paketlemesinden ve benzeri bir hedef ve ilişkili görev kümesidir.</span><span class="sxs-lookup"><span data-stu-id="45f6f-129">This shared SDK component is a set of targets and associated tasks that are responsible for compiling code, publishing it, packing NuGet packages, and so on.</span></span> <span data-ttu-id="45f6f-130">.NET Core SDK açık kaynaktır ve [SDK](https://github.com/dotnet/sdk)deposunda GitHub 'da kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="45f6f-130">The .NET Core SDK is open-source and is available on GitHub on the [SDK repo](https://github.com/dotnet/sdk).</span></span>

> [!NOTE]
> <span data-ttu-id="45f6f-131">"Target", MSBuild 'in çağırabileceği adlandırılmış bir işlemi gösteren bir MSBuild terimidir.</span><span class="sxs-lookup"><span data-stu-id="45f6f-131">A "target" is an MSBuild term that indicates a named operation that MSBuild can invoke.</span></span> <span data-ttu-id="45f6f-132">Genellikle hedefin yapması gereken bazı mantığı çalıştıran bir veya daha fazla görevle birlikte kullanılır.</span><span class="sxs-lookup"><span data-stu-id="45f6f-132">It is usually coupled with one or more tasks that execute some logic that the target is supposed to do.</span></span> <span data-ttu-id="45f6f-133">MSBuild, `Copy` veya `Execute`gibi çok sayıda kullanıma yönelik hedefi destekler; Ayrıca, kullanıcıların yönetilen kod kullanarak kendi görevlerini yazmasına ve bu görevleri yürütmek için hedefleri tanımlamasına olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="45f6f-133">MSBuild supports many ready-made targets such as `Copy` or `Execute`; it also allows users to write their own tasks using managed code and define targets to execute those tasks.</span></span> <span data-ttu-id="45f6f-134">Daha fazla bilgi için bkz. [MSBuild görevleri](/visualstudio/msbuild/msbuild-tasks).</span><span class="sxs-lookup"><span data-stu-id="45f6f-134">For more information, see [MSBuild tasks](/visualstudio/msbuild/msbuild-tasks).</span></span>

<span data-ttu-id="45f6f-135">Tüm araç takımları 'ler artık paylaşılan SDK bileşenini ve bunların hedeflerini kullanır ve CLI dahildir.</span><span class="sxs-lookup"><span data-stu-id="45f6f-135">All the toolsets now consume the shared SDK component and its targets, CLI included.</span></span> <span data-ttu-id="45f6f-136">Örneğin, Visual Studio 2019, .NET Core projelerine yönelik bağımlılıkları geri yüklemek için `dotnet restore` ([bkz. Note](#dotnet-restore-note)) komutuna çağrı yapmaz.</span><span class="sxs-lookup"><span data-stu-id="45f6f-136">For example, Visual Studio 2019 doesn't call into the `dotnet restore` ([see note](#dotnet-restore-note)) command to restore dependencies for .NET Core projects.</span></span> <span data-ttu-id="45f6f-137">Bunun yerine, "Restore" hedefini doğrudan kullanır.</span><span class="sxs-lookup"><span data-stu-id="45f6f-137">Instead, it uses the "Restore" target directly.</span></span> <span data-ttu-id="45f6f-138">Bunlar MSBuild hedefleri olduğundan, [DotNet MSBuild](dotnet-msbuild.md) komutunu kullanarak bunları yürütmek Için ham MSBuild 'i de kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="45f6f-138">Since these are MSBuild targets, you can also use raw MSBuild to execute them using the [dotnet msbuild](dotnet-msbuild.md) command.</span></span>

### <a name="cli-commands"></a><span data-ttu-id="45f6f-139">CLı komutları</span><span class="sxs-lookup"><span data-stu-id="45f6f-139">CLI commands</span></span>

<span data-ttu-id="45f6f-140">Paylaşılan SDK bileşeni, var olan CLı komutlarının büyük çoğunluğunun MSBuild görevi ve hedefleri olarak yeniden uygulandığı anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="45f6f-140">The shared SDK component means that the majority of existing CLI commands have been re-implemented as MSBuild tasks and targets.</span></span> <span data-ttu-id="45f6f-141">Bu, CLı komutları ve araç takımını kullanımınız için ne anlama geliyor?</span><span class="sxs-lookup"><span data-stu-id="45f6f-141">What does this mean for the CLI commands and your usage of the toolset?</span></span>

<span data-ttu-id="45f6f-142">Kullanım perspektifinden, CLı 'yı kullanma yöntemini değiştirmez.</span><span class="sxs-lookup"><span data-stu-id="45f6f-142">From a usage perspective, it doesn't change the way you use the CLI.</span></span> <span data-ttu-id="45f6f-143">CLı hala .NET Core 1,0 Preview 2 sürümünde bulunan temel komutlara sahiptir:</span><span class="sxs-lookup"><span data-stu-id="45f6f-143">The CLI still has the core commands that existed in the .NET Core 1.0 Preview 2 release:</span></span>

- `new`
- `restore`
- `run`
- `build`
- `publish`
- `test`
- `pack`

<span data-ttu-id="45f6f-144">Bu komutlar, bunların ne olduğunu beklediğinizi (bir proje oluşturun, oluşturun, yayımlayın, paketleyebilir, vb.) devam eder.</span><span class="sxs-lookup"><span data-stu-id="45f6f-144">These commands still do what you expect them to do (new up a project, build it, publish it, pack it, and so on).</span></span> <span data-ttu-id="45f6f-145">Davranışlarıyla ilgili bilgi almak için komutun yardım ekranına (`dotnet <command> --help`kullanarak) veya bu sitedeki belgelere başvurabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="45f6f-145">You can consult either the command's help screen (using `dotnet <command> --help`) or documentation on this site to get familiar with their behavior.</span></span>

<span data-ttu-id="45f6f-146">Bir yürütme perspektifinden, CLı komutları parametrelerini alır ve gerekli özellikleri ayarlayan ve istenen hedefi çalıştıran "RAW" MSBuild 'e bir çağrı oluşturur.</span><span class="sxs-lookup"><span data-stu-id="45f6f-146">From an execution perspective, the CLI commands take their parameters and construct a call to "raw" MSBuild that sets the needed properties and runs the desired target.</span></span> <span data-ttu-id="45f6f-147">Bunu daha iyi anlamak için aşağıdaki komutu göz önünde bulundurun:</span><span class="sxs-lookup"><span data-stu-id="45f6f-147">To better illustrate this, consider the following command:</span></span>

   ```dotnetcli
   dotnet publish -o pub -c Release
   ```

<span data-ttu-id="45f6f-148">Bu komut, bir uygulamayı bir `pub` klasörüne "Release" yapılandırmasını kullanarak yayımlar.</span><span class="sxs-lookup"><span data-stu-id="45f6f-148">This command publishes an application into a `pub` folder using the "Release" configuration.</span></span> <span data-ttu-id="45f6f-149">Dahili olarak, bu komut aşağıdaki MSBuild çağrısına çevrilir:</span><span class="sxs-lookup"><span data-stu-id="45f6f-149">Internally, this command gets translated into the following MSBuild invocation:</span></span>

   ```dotnetcli
   dotnet msbuild -t:Publish -p:OutputPath=pub -p:Configuration=Release
   ```

<span data-ttu-id="45f6f-150">Bu kurala yönelik Notable özel durumları `new` ve `run` komutlardır.</span><span class="sxs-lookup"><span data-stu-id="45f6f-150">Notable exceptions to this rule are the `new` and `run` commands.</span></span> <span data-ttu-id="45f6f-151">MSBuild hedefleri olarak uygulanmamış.</span><span class="sxs-lookup"><span data-stu-id="45f6f-151">They have not been implemented as MSBuild targets.</span></span>

<a name="dotnet-restore-note"></a>
[!INCLUDE[DotNet Restore Note](~/includes/dotnet-restore-note.md)]
