---
title: İleti Sınıfını Kullanma
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
ms.assetid: d1d62bfb-2aa3-4170-b6f8-c93d3afdbbed
ms.openlocfilehash: 142578ef76a70fed27dc0137378b59e228cd25c9
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 06/09/2020
ms.locfileid: "84585655"
---
# <a name="using-the-message-class"></a><span data-ttu-id="8de71-102">İleti Sınıfını Kullanma</span><span class="sxs-lookup"><span data-stu-id="8de71-102">Using the Message Class</span></span>
<span data-ttu-id="8de71-103"><xref:System.ServiceModel.Channels.Message>Sınıfı Windows Communication Foundation (WCF) için temel bir sınıftır.</span><span class="sxs-lookup"><span data-stu-id="8de71-103">The <xref:System.ServiceModel.Channels.Message> class is fundamental to Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="8de71-104">İstemciler ve hizmetler arasındaki tüm iletişimler, sonuçta <xref:System.ServiceModel.Channels.Message> gönderilen ve alınan örneklerin sonucu olarak sonuçlanır.</span><span class="sxs-lookup"><span data-stu-id="8de71-104">All communication between clients and services ultimately results in <xref:System.ServiceModel.Channels.Message> instances being sent and received.</span></span>  
  
 <span data-ttu-id="8de71-105">Genellikle sınıfla doğrudan etkileşim kurmamalıdır <xref:System.ServiceModel.Channels.Message> .</span><span class="sxs-lookup"><span data-stu-id="8de71-105">You would not usually interact with the <xref:System.ServiceModel.Channels.Message> class directly.</span></span> <span data-ttu-id="8de71-106">Bunun yerine, gelen ve giden iletileri anlatmak için veri sözleşmeleri, ileti sözleşmeleri ve işlem sözleşmeleri gibi WCF hizmet modeli yapıları kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8de71-106">Instead, WCF service model constructs, such as data contracts, message contracts, and operation contracts, are used to describe incoming and outgoing messages.</span></span> <span data-ttu-id="8de71-107">Ancak, bazı Gelişmiş senaryolarda doğrudan sınıfını kullanarak program programlama yapabilirsiniz <xref:System.ServiceModel.Channels.Message> .</span><span class="sxs-lookup"><span data-stu-id="8de71-107">However, in some advanced scenarios you can program using the <xref:System.ServiceModel.Channels.Message> class directly.</span></span> <span data-ttu-id="8de71-108">Örneğin, sınıfını kullanmak isteyebilirsiniz <xref:System.ServiceModel.Channels.Message> :</span><span class="sxs-lookup"><span data-stu-id="8de71-108">For example, you might want to use the <xref:System.ServiceModel.Channels.Message> class:</span></span>  
  
- <span data-ttu-id="8de71-109">Giden ileti içerikleri oluşturmak için alternatif bir yönteme ihtiyacınız olduğunda (örneğin, diskteki bir dosyadan doğrudan bir ileti oluşturma) .NET Framework nesneleri serileştirmek yerine.</span><span class="sxs-lookup"><span data-stu-id="8de71-109">When you need an alternative way of creating outgoing message contents (for example, creating a message directly from a file on disk) instead of serializing .NET Framework objects.</span></span>  
  
- <span data-ttu-id="8de71-110">Gelen ileti içeriklerini (örneğin, Ham XML içeriklerine XSLT dönüştürmesi uygulamak istediğinizde) .NET Framework nesneleri içine çıkarmak yerine farklı bir şekilde kullanmanız gerektiğinde.</span><span class="sxs-lookup"><span data-stu-id="8de71-110">When you need an alternative way of using incoming message contents (for example, when you want to apply an XSLT transformation to the raw XML contents) instead of deserializing into .NET Framework objects.</span></span>  
  
- <span data-ttu-id="8de71-111">İletileri ileti içeriğinden bağımsız olarak genel bir şekilde (örneğin, yönlendirici oluştururken veya iletme, yük dengeleyici ya da bir yayımlama-abonelik sistemi) kullanmanız gerektiğinde.</span><span class="sxs-lookup"><span data-stu-id="8de71-111">When you need to deal with messages in a general way regardless of message contents (for example, when routing or forwarding messages when building a router, load-balancer, or a publish-subscribe system).</span></span>  
  
 <span data-ttu-id="8de71-112">Sınıfını kullanmadan önce <xref:System.ServiceModel.Channels.Message> [veri aktarımı mimarisine genel bakış](data-transfer-architectural-overview.md)' da WCF veri aktarımı mimarisini öğrenin.</span><span class="sxs-lookup"><span data-stu-id="8de71-112">Before using the <xref:System.ServiceModel.Channels.Message> class, familiarize yourself with the WCF data transfer architecture in [Data Transfer Architectural Overview](data-transfer-architectural-overview.md).</span></span>  
  
 <span data-ttu-id="8de71-113"><xref:System.ServiceModel.Channels.Message>, Veriler için genel amaçlı bir kapsayıcıdır, ancak TASARıMı SOAP protokolünde bir iletinin tasarımını yakından izler.</span><span class="sxs-lookup"><span data-stu-id="8de71-113">A <xref:System.ServiceModel.Channels.Message> is a general-purpose container for data, but its design closely follows the design of a message in the SOAP protocol.</span></span> <span data-ttu-id="8de71-114">SOAP içinde olduğu gibi, bir iletinin hem ileti gövdesi hem de üst bilgileri vardır.</span><span class="sxs-lookup"><span data-stu-id="8de71-114">Just like in SOAP, a message has both a message body and headers.</span></span> <span data-ttu-id="8de71-115">İleti gövdesinde gerçek yük verileri bulunur, ancak üstbilgiler adlandırılmış veri kapsayıcıları içerir.</span><span class="sxs-lookup"><span data-stu-id="8de71-115">The message body contains the actual payload data, while the headers contain additional named data containers.</span></span> <span data-ttu-id="8de71-116">Gövde ve üst bilgileri okuma ve yazma kuralları farklıdır; Örneğin, üst bilgilerin her zaman bellekte ara belleğe alınır ve gövde yalnızca bir kez okunabilir ve akış yapılabilir olabilir.</span><span class="sxs-lookup"><span data-stu-id="8de71-116">The rules for reading and writing the body and the headers are different, for example, the headers are always buffered in memory and may be accessed in any order any number of times, while the body may be read only once and may be streamed.</span></span> <span data-ttu-id="8de71-117">Normal olarak, SOAP kullanırken ileti gövdesi SOAP gövdesine eşlenir ve ileti başlıkları SOAP üst bilgilerine eşlenir.</span><span class="sxs-lookup"><span data-stu-id="8de71-117">Normally, when using SOAP, the message body is mapped to the SOAP body and the message headers are mapped to the SOAP headers.</span></span>  
  
## <a name="using-the-message-class-in-operations"></a><span data-ttu-id="8de71-118">Işlemlerde Ileti sınıfını kullanma</span><span class="sxs-lookup"><span data-stu-id="8de71-118">Using the Message Class in Operations</span></span>  
 <span data-ttu-id="8de71-119"><xref:System.ServiceModel.Channels.Message>Sınıfını bir işlemin giriş parametresi, bir işlemin dönüş değeri veya her ikisi de kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8de71-119">You can use the <xref:System.ServiceModel.Channels.Message> class as an input parameter of an operation, the return value of an operation, or both.</span></span> <span data-ttu-id="8de71-120"><xref:System.ServiceModel.Channels.Message>Bir işlemde herhangi bir yerde kullanılırsa, aşağıdaki kısıtlamalar geçerlidir:</span><span class="sxs-lookup"><span data-stu-id="8de71-120">If <xref:System.ServiceModel.Channels.Message> is used anywhere in an operation, the following restrictions apply:</span></span>  
  
- <span data-ttu-id="8de71-121">İşlem herhangi bir `out` veya parametreye sahip olamaz `ref` .</span><span class="sxs-lookup"><span data-stu-id="8de71-121">The operation cannot have any `out` or `ref` parameters.</span></span>  
  
- <span data-ttu-id="8de71-122">Birden fazla `input` parametre olamaz.</span><span class="sxs-lookup"><span data-stu-id="8de71-122">There cannot be more than one `input` parameter.</span></span> <span data-ttu-id="8de71-123">Parametresi varsa, ya Ileti ya da bir ileti sözleşmesi türü olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8de71-123">If the parameter is present, it must be either Message or a message contract type.</span></span>  
  
- <span data-ttu-id="8de71-124">Dönüş türü, ya da `void` `Message` bir ileti sözleşmesi türü olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8de71-124">The return type must be either `void`, `Message`, or a message contract type.</span></span>  
  
 <span data-ttu-id="8de71-125">Aşağıdaki kod örneği geçerli bir işlem sözleşmesi içerir.</span><span class="sxs-lookup"><span data-stu-id="8de71-125">The following code example contains a valid operation contract.</span></span>  
  
 [!code-csharp[C_UsingTheMessageClass#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_usingthemessageclass/cs/source.cs#1)]
 [!code-vb[C_UsingTheMessageClass#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_usingthemessageclass/vb/source.vb#1)]  
  
## <a name="creating-basic-messages"></a><span data-ttu-id="8de71-126">Temel Iletileri oluşturma</span><span class="sxs-lookup"><span data-stu-id="8de71-126">Creating Basic Messages</span></span>  
 <span data-ttu-id="8de71-127"><xref:System.ServiceModel.Channels.Message>Sınıfı, `CreateMessage` temel iletileri oluşturmak için kullanabileceğiniz statik fabrika yöntemleri sağlar.</span><span class="sxs-lookup"><span data-stu-id="8de71-127">The <xref:System.ServiceModel.Channels.Message> class provides static `CreateMessage` factory methods that you can use to create basic messages.</span></span>  
  
 <span data-ttu-id="8de71-128">Tüm `CreateMessage` Aşırı Yüklemeler, <xref:System.ServiceModel.Channels.MessageVersion> ileti IÇIN kullanılacak soap ve ws-Addressing sürümlerini gösteren türünde bir sürüm parametresi alır.</span><span class="sxs-lookup"><span data-stu-id="8de71-128">All `CreateMessage` overloads take a version parameter of type <xref:System.ServiceModel.Channels.MessageVersion> that indicates the SOAP and WS-Addressing versions to use for the message.</span></span> <span data-ttu-id="8de71-129">Gelen iletiyle aynı protokol sürümlerini kullanmak istiyorsanız, <xref:System.ServiceModel.OperationContext.IncomingMessageVersion%2A> <xref:System.ServiceModel.OperationContext> özelliğinden elde edilen örnekteki özelliğini kullanabilirsiniz <xref:System.ServiceModel.OperationContext.Current%2A> .</span><span class="sxs-lookup"><span data-stu-id="8de71-129">If you want to use the same protocol versions as the incoming message, you can use the <xref:System.ServiceModel.OperationContext.IncomingMessageVersion%2A> property on the <xref:System.ServiceModel.OperationContext> instance obtained from the <xref:System.ServiceModel.OperationContext.Current%2A> property.</span></span> <span data-ttu-id="8de71-130">Çoğu `CreateMessage` aşırı yüklemenin Ayrıca ileti için kullanılacak soap eylemini gösteren bir dize parametresi vardır.</span><span class="sxs-lookup"><span data-stu-id="8de71-130">Most `CreateMessage` overloads also have a string parameter that indicates the SOAP action to use for the message.</span></span> <span data-ttu-id="8de71-131">Sürüm, `None` SOAP Zarfı oluşturmayı devre dışı bırakmak için olarak ayarlanabilir; ileti yalnızca gövdeden oluşur.</span><span class="sxs-lookup"><span data-stu-id="8de71-131">Version can be set to `None` to disable SOAP envelope generation; the message consists of only the body.</span></span>  
  
## <a name="creating-messages-from-objects"></a><span data-ttu-id="8de71-132">Nesnelerden Ileti oluşturma</span><span class="sxs-lookup"><span data-stu-id="8de71-132">Creating Messages from Objects</span></span>  
 <span data-ttu-id="8de71-133">`CreateMessage`Yalnızca bir sürümü alan en temel aşırı yükleme ve bir eylem, boş bir gövdeye sahip bir ileti oluşturur.</span><span class="sxs-lookup"><span data-stu-id="8de71-133">The most basic `CreateMessage` overload that takes only a version and an action creates a message with an empty body.</span></span> <span data-ttu-id="8de71-134">Başka bir aşırı yükleme ek bir <xref:System.Object> parametre alır; bu, gövdesi verilen nesnenin serileştirilmiş temsili olan bir ileti oluşturur.</span><span class="sxs-lookup"><span data-stu-id="8de71-134">Another overload takes an additional <xref:System.Object> parameter; this creates a message whose body is the serialized representation of the given object.</span></span> <span data-ttu-id="8de71-135"><xref:System.Runtime.Serialization.DataContractSerializer>Serileştirme için varsayılan ayarlarla kullanın.</span><span class="sxs-lookup"><span data-stu-id="8de71-135">Use the <xref:System.Runtime.Serialization.DataContractSerializer> with default settings for serialization.</span></span> <span data-ttu-id="8de71-136">Farklı bir serileştirici kullanmak istiyorsanız ya da farklı şekilde yapılandırmak istiyorsanız, `DataContractSerializer` `CreateMessage` aynı zamanda bir parametre alan aşırı yüklemeyi kullanın `XmlObjectSerializer` .</span><span class="sxs-lookup"><span data-stu-id="8de71-136">If you want to use a different serializer, or you want the `DataContractSerializer` configured differently, use the `CreateMessage` overload that also takes an `XmlObjectSerializer` parameter.</span></span>  
  
 <span data-ttu-id="8de71-137">Örneğin, bir iletiye bir nesne döndürmek için aşağıdaki kodu kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8de71-137">For example, to return an object in a message, you can use the following code.</span></span>  
  
 [!code-csharp[C_UsingTheMessageClass#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_usingthemessageclass/cs/source.cs#2)]
 [!code-vb[C_UsingTheMessageClass#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_usingthemessageclass/vb/source.vb#2)]  
  
## <a name="creating-messages-from-xml-readers"></a><span data-ttu-id="8de71-138">XML okuyucularından Ileti oluşturma</span><span class="sxs-lookup"><span data-stu-id="8de71-138">Creating Messages from XML Readers</span></span>  
 <span data-ttu-id="8de71-139">Bir `CreateMessage` <xref:System.Xml.XmlReader> <xref:System.Xml.XmlDictionaryReader> nesne yerine gövde için bir veya olan aşırı yüklemeler vardır.</span><span class="sxs-lookup"><span data-stu-id="8de71-139">There are `CreateMessage` overloads that take an <xref:System.Xml.XmlReader> or an <xref:System.Xml.XmlDictionaryReader> for the body instead of an object.</span></span> <span data-ttu-id="8de71-140">Bu durumda, iletinin gövdesi, geçirilen XML okuyucusundan okunmadan elde edilen XML 'yi içerir.</span><span class="sxs-lookup"><span data-stu-id="8de71-140">In this case, the body of the message contains the XML that results from reading from the passed XML reader.</span></span> <span data-ttu-id="8de71-141">Örneğin, aşağıdaki kod, gövde içeriği bir XML dosyasından okunan bir ileti döndürür.</span><span class="sxs-lookup"><span data-stu-id="8de71-141">For example, the following code returns a message with body contents read from an XML file.</span></span>  
  
 [!code-csharp[C_UsingTheMessageClass#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_usingthemessageclass/cs/source.cs#3)]
 [!code-vb[C_UsingTheMessageClass#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_usingthemessageclass/vb/source.vb#3)]  
  
 <span data-ttu-id="8de71-142">Buna ek olarak, `CreateMessage` <xref:System.Xml.XmlReader> <xref:System.Xml.XmlDictionaryReader> yalnızca gövde değil, tüm iletiyi temsil eden veya içeren aşırı yüklemeler vardır.</span><span class="sxs-lookup"><span data-stu-id="8de71-142">Additionally, there are `CreateMessage` overloads that take an <xref:System.Xml.XmlReader> or an <xref:System.Xml.XmlDictionaryReader> that represents the entire message and not just the body.</span></span> <span data-ttu-id="8de71-143">Bu aşırı yüklemeler Ayrıca bir tamsayı `maxSizeOfHeaders` parametresi alır.</span><span class="sxs-lookup"><span data-stu-id="8de71-143">These overloads also take an integer `maxSizeOfHeaders` parameter.</span></span> <span data-ttu-id="8de71-144">Üst bilgiler, ileti oluşturulduğu anda her zaman bellek olarak arabelleğe alınır ve bu parametre, gerçekleşen arabelleğe alma miktarını sınırlandırır.</span><span class="sxs-lookup"><span data-stu-id="8de71-144">Headers are always buffered into memory as soon as the message is created, and this parameter limits the amount of buffering that takes place.</span></span> <span data-ttu-id="8de71-145">Bir hizmet reddi saldırısı olasılığını azaltmak için, XML güvenilmeyen bir kaynaktan geliyorsa bu parametrenin güvenli bir değere ayarlanması önemlidir.</span><span class="sxs-lookup"><span data-stu-id="8de71-145">It is important to set this parameter to a safe value if the XML is coming from an untrusted source to mitigate the possibility of a denial of service attack.</span></span> <span data-ttu-id="8de71-146">XML okuyucusunun temsil ettiği iletinin SOAP ve WS-Addressing sürümleri, sürüm parametresi kullanılarak belirtilen sürümlerle eşleşmelidir.</span><span class="sxs-lookup"><span data-stu-id="8de71-146">The SOAP and WS-Addressing versions of the message the XML reader represents must match the versions indicated using the version parameter.</span></span>  
  
## <a name="creating-messages-with-bodywriter"></a><span data-ttu-id="8de71-147">BodyWriter ile Ileti oluşturma</span><span class="sxs-lookup"><span data-stu-id="8de71-147">Creating Messages with BodyWriter</span></span>  
 <span data-ttu-id="8de71-148">Bir `CreateMessage` aşırı yükleme `BodyWriter` , iletinin gövdesini tanımlayacak bir örnek alır.</span><span class="sxs-lookup"><span data-stu-id="8de71-148">One `CreateMessage` overload takes a `BodyWriter` instance to describe the body of the message.</span></span> <span data-ttu-id="8de71-149">`BodyWriter`, İleti gövdelerinin nasıl oluşturulduğunu özelleştirmek için türetilebilen soyut bir sınıftır.</span><span class="sxs-lookup"><span data-stu-id="8de71-149">A `BodyWriter` is an abstract class that can be derived to customize how message bodies are created.</span></span> <span data-ttu-id="8de71-150">`BodyWriter`İleti gövdelerini özel bir şekilde anlatmak için kendi türetilmiş sınıfınızı oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8de71-150">You can create your own `BodyWriter` derived class to describe message bodies in a custom way.</span></span> <span data-ttu-id="8de71-151">Alan yöntemini geçersiz kılmanız gerekir `BodyWriter.OnWriteBodyContents` <xref:System.Xml.XmlDictionaryWriter> ; Bu yöntem, gövdeyi yazmadan sorumludur.</span><span class="sxs-lookup"><span data-stu-id="8de71-151">You must override the `BodyWriter.OnWriteBodyContents` method that takes an <xref:System.Xml.XmlDictionaryWriter>; this method is responsible for writing out the body.</span></span>  
  
 <span data-ttu-id="8de71-152">Gövde yazıcılarının ara belleğe alınabilir veya ara belleğe alınmamış (akış).</span><span class="sxs-lookup"><span data-stu-id="8de71-152">Body writers can be buffered or non-buffered (streamed).</span></span> <span data-ttu-id="8de71-153">Arabelleğe alınmış gövde yazarları içerikleri herhangi bir sayıda yazabilir, ancak akışa alma içerikleri yalnızca bir kez yazılabilir.</span><span class="sxs-lookup"><span data-stu-id="8de71-153">Buffered body writers can write out their contents any number of times, while streamed ones can write out their contents only once.</span></span> <span data-ttu-id="8de71-154">`IsBuffered`Özelliği, gövde yazıcısının arabelleğe alınıp alınmayacağını gösterir.</span><span class="sxs-lookup"><span data-stu-id="8de71-154">The `IsBuffered` property indicates whether a body writer is buffered or not.</span></span> <span data-ttu-id="8de71-155">Bu `BodyWriter` değeri, bir Boolean parametresi alan korumalı oluşturucuyu çağırarak gövde yazıcınız için ayarlayabilirsiniz `isBuffered` .</span><span class="sxs-lookup"><span data-stu-id="8de71-155">You can set this for your body writer by calling the protected `BodyWriter` constructor that takes an `isBuffered` boolean parameter.</span></span> <span data-ttu-id="8de71-156">Gövde yazarları, arabelleğe alınmamış bir gövde yazıcısından arabellekli bir gövde yazıcısının oluşturulmasını destekler.</span><span class="sxs-lookup"><span data-stu-id="8de71-156">Body writers support creating a buffered body writer from a non-buffered body writer.</span></span> <span data-ttu-id="8de71-157">`OnCreateBufferedCopy`Bu işlemi özelleştirmek için yöntemini geçersiz kılabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8de71-157">You can override the `OnCreateBufferedCopy` method to customize this process.</span></span> <span data-ttu-id="8de71-158">Varsayılan olarak, tarafından döndürülen XML içeren bir bellek içi arabellek `OnWriteBodyContents` kullanılır.</span><span class="sxs-lookup"><span data-stu-id="8de71-158">By default, an in-memory buffer that contains the XML returned by `OnWriteBodyContents` is used.</span></span> <span data-ttu-id="8de71-159">`OnCreateBufferedCopy`bir `maxBufferSize` tamsayı parametresi alır; bu yöntemi geçersiz kılarsınız, bu en büyük boyuttan daha büyük arabellekler oluşturmamalıdır.</span><span class="sxs-lookup"><span data-stu-id="8de71-159">`OnCreateBufferedCopy` takes a `maxBufferSize` integer parameter; if you override this method, you must not create buffers larger than this maximum size.</span></span>  
  
 <span data-ttu-id="8de71-160">`BodyWriter`Sınıfı, `WriteBodyContents` `CreateBufferedCopy` `OnWriteBodyContents` sırasıyla ve yöntemleri etrafında ölçülü sarmalayıcılar olan ve yöntemlerini sağlar `OnCreateBufferedCopy` .</span><span class="sxs-lookup"><span data-stu-id="8de71-160">The `BodyWriter` class provides the `WriteBodyContents` and `CreateBufferedCopy` methods, which are essentially thin wrappers around `OnWriteBodyContents` and `OnCreateBufferedCopy` methods, respectively.</span></span> <span data-ttu-id="8de71-161">Bu yöntemler, arabelleğe alınmamış bir gövde yazıcısında birden çok kez erişilmediğinden emin olmak için durum denetimi gerçekleştirir.</span><span class="sxs-lookup"><span data-stu-id="8de71-161">These methods perform state checking to ensure that a non-buffered body writer is not accessed more than once.</span></span> <span data-ttu-id="8de71-162">Bu yöntemler doğrudan yalnızca öğesine `Message` dayalı özel türetilmiş sınıflar oluşturulurken çağrılır `BodyWriters` .</span><span class="sxs-lookup"><span data-stu-id="8de71-162">These methods are called directly only when creating custom `Message` derived classes based on `BodyWriters`.</span></span>  
  
## <a name="creating-fault-messages"></a><span data-ttu-id="8de71-163">Hata Iletileri oluşturma</span><span class="sxs-lookup"><span data-stu-id="8de71-163">Creating Fault Messages</span></span>  
 <span data-ttu-id="8de71-164">`CreateMessage`SOAP hata iletileri oluşturmak için belirli aşırı yüklemeleri kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8de71-164">You can use certain `CreateMessage` overloads to create SOAP fault messages.</span></span> <span data-ttu-id="8de71-165">Bunların en temel, <xref:System.ServiceModel.Channels.MessageFault> hatayı açıklayan bir nesne alır.</span><span class="sxs-lookup"><span data-stu-id="8de71-165">The most basic of these takes a <xref:System.ServiceModel.Channels.MessageFault> object that describes the fault.</span></span> <span data-ttu-id="8de71-166">Kolaylık sağlamak için diğer aşırı yüklemeler sunulmaktadır.</span><span class="sxs-lookup"><span data-stu-id="8de71-166">Other overloads are provided for convenience.</span></span> <span data-ttu-id="8de71-167">İlk bu aşırı yükleme bir `FaultCode` ve neden dizesi alır ve `MessageFault` `MessageFault.CreateFault` Bu bilgileri kullanarak bir kullanarak oluşturur.</span><span class="sxs-lookup"><span data-stu-id="8de71-167">The first such overload takes a `FaultCode` and a reason string and creates a `MessageFault` using `MessageFault.CreateFault` using this information.</span></span> <span data-ttu-id="8de71-168">Diğer aşırı yükleme bir ayrıntı nesnesi alır ve ayrıca `CreateFault` hata kodu ve nedeni ile birlikte bir araya geçirir.</span><span class="sxs-lookup"><span data-stu-id="8de71-168">The other overload takes a detail object and also passes it to `CreateFault` together with the fault code and the reason.</span></span> <span data-ttu-id="8de71-169">Örneğin, aşağıdaki işlem bir hata döndürür.</span><span class="sxs-lookup"><span data-stu-id="8de71-169">For example, the following operation returns a fault.</span></span>  
  
 [!code-csharp[C_UsingTheMessageClass#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_usingthemessageclass/cs/source.cs#4)]
 [!code-vb[C_UsingTheMessageClass#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_usingthemessageclass/vb/source.vb#4)]  
  
## <a name="extracting-message-body-data"></a><span data-ttu-id="8de71-170">Ileti gövdesi verileri ayıklanıyor</span><span class="sxs-lookup"><span data-stu-id="8de71-170">Extracting Message Body Data</span></span>  
 <span data-ttu-id="8de71-171">`Message`Sınıfı, gövdeden bilgi ayıklamanın birden çok yolunu destekler.</span><span class="sxs-lookup"><span data-stu-id="8de71-171">The `Message` class supports multiple ways of extracting information from its body.</span></span> <span data-ttu-id="8de71-172">Bunlar aşağıdaki kategorilerde sınıflandırılabilir:</span><span class="sxs-lookup"><span data-stu-id="8de71-172">These can be classified into the following categories:</span></span>  
  
- <span data-ttu-id="8de71-173">Tüm ileti gövdesinin bir kez bir XML yazıcı olarak yazılmış şekilde alınması.</span><span class="sxs-lookup"><span data-stu-id="8de71-173">Getting the entire message body written out at once to an XML writer.</span></span> <span data-ttu-id="8de71-174">Bu, *ileti yazma*olarak adlandırılır.</span><span class="sxs-lookup"><span data-stu-id="8de71-174">This is referred to as *writing a message*.</span></span>  
  
- <span data-ttu-id="8de71-175">İleti gövdesi üzerinde bir XML okuyucusu alma.</span><span class="sxs-lookup"><span data-stu-id="8de71-175">Getting an XML reader over the message body.</span></span> <span data-ttu-id="8de71-176">Bu, daha sonra ileti gövdesine gereken şekilde parça erişimini sağlamanıza olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="8de71-176">This enables you to later access the message body piece-by-piece as required.</span></span> <span data-ttu-id="8de71-177">Bu, *ileti okuma*olarak adlandırılır.</span><span class="sxs-lookup"><span data-stu-id="8de71-177">This is referred to as *reading a message*.</span></span>  
  
- <span data-ttu-id="8de71-178">Gövdesi dahil olmak üzere tüm ileti, türün bellek içi arabelleğine kopyalanabilir <xref:System.ServiceModel.Channels.MessageBuffer> .</span><span class="sxs-lookup"><span data-stu-id="8de71-178">The entire message, including its body, can be copied to an in-memory buffer of the <xref:System.ServiceModel.Channels.MessageBuffer> type.</span></span> <span data-ttu-id="8de71-179">Buna *bir ileti kopyalama*denir.</span><span class="sxs-lookup"><span data-stu-id="8de71-179">This is referred to as *copying a message*.</span></span>  
  
 <span data-ttu-id="8de71-180">`Message`Ne olursa olsun, bir yalnızca bir kez gövdeye erişebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8de71-180">You can access the body of a `Message` only once, regardless of how it is accessed.</span></span> <span data-ttu-id="8de71-181">Bir ileti nesnesi `State` , başlangıçta oluşturulması için ayarlanmış olan bir özelliğine sahiptir.</span><span class="sxs-lookup"><span data-stu-id="8de71-181">A message object has a `State` property, which is initially set to Created.</span></span> <span data-ttu-id="8de71-182">Yukarıdaki listede açıklanan üç erişim yöntemi, sırasıyla durum yazılır, okundu ve kopyalanabilir olarak ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="8de71-182">The three access methods described in the preceding list set the state to Written, Read, and Copied, respectively.</span></span> <span data-ttu-id="8de71-183">Ayrıca, `Close` ileti gövdesi içerikleri artık gerekli olmadığında bir yöntem durumu kapalı olarak ayarlayabilir.</span><span class="sxs-lookup"><span data-stu-id="8de71-183">Additionally, a `Close` method can set the state to Closed when the message body contents are no longer required.</span></span> <span data-ttu-id="8de71-184">İleti gövdesine yalnızca oluşturulan durumda erişilebilir ve durum değiştirildikten sonra oluşturulan duruma geri dönmenin bir yolu yoktur.</span><span class="sxs-lookup"><span data-stu-id="8de71-184">The message body can be accessed only in the Created state, and there is no way to go back to the Created state after the state has changed.</span></span>  
  
## <a name="writing-messages"></a><span data-ttu-id="8de71-185">Ileti yazma</span><span class="sxs-lookup"><span data-stu-id="8de71-185">Writing Messages</span></span>  
 <span data-ttu-id="8de71-186"><xref:System.ServiceModel.Channels.Message.WriteBodyContents%28System.Xml.XmlDictionaryWriter%29>Yöntemi belirli bir örneğin gövde içeriğini `Message` belırlı bir XML yazıcısına yazar.</span><span class="sxs-lookup"><span data-stu-id="8de71-186">The <xref:System.ServiceModel.Channels.Message.WriteBodyContents%28System.Xml.XmlDictionaryWriter%29> method writes out the body contents of a given `Message` instance to a given XML writer.</span></span> <span data-ttu-id="8de71-187"><xref:System.ServiceModel.Channels.Message.WriteBody%2A>Yöntemi, gövde içeriğini uygun sarmalayıcı öğesine (örneğin, <>) içermedikçe aynı şekilde yapar `soap:body` .</span><span class="sxs-lookup"><span data-stu-id="8de71-187">The <xref:System.ServiceModel.Channels.Message.WriteBody%2A> method does the same, except that it encloses the body contents in the appropriate wrapper element (for example, <`soap:body`>).</span></span> <span data-ttu-id="8de71-188">Son olarak, <xref:System.ServiceModel.Channels.Message.WriteMessage%2A> sarmalama soap Zarfı ve üst bilgileri de dahil olmak üzere tüm iletiyi yazar.</span><span class="sxs-lookup"><span data-stu-id="8de71-188">Finally, <xref:System.ServiceModel.Channels.Message.WriteMessage%2A> writes out the entire message, including the wrapping SOAP envelope and the headers.</span></span> <span data-ttu-id="8de71-189">SOAP kapalıysa ( <xref:System.ServiceModel.Channels.Message.Version> ise <xref:System.ServiceModel.Channels.MessageVersion.None?displayProperty=nameWithType> ), üç yöntem de aynı şeyi yapar: ileti gövdesi içeriklerini yazar.</span><span class="sxs-lookup"><span data-stu-id="8de71-189">If SOAP is turned off (<xref:System.ServiceModel.Channels.Message.Version> is <xref:System.ServiceModel.Channels.MessageVersion.None?displayProperty=nameWithType>), all three methods do the same thing: they write out the message body contents.</span></span>  
  
 <span data-ttu-id="8de71-190">Örneğin, aşağıdaki kod, gelen bir iletinin gövdesini bir dosyaya yazar.</span><span class="sxs-lookup"><span data-stu-id="8de71-190">For example, the following code writes out the body of an incoming message to a file.</span></span>  
  
 [!code-csharp[C_UsingTheMessageClass#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_usingthemessageclass/cs/source.cs#5)]
 [!code-vb[C_UsingTheMessageClass#5](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_usingthemessageclass/vb/source.vb#5)]  
  
 <span data-ttu-id="8de71-191">İki ek yardımcı yöntem, belirli SOAP başlangıç öğesi etiketlerini yazar.</span><span class="sxs-lookup"><span data-stu-id="8de71-191">Two additional helper methods write out certain SOAP start element tags.</span></span> <span data-ttu-id="8de71-192">Bu yöntemler ileti gövdesine erişemez ve bu nedenle ileti durumunu değiştirmez.</span><span class="sxs-lookup"><span data-stu-id="8de71-192">These methods do not access the message body and so they do not change the message state.</span></span> <span data-ttu-id="8de71-193">Bu güncelleştirmeler şunlardır:</span><span class="sxs-lookup"><span data-stu-id="8de71-193">These include:</span></span>  
  
- <span data-ttu-id="8de71-194"><xref:System.ServiceModel.Channels.Message.WriteStartBody%2A>başlangıç gövdesi öğesini (örneğin,) yazar `<soap:Body>` .</span><span class="sxs-lookup"><span data-stu-id="8de71-194"><xref:System.ServiceModel.Channels.Message.WriteStartBody%2A> writes the start body element, for example, `<soap:Body>`.</span></span>  
  
- <span data-ttu-id="8de71-195"><xref:System.ServiceModel.Channels.Message.WriteStartEnvelope%2A>başlangıç zarfı öğesini (örneğin,) yazar `<soap:Envelope>` .</span><span class="sxs-lookup"><span data-stu-id="8de71-195"><xref:System.ServiceModel.Channels.Message.WriteStartEnvelope%2A> writes the start envelope element, for example, `<soap:Envelope>`.</span></span>  
  
 <span data-ttu-id="8de71-196">Karşılık gelen bitiş öğesi etiketlerini yazmak için `WriteEndElement` ılgılı XML yazıcı üzerinde öğesini çağırın.</span><span class="sxs-lookup"><span data-stu-id="8de71-196">To write the corresponding end element tags, call `WriteEndElement` on the corresponding XML writer.</span></span> <span data-ttu-id="8de71-197">Bu yöntemler nadiren doğrudan çağırılır.</span><span class="sxs-lookup"><span data-stu-id="8de71-197">These methods are rarely called directly.</span></span>  
  
## <a name="reading-messages"></a><span data-ttu-id="8de71-198">Iletileri okuma</span><span class="sxs-lookup"><span data-stu-id="8de71-198">Reading Messages</span></span>  
 <span data-ttu-id="8de71-199">Bir ileti gövdesini okumayı sağlamanın birincil yolu, çağrıladır <xref:System.ServiceModel.Channels.Message.GetReaderAtBodyContents%2A> .</span><span class="sxs-lookup"><span data-stu-id="8de71-199">The primary way to read a message body is to call <xref:System.ServiceModel.Channels.Message.GetReaderAtBodyContents%2A>.</span></span> <span data-ttu-id="8de71-200"><xref:System.Xml.XmlDictionaryReader>İleti gövdesini okumak için kullanabileceğiniz bir geri alırsınız.</span><span class="sxs-lookup"><span data-stu-id="8de71-200">You get back an <xref:System.Xml.XmlDictionaryReader> that you can use to read the message body.</span></span> <span data-ttu-id="8de71-201"><xref:System.ServiceModel.Channels.Message> <xref:System.ServiceModel.Channels.Message.GetReaderAtBodyContents%2A> Döndürülen XML okuyucusunu kullandığınızda değil, okuma durumuna yapılan geçişlerin çağrılır.</span><span class="sxs-lookup"><span data-stu-id="8de71-201">Note that the <xref:System.ServiceModel.Channels.Message> transitions to the Read state as soon as <xref:System.ServiceModel.Channels.Message.GetReaderAtBodyContents%2A> is called, and not when you use the returned XML reader.</span></span>  
  
 <span data-ttu-id="8de71-202"><xref:System.ServiceModel.Channels.Message.GetBody%2A>Yöntemi, ileti gövdesine türü belirlenmiş bir nesne olarak erişmenizi de sağlar.</span><span class="sxs-lookup"><span data-stu-id="8de71-202">The <xref:System.ServiceModel.Channels.Message.GetBody%2A> method also enables you to access the message body as a typed object.</span></span> <span data-ttu-id="8de71-203">Dahili olarak, bu yöntem kullanır `GetReaderAtBodyContents` ve ayrıca ileti durumunu <xref:System.ServiceModel.Channels.MessageState.Read> duruma geçirir (bkz <xref:System.ServiceModel.Channels.Message.State%2A> . özelliği).</span><span class="sxs-lookup"><span data-stu-id="8de71-203">Internally, this method uses `GetReaderAtBodyContents`, and so it also transitions the message state to the <xref:System.ServiceModel.Channels.MessageState.Read> state (see the <xref:System.ServiceModel.Channels.Message.State%2A> property).</span></span>  
  
 <span data-ttu-id="8de71-204">Özelliğini denetlemek iyi <xref:System.ServiceModel.Channels.Message.IsEmpty%2A> bir uygulamadır, bu durumda ileti gövdesi boştur ve <xref:System.ServiceModel.Channels.Message.GetReaderAtBodyContents%2A> bir oluşturur <xref:System.InvalidOperationException> .</span><span class="sxs-lookup"><span data-stu-id="8de71-204">It is good practice to check the <xref:System.ServiceModel.Channels.Message.IsEmpty%2A> property, in which case the message body is empty and <xref:System.ServiceModel.Channels.Message.GetReaderAtBodyContents%2A> throws an <xref:System.InvalidOperationException>.</span></span> <span data-ttu-id="8de71-205">Ayrıca, alınan bir iletidir (örneğin, yanıt), <xref:System.ServiceModel.Channels.Message.IsFault%2A> iletinin bir hata içerip içermediğini belirten denetlemek de isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8de71-205">Also, if it is a received message (for example, the reply), you may also want to check <xref:System.ServiceModel.Channels.Message.IsFault%2A>, which indicates whether the message contains a fault.</span></span>  
  
 <span data-ttu-id="8de71-206">' Nin en temel aşırı yüklemesi, <xref:System.ServiceModel.Channels.Message.GetBody%2A> <xref:System.Runtime.Serialization.DataContractSerializer> varsayılan ayarlarla yapılandırılmış ve <xref:System.Runtime.Serialization.DataContractSerializer.MaxItemsInObjectGraph%2A> kotasının devre dışı bırakıldığı bir tür örneğine (genel parametresiyle belirtilir) ileti gövdesini serileştirir.</span><span class="sxs-lookup"><span data-stu-id="8de71-206">The most basic overload of <xref:System.ServiceModel.Channels.Message.GetBody%2A> deserializes the message body into an instance of a type (indicated by the generic parameter) using a <xref:System.Runtime.Serialization.DataContractSerializer> configured with the default settings and with the <xref:System.Runtime.Serialization.DataContractSerializer.MaxItemsInObjectGraph%2A> quota disabled.</span></span> <span data-ttu-id="8de71-207">Farklı bir serileştirme altyapısı kullanmak veya `DataContractSerializer` varsayılan olmayan bir şekilde yapılandırmak istiyorsanız, <xref:System.ServiceModel.Channels.Message.GetBody%2A> alan aşırı yüklemeyi kullanın <xref:System.Runtime.Serialization.XmlObjectSerializer> .</span><span class="sxs-lookup"><span data-stu-id="8de71-207">If you want to use a different serialization engine, or configure the `DataContractSerializer` in a non-default way, use the <xref:System.ServiceModel.Channels.Message.GetBody%2A> overload that takes an <xref:System.Runtime.Serialization.XmlObjectSerializer>.</span></span>  
  
 <span data-ttu-id="8de71-208">Örneğin, aşağıdaki kod serileştirilmiş bir nesne içeren bir ileti gövdesinden verileri ayıklar `Person` ve kişinin adını yazdırır.</span><span class="sxs-lookup"><span data-stu-id="8de71-208">For example, the following code extracts data from a message body that contains a serialized `Person` object and prints out the person’s name.</span></span>  
  
 [!code-csharp[C_UsingTheMessageClass#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_usingthemessageclass/cs/source.cs#6)]
 [!code-vb[C_UsingTheMessageClass#6](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_usingthemessageclass/vb/source.vb#6)]  
  
## <a name="copying-a-message-into-a-buffer"></a><span data-ttu-id="8de71-209">Bir Iletiyi arabelleğe kopyalama</span><span class="sxs-lookup"><span data-stu-id="8de71-209">Copying a Message into a Buffer</span></span>  
 <span data-ttu-id="8de71-210">Bazen ileti gövdesine birden çok kez erişmek gerekir, örneğin, aynı iletiyi Yayımcı-abone sisteminin bir parçası olarak birden fazla hedefe iletmek için.</span><span class="sxs-lookup"><span data-stu-id="8de71-210">Sometimes it is necessary to access the message body more than once, for example, to forward the same message to multiple destinations as part of a publisher-subscriber system.</span></span> <span data-ttu-id="8de71-211">Bu durumda, bellekteki tüm iletiyi (gövde dahil) arabelleğe almak gereklidir.</span><span class="sxs-lookup"><span data-stu-id="8de71-211">In this case, it is necessary to buffer the entire message (including the body) in memory.</span></span> <span data-ttu-id="8de71-212">Bunu çağırarak yapabilirsiniz <xref:System.ServiceModel.Channels.Message.CreateBufferedCopy%28System.Int32%29> .</span><span class="sxs-lookup"><span data-stu-id="8de71-212">You can do this by calling <xref:System.ServiceModel.Channels.Message.CreateBufferedCopy%28System.Int32%29>.</span></span> <span data-ttu-id="8de71-213">Bu yöntem, en büyük arabellek boyutunu temsil eden bir tamsayı parametresi alır ve bu boyuttan daha büyük olmayan bir arabellek oluşturur.</span><span class="sxs-lookup"><span data-stu-id="8de71-213">This method takes an integer parameter that represents the maximum buffer size, and creates a buffer not larger than this size.</span></span> <span data-ttu-id="8de71-214">İleti güvenilmeyen bir kaynaktan geliyorsa bunu güvenli bir değere ayarlamanız önemlidir.</span><span class="sxs-lookup"><span data-stu-id="8de71-214">It is important to set this to a safe value if the message is coming from an untrusted source.</span></span>  
  
 <span data-ttu-id="8de71-215">Arabellek bir örnek olarak döndürülür <xref:System.ServiceModel.Channels.MessageBuffer> .</span><span class="sxs-lookup"><span data-stu-id="8de71-215">The buffer is returned as a <xref:System.ServiceModel.Channels.MessageBuffer> instance.</span></span> <span data-ttu-id="8de71-216">Arabellekteki verilere çeşitli yollarla erişebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8de71-216">You can access data in the buffer in several ways.</span></span> <span data-ttu-id="8de71-217">Birincil yol, <xref:System.ServiceModel.Channels.Message.CreateMessage%2A> arabellekteki örnekleri oluşturmak için çağrıladır `Message` .</span><span class="sxs-lookup"><span data-stu-id="8de71-217">The primary way is to call <xref:System.ServiceModel.Channels.Message.CreateMessage%2A> to create `Message` instances from the buffer.</span></span>  
  
 <span data-ttu-id="8de71-218">Arabellekteki verilere erişmenin başka bir yolu, <xref:System.Xml.XPath.IXPathNavigable> <xref:System.ServiceModel.Channels.MessageBuffer> sınıfın temel alınan XML 'e doğrudan erişmek için uyguladığı arabirimi uygulamaktır.</span><span class="sxs-lookup"><span data-stu-id="8de71-218">Another way to access the data in the buffer is to implement the <xref:System.Xml.XPath.IXPathNavigable> interface that the <xref:System.ServiceModel.Channels.MessageBuffer> class implements to access the underlying XML directly.</span></span> <span data-ttu-id="8de71-219">Bazı <xref:System.ServiceModel.Channels.MessageBuffer.CreateNavigator%2A> aşırı yüklemeler <xref:System.Xml.XPath> , bir düğüm kotasıyla korunan ve zıyaret edilecek XML düğümlerinin sayısını sınırlayan gezintiler oluşturmanızı sağlar.</span><span class="sxs-lookup"><span data-stu-id="8de71-219">Some <xref:System.ServiceModel.Channels.MessageBuffer.CreateNavigator%2A> overloads allow you to create <xref:System.Xml.XPath> navigators protected by a node quota, limiting the number of XML nodes that can be visited.</span></span> <span data-ttu-id="8de71-220">Bu, uzun işlem süresine göre hizmet reddi saldırılarını önlemeye yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="8de71-220">This helps prevent denial of service attacks based on lengthy processing time.</span></span> <span data-ttu-id="8de71-221">Bu teklif varsayılan olarak devre dışıdır.</span><span class="sxs-lookup"><span data-stu-id="8de71-221">This quote is disabled by default.</span></span> <span data-ttu-id="8de71-222">Bazı `CreateNavigator` aşırı yüklemeler <xref:System.Xml.XmlSpace> , varsayılan değer olarak, sabit LISTESINI kullanarak XML 'de ne kadar boşluk işleneceğini belirtmenizi sağlar `XmlSpace.None` .</span><span class="sxs-lookup"><span data-stu-id="8de71-222">Some `CreateNavigator` overloads allow you to specify how white space should be handled in the XML using the <xref:System.Xml.XmlSpace> enumeration, with the default being `XmlSpace.None`.</span></span>  
  
 <span data-ttu-id="8de71-223">İleti arabelleğinin içeriğine erişmenin son bir yolu, kullanarak içeriğini bir akışa yazmaktır <xref:System.ServiceModel.Channels.Message.WriteMessage%2A> .</span><span class="sxs-lookup"><span data-stu-id="8de71-223">A final way to access the contents of a message buffer is to write out its contents to a stream using <xref:System.ServiceModel.Channels.Message.WriteMessage%2A>.</span></span>  
  
 <span data-ttu-id="8de71-224">Aşağıdaki örnek, ile çalışma sürecini gösterir `MessageBuffer` : gelen bir ileti birden çok alıcıya iletilir ve sonra bir dosyaya kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="8de71-224">The following example demonstrates the process of working with a `MessageBuffer`: an incoming message is forwarded to multiple recipients, and then logged to a file.</span></span> <span data-ttu-id="8de71-225">Arabelleğe alma olmadan bu mümkün değildir, çünkü ileti gövdesine yalnızca bir kez erişilebilir.</span><span class="sxs-lookup"><span data-stu-id="8de71-225">Without buffering, this is not possible, because the message body can then be accessed only once.</span></span>  
  
 [!code-csharp[C_UsingTheMessageClass#7](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_usingthemessageclass/cs/source.cs#7)]
 [!code-vb[C_UsingTheMessageClass#7](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_usingthemessageclass/vb/source.vb#7)]  
  
 <span data-ttu-id="8de71-226">`MessageBuffer`Sınıfı, başka üyelere dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="8de71-226">The `MessageBuffer` class has other members worth noting.</span></span> <span data-ttu-id="8de71-227">Bu <xref:System.ServiceModel.Channels.MessageBuffer.Close%2A> Yöntem, arabellek içerikleri artık gerekli olmadığında kaynakları serbest bırakmak için çağrılabilir.</span><span class="sxs-lookup"><span data-stu-id="8de71-227">The <xref:System.ServiceModel.Channels.MessageBuffer.Close%2A> method can be called to free resources when the buffer contents are no longer required.</span></span> <span data-ttu-id="8de71-228"><xref:System.ServiceModel.Channels.MessageBuffer.BufferSize%2A>Özelliği, ayrılan arabelleğin boyutunu döndürür.</span><span class="sxs-lookup"><span data-stu-id="8de71-228">The <xref:System.ServiceModel.Channels.MessageBuffer.BufferSize%2A> property returns the size of the allocated buffer.</span></span> <span data-ttu-id="8de71-229"><xref:System.ServiceModel.Channels.MessageBuffer.MessageContentType%2A>Özelliği ILETININ MIME içerik türünü döndürür.</span><span class="sxs-lookup"><span data-stu-id="8de71-229">The <xref:System.ServiceModel.Channels.MessageBuffer.MessageContentType%2A> property returns the MIME content type of the message.</span></span>  
  
## <a name="accessing-the-message-body-for-debugging"></a><span data-ttu-id="8de71-230">Hata ayıklama için Ileti gövdesine erişme</span><span class="sxs-lookup"><span data-stu-id="8de71-230">Accessing the Message Body for Debugging</span></span>  
 <span data-ttu-id="8de71-231">Hata ayıklama amacıyla, <xref:System.ServiceModel.Channels.Message.ToString%2A> bir dize olarak iletinin gösterimini almak için yöntemini çağırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8de71-231">For debugging purposes, you can call the <xref:System.ServiceModel.Channels.Message.ToString%2A> method to get a representation of the message as a string.</span></span> <span data-ttu-id="8de71-232">Bu gösterim genellikle, metin kodlayıcıyla kodlanmışsa, XML 'in insanlar okunabilirlik için daha iyi biçimlendirildiğinden emin olmak dışında, bir iletinin bir ileti ile kodlanması ile aynı şekilde ele alınmasıdır.</span><span class="sxs-lookup"><span data-stu-id="8de71-232">This representation generally matches the way a message would look on the wire if it were encoded with the text encoder, except that the XML would be better formatted for human readability.</span></span> <span data-ttu-id="8de71-233">Bunun tek istisnası ileti gövdesidir.</span><span class="sxs-lookup"><span data-stu-id="8de71-233">The one exception to this is the message body.</span></span> <span data-ttu-id="8de71-234">Gövde yalnızca bir kez okunabilir ve `ToString` ileti durumunu değiştirmez.</span><span class="sxs-lookup"><span data-stu-id="8de71-234">The body can be read only once, and `ToString` does not change the message state.</span></span> <span data-ttu-id="8de71-235">Bu nedenle, `ToString` Yöntem gövdeye erişebilmeyebilir ve bir yer tutucuyu (örneğin, "...") kullanabilir. ya da üç nokta) ileti gövdesi yerine.</span><span class="sxs-lookup"><span data-stu-id="8de71-235">Therefore, the `ToString` method might not be able to access the body and might substitute a placeholder (for example, "…" or three dots) instead of the message body.</span></span> <span data-ttu-id="8de71-236">Bu nedenle, `ToString` iletilerin gövde içeriği önemliyse iletileri günlüğe kaydetmek için kullanmayın.</span><span class="sxs-lookup"><span data-stu-id="8de71-236">Therefore, do not use `ToString` to log messages if the body content of the messages is important.</span></span>  
  
## <a name="accessing-other-message-parts"></a><span data-ttu-id="8de71-237">Diğer Ileti bölümlerine erişme</span><span class="sxs-lookup"><span data-stu-id="8de71-237">Accessing Other Message Parts</span></span>  
 <span data-ttu-id="8de71-238">Gövde içerikleri dışındaki iletiyle ilgili bilgilere erişmek için çeşitli özellikler sağlanır.</span><span class="sxs-lookup"><span data-stu-id="8de71-238">Various properties are provided to access information about the message other than its body contents.</span></span> <span data-ttu-id="8de71-239">Ancak, ileti kapatıldıktan sonra bunlar çağrılamaz:</span><span class="sxs-lookup"><span data-stu-id="8de71-239">However, these cannot be called once the message has been closed:</span></span>  
  
- <span data-ttu-id="8de71-240"><xref:System.ServiceModel.Channels.Message.Headers%2A>Özelliği ileti üstbilgilerini temsil eder.</span><span class="sxs-lookup"><span data-stu-id="8de71-240">The <xref:System.ServiceModel.Channels.Message.Headers%2A> property represents the message headers.</span></span> <span data-ttu-id="8de71-241">Bu konunun ilerleyen kısımlarında yer alan "üstbilgileriyle çalışma" bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="8de71-241">See the section on "Working with Headers" later in this topic.</span></span>  
  
- <span data-ttu-id="8de71-242"><xref:System.ServiceModel.Channels.Message.Properties%2A>Özelliği, ileti gönderildiğinde genellikle yayınlanmayan iletiye eklenen adlandırılmış veri parçaları olan ileti özelliklerini temsil eder.</span><span class="sxs-lookup"><span data-stu-id="8de71-242">The <xref:System.ServiceModel.Channels.Message.Properties%2A> property represents the message properties, which are pieces of named data attached to the message that do not generally get emitted when the message is sent.</span></span> <span data-ttu-id="8de71-243">Bu konunun ilerleyen kısımlarında yer alan "özelliklerle çalışma" bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="8de71-243">See the section on "Working with Properties" later in this topic.</span></span>  
  
- <span data-ttu-id="8de71-244"><xref:System.ServiceModel.Channels.Message.Version%2A>Özelliği, iletiyle ILIŞKILI SOAP ve ws-Addressing sürümünü, ya da `None` SOAP devre dışı olduğunu gösterir.</span><span class="sxs-lookup"><span data-stu-id="8de71-244">The <xref:System.ServiceModel.Channels.Message.Version%2A> property indicates the SOAP and WS-Addressing version associated with the message, or `None` if SOAP is disabled.</span></span>  
  
- <span data-ttu-id="8de71-245"><xref:System.ServiceModel.Channels.Message.IsFault%2A>Özelliği, `true` ILETI bir SOAP hata iletisi ise döndürür.</span><span class="sxs-lookup"><span data-stu-id="8de71-245">The <xref:System.ServiceModel.Channels.Message.IsFault%2A> property returns `true` if the message is a SOAP fault message.</span></span>  
  
- <span data-ttu-id="8de71-246"><xref:System.ServiceModel.Channels.Message.IsEmpty%2A>Özelliği, `true` ileti boşsa döndürür.</span><span class="sxs-lookup"><span data-stu-id="8de71-246">The <xref:System.ServiceModel.Channels.Message.IsEmpty%2A> property returns `true` if the message is empty.</span></span>  
  
 <span data-ttu-id="8de71-247"><xref:System.ServiceModel.Channels.Message.GetBodyAttribute%28System.String%2CSystem.String%29> `<soap:Body>` Belirli bir ad ve ad alanı tarafından tanımlanan gövde sarmalayıcı öğesi (örneğin,) üzerinde belirli bir özniteliğe erişmek için yöntemini kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8de71-247">You can use the <xref:System.ServiceModel.Channels.Message.GetBodyAttribute%28System.String%2CSystem.String%29> method to access a particular attribute on the body wrapper element (for example, `<soap:Body>`) identified by a particular name and namespace.</span></span> <span data-ttu-id="8de71-248">Böyle bir öznitelik bulunamazsa, `null` döndürülür.</span><span class="sxs-lookup"><span data-stu-id="8de71-248">If such an attribute is not found, `null` is returned.</span></span> <span data-ttu-id="8de71-249">Bu yöntem yalnızca `Message` oluşturma durumunda olduğunda çağrılabilir (ileti gövdesine henüz erişilmemişse).</span><span class="sxs-lookup"><span data-stu-id="8de71-249">This method can be called only when the `Message` is in the Created state (when the message body has not yet been accessed).</span></span>  
  
## <a name="working-with-headers"></a><span data-ttu-id="8de71-250">Üstbilgileriyle çalışma</span><span class="sxs-lookup"><span data-stu-id="8de71-250">Working with Headers</span></span>  
 <span data-ttu-id="8de71-251">`Message`, *Üst bilgiler*olarak adlandırılan herhangi BIR sayıda adlandırılmış XML parçacığı içerebilir.</span><span class="sxs-lookup"><span data-stu-id="8de71-251">A `Message` can contain any number of named XML fragments, called *headers*.</span></span> <span data-ttu-id="8de71-252">Her parça normalde bir SOAP üstbilgisiyle eşlenir.</span><span class="sxs-lookup"><span data-stu-id="8de71-252">Each fragment normally maps to a SOAP header.</span></span> <span data-ttu-id="8de71-253">Üst bilgilere, `Headers` türünün özelliği aracılığıyla erişilir <xref:System.ServiceModel.Channels.MessageHeaders> .</span><span class="sxs-lookup"><span data-stu-id="8de71-253">Headers are accessed through the `Headers` property of type <xref:System.ServiceModel.Channels.MessageHeaders>.</span></span> <span data-ttu-id="8de71-254"><xref:System.ServiceModel.Channels.MessageHeaders>bir <xref:System.ServiceModel.Channels.MessageHeaderInfo> nesne koleksiyonudur ve tek bir üst bilgiye kendi <xref:System.Collections.IEnumerable> arabiriminden ya da onun Dizin Oluşturucusu aracılığıyla erişilebilir.</span><span class="sxs-lookup"><span data-stu-id="8de71-254"><xref:System.ServiceModel.Channels.MessageHeaders> is a collection of <xref:System.ServiceModel.Channels.MessageHeaderInfo> objects, and individual headers can be accessed through its <xref:System.Collections.IEnumerable> interface or through its indexer.</span></span> <span data-ttu-id="8de71-255">Örneğin, aşağıdaki kod, içindeki tüm üstbilgilerin adlarını listeler `Message` .</span><span class="sxs-lookup"><span data-stu-id="8de71-255">For example, the following code lists the names of all the headers in a `Message`.</span></span>  
  
 [!code-csharp[C_UsingTheMessageClass#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_usingthemessageclass/cs/source.cs#8)]
 [!code-vb[C_UsingTheMessageClass#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_usingthemessageclass/vb/source.vb#8)]  
  
#### <a name="adding-removing-finding-headers"></a><span data-ttu-id="8de71-256">Üst bilgileri ekleme, kaldırma, bulma</span><span class="sxs-lookup"><span data-stu-id="8de71-256">Adding, Removing, Finding Headers</span></span>  
 <span data-ttu-id="8de71-257">Yöntemini kullanarak tüm mevcut üstbilgilerin sonuna yeni bir üst bilgi ekleyebilirsiniz <xref:System.ServiceModel.Channels.MessageHeaders.Add%2A> .</span><span class="sxs-lookup"><span data-stu-id="8de71-257">You can add a new header at the end of all existing headers using the <xref:System.ServiceModel.Channels.MessageHeaders.Add%2A> method.</span></span> <span data-ttu-id="8de71-258"><xref:System.ServiceModel.Channels.MessageHeaders.Insert%2A>Belirli bir dizine üst bilgi eklemek için yöntemini kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8de71-258">You can use the <xref:System.ServiceModel.Channels.MessageHeaders.Insert%2A> method to insert a header at a particular index.</span></span> <span data-ttu-id="8de71-259">Eklenen öğe için mevcut üstbilgiler kaydırılacağı.</span><span class="sxs-lookup"><span data-stu-id="8de71-259">Existing headers are shifted for the inserted item.</span></span> <span data-ttu-id="8de71-260">Üst bilgiler, dizinlerine göre sıralanır ve kullanılabilir ilk dizin 0 ' dır.</span><span class="sxs-lookup"><span data-stu-id="8de71-260">Headers are ordered according to their index, and the first available index is 0.</span></span> <span data-ttu-id="8de71-261"><xref:System.ServiceModel.Channels.MessageHeaders.CopyHeadersFrom%2A>Farklı bir veya örneğinden üst bilgi eklemek için çeşitli yöntem yüklerini kullanabilirsiniz `Message` `MessageHeaders` .</span><span class="sxs-lookup"><span data-stu-id="8de71-261">You can use the various <xref:System.ServiceModel.Channels.MessageHeaders.CopyHeadersFrom%2A> method overloads to add headers from a different `Message` or `MessageHeaders` instance.</span></span> <span data-ttu-id="8de71-262">Bazı aşırı yüklemeler tek bir üst bilgiyi kopyalar, diğerleri ise tümünü kopyalar.</span><span class="sxs-lookup"><span data-stu-id="8de71-262">Some overloads copy one individual header, while others copy all of them.</span></span> <span data-ttu-id="8de71-263"><xref:System.ServiceModel.Channels.MessageHeaders.Clear%2A>Yöntemi tüm üst bilgileri kaldırır.</span><span class="sxs-lookup"><span data-stu-id="8de71-263">The <xref:System.ServiceModel.Channels.MessageHeaders.Clear%2A> method removes all headers.</span></span> <span data-ttu-id="8de71-264"><xref:System.ServiceModel.Channels.MessageHeaders.RemoveAt%2A>Yöntemi belirli bir dizindeki bir üst bilgiyi kaldırır (sonrasında tüm üst bilgileri kaydırma).</span><span class="sxs-lookup"><span data-stu-id="8de71-264">The <xref:System.ServiceModel.Channels.MessageHeaders.RemoveAt%2A> method removes a header at a particular index (shifting all headers after it).</span></span> <span data-ttu-id="8de71-265"><xref:System.ServiceModel.Channels.MessageHeaders.RemoveAll%2A>Yöntemi, belirli bir ad ve ad alanı ile tüm üstbilgileri kaldırır.</span><span class="sxs-lookup"><span data-stu-id="8de71-265">The <xref:System.ServiceModel.Channels.MessageHeaders.RemoveAll%2A> method removes all headers with a particular name and namespace.</span></span>  
  
 <span data-ttu-id="8de71-266">Yöntemini kullanarak belirli bir üst bilgiyi alın <xref:System.ServiceModel.Channels.MessageHeaders.FindHeader%2A> .</span><span class="sxs-lookup"><span data-stu-id="8de71-266">Retrieve a particular header using the <xref:System.ServiceModel.Channels.MessageHeaders.FindHeader%2A> method.</span></span> <span data-ttu-id="8de71-267">Bu yöntem, bulunacak üstbilginin adını ve ad alanını alır ve dizinini döndürür.</span><span class="sxs-lookup"><span data-stu-id="8de71-267">This method takes the name and namespace of the header to find, and returns its index.</span></span> <span data-ttu-id="8de71-268">Üst bilgi birden çok kez oluşursa, bir özel durum oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="8de71-268">If the header occurs more than once, an exception is thrown.</span></span> <span data-ttu-id="8de71-269">Üst bilgi bulunamazsa,-1 döndürür.</span><span class="sxs-lookup"><span data-stu-id="8de71-269">If the header is not found, it returns -1.</span></span>  
  
 <span data-ttu-id="8de71-270">SOAP üstbilgi modelinde, üst bilgilerin `Actor` amaçlanan alıcıyı belirten bir değeri olabilir.</span><span class="sxs-lookup"><span data-stu-id="8de71-270">In the SOAP header model, headers can have an `Actor` value that specifies the intended recipient of the header.</span></span> <span data-ttu-id="8de71-271">En temel `FindHeader` aşırı yükleme yalnızca iletinin son alıcısı için tasarlanan üstbilgileri arar.</span><span class="sxs-lookup"><span data-stu-id="8de71-271">The most basic `FindHeader` overload searches only headers intended for the ultimate receiver of the message.</span></span> <span data-ttu-id="8de71-272">Ancak, başka bir aşırı yükleme, aramaya hangi `Actor` değerlerin ekleneceğini belirtmenize olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="8de71-272">However, another overload enables you to specify which `Actor` values are included in the search.</span></span> <span data-ttu-id="8de71-273">Daha fazla bilgi için bkz. SOAP belirtimi.</span><span class="sxs-lookup"><span data-stu-id="8de71-273">For more information, see the SOAP specification.</span></span>  
  
 <span data-ttu-id="8de71-274">Bir <xref:System.ServiceModel.Channels.MessageHeaders.CopyTo%28System.ServiceModel.Channels.MessageHeaderInfo%5B%5D%2CSystem.Int32%29> koleksiyondaki üst bilgileri bir nesne dizisine kopyalamak için bir yöntem sağlanır <xref:System.ServiceModel.Channels.MessageHeaders> <xref:System.ServiceModel.Channels.MessageHeaderInfo> .</span><span class="sxs-lookup"><span data-stu-id="8de71-274">A <xref:System.ServiceModel.Channels.MessageHeaders.CopyTo%28System.ServiceModel.Channels.MessageHeaderInfo%5B%5D%2CSystem.Int32%29> method is provided to copy headers from a <xref:System.ServiceModel.Channels.MessageHeaders> collection to an array of <xref:System.ServiceModel.Channels.MessageHeaderInfo> objects.</span></span>  
  
 <span data-ttu-id="8de71-275">Bir başlıktaki XML verilerine erişmek için, <xref:System.ServiceModel.Channels.MessageHeaders.GetReaderAtHeader%2A> belirli bir üst bilgi dizini için BIR XML okuyucusu çağırabilir ve döndürebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8de71-275">To access the XML data in a header, you can call <xref:System.ServiceModel.Channels.MessageHeaders.GetReaderAtHeader%2A> and return an XML reader for the specific header index.</span></span> <span data-ttu-id="8de71-276">Üst bilgi içeriğini bir nesne veya diğer aşırı yüklerden birini kullanarak seri durumdan çıkarmak istiyorsanız <xref:System.ServiceModel.Channels.MessageHeaders.GetHeader%60%601%28System.Int32%29> .</span><span class="sxs-lookup"><span data-stu-id="8de71-276">If you want to deserialize the header contents into an object, use <xref:System.ServiceModel.Channels.MessageHeaders.GetHeader%60%601%28System.Int32%29> or one of the other overloads.</span></span> <span data-ttu-id="8de71-277">En temel aşırı yüklemeler varsayılan şekilde yapılandırılmış kullanılarak üst bilgilerin serisini kaldıramıyor <xref:System.Runtime.Serialization.DataContractSerializer> .</span><span class="sxs-lookup"><span data-stu-id="8de71-277">The most basic overloads deserialize headers using the <xref:System.Runtime.Serialization.DataContractSerializer> configured in the default way.</span></span> <span data-ttu-id="8de71-278">Farklı bir serileştirici veya farklı bir yapılandırması kullanmak istiyorsanız `DataContractSerializer` , bir kullanan aşırı yüklemelerin birini kullanın `XmlObjectSerializer` .</span><span class="sxs-lookup"><span data-stu-id="8de71-278">If you want to use a different serializer or a different configuration of the `DataContractSerializer`, use one of the overloads that take an `XmlObjectSerializer`.</span></span> <span data-ttu-id="8de71-279">Ayrıca üst bilgi adını, ad alanını ve isteğe bağlı olarak bir dizin yerine bir değer listesini alan aşırı yüklemeler de vardır `Actor` ; Bu bir `FindHeader` ve birleşimidir `GetHeader` .</span><span class="sxs-lookup"><span data-stu-id="8de71-279">There are also overloads that take the header name, namespace, and optionally a list of `Actor` values instead of an index; this is a combination of `FindHeader` and `GetHeader`.</span></span>  
  
## <a name="working-with-properties"></a><span data-ttu-id="8de71-280">Özelliklerle çalışma</span><span class="sxs-lookup"><span data-stu-id="8de71-280">Working with Properties</span></span>  
 <span data-ttu-id="8de71-281">Bir `Message` örnek rastgele türlerde adlandırılmış nesneleri rastgele bir dizi içerebilir.</span><span class="sxs-lookup"><span data-stu-id="8de71-281">A `Message` instance can contain an arbitrary number of named objects of arbitrary types.</span></span> <span data-ttu-id="8de71-282">Bu koleksiyona, `Properties` türünün özelliği aracılığıyla erişilir `MessageProperties` .</span><span class="sxs-lookup"><span data-stu-id="8de71-282">This collection is accessed through the `Properties` property of type `MessageProperties`.</span></span> <span data-ttu-id="8de71-283">Koleksiyon <xref:System.Collections.Generic.IDictionary%602> arabirimini uygular ve öğesinden öğesine eşleme görevi görür <xref:System.String> <xref:System.Object> .</span><span class="sxs-lookup"><span data-stu-id="8de71-283">The collection implements the <xref:System.Collections.Generic.IDictionary%602> interface and acts as a mapping from <xref:System.String> to <xref:System.Object>.</span></span> <span data-ttu-id="8de71-284">Normalde, özellik değerleri doğrudan iletinin herhangi bir bölümüne doğrudan eşlenmiyor, ancak WCF kanal yığınındaki veya hizmet çerçevesindeki çeşitli kanallara çeşitli ileti işleme ipuçları sağlar <xref:System.ServiceModel.Channels.MessageHeaders.CopyTo%28System.ServiceModel.Channels.MessageHeaderInfo%5B%5D%2CSystem.Int32%29> .</span><span class="sxs-lookup"><span data-stu-id="8de71-284">Normally, property values do not map directly to any part of the message on the wire, but rather provide various message processing hints to the various channels in the WCF channel stack or to the <xref:System.ServiceModel.Channels.MessageHeaders.CopyTo%28System.ServiceModel.Channels.MessageHeaderInfo%5B%5D%2CSystem.Int32%29> service framework.</span></span> <span data-ttu-id="8de71-285">Bir örnek için bkz. [veri aktarımı mimari genel bakış](data-transfer-architectural-overview.md).</span><span class="sxs-lookup"><span data-stu-id="8de71-285">For an example, see [Data Transfer Architectural Overview](data-transfer-architectural-overview.md).</span></span>  
  
## <a name="inheriting-from-the-message-class"></a><span data-ttu-id="8de71-286">Ileti sınıfından devralma</span><span class="sxs-lookup"><span data-stu-id="8de71-286">Inheriting from the Message Class</span></span>  
 <span data-ttu-id="8de71-287">Kullanılarak oluşturulan yerleşik ileti türleri `CreateMessage` gereksinimlerinizi karşılamıyorsa, sınıfından türetilen bir sınıf oluşturun `Message` .</span><span class="sxs-lookup"><span data-stu-id="8de71-287">If the built-in message types created using `CreateMessage` do not meet your requirements, create a class that derives from the `Message` class.</span></span>  
  
### <a name="defining-the-message-body-contents"></a><span data-ttu-id="8de71-288">Ileti gövdesi Içeriğini tanımlama</span><span class="sxs-lookup"><span data-stu-id="8de71-288">Defining the Message Body Contents</span></span>  
 <span data-ttu-id="8de71-289">İleti gövdesinde verilere erişmek için üç birincil teknik mevcuttur: bir arabelleğe yazma, okuma ve bu verileri kopyalama.</span><span class="sxs-lookup"><span data-stu-id="8de71-289">Three primary techniques exist for accessing data within a message body: writing, reading, and copying it to a buffer.</span></span> <span data-ttu-id="8de71-290">Bu işlemler, sonunda, <xref:System.ServiceModel.Channels.Message.OnWriteBodyContents%2A> ve ' <xref:System.ServiceModel.Channels.Message.OnGetReaderAtBodyContents%2A> <xref:System.ServiceModel.Channels.Message.OnCreateBufferedCopy%2A> ın türetilmiş sınıfınıza sırasıyla,, ve yöntemlerinin çağrılmakta olduğunu sonuç olarak sonuçlanır `Message` .</span><span class="sxs-lookup"><span data-stu-id="8de71-290">These operations ultimately result in the <xref:System.ServiceModel.Channels.Message.OnWriteBodyContents%2A>, <xref:System.ServiceModel.Channels.Message.OnGetReaderAtBodyContents%2A>, and <xref:System.ServiceModel.Channels.Message.OnCreateBufferedCopy%2A> methods being called, respectively, on your derived class of `Message`.</span></span> <span data-ttu-id="8de71-291">Temel `Message` sınıf, her örnek için yalnızca bir tane Bu yöntemden bir kez çağrıldığına `Message` ve bir kereden fazla çağrılmadığından emin olur.</span><span class="sxs-lookup"><span data-stu-id="8de71-291">The base `Message` class guarantees that only one of these methods is called for each `Message` instance, and that it is not called more than once.</span></span> <span data-ttu-id="8de71-292">Temel sınıf Ayrıca yöntemlerin kapalı bir ileti üzerinde çağrılmamasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="8de71-292">The base class also ensures that the methods are not called on a closed message.</span></span> <span data-ttu-id="8de71-293">Uygulamanızda ileti durumunun izlenmesi gerekmez.</span><span class="sxs-lookup"><span data-stu-id="8de71-293">There is no need to track the message state in your implementation.</span></span>  
  
 <span data-ttu-id="8de71-294"><xref:System.ServiceModel.Channels.Message.OnWriteBodyContents%2A>soyut bir yöntemdir ve uygulanması gerekir.</span><span class="sxs-lookup"><span data-stu-id="8de71-294"><xref:System.ServiceModel.Channels.Message.OnWriteBodyContents%2A> is an abstract method and must be implemented.</span></span> <span data-ttu-id="8de71-295">İletinizin gövde içeriğini tanımlamanın en temel yolu bu yöntemi kullanarak yazmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8de71-295">The most basic way to define the body contents of your message is to write using this method.</span></span> <span data-ttu-id="8de71-296">Örneğin, aşağıdaki ileti 1 ile 20 arasında 100.000 rastgele sayı içerir.</span><span class="sxs-lookup"><span data-stu-id="8de71-296">For example, the following message contains 100,000 random numbers from 1 to 20.</span></span>  
  
 [!code-csharp[C_UsingTheMessageClass#9](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_usingthemessageclass/cs/source.cs#9)]
 [!code-vb[C_UsingTheMessageClass#9](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_usingthemessageclass/vb/source.vb#9)]  
  
 <span data-ttu-id="8de71-297"><xref:System.ServiceModel.Channels.Message.OnGetReaderAtBodyContents>Ve <xref:System.ServiceModel.Channels.Message.OnCreateBufferedCopy%2A> yöntemlerinin çoğu durumda çalışan varsayılan uygulamaları vardır.</span><span class="sxs-lookup"><span data-stu-id="8de71-297">The <xref:System.ServiceModel.Channels.Message.OnGetReaderAtBodyContents> and <xref:System.ServiceModel.Channels.Message.OnCreateBufferedCopy%2A> methods have default implementations that work for most cases.</span></span> <span data-ttu-id="8de71-298">Varsayılan uygulamalar çağrı <xref:System.ServiceModel.Channels.Message.OnWriteBodyContents%2A> yapın, sonuçları arabelleğe alarak elde edilen arabellekten çalışır.</span><span class="sxs-lookup"><span data-stu-id="8de71-298">The default implementations call <xref:System.ServiceModel.Channels.Message.OnWriteBodyContents%2A>, buffer the results, and work with the resulting buffer.</span></span> <span data-ttu-id="8de71-299">Ancak, bazı durumlarda bu yeterli olmayabilir.</span><span class="sxs-lookup"><span data-stu-id="8de71-299">However, in some cases this may not be enough.</span></span> <span data-ttu-id="8de71-300">Yukarıdaki örnekte, iletiyi okumak 100.000 XML öğelerinin arabelleğe alındığı, bu da istenmeyebilir.</span><span class="sxs-lookup"><span data-stu-id="8de71-300">In the preceding example, reading the message results in 100,000 XML elements being buffered, which might not be desirable.</span></span> <span data-ttu-id="8de71-301"><xref:System.ServiceModel.Channels.Message.OnGetReaderAtBodyContents>Rastgele sayılar sunan özel bir türetilmiş sınıf döndürmek için geçersiz kılmak isteyebilirsiniz <xref:System.Xml.XmlDictionaryReader> .</span><span class="sxs-lookup"><span data-stu-id="8de71-301">You might want to override <xref:System.ServiceModel.Channels.Message.OnGetReaderAtBodyContents> to return a custom <xref:System.Xml.XmlDictionaryReader> derived class that serves up random numbers.</span></span> <span data-ttu-id="8de71-302">Ardından, <xref:System.ServiceModel.Channels.Message.OnWriteBodyContents%2A> <xref:System.ServiceModel.Channels.Message.OnGetReaderAtBodyContents> Aşağıdaki örnekte gösterildiği gibi, yöntemin döndürdüğü okuyucuyu kullanmak için geçersiz kılabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8de71-302">You can then override <xref:System.ServiceModel.Channels.Message.OnWriteBodyContents%2A> to use the reader that the <xref:System.ServiceModel.Channels.Message.OnGetReaderAtBodyContents> method returns, as shown in the following example.</span></span>  
  
 [!code-csharp[C_UsingTheMessageClass#10](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_usingthemessageclass/cs/source.cs#10)]
 [!code-vb[C_UsingTheMessageClass#10](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_usingthemessageclass/vb/source.vb#10)]  
  
 <span data-ttu-id="8de71-303">Benzer şekilde, `OnCreateBufferedCopy` kendi türetilmiş sınıfınızı döndürmek için geçersiz kılmak isteyebilirsiniz `MessageBuffer` .</span><span class="sxs-lookup"><span data-stu-id="8de71-303">Similarly, you might want to override `OnCreateBufferedCopy` to return your own `MessageBuffer` derived class.</span></span>  
  
 <span data-ttu-id="8de71-304">İleti gövdesi içerikleri sağlamaya ek olarak, iletiniz türetilmiş sınıfınız,, ve özelliklerini de geçersiz kılmalıdır `Version` `Headers` `Properties` .</span><span class="sxs-lookup"><span data-stu-id="8de71-304">In addition to providing message body contents, your message derived class must also override the `Version`, `Headers`, and `Properties` properties.</span></span>  
  
 <span data-ttu-id="8de71-305">İletinin bir kopyasını oluşturursanız, kopyanın başlangıçtaki ileti üstbilgilerini kullandığını unutmayın.</span><span class="sxs-lookup"><span data-stu-id="8de71-305">Note that if you create a copy of a message, the copy uses the message headers from the original.</span></span>  
  
### <a name="other-members-that-can-be-overridden"></a><span data-ttu-id="8de71-306">Geçersiz kılınabilen diğer Üyeler</span><span class="sxs-lookup"><span data-stu-id="8de71-306">Other Members that Can Be Overridden</span></span>  
 <span data-ttu-id="8de71-307"><xref:System.ServiceModel.Channels.Message.OnWriteStartEnvelope%2A> <xref:System.ServiceModel.Channels.Message.OnWriteStartHeaders%2A> <xref:System.ServiceModel.Channels.Message.OnWriteStartBody%2A> SOAP Zarfı, SOAP üstbilgileri ve SOAP gövdesi öğe başlangıç etiketlerinin nasıl yazıldığını belirtmek için, ve yöntemlerini geçersiz kılabilirsiniz. Bunlar normalde, ve ' a karşılık gelir `<soap:Envelope>` `<soap:Header>` `<soap:Body>` .</span><span class="sxs-lookup"><span data-stu-id="8de71-307">You can override the <xref:System.ServiceModel.Channels.Message.OnWriteStartEnvelope%2A>, <xref:System.ServiceModel.Channels.Message.OnWriteStartHeaders%2A>, and <xref:System.ServiceModel.Channels.Message.OnWriteStartBody%2A> methods to specify how the SOAP envelope, SOAP headers, and SOAP body element start tags are written out. These normally correspond to `<soap:Envelope>`, `<soap:Header>`, and `<soap:Body>`.</span></span> <span data-ttu-id="8de71-308">Bu yöntemler normalde, özelliği döndürürse bir şeyi yazmamalıdır <xref:System.ServiceModel.Channels.Message.Version> <xref:System.ServiceModel.Channels.MessageVersion.None> .</span><span class="sxs-lookup"><span data-stu-id="8de71-308">These methods should normally not write anything out if the <xref:System.ServiceModel.Channels.Message.Version> property returns <xref:System.ServiceModel.Channels.MessageVersion.None>.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="8de71-309">`OnGetReaderAtBodyContents`Çağrıları `OnWriteStartEnvelope` `OnWriteStartBody` çağırarak ve arabelleğe almadan önce, çağrıların varsayılan uygulamasıdır `OnWriteBodyContents` .</span><span class="sxs-lookup"><span data-stu-id="8de71-309">The default implementation of `OnGetReaderAtBodyContents` calls `OnWriteStartEnvelope` and `OnWriteStartBody` before calling `OnWriteBodyContents` and buffering the results.</span></span> <span data-ttu-id="8de71-310">Üstbilgiler yazılmadı.</span><span class="sxs-lookup"><span data-stu-id="8de71-310">Headers are not written out.</span></span>  
  
 <span data-ttu-id="8de71-311"><xref:System.ServiceModel.Channels.Message.OnWriteMessage%2A>Tüm iletinin çeşitli parçalarından oluşturulduğu şekli değiştirmek için yöntemini geçersiz kılın.</span><span class="sxs-lookup"><span data-stu-id="8de71-311">Override the <xref:System.ServiceModel.Channels.Message.OnWriteMessage%2A> method to change the way the entire message is constructed from its various pieces.</span></span> <span data-ttu-id="8de71-312">`OnWriteMessage`Yöntemi, <xref:System.ServiceModel.Channels.Message.WriteMessage%2A> varsayılan uygulamadan ve öğesinden çağrılır <xref:System.ServiceModel.Channels.Message.OnCreateBufferedCopy%2A> .</span><span class="sxs-lookup"><span data-stu-id="8de71-312">The `OnWriteMessage` method is called from <xref:System.ServiceModel.Channels.Message.WriteMessage%2A> and from the default <xref:System.ServiceModel.Channels.Message.OnCreateBufferedCopy%2A> implementation.</span></span> <span data-ttu-id="8de71-313">Geçersiz kılma <xref:System.ServiceModel.Channels.Message.WriteMessage%2A> en iyi yöntem değildir.</span><span class="sxs-lookup"><span data-stu-id="8de71-313">Note that overriding <xref:System.ServiceModel.Channels.Message.WriteMessage%2A> is not a best practice.</span></span> <span data-ttu-id="8de71-314">Uygun yöntemleri geçersiz kılmak daha iyidir `On` (örneğin,, <xref:System.ServiceModel.Channels.Message.OnWriteStartEnvelope%2A> <xref:System.ServiceModel.Channels.Message.OnWriteStartHeaders%2A> ve <xref:System.ServiceModel.Channels.BodyWriter.OnWriteBodyContents%2A> .</span><span class="sxs-lookup"><span data-stu-id="8de71-314">It is better to override the appropriate `On` methods (for example, <xref:System.ServiceModel.Channels.Message.OnWriteStartEnvelope%2A>, <xref:System.ServiceModel.Channels.Message.OnWriteStartHeaders%2A>, and <xref:System.ServiceModel.Channels.BodyWriter.OnWriteBodyContents%2A>.</span></span>  
  
 <span data-ttu-id="8de71-315"><xref:System.ServiceModel.Channels.Message.OnBodyToString%2A>Hata ayıklama sırasında ileti gövdesinin nasıl temsil edileceğini geçersiz kılmak için geçersiz kılın.</span><span class="sxs-lookup"><span data-stu-id="8de71-315">Override <xref:System.ServiceModel.Channels.Message.OnBodyToString%2A> to override how your message body is represented during debugging.</span></span> <span data-ttu-id="8de71-316">Varsayılan değer, üç nokta ("...") olarak temsil etmektedir.</span><span class="sxs-lookup"><span data-stu-id="8de71-316">The default is to represent it as three dots ("…").</span></span> <span data-ttu-id="8de71-317">İleti durumu kapalı dışında bir şey olduğunda, bu yöntemin birden çok kez çağrılabilecek olduğunu unutmayın.</span><span class="sxs-lookup"><span data-stu-id="8de71-317">Note that this method can be called multiple times when the message state is anything other than Closed.</span></span> <span data-ttu-id="8de71-318">Bu yöntemin uygulanması asla yalnızca bir kez gerçekleştirilmesi gereken herhangi bir eyleme neden olmamalıdır (yalnızca bir salt iletme akışından okuma gibi).</span><span class="sxs-lookup"><span data-stu-id="8de71-318">An implementation of this method should never cause any action that must be performed only once (such as reading from a forward-only stream).</span></span>  
  
 <span data-ttu-id="8de71-319"><xref:System.ServiceModel.Channels.Message.OnGetBodyAttribute%2A>SOAP body öğesindeki özniteliklere erişime izin vermek için yöntemini geçersiz kılın.</span><span class="sxs-lookup"><span data-stu-id="8de71-319">Override the <xref:System.ServiceModel.Channels.Message.OnGetBodyAttribute%2A> method to allow access to attributes on the SOAP body element.</span></span> <span data-ttu-id="8de71-320">Bu yöntem herhangi bir sayıda çağrılabilir, ancak `Message` temel tür yalnızca Ileti oluşturulduğu durumda olduğunda çağrılabilir.</span><span class="sxs-lookup"><span data-stu-id="8de71-320">This method can be called any number of times, but the `Message` base type guarantees that it is only called when the message is in the Created state.</span></span> <span data-ttu-id="8de71-321">Bir uygulamadaki durumu denetlemek gerekli değildir.</span><span class="sxs-lookup"><span data-stu-id="8de71-321">It is not required to check the state in an implementation.</span></span> <span data-ttu-id="8de71-322">Varsayılan uygulama her zaman döndürülür `null` . Bu, gövde öğesinde hiç öznitelik olmadığını gösterir.</span><span class="sxs-lookup"><span data-stu-id="8de71-322">The default implementation always returns `null`, which indicates that there are no attributes on the body element.</span></span>  
  
 <span data-ttu-id="8de71-323">`Message`İleti gövdesi artık gerekli olmadığında nesnenizin özel temizlik yapması gerekiyorsa, geçersiz kılabilirsiniz <xref:System.ServiceModel.Channels.Message.OnClose%2A> .</span><span class="sxs-lookup"><span data-stu-id="8de71-323">If your `Message` object must do any special cleanup when the message body is no longer required, you can override <xref:System.ServiceModel.Channels.Message.OnClose%2A>.</span></span> <span data-ttu-id="8de71-324">Varsayılan uygulama hiçbir şey yapmaz.</span><span class="sxs-lookup"><span data-stu-id="8de71-324">The default implementation does nothing.</span></span>  
  
 <span data-ttu-id="8de71-325">`IsEmpty`Ve `IsFault` özellikleri geçersiz kılınabilir.</span><span class="sxs-lookup"><span data-stu-id="8de71-325">The `IsEmpty` and `IsFault` properties can be overridden.</span></span> <span data-ttu-id="8de71-326">Varsayılan olarak, her ikisi de döndürülür `false` .</span><span class="sxs-lookup"><span data-stu-id="8de71-326">By default, both return `false`.</span></span>
