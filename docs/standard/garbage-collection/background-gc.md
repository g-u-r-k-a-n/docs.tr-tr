---
title: Arka plan çöp toplama
description: .NET'te arka plan çöp toplama ve iş istasyonu ve sunucu çöp toplama da nasıl farklılık olduğu hakkında bilgi edinin.
ms.date: 04/21/2020
helpviewer_keywords:
- garbage collection, background
- background garbage collection
ms.openlocfilehash: dcb1d348e679e07646273b8fbc4ea29b44ee4974
ms.sourcegitcommit: 73aa9653547a1cd70ee6586221f79cc29b588ebd
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/23/2020
ms.locfileid: "82103564"
---
# <a name="background-garbage-collection"></a><span data-ttu-id="e0479-103">Arka plan çöp toplama</span><span class="sxs-lookup"><span data-stu-id="e0479-103">Background garbage collection</span></span>

<span data-ttu-id="e0479-104">Arka plançöp toplamada (GC), geçici nesiller (0 ve 1) gerektiğinde toplanırve nesil 2'nin koleksiyonu devam eder.</span><span class="sxs-lookup"><span data-stu-id="e0479-104">In background garbage collection (GC), ephemeral generations (0 and 1) are collected as needed while the collection of generation 2 is in progress.</span></span> <span data-ttu-id="e0479-105">Arka plan çöp toplama, arka plan veya sunucu GC'sine bağlı olarak bir veya daha fazla özel iş parçacığı üzerinde gerçekleştirilir ve yalnızca nesil 2 koleksiyonları için geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="e0479-105">Background garbage collection is performed on one or more dedicated threads, depending on whether it's background or server GC, and applies only to generation 2 collections.</span></span>

<span data-ttu-id="e0479-106">Arka plan çöp toplama varsayılan olarak etkinleştirilir.</span><span class="sxs-lookup"><span data-stu-id="e0479-106">Background garbage collection is enabled by default.</span></span> <span data-ttu-id="e0479-107">.NET Framework uygulamalarındaki [gcConcurrent](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) yapılandırma ayarı veya .NET Core uygulamalarındaki [System.GC.Eşzamanlı](../../core/run-time-config/garbage-collector.md#systemgcconcurrentcomplus_gcconcurrent) ayarı ile etkinleştirilebilir veya devre dışı tutulabilir.</span><span class="sxs-lookup"><span data-stu-id="e0479-107">It can be enabled or disabled with the [gcConcurrent](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) configuration setting in .NET Framework apps or the [System.GC.Concurrent](../../core/run-time-config/garbage-collector.md#systemgcconcurrentcomplus_gcconcurrent) setting in .NET Core apps.</span></span>

> [!NOTE]
> <span data-ttu-id="e0479-108">Arka plan çöp [toplama eşzamanlı çöp toplama](#concurrent-garbage-collection) nın yerini alır ve .NET Framework 4 ve sonraki sürümlerde kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="e0479-108">Background garbage collection replaces [concurrent garbage collection](#concurrent-garbage-collection) and is available in .NET Framework 4 and later versions.</span></span> <span data-ttu-id="e0479-109">.NET Framework 4'te yalnızca iş *istasyonu* çöp toplama için desteklenir.</span><span class="sxs-lookup"><span data-stu-id="e0479-109">In .NET Framework 4, it's supported only for *workstation* garbage collection.</span></span> <span data-ttu-id="e0479-110">.NET Framework 4.5 ile başlayarak, arka plan çöp toplama hem *iş istasyonu* hem de *sunucu* çöp toplama için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="e0479-110">Starting with .NET Framework 4.5, background garbage collection is available for both *workstation* and *server* garbage collection.</span></span>

<span data-ttu-id="e0479-111">Arka plan çöp toplama sırasında geçici nesiller üzerine bir koleksiyon *ön planda* çöp toplama olarak bilinir.</span><span class="sxs-lookup"><span data-stu-id="e0479-111">A collection on ephemeral generations during background garbage collection is known as *foreground* garbage collection.</span></span> <span data-ttu-id="e0479-112">Ön plan çöp koleksiyonları oluştuğunda, yönetilen tüm iş parçacıkları askıya alınır.</span><span class="sxs-lookup"><span data-stu-id="e0479-112">When foreground garbage collections occur, all managed threads are suspended.</span></span>

<span data-ttu-id="e0479-113">Arka plan çöp toplama devam ediyor ve nesil 0'da yeterli nesne ayırdıysanız, CLR bir nesil 0 veya nesil 1 ön plan çöp toplama gerçekleştirir.</span><span class="sxs-lookup"><span data-stu-id="e0479-113">When background garbage collection is in progress and you've allocated enough objects in generation 0, the CLR performs a generation 0 or generation 1 foreground garbage collection.</span></span> <span data-ttu-id="e0479-114">Özel arka plan çöp toplama iş parçacığı, ön plan çöp toplama için bir istek olup olmadığını belirlemek için sık sık güvenli noktalarda denetler.</span><span class="sxs-lookup"><span data-stu-id="e0479-114">The dedicated background garbage collection thread checks at frequent safe points to determine whether there is a request for foreground garbage collection.</span></span> <span data-ttu-id="e0479-115">Varsa, ön plan çöp toplama oluşabilir, böylece arka plan koleksiyonu kendini askıya alır.</span><span class="sxs-lookup"><span data-stu-id="e0479-115">If there is, the background collection suspends itself so that foreground garbage collection can occur.</span></span> <span data-ttu-id="e0479-116">Ön plan çöp toplama tamamlandıktan sonra, özel arka plan çöp toplama iş parçacıkları ve kullanıcı iş parçacıkları devam eder.</span><span class="sxs-lookup"><span data-stu-id="e0479-116">After the foreground garbage collection is completed, the dedicated background garbage collection threads and user threads resume.</span></span>

<span data-ttu-id="e0479-117">Arka plan çöp toplama, arka plan çöp toplama sırasında geçici çöp koleksiyonları oluşabilir, çünkü eşzamanlı çöp toplama tarafından uygulanan ayırma kısıtlamaları kaldırır.</span><span class="sxs-lookup"><span data-stu-id="e0479-117">Background garbage collection removes allocation restrictions imposed by concurrent garbage collection, because ephemeral garbage collections can occur during background garbage collection.</span></span> <span data-ttu-id="e0479-118">Arka plan çöp toplama geçici nesillerde ölü nesneleri kaldırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e0479-118">Background garbage collection can remove dead objects in ephemeral generations.</span></span> <span data-ttu-id="e0479-119">Ayrıca bir nesil 1 çöp toplama sırasında gerekirse yığın genişletebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e0479-119">It can also expand the heap if needed during a generation 1 garbage collection.</span></span>

## <a name="background-workstation-vs-server-gc"></a><span data-ttu-id="e0479-120">Arka plan iş istasyonu vs sunucu GC</span><span class="sxs-lookup"><span data-stu-id="e0479-120">Background workstation vs. server GC</span></span>

<span data-ttu-id="e0479-121">.NET Framework 4.5 ile başlayarak, arka plan çöp toplama sunucu GC için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="e0479-121">Starting with .NET Framework 4.5, background garbage collection is available for server GC.</span></span> <span data-ttu-id="e0479-122">Arka plan GC sunucu çöp toplama için varsayılan modudur.</span><span class="sxs-lookup"><span data-stu-id="e0479-122">Background GC is the default mode for server garbage collection.</span></span>

<span data-ttu-id="e0479-123">Arka plan sunucusu çöp toplama işlevleri arka plan iş istasyonu çöp toplama benzer, ancak birkaç fark vardır:</span><span class="sxs-lookup"><span data-stu-id="e0479-123">Background server garbage collection functions similarly to background workstation garbage collection, but there are a few differences:</span></span>

- <span data-ttu-id="e0479-124">Arka plan iş istasyonu çöp toplama, arka plan sunucusu çöp toplama birden çok iş parçacığı kullanır ise bir özel arka plan çöp toplama iş parçacığı kullanır.</span><span class="sxs-lookup"><span data-stu-id="e0479-124">Background workstation garbage collection uses one dedicated background garbage collection thread, whereas background server garbage collection uses multiple threads.</span></span> <span data-ttu-id="e0479-125">Genellikle, her mantıksal işlemci için özel bir iş parçacığı vardır.</span><span class="sxs-lookup"><span data-stu-id="e0479-125">Typically, there's a dedicated thread for each logical processor.</span></span>

- <span data-ttu-id="e0479-126">İş istasyonu arka plan çöp toplama iş parçacığı aksine, arka plan sunucusu GC iş parçacıkları zaman dışarı yok.</span><span class="sxs-lookup"><span data-stu-id="e0479-126">Unlike the workstation background garbage collection thread, the background server GC threads do not time out.</span></span>

<span data-ttu-id="e0479-127">Aşağıdaki resimde, ayrı, özel bir iş parçacığı üzerinde gerçekleştirilen arka plan *iş istasyonu* çöp toplama gösterilmektedir:</span><span class="sxs-lookup"><span data-stu-id="e0479-127">The following illustration shows background *workstation* garbage collection performed on a separate, dedicated thread:</span></span>

![Arka plan iş istasyonu çöp toplama](./media/fundamentals/background-workstation-garbage-collection.png)

<span data-ttu-id="e0479-129">Aşağıdaki resimde, ayrı, özel iş parçacıkları üzerinde gerçekleştirilen arka plan *sunucusu* çöp toplama gösterilmektedir:</span><span class="sxs-lookup"><span data-stu-id="e0479-129">The following illustration shows background *server* garbage collection performed on separate, dedicated threads:</span></span>

![Arka plan sunucusu çöp toplama](./media/fundamentals/background-server-garbage-collection.png)

## <a name="concurrent-garbage-collection"></a><span data-ttu-id="e0479-131">Eşzamanlı çöp toplama</span><span class="sxs-lookup"><span data-stu-id="e0479-131">Concurrent garbage collection</span></span>

> [!TIP]
> <span data-ttu-id="e0479-132">Bu bölüm aşağıdakiler için geçerlidir:</span><span class="sxs-lookup"><span data-stu-id="e0479-132">This section applies to:</span></span>
>
> - <span data-ttu-id="e0479-133">.NET Framework 3.5 ve daha önceki iş istasyonu çöp toplama</span><span class="sxs-lookup"><span data-stu-id="e0479-133">.NET Framework 3.5 and earlier for workstation garbage collection</span></span>
> - <span data-ttu-id="e0479-134">.NET Framework 4 ve daha önceki sunucu çöp toplama</span><span class="sxs-lookup"><span data-stu-id="e0479-134">.NET Framework 4 and earlier for server garbage collection</span></span>
>
> <span data-ttu-id="e0479-135">Eşzamanlı çöp sonraki sürümlerde arka plan çöp toplama ile değiştirilir.</span><span class="sxs-lookup"><span data-stu-id="e0479-135">Concurrent garbage is replaced by background garbage collection in later versions.</span></span>

<span data-ttu-id="e0479-136">İş istasyonu veya sunucu çöp toplama, iş parçacıkları toplama süresinin çoğu için çöp toplama gerçekleştiren özel bir iş parçacığı ile aynı anda çalışmasını sağlayan [eşzamanlı çöp toplama etkinleştirebilirsiniz.](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md)</span><span class="sxs-lookup"><span data-stu-id="e0479-136">In workstation or server garbage collection, you can [enable concurrent garbage collection](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md), which enables threads to run concurrently with a dedicated thread that performs the garbage collection for most of the duration of the collection.</span></span> <span data-ttu-id="e0479-137">Bu seçenek yalnızca nesil 2'deki çöp toplamaları etkiler; 0 ve 1.</span><span class="sxs-lookup"><span data-stu-id="e0479-137">This option affects only garbage collections in generation 2; generations 0 and 1 are always non-concurrent because they finish fast.</span></span>

<span data-ttu-id="e0479-138">Eşzamanlı çöp toplama, bir koleksiyon için duraklamaları en aza indirerek etkileşimli uygulamaların daha duyarlı olmasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="e0479-138">Concurrent garbage collection enables interactive applications to be more responsive by minimizing pauses for a collection.</span></span> <span data-ttu-id="e0479-139">Yönetilen iş parçacıkları, eşzamanlı çöp toplama iş parçacığı çalışırken çoğu zaman çalışmaya devam edebilir.</span><span class="sxs-lookup"><span data-stu-id="e0479-139">Managed threads can continue to run most of the time while the concurrent garbage collection thread is running.</span></span> <span data-ttu-id="e0479-140">Bu, çöp toplama oluşurken daha kısa duraklamalara neden olur.</span><span class="sxs-lookup"><span data-stu-id="e0479-140">This results in shorter pauses while a garbage collection is occurring.</span></span>

<span data-ttu-id="e0479-141">Eşzamanlı çöp toplama özel bir iş parçacığı üzerinde gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="e0479-141">Concurrent garbage collection is performed on a dedicated thread.</span></span> <span data-ttu-id="e0479-142">Varsayılan olarak, CLR hem tek işlemcili hem de çok işlemcili bilgisayarlarda eşzamanlı çöp toplama etkiniş istasyonu çöp toplama çalışır.</span><span class="sxs-lookup"><span data-stu-id="e0479-142">By default, the CLR runs workstation garbage collection with concurrent garbage collection enabled on both single-processor and multi-processor computers.</span></span>

<span data-ttu-id="e0479-143">Aşağıdaki resimde, ayrı bir özel iş parçacığı üzerinde gerçekleştirilen eşzamanlı çöp toplama gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="e0479-143">The following illustration shows concurrent garbage collection performed on a separate dedicated thread.</span></span>

![Eşzamanlı Çöp Toplama İşparçacıkları](./media/gc-concurrent.png)

## <a name="see-also"></a><span data-ttu-id="e0479-145">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="e0479-145">See also</span></span>

- [<span data-ttu-id="e0479-146">İş istasyonu ve sunucu çöp toplama</span><span class="sxs-lookup"><span data-stu-id="e0479-146">Workstation and server garbage collection</span></span>](workstation-server-gc.md)
- [<span data-ttu-id="e0479-147">Çöp toplama için çalışma zamanı yapılandırma seçenekleri</span><span class="sxs-lookup"><span data-stu-id="e0479-147">Run-time configuration options for garbage collection</span></span>](../../core/run-time-config/garbage-collector.md)
