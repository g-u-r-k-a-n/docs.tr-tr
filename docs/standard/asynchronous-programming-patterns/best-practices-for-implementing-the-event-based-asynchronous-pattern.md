---
title: Olay Tabanlı Zaman Uyumsuz Desen Uygulamak için En İyi Yöntemler
ms.date: 03/30/2017
ms.technology: dotnet-standard
helpviewer_keywords:
- Event-based Asynchronous Pattern
- ProgressChangedEventArgs class
- BackgroundWorker component
- events [.NET Framework], asynchronous
- AsyncOperationManager class
- threading [.NET Framework], asynchronous features
- AsyncOperation class
- AsyncCompletedEventArgs class
ms.assetid: 4acd2094-4f46-4eff-9190-92d0d9ff47db
ms.openlocfilehash: 439b862612d7997c9277ffb2cf4f15b14bd0b106
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/15/2020
ms.locfileid: "78156055"
---
# <a name="best-practices-for-implementing-the-event-based-asynchronous-pattern"></a><span data-ttu-id="f4ea7-102">Olay Tabanlı Zaman Uyumsuz Desen Uygulamak için En İyi Yöntemler</span><span class="sxs-lookup"><span data-stu-id="f4ea7-102">Best Practices for Implementing the Event-based Asynchronous Pattern</span></span>
<span data-ttu-id="f4ea7-103">Olay tabanlı Asynchronous Pattern, tanıdık olay ve temsilci semantiği ile sınıflarda asynchronous davranışı ortaya çıkarmak için etkili bir yol sağlar.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-103">The Event-based Asynchronous Pattern provides you with an effective way to expose asynchronous behavior in classes, with familiar event and delegate semantics.</span></span> <span data-ttu-id="f4ea7-104">Olay tabanlı Eşzamanlılık uygulamak için bazı belirli davranış gereksinimlerini izlemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-104">To implement Event-based Asynchronous Pattern, you need to follow some specific behavioral requirements.</span></span> <span data-ttu-id="f4ea7-105">Aşağıdaki bölümlerde, Olay tabanlı Asynchronous Deseni'ni izleyen bir sınıf uygularken göz önünde bulundurmanız gereken gereksinimler ve yönergeler açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-105">The following sections describe requirements and guidelines you should consider when you implement a class that follows the Event-based Asynchronous Pattern.</span></span>  
  
 <span data-ttu-id="f4ea7-106">Genel bakış için bkz: [Olay tabanlı Asynchronous Deseni'ni uygulama.](../../../docs/standard/asynchronous-programming-patterns/implementing-the-event-based-asynchronous-pattern.md)</span><span class="sxs-lookup"><span data-stu-id="f4ea7-106">For an overview, see [Implementing the Event-based Asynchronous Pattern](../../../docs/standard/asynchronous-programming-patterns/implementing-the-event-based-asynchronous-pattern.md).</span></span>  
  
## <a name="required-behavioral-guarantees"></a><span data-ttu-id="f4ea7-107">Gerekli Davranış Salahiyetleri</span><span class="sxs-lookup"><span data-stu-id="f4ea7-107">Required Behavioral Guarantees</span></span>  
 <span data-ttu-id="f4ea7-108">Olay tabanlı Eşzamanlı Desen'i uygularsanız, sınıfınızın düzgün davranmasını ve sınıfınızın istemcilerinin bu tür davranışlara güvenebilmesini sağlamak için bir dizi garanti sağlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-108">If you implement the Event-based Asynchronous Pattern, you must provide a number of guarantees to ensure that your class will behave properly and clients of your class can rely on such behavior.</span></span>  
  
### <a name="completion"></a><span data-ttu-id="f4ea7-109">Tamamlama</span><span class="sxs-lookup"><span data-stu-id="f4ea7-109">Completion</span></span>  
 <span data-ttu-id="f4ea7-110">Başarılı bir tamamlanma, hata veya iptal olduğunda Her zaman <em>MethodName</em>**Tamamlanmış** olay işleyicisini çağırın.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-110">Always invoke the <em>MethodName</em>**Completed** event handler when you have successful completion, an error, or a cancellation.</span></span> <span data-ttu-id="f4ea7-111">Uygulamalar boşta kaldıkları ve tamamlanmadıkları bir durumla asla karşılaşmamalıdır.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-111">Applications should never encounter a situation where they remain idle and completion never occurs.</span></span> <span data-ttu-id="f4ea7-112">Bu kuralın bir istisnası, eşzamanlı işlemin kendisi asla tamamlanamayacak şekilde tasarlanmış olmasıdır.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-112">One exception to this rule is if the asynchronous operation itself is designed so that it never completes.</span></span>  
  
### <a name="completed-event-and-eventargs"></a><span data-ttu-id="f4ea7-113">Tamamlanan Etkinlik ve EventArgs</span><span class="sxs-lookup"><span data-stu-id="f4ea7-113">Completed Event and EventArgs</span></span>  
 <span data-ttu-id="f4ea7-114">Her ayrı <em>MethodName</em>**Async** yöntemi için aşağıdaki tasarım gereksinimlerini uygulayın:</span><span class="sxs-lookup"><span data-stu-id="f4ea7-114">For each separate <em>MethodName</em>**Async** method, apply the following design requirements:</span></span>  
  
- <span data-ttu-id="f4ea7-115">Yöntemle aynı sınıfta bir <em>MethodName</em>**Tamamlandı** olayını tanımlayın.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-115">Define a <em>MethodName</em>**Completed** event on the same class as the method.</span></span>  
  
- <span data-ttu-id="f4ea7-116">Sınıftan <xref:System.EventArgs> türeyen <em>MethodName</em>**Completed** olayı için bir sınıf <xref:System.ComponentModel.AsyncCompletedEventArgs> ve beraberindeki temsilci tanımlayın.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-116">Define an <xref:System.EventArgs> class and accompanying delegate for the <em>MethodName</em>**Completed** event that derives from the <xref:System.ComponentModel.AsyncCompletedEventArgs> class.</span></span> <span data-ttu-id="f4ea7-117">Varsayılan sınıf adı <em>MethodName</em>**CompletedEventArgs**şeklinde olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-117">The default class name should be of the form <em>MethodName</em>**CompletedEventArgs**.</span></span>  
  
- <span data-ttu-id="f4ea7-118"><xref:System.EventArgs> Sınıfın <em>MethodName</em> yönteminin iade değerlerine özgü olduğundan emin olun.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-118">Ensure that the <xref:System.EventArgs> class is specific to the return values of the <em>MethodName</em> method.</span></span> <span data-ttu-id="f4ea7-119"><xref:System.EventArgs> Sınıfı kullandığınızda, geliştiricilerin sonucu kullanmasını asla gerektirmezsiniz.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-119">When you use the <xref:System.EventArgs> class, you should never require developers to cast the result.</span></span>  
  
     <span data-ttu-id="f4ea7-120">Aşağıdaki kod örneği, bu tasarım gereksiniminin sırasıyla iyi ve kötü bir şekilde uygulanmasını gösterir.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-120">The following code example shows good and bad implementation of this design requirement respectively.</span></span>  
  
```csharp  
// Good design  
private void Form1_MethodNameCompleted(object sender, xxxCompletedEventArgs e)
{
    DemoType result = e.Result;  
}  
  
// Bad design  
private void Form1_MethodNameCompleted(object sender, MethodNameCompletedEventArgs e)
{
    DemoType result = (DemoType)(e.Result);  
}  
```  
  
- <span data-ttu-id="f4ea7-121">Döndüren <xref:System.EventArgs> yöntemler için bir sınıf `void`tanımlamayın.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-121">Do not define an <xref:System.EventArgs> class for returning methods that return `void`.</span></span> <span data-ttu-id="f4ea7-122">Bunun yerine, sınıfın <xref:System.ComponentModel.AsyncCompletedEventArgs> bir örneğini kullanın.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-122">Instead, use an instance of the <xref:System.ComponentModel.AsyncCompletedEventArgs> class.</span></span>  
  
- <span data-ttu-id="f4ea7-123"><em>MethodName</em>**Tamamlanan** olayı her zaman yükselttiğinizden emin olun.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-123">Ensure that you always raise the <em>MethodName</em>**Completed** event.</span></span> <span data-ttu-id="f4ea7-124">Bu olay başarılı bir şekilde tamamlandığında, bir hatada veya iptalde yükseltilmelidir.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-124">This event should be raised on successful completion, on an error, or on cancellation.</span></span> <span data-ttu-id="f4ea7-125">Uygulamalar boşta kaldıkları ve tamamlanmadıkları bir durumla asla karşılaşmamalıdır.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-125">Applications should never encounter a situation where they remain idle and completion never occurs.</span></span>  
  
- <span data-ttu-id="f4ea7-126">Eşzamanlı işlemde oluşan özel durumları yakaladığınızı ve yakalanan özel durumu <xref:System.ComponentModel.AsyncCompletedEventArgs.Error%2A> özelliğe atadığınızdan emin olun.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-126">Ensure that you catch any exceptions that occur in the asynchronous operation and assign the caught exception to the <xref:System.ComponentModel.AsyncCompletedEventArgs.Error%2A> property.</span></span>  
  
- <span data-ttu-id="f4ea7-127">Görevi tamamlayan bir hata varsa, sonuçlara erişilememelidir.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-127">If there was an error completing the task, the results should not be accessible.</span></span> <span data-ttu-id="f4ea7-128"><xref:System.ComponentModel.AsyncCompletedEventArgs.Error%2A> Özellik olmadığında, `null`yapıdaki herhangi bir özelliğe erişimin bir özel durum doğurduğundan <xref:System.EventArgs> emin olun.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-128">When the <xref:System.ComponentModel.AsyncCompletedEventArgs.Error%2A> property is not `null`, ensure that accessing any property in the <xref:System.EventArgs> structure raises an exception.</span></span> <span data-ttu-id="f4ea7-129">Bu <xref:System.ComponentModel.AsyncCompletedEventArgs.RaiseExceptionIfNecessary%2A> doğrulamayı gerçekleştirmek için yöntemi kullanın.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-129">Use the <xref:System.ComponentModel.AsyncCompletedEventArgs.RaiseExceptionIfNecessary%2A> method to perform this verification.</span></span>  
  
- <span data-ttu-id="f4ea7-130">Bir zaman dilimini hata olarak modelle.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-130">Model a time out as an error.</span></span> <span data-ttu-id="f4ea7-131">Bir zaman dışında kalma gerçekleştiğinde, <em>MethodName</em>**Tamamlanan** <xref:System.TimeoutException> olayı <xref:System.ComponentModel.AsyncCompletedEventArgs.Error%2A> yükseltin ve tesise bir aat layın.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-131">When a time out occurs, raise the <em>MethodName</em>**Completed** event and assign a <xref:System.TimeoutException> to the <xref:System.ComponentModel.AsyncCompletedEventArgs.Error%2A> property.</span></span>  
  
- <span data-ttu-id="f4ea7-132">Sınıfınız birden çok eşzamanlı çağrıyı destekliyorsa, <em>MethodName</em>**Tamamlanan** olayın uygun `userSuppliedState` nesneyi içerdiğinden emin olun.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-132">If your class supports multiple concurrent invocations, ensure that the <em>MethodName</em>**Completed** event contains the appropriate `userSuppliedState` object.</span></span>  
  
- <span data-ttu-id="f4ea7-133"><em>MethodName</em>**Tamamlanan** olayın uygun iş parçacığı üzerinde ve uygulama yaşam döngüsünde uygun zamanda yükseltilmesini sağlayın.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-133">Ensure that the <em>MethodName</em>**Completed** event is raised on the appropriate thread and at the appropriate time in the application lifecycle.</span></span> <span data-ttu-id="f4ea7-134">Daha fazla bilgi için İş Parçacığı ve Bağlamlar bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-134">For more information, see the Threading and Contexts section.</span></span>  
  
### <a name="simultaneously-executing-operations"></a><span data-ttu-id="f4ea7-135">İşlemleri Aynı Anda Yürütme</span><span class="sxs-lookup"><span data-stu-id="f4ea7-135">Simultaneously Executing Operations</span></span>  
  
- <span data-ttu-id="f4ea7-136">Sınıfınız birden çok eşzamanlı çağrıyı destekliyorsa, nesne değerinde bir durum parametresi veya görev kimliği alan <em>MethodName</em>**Async** aşırı yükünü `userSuppliedState`tanımlayarak geliştiricinin her çağrıyı ayrı ayrı izlemesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-136">If your class supports multiple concurrent invocations, enable the developer to track each invocation separately by defining the <em>MethodName</em>**Async** overload that takes an object-valued state parameter, or task ID, called `userSuppliedState`.</span></span> <span data-ttu-id="f4ea7-137">Bu parametre her zaman <em>MethodName</em>**Async** yönteminin imzasındaki son parametre olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-137">This parameter should always be the last parameter in the <em>MethodName</em>**Async** method's signature.</span></span>  
  
- <span data-ttu-id="f4ea7-138">Sınıfınız, nesne değerinde bir durum parametresi veya görev kimliği alan <em>MethodName</em>**Async** aşırı yükünü tanımlıyorsa, bu görev kimliğiyle işlemin ömrünü izlediğinizden emin olun ve bunu tamamlama işleyicisine geri sağladığınızdan emin olun.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-138">If your class defines the <em>MethodName</em>**Async** overload that takes an object-valued state parameter, or task ID, be sure to track the lifetime of the operation with that task ID, and be sure to provide it back into the completion handler.</span></span> <span data-ttu-id="f4ea7-139">Yardımcı sınıflar yardımcı olabilir.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-139">There are helper classes available to assist.</span></span> <span data-ttu-id="f4ea7-140">Eşzamanlılık yönetimi hakkında daha fazla bilgi için [bkz: Olay tabanlı Asynchronous Deseni destekleyen bir Bileşeni uygulama.](../../../docs/standard/asynchronous-programming-patterns/component-that-supports-the-event-based-asynchronous-pattern.md)</span><span class="sxs-lookup"><span data-stu-id="f4ea7-140">For more information on concurrency management, see [How to: Implement a Component That Supports the Event-based Asynchronous Pattern](../../../docs/standard/asynchronous-programming-patterns/component-that-supports-the-event-based-asynchronous-pattern.md).</span></span>  
  
- <span data-ttu-id="f4ea7-141">Sınıfınız, durum parametresi olmadan <em>MethodName</em>**Async** yöntemini tanımlıyorsa ve birden çok eşzamanlı çağrıyı desteklemiyorsa, önceki <em>MethodName</em>**Async** çağırması <xref:System.InvalidOperationException>tamamlanmadan önce <em>MethodName</em>**Async'i** çağırmak için herhangi bir girişimin bir .</span><span class="sxs-lookup"><span data-stu-id="f4ea7-141">If your class defines the <em>MethodName</em>**Async** method without the state parameter, and it does not support multiple concurrent invocations, ensure that any attempt to invoke <em>MethodName</em>**Async** before the prior <em>MethodName</em>**Async** invocation has completed raises an <xref:System.InvalidOperationException>.</span></span>  
  
- <span data-ttu-id="f4ea7-142">Genel olarak, `userSuppliedState` parametresi olmayan <em>MethodName</em>**Async** yöntemi birden çok kez çağrılması durumunda, birden çok bekleyen işlem olması için bir özel durum çıkarmayın.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-142">In general, do not raise an exception if the <em>MethodName</em>**Async** method without the `userSuppliedState` parameter is invoked multiple times so that there are multiple outstanding operations.</span></span> <span data-ttu-id="f4ea7-143">Sınıfınız açıkça bu durumu kaldıramıyorsa bir özel durum yükseltebilirsiniz, ancak geliştiricilerin bu birden çok ayırt edilemeyen geri aramaları işleyebileceğini varsayabilirsiniz</span><span class="sxs-lookup"><span data-stu-id="f4ea7-143">You can raise an exception when your class explicitly cannot handle that situation, but assume that developers can handle these multiple indistinguishable callbacks</span></span>  
  
### <a name="accessing-results"></a><span data-ttu-id="f4ea7-144">Sonuçlara Erişim</span><span class="sxs-lookup"><span data-stu-id="f4ea7-144">Accessing Results</span></span>  
  
- <span data-ttu-id="f4ea7-145">Eşil işlemin yürütülmesi sırasında bir hata varsa, sonuçlara erişilemez.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-145">If there was an error during execution of the asynchronous operation, the results should not be accessible.</span></span> <span data-ttu-id="f4ea7-146">Herhangi <xref:System.ComponentModel.AsyncCompletedEventArgs> bir özelliğe erişimin, <xref:System.ComponentModel.AsyncCompletedEventArgs.Error%2A> `null` başvurulan <xref:System.ComponentModel.AsyncCompletedEventArgs.Error%2A>özel durumu yükseltmediğinden emin olun.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-146">Ensure that accessing any property in the <xref:System.ComponentModel.AsyncCompletedEventArgs> when <xref:System.ComponentModel.AsyncCompletedEventArgs.Error%2A> is not `null` raises the exception referenced by <xref:System.ComponentModel.AsyncCompletedEventArgs.Error%2A>.</span></span> <span data-ttu-id="f4ea7-147">Sınıf <xref:System.ComponentModel.AsyncCompletedEventArgs> bu <xref:System.ComponentModel.AsyncCompletedEventArgs.RaiseExceptionIfNecessary%2A> amaç için yöntemi sağlar.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-147">The <xref:System.ComponentModel.AsyncCompletedEventArgs> class provides the <xref:System.ComponentModel.AsyncCompletedEventArgs.RaiseExceptionIfNecessary%2A> method for this purpose.</span></span>  
  
- <span data-ttu-id="f4ea7-148">Sonuca erişim için herhangi bir <xref:System.InvalidOperationException> girişimin, işlemin iptal edildiğini belirten bir artış olduğundan emin olun.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-148">Ensure that any attempt to access the result raises an <xref:System.InvalidOperationException> stating that the operation was canceled.</span></span> <span data-ttu-id="f4ea7-149">Bu <xref:System.ComponentModel.AsyncCompletedEventArgs.RaiseExceptionIfNecessary%2A?displayProperty=nameWithType> doğrulamayı gerçekleştirmek için yöntemi kullanın.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-149">Use the <xref:System.ComponentModel.AsyncCompletedEventArgs.RaiseExceptionIfNecessary%2A?displayProperty=nameWithType> method to perform this verification.</span></span>  
  
### <a name="progress-reporting"></a><span data-ttu-id="f4ea7-150">İlerleme Raporlama</span><span class="sxs-lookup"><span data-stu-id="f4ea7-150">Progress Reporting</span></span>  
  
- <span data-ttu-id="f4ea7-151">Mümkünse ilerleme raporlamayı destekleyin.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-151">Support progress reporting, if possible.</span></span> <span data-ttu-id="f4ea7-152">Bu, geliştiricilerin sınıfınızı kullanırken daha iyi bir uygulama kullanıcı deneyimi sağlamasına olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-152">This enables developers to provide a better application user experience when they use your class.</span></span>  
  
- <span data-ttu-id="f4ea7-153">**Bir ProgressChanged** veya <em>MethodName</em>**ProgressChanged** olayı uygularsanız, bu işlemin <em>MethodName</em>**Tamamlanan** olayı yükseltildikten sonra belirli bir eşzamanlı işlem için bu tür olayların yükseltilmiş olmadığından emin olun.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-153">If you implement a **ProgressChanged** or <em>MethodName</em>**ProgressChanged** event, ensure that there are no such events raised for a particular asynchronous operation after that operation's <em>MethodName</em>**Completed** event has been raised.</span></span>  
  
- <span data-ttu-id="f4ea7-154">Standart <xref:System.ComponentModel.ProgressChangedEventArgs> dolduruluyorsa, standardın <xref:System.ComponentModel.ProgressChangedEventArgs.ProgressPercentage%2A> her zaman bir yüzde olarak yorumlanadığından emin olun.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-154">If the standard <xref:System.ComponentModel.ProgressChangedEventArgs> is being populated, ensure that the <xref:System.ComponentModel.ProgressChangedEventArgs.ProgressPercentage%2A> can always be interpreted as a percentage.</span></span> <span data-ttu-id="f4ea7-155">Yüzdenin doğru olması gerekmez, ancak bir yüzdeyi temsil etmelidir.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-155">The percentage does not need to be accurate, but it should represent a percentage.</span></span> <span data-ttu-id="f4ea7-156">İlerleme raporlama ölçümünüzün yüzdeden başka bir şey olması <xref:System.ComponentModel.ProgressChangedEventArgs> gerekiyorsa, <xref:System.ComponentModel.ProgressChangedEventArgs.ProgressPercentage%2A> sınıftan bir sınıf türetin ve 0'da ayrılın.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-156">If your progress reporting metric must be something other than a percentage, derive a class from the <xref:System.ComponentModel.ProgressChangedEventArgs> class and leave <xref:System.ComponentModel.ProgressChangedEventArgs.ProgressPercentage%2A> at 0.</span></span> <span data-ttu-id="f4ea7-157">Yüzde dışında bir raporlama ölçümü kullanmaktan kaçının.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-157">Avoid using a reporting metric other than a percentage.</span></span>  
  
- <span data-ttu-id="f4ea7-158">`ProgressChanged` Olayın uygun iş parçacığı üzerinde ve uygulama yaşam döngüsünde uygun zamanda yükseltilmesini sağlayın.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-158">Ensure that the `ProgressChanged` event is raised on the appropriate thread and at the appropriate time in the application lifecycle.</span></span> <span data-ttu-id="f4ea7-159">Daha fazla bilgi için İş Parçacığı ve Bağlamlar bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-159">For more information, see the Threading and Contexts section.</span></span>  
  
### <a name="isbusy-implementation"></a><span data-ttu-id="f4ea7-160">IsBusy Uygulaması</span><span class="sxs-lookup"><span data-stu-id="f4ea7-160">IsBusy Implementation</span></span>  
  
- <span data-ttu-id="f4ea7-161">Sınıfınız birden `IsBusy` çok eşzamanlı çağrıyı destekliyorsa bir özelliği açığa çıkarmayın.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-161">Do not expose an `IsBusy` property if your class supports multiple concurrent invocations.</span></span> <span data-ttu-id="f4ea7-162">Örneğin, XML Web hizmeti vekilleri, `IsBusy` eşzamanlı eşzamanlı yöntemlerin birden çok çağrılarını destekledikleri için bir özelliği açığa çıkarmaz.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-162">For example, XML Web service proxies do not expose an `IsBusy` property because they support multiple concurrent invocations of asynchronous methods.</span></span>  
  
- <span data-ttu-id="f4ea7-163">`IsBusy` Özellik, MethodName**Async** yöntemi çağrıldıktan ve <em>MethodName</em> <em>MethodName</em>**Tamamlanan** olay yükseltilmeden önce geri dönmelidir. `true`</span><span class="sxs-lookup"><span data-stu-id="f4ea7-163">The `IsBusy` property should return `true` after the <em>MethodName</em>**Async** method has been called and before the <em>MethodName</em>**Completed** event has been raised.</span></span> <span data-ttu-id="f4ea7-164">Aksi takdirde `false`geri dönmelidir.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-164">Otherwise it should return `false`.</span></span> <span data-ttu-id="f4ea7-165">Ve <xref:System.ComponentModel.BackgroundWorker> <xref:System.Net.WebClient> bileşenleri bir `IsBusy` özelliği ortaya sınıfların örnekleridir.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-165">The <xref:System.ComponentModel.BackgroundWorker> and <xref:System.Net.WebClient> components are examples of classes that expose an `IsBusy` property.</span></span>  
  
### <a name="cancellation"></a><span data-ttu-id="f4ea7-166">İptal</span><span class="sxs-lookup"><span data-stu-id="f4ea7-166">Cancellation</span></span>  
  
- <span data-ttu-id="f4ea7-167">Mümkünse iptali destekleyin.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-167">Support cancellation, if possible.</span></span> <span data-ttu-id="f4ea7-168">Bu, geliştiricilerin sınıfınızı kullanırken daha iyi bir uygulama kullanıcı deneyimi sağlamasına olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-168">This enables developers to provide a better application user experience when they use your class.</span></span>  
  
- <span data-ttu-id="f4ea7-169">İptal durumunda, <xref:System.ComponentModel.AsyncCompletedEventArgs.Cancelled%2A> <xref:System.ComponentModel.AsyncCompletedEventArgs> nesneye bayrağı ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-169">In the case of cancellation, set the <xref:System.ComponentModel.AsyncCompletedEventArgs.Cancelled%2A> flag in the <xref:System.ComponentModel.AsyncCompletedEventArgs> object.</span></span>  
  
- <span data-ttu-id="f4ea7-170">Sonuca erişim için herhangi bir <xref:System.InvalidOperationException> girişimin, işlemin iptal edildiğini belirten bir artış olduğundan emin olun.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-170">Ensure that any attempt to access the result raises an <xref:System.InvalidOperationException> stating that the operation was canceled.</span></span> <span data-ttu-id="f4ea7-171">Bu <xref:System.ComponentModel.AsyncCompletedEventArgs.RaiseExceptionIfNecessary%2A?displayProperty=nameWithType> doğrulamayı gerçekleştirmek için yöntemi kullanın.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-171">Use the <xref:System.ComponentModel.AsyncCompletedEventArgs.RaiseExceptionIfNecessary%2A?displayProperty=nameWithType> method to perform this verification.</span></span>  
  
- <span data-ttu-id="f4ea7-172">İptal yöntemine yapılan çağrıların her zaman başarılı bir şekilde geri döndüğünden ve asla bir özel durum çıkarmadığından emin olun.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-172">Ensure that calls to a cancellation method always return successfully, and never raise an exception.</span></span> <span data-ttu-id="f4ea7-173">Genel olarak, bir istemciye herhangi bir zamanda bir işlemin gerçekten iptal edilip edilemeyeceği bildirilmez ve daha önce verilmiş bir iptalişleminin başarılı olup olmadığı konusunda bilgilendirilmez.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-173">In general, a client is not notified as to whether an operation is truly cancelable at any given time, and is not notified as to whether a previously issued cancellation has succeeded.</span></span> <span data-ttu-id="f4ea7-174">Ancak, başvuru tamamlanma durumunda yer aldığından, iptal başarılı olduğunda başvuruya her zaman bildirim verilir.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-174">However, the application will always be given notification when a cancellation succeeded, because the application takes part in the completion status.</span></span>  
  
- <span data-ttu-id="f4ea7-175">İşlem iptal edildiğinde <em>MethodName</em>**Tamamlandı** olayını yükseltin.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-175">Raise the <em>MethodName</em>**Completed** event when the operation is canceled.</span></span>  
  
### <a name="errors-and-exceptions"></a><span data-ttu-id="f4ea7-176">Hatalar ve Özel Durumlar</span><span class="sxs-lookup"><span data-stu-id="f4ea7-176">Errors and Exceptions</span></span>  
  
- <span data-ttu-id="f4ea7-177">Eşzamanlı işlemde oluşan özel durumları yakalayın ve özelliğin <xref:System.ComponentModel.AsyncCompletedEventArgs.Error%2A?displayProperty=nameWithType> değerini bu özel durum için ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-177">Catch any exceptions that occur in the asynchronous operation and set the value of the <xref:System.ComponentModel.AsyncCompletedEventArgs.Error%2A?displayProperty=nameWithType> property to that exception.</span></span>  
  
### <a name="threading-and-contexts"></a><span data-ttu-id="f4ea7-178">İş Parçacığı ve Bağlamlar</span><span class="sxs-lookup"><span data-stu-id="f4ea7-178">Threading and Contexts</span></span>  
 <span data-ttu-id="f4ea7-179">Sınıfınızın doğru çalışması için, istemcinin olay işleyicilerinin ASP.NET ve Windows Forms uygulamaları da dahil olmak üzere, verilen uygulama modeli için uygun iş parçacığı veya bağlam üzerinde çağrılması önemlidir.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-179">For correct operation of your class, it is critical that the client's event handlers are invoked on the proper thread or context for the given application model, including ASP.NET and Windows Forms applications.</span></span> <span data-ttu-id="f4ea7-180">Eşkron sınıfın herhangi bir uygulama modeli altında doğru şekilde şekilde şekilde diğinden emin <xref:System.ComponentModel.AsyncOperation> <xref:System.ComponentModel.AsyncOperationManager>olmak için iki önemli yardımcı sınıf sağlanır: ve .</span><span class="sxs-lookup"><span data-stu-id="f4ea7-180">Two important helper classes are provided to ensure that your asynchronous class behaves correctly under any application model: <xref:System.ComponentModel.AsyncOperation> and <xref:System.ComponentModel.AsyncOperationManager>.</span></span>  
  
 <span data-ttu-id="f4ea7-181"><xref:System.ComponentModel.AsyncOperationManager>bir <xref:System.ComponentModel.AsyncOperation>yöntem <xref:System.ComponentModel.AsyncOperationManager.CreateOperation%2A>sağlar, bir .</span><span class="sxs-lookup"><span data-stu-id="f4ea7-181"><xref:System.ComponentModel.AsyncOperationManager> provides one method, <xref:System.ComponentModel.AsyncOperationManager.CreateOperation%2A>, which returns an <xref:System.ComponentModel.AsyncOperation>.</span></span> <span data-ttu-id="f4ea7-182"><em>MethodName</em>**Async** yönteminiz çağrıları <xref:System.ComponentModel.AsyncOperationManager.CreateOperation%2A> ve <xref:System.ComponentModel.AsyncOperation> sınıfınız, asynchronous görevin ömrünü izlemek için döndürülenleri kullanır.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-182">Your <em>MethodName</em>**Async** method calls <xref:System.ComponentModel.AsyncOperationManager.CreateOperation%2A> and your class uses the returned <xref:System.ComponentModel.AsyncOperation> to track the lifetime of the asynchronous task.</span></span>  
  
 <span data-ttu-id="f4ea7-183">İlerlemeyi, artımlı sonuçları ve tamamlanması nı istemciye <xref:System.ComponentModel.AsyncOperation.OperationCompleted%2A> bildirmek <xref:System.ComponentModel.AsyncOperation>için, ''nin ' üzerindeki <xref:System.ComponentModel.AsyncOperation.Post%2A> yöntemleri ve yöntemleri ni</span><span class="sxs-lookup"><span data-stu-id="f4ea7-183">To report progress, incremental results, and completion to the client, call the <xref:System.ComponentModel.AsyncOperation.Post%2A> and <xref:System.ComponentModel.AsyncOperation.OperationCompleted%2A> methods on the <xref:System.ComponentModel.AsyncOperation>.</span></span> <span data-ttu-id="f4ea7-184"><xref:System.ComponentModel.AsyncOperation>istemcinin olay işleyicilerine yapılan çağrıları uygun iş parçacığına veya bağlama ya da bağlama da mareşallemekten sorumludur.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-184"><xref:System.ComponentModel.AsyncOperation> is responsible for marshaling calls to the client's event handlers to the proper thread or context.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="f4ea7-185">Uygulama modelinin ilkesine açıkça karşı çıkmak istiyorsanız, ancak yine de Olay tabanlı Asynchronous Deseni'ni kullanmanın diğer avantajlarından yararlanın.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-185">You can circumvent these rules if you explicitly want to go against the policy of the application model, but still benefit from the other advantages of using the Event-based Asynchronous Pattern.</span></span> <span data-ttu-id="f4ea7-186">Örneğin, Windows Forms'ta çalışan bir sınıfın serbest iş parçacığı olmasını isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-186">For example, you may want a class operating in Windows Forms to be free threaded.</span></span> <span data-ttu-id="f4ea7-187">Geliştiriciler zımni kısıtlamaları anladığı sürece, ücretsiz iş parçacığı sınıfı oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-187">You can create a free threaded class, as long as developers understand the implied restrictions.</span></span> <span data-ttu-id="f4ea7-188">Konsol uygulamaları çağrıların yürütülmesini <xref:System.ComponentModel.AsyncOperation.Post%2A> eşitlemez.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-188">Console applications do not synchronize the execution of <xref:System.ComponentModel.AsyncOperation.Post%2A> calls.</span></span> <span data-ttu-id="f4ea7-189">Bu, `ProgressChanged` olayların sıra dışı olarak yükseltilmesine neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-189">This can cause `ProgressChanged` events to be raised out of order.</span></span> <span data-ttu-id="f4ea7-190">Çağrıları seri olarak yürütmek <xref:System.ComponentModel.AsyncOperation.Post%2A> istiyorsanız, bir <xref:System.Threading.SynchronizationContext?displayProperty=nameWithType> sınıf uygulayın ve yükleyin.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-190">If you wish to have serialized execution of <xref:System.ComponentModel.AsyncOperation.Post%2A> calls, implement and install a <xref:System.Threading.SynchronizationContext?displayProperty=nameWithType> class.</span></span>  
  
 <span data-ttu-id="f4ea7-191">Eşzamanlı işlemlerinizi <xref:System.ComponentModel.AsyncOperation> kullanma <xref:System.ComponentModel.AsyncOperationManager> ve etkinleştirme hakkında daha fazla bilgi için [bkz: Olay tabanlı Eşzamanlı Deseni destekleyen bir Bileşen uygulama.](../../../docs/standard/asynchronous-programming-patterns/component-that-supports-the-event-based-asynchronous-pattern.md)</span><span class="sxs-lookup"><span data-stu-id="f4ea7-191">For more information about using <xref:System.ComponentModel.AsyncOperation> and <xref:System.ComponentModel.AsyncOperationManager> to enable your asynchronous operations, see [How to: Implement a Component That Supports the Event-based Asynchronous Pattern](../../../docs/standard/asynchronous-programming-patterns/component-that-supports-the-event-based-asynchronous-pattern.md).</span></span>  
  
## <a name="guidelines"></a><span data-ttu-id="f4ea7-192">Yönergeler</span><span class="sxs-lookup"><span data-stu-id="f4ea7-192">Guidelines</span></span>  
  
- <span data-ttu-id="f4ea7-193">İdeal olarak, her yöntem çağırma diğerlerinden bağımsız olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-193">Ideally, each method invocation should be independent of others.</span></span> <span data-ttu-id="f4ea7-194">Çağrıları paylaşılan kaynaklarla birleştirmekten kaçınmalısınız.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-194">You should avoid coupling invocations with shared resources.</span></span> <span data-ttu-id="f4ea7-195">Kaynaklar davetler arasında paylaşılacaksa, uygulamanızda uygun bir eşitleme mekanizması sağlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-195">If resources are to be shared among invocations, you will need to provide a proper synchronization mechanism in your implementation.</span></span>  
  
- <span data-ttu-id="f4ea7-196">İstemcinin eşitleme uygulamasını gerektiren tasarımlar önerilmez.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-196">Designs that require the client to implement synchronization are discouraged.</span></span> <span data-ttu-id="f4ea7-197">Örneğin, parametre olarak global statik bir nesne alan bir eşzamanlı yöntem olabilir; böyle bir yöntemin birden çok eşzamanlı çağrıları veri bozulması veya kilitlenmelere neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-197">For example, you could have an asynchronous method that receives a global static object as a parameter; multiple concurrent invocations of such a method could result in data corruption or deadlocks.</span></span>  
  
- <span data-ttu-id="f4ea7-198">Birden çok çağrı lı aşırı yükleme (imzada)`userState` içeren bir yöntem uygularsanız, sınıfınızın kullanıcı durumları veya görev kimliklerini ve bunların karşılık gelen bekleyen işlemleri bir koleksiyon yönetmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-198">If you implement a method with the multiple-invocation overload (`userState` in the signature), your class will need to manage a collection of user states, or task IDs, and their corresponding pending operations.</span></span> <span data-ttu-id="f4ea7-199">Çeşitli çağırmalar koleksiyondaki nesneleri ekleyip kaldırdığından, `lock` `userState` bu koleksiyon bölgelerle birlikte korunmalıdır.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-199">This collection should be protected with `lock` regions, because the various invocations add and remove `userState` objects in the collection.</span></span>  
  
- <span data-ttu-id="f4ea7-200">Mümkün ve `CompletedEventArgs` uygun olan yerlerde sınıfları yeniden kullanmayı düşünün.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-200">Consider reusing `CompletedEventArgs` classes where feasible and appropriate.</span></span> <span data-ttu-id="f4ea7-201">Belirli bir temsilci ve <xref:System.EventArgs> tür tek bir yönteme bağlı olmadığından, bu durumda adlandırma yöntem adı ile tutarlı değildir.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-201">In this case, the naming is not consistent with the method name, because a given delegate and <xref:System.EventArgs> type are not tied to a single method.</span></span> <span data-ttu-id="f4ea7-202">Ancak, geliştiricileri bir mülkten alınan değeri <xref:System.EventArgs> bir mülkte atmaya zorlamak asla kabul edilemez.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-202">However, forcing developers to cast the value retrieved from a property on the <xref:System.EventArgs> is never acceptable.</span></span>  
  
- <span data-ttu-id="f4ea7-203">Eğer türetilmiş bir sınıf <xref:System.ComponentModel.Component>yazarsanız, uygulamak ve kendi <xref:System.Threading.SynchronizationContext> sınıf yüklemeyin.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-203">If you are authoring a class that derives from <xref:System.ComponentModel.Component>, do not implement and install your own <xref:System.Threading.SynchronizationContext> class.</span></span> <span data-ttu-id="f4ea7-204">Uygulama modelleri, bileşenleri değil, kullanılan kontrol. <xref:System.Threading.SynchronizationContext></span><span class="sxs-lookup"><span data-stu-id="f4ea7-204">Application models, not components, control the <xref:System.Threading.SynchronizationContext> that is used.</span></span>  
  
- <span data-ttu-id="f4ea7-205">Herhangi bir türde çoklu iş parçacığı kullandığınızda, kendinizi çok ciddi ve karmaşık hatalara maruz bırakabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-205">When you use multithreading of any sort, you potentially expose yourself to very serious and complex bugs.</span></span> <span data-ttu-id="f4ea7-206">Çok iş parçacığı kullanan herhangi bir çözüm uygulamadan önce, [Yönetilen İş Parçacığı En İyi Uygulamaları'na](../../../docs/standard/threading/managed-threading-best-practices.md)bakın.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-206">Before implementing any solution that uses multithreading, see [Managed Threading Best Practices](../../../docs/standard/threading/managed-threading-best-practices.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f4ea7-207">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="f4ea7-207">See also</span></span>

- <xref:System.ComponentModel.AsyncOperation>
- <xref:System.ComponentModel.AsyncOperationManager>
- <xref:System.ComponentModel.AsyncCompletedEventArgs>
- <xref:System.ComponentModel.ProgressChangedEventArgs>
- <xref:System.ComponentModel.BackgroundWorker>
- [<span data-ttu-id="f4ea7-208">Olay Tabanlı Zaman Uyumsuz Deseni Uygulama</span><span class="sxs-lookup"><span data-stu-id="f4ea7-208">Implementing the Event-based Asynchronous Pattern</span></span>](../../../docs/standard/asynchronous-programming-patterns/implementing-the-event-based-asynchronous-pattern.md)
- [<span data-ttu-id="f4ea7-209">Olay Tabanlı Zaman Uyumsuz Desen (EAP)</span><span class="sxs-lookup"><span data-stu-id="f4ea7-209">Event-based Asynchronous Pattern (EAP)</span></span>](../../../docs/standard/asynchronous-programming-patterns/event-based-asynchronous-pattern-eap.md)
- [<span data-ttu-id="f4ea7-210">Olay Tabanlı Zaman Uyumsuz Desenin Ne Zaman Uygulanacağını Belirleme</span><span class="sxs-lookup"><span data-stu-id="f4ea7-210">Deciding When to Implement the Event-based Asynchronous Pattern</span></span>](../../../docs/standard/asynchronous-programming-patterns/deciding-when-to-implement-the-event-based-asynchronous-pattern.md)
- [<span data-ttu-id="f4ea7-211">Olay Tabanlı Zaman Uyumsuz Desen Uygulamak için En İyi Yöntemler</span><span class="sxs-lookup"><span data-stu-id="f4ea7-211">Best Practices for Implementing the Event-based Asynchronous Pattern</span></span>](../../../docs/standard/asynchronous-programming-patterns/best-practices-for-implementing-the-event-based-asynchronous-pattern.md)
- [<span data-ttu-id="f4ea7-212">Nasıl yapılır: Olay Tabanlı Zaman Uyumsuz Deseni Destekleyen Bileşenleri Kullanma</span><span class="sxs-lookup"><span data-stu-id="f4ea7-212">How to: Use Components That Support the Event-based Asynchronous Pattern</span></span>](../../../docs/standard/asynchronous-programming-patterns/how-to-use-components-that-support-the-event-based-asynchronous-pattern.md)
- [<span data-ttu-id="f4ea7-213">Nasıl yapılır: Olay Tabanlı Zaman Uyumsuz Deseni Destekleyen Bir Bileşeni Uygulama</span><span class="sxs-lookup"><span data-stu-id="f4ea7-213">How to: Implement a Component That Supports the Event-based Asynchronous Pattern</span></span>](../../../docs/standard/asynchronous-programming-patterns/component-that-supports-the-event-based-asynchronous-pattern.md)
