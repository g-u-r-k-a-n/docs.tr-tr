---
description: 'Daha fazla bilgi edinin: kısmi güven En Iyi uygulamaları'
title: Kısmi Güven En İyi Uygulamaları
ms.date: 03/30/2017
ms.assetid: 0d052bc0-5b98-4c50-8bb5-270cc8a8b145
ms.openlocfilehash: abdc0fbbb84581b302bca8d514a5f8f5cc2703e6
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 02/06/2021
ms.locfileid: "99733560"
---
# <a name="partial-trust-best-practices"></a><span data-ttu-id="68e0f-103">Kısmi Güven En İyi Uygulamaları</span><span class="sxs-lookup"><span data-stu-id="68e0f-103">Partial Trust Best Practices</span></span>

<span data-ttu-id="68e0f-104">Bu konuda kısmi güven ortamında Windows Communication Foundation (WCF) çalıştırılırken en iyi yöntemler açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="68e0f-104">This topic describes best practices when running Windows Communication Foundation (WCF) in a partial trust environment.</span></span>

## <a name="serialization"></a><span data-ttu-id="68e0f-105">Serileştirme</span><span class="sxs-lookup"><span data-stu-id="68e0f-105">Serialization</span></span>

<span data-ttu-id="68e0f-106"><xref:System.Runtime.Serialization.DataContractSerializer>' İ kısmen güvenilen bir uygulamada kullanırken aşağıdaki yöntemleri uygulayın.</span><span class="sxs-lookup"><span data-stu-id="68e0f-106">Apply the following practices when using the <xref:System.Runtime.Serialization.DataContractSerializer> in a partially-trusted application.</span></span>

- <span data-ttu-id="68e0f-107">Tüm serileştirilebilir türler açıkça `[DataContract]` özniteliğiyle işaretlenmelidir.</span><span class="sxs-lookup"><span data-stu-id="68e0f-107">All serializable types must be explicitly marked with the `[DataContract]` attribute.</span></span> <span data-ttu-id="68e0f-108">Aşağıdaki teknikler kısmi güven ortamında desteklenmez:</span><span class="sxs-lookup"><span data-stu-id="68e0f-108">The following techniques are not supported in a partial trust environment:</span></span>

- <span data-ttu-id="68e0f-109">Sınıfları ile serileştirilmesi için İşaretleme <xref:System.SerializableAttribute> .</span><span class="sxs-lookup"><span data-stu-id="68e0f-109">Marking classes to be serialized with the <xref:System.SerializableAttribute>.</span></span>

- <span data-ttu-id="68e0f-110"><xref:System.Runtime.Serialization.ISerializable>Bir sınıfa serileştirme işlemini denetlemesine izin vermek için arabirimi uygulama.</span><span class="sxs-lookup"><span data-stu-id="68e0f-110">Implementing the <xref:System.Runtime.Serialization.ISerializable> interface to allow a class to control its serialization process.</span></span>

### <a name="using-datacontractserializer"></a><span data-ttu-id="68e0f-111">DataContractSerializer kullanma</span><span class="sxs-lookup"><span data-stu-id="68e0f-111">Using DataContractSerializer</span></span>

- <span data-ttu-id="68e0f-112">Özniteliğiyle işaretlenen tüm türler `[DataContract]` ortak olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="68e0f-112">All types marked with the `[DataContract]` attribute must be public.</span></span> <span data-ttu-id="68e0f-113">Genel olmayan türler kısmi güven ortamında serileştirilemiyor.</span><span class="sxs-lookup"><span data-stu-id="68e0f-113">Non-public types cannot be serialized in a partial trust environment.</span></span>

- <span data-ttu-id="68e0f-114">`[DataContract]`Serileştirilebilir türdeki tüm Üyeler `[DataContract]` ortak olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="68e0f-114">All `[DataContract]` members in a serializable `[DataContract]` type must be public.</span></span> <span data-ttu-id="68e0f-115">Genel olmayan bir tür `[DataMember]` kısmi güven ortamında serileştirilemiyor.</span><span class="sxs-lookup"><span data-stu-id="68e0f-115">A type with a non-public `[DataMember]` cannot be serialized in a partial trust environment.</span></span>

- <span data-ttu-id="68e0f-116">Serileştirme olaylarını işleyen Yöntemler (örneğin,, `OnSerializing` `OnSerialized` `OnDeserializing` ve `OnDeserialized` ) ortak olarak bildirilmelidir.</span><span class="sxs-lookup"><span data-stu-id="68e0f-116">Methods that handle serialization events (such as `OnSerializing`, `OnSerialized`, `OnDeserializing`, and `OnDeserialized`) must be declared as public.</span></span> <span data-ttu-id="68e0f-117">Ancak, hem açık hem de örtük uygulamaları <xref:System.Runtime.Serialization.IDeserializationCallback.OnDeserialization%28System.Object%29> desteklenir.</span><span class="sxs-lookup"><span data-stu-id="68e0f-117">However, both explicit and implicit implementations of <xref:System.Runtime.Serialization.IDeserializationCallback.OnDeserialization%28System.Object%29> are supported.</span></span>

- <span data-ttu-id="68e0f-118">`[DataContract]` ile işaretlenen derlemelerde uygulanan türler, <xref:System.Security.AllowPartiallyTrustedCallersAttribute> <xref:System.Runtime.Serialization.DataContractSerializer> seri durumdan çıkarma sırasında yeni örneklendirilmiş nesnenin oluşturucusunu çağırmadığından tür oluşturucusunda güvenlikle ilgili eylemleri gerçekleştirmemelidir.</span><span class="sxs-lookup"><span data-stu-id="68e0f-118">`[DataContract]` types implemented in assemblies marked with the <xref:System.Security.AllowPartiallyTrustedCallersAttribute> must not perform security-related actions in the type constructor, as the <xref:System.Runtime.Serialization.DataContractSerializer> does not call the constructor of the newly-instantiated object during deserialization.</span></span> <span data-ttu-id="68e0f-119">Özellikle, aşağıdaki ortak güvenlik teknikleri türler için kaçınılmalıdır `[DataContract]` :</span><span class="sxs-lookup"><span data-stu-id="68e0f-119">Specifically, the following common security techniques must be avoided for `[DataContract]` types:</span></span>

- <span data-ttu-id="68e0f-120">Türün oluşturucusunu iç veya özel hale getirerek kısmi güven erişimini kısıtlamaya çalışılıyor.</span><span class="sxs-lookup"><span data-stu-id="68e0f-120">Attempting to restrict partial trust access by making the type's constructor internal or private.</span></span>

- <span data-ttu-id="68e0f-121">Türün oluşturucusuna bir ekleyerek türe erişimi sınırlandırma `[LinkDemand]` .</span><span class="sxs-lookup"><span data-stu-id="68e0f-121">Restricting access to the type by adding a `[LinkDemand]` to the type's constructor.</span></span>

- <span data-ttu-id="68e0f-122">Nesnesi başarıyla örneklendiği için, Oluşturucu tarafından zorlanan tüm doğrulama denetimleri başarıyla geçildi.</span><span class="sxs-lookup"><span data-stu-id="68e0f-122">Assuming that because the object has been successfully instantiated, any validation checks enforced by the constructor have passed successfully.</span></span>

### <a name="using-ixmlserializable"></a><span data-ttu-id="68e0f-123">IXmlSerializable kullanma</span><span class="sxs-lookup"><span data-stu-id="68e0f-123">Using IXmlSerializable</span></span>

<span data-ttu-id="68e0f-124">Aşağıdaki en iyi uygulamalar <xref:System.Xml.Serialization.IXmlSerializable> , uygulayan ve kullanılarak serileştirilmiş olan türler için geçerlidir <xref:System.Runtime.Serialization.DataContractSerializer> :</span><span class="sxs-lookup"><span data-stu-id="68e0f-124">The following best practices apply for types that implement <xref:System.Xml.Serialization.IXmlSerializable> and are serialized using the <xref:System.Runtime.Serialization.DataContractSerializer>:</span></span>

- <span data-ttu-id="68e0f-125"><xref:System.Xml.Serialization.IXmlSerializable.GetSchema%2A>Statik yöntem uygulamaları olmalıdır `public` .</span><span class="sxs-lookup"><span data-stu-id="68e0f-125">The <xref:System.Xml.Serialization.IXmlSerializable.GetSchema%2A> static method implementations must be `public`.</span></span>

- <span data-ttu-id="68e0f-126">Arabirimi uygulayan örnek yöntemleri olmalıdır <xref:System.Xml.Serialization.IXmlSerializable> `public` .</span><span class="sxs-lookup"><span data-stu-id="68e0f-126">The instance methods that implement the <xref:System.Xml.Serialization.IXmlSerializable> interface must be `public`.</span></span>

## <a name="using-wcf-from-fully-trusted-platform-code-that-allows-calls-from-partially-trusted-callers"></a><span data-ttu-id="68e0f-127">Kısmen güvenilen çağıranların çağrılarına Izin veren Fully-Trusted platform kodundan WCF kullanma</span><span class="sxs-lookup"><span data-stu-id="68e0f-127">Using WCF from Fully-Trusted Platform Code that Allows Calls from Partially Trusted Callers</span></span>

<span data-ttu-id="68e0f-128">WCF kısmi güven güvenlik modeli, bir WCF genel yönteminin veya özelliğinin, barındırma uygulamasının kod erişim güvenliği (CAS) bağlamında çalıştığını varsayar.</span><span class="sxs-lookup"><span data-stu-id="68e0f-128">The WCF partial trust security model assumes that any caller of a WCF public method or property is running in the code access security (CAS) context of the hosting application.</span></span> <span data-ttu-id="68e0f-129">WCF Ayrıca her biri için yalnızca bir uygulama güvenlik bağlamının olduğunu <xref:System.AppDomain> ve bu bağlamın <xref:System.AppDomain> Güvenilen bir ana bilgisayar tarafından oluşturma zamanında (örneğin, ASP.NET uygulama Yöneticisi tarafından yapılan bir çağrıya göre) oluşturulduğunu varsayar <xref:System.AppDomain.CreateDomain%2A> .</span><span class="sxs-lookup"><span data-stu-id="68e0f-129">WCF also assumes that only one application security context exists for each <xref:System.AppDomain>, and that this context is established at <xref:System.AppDomain> creation time by a trusted host (for example, by a call to <xref:System.AppDomain.CreateDomain%2A> or by the ASP.NET Application Manager).</span></span>

<span data-ttu-id="68e0f-130">Bu güvenlik modeli, orta düzey güven ASP.NET uygulamasında çalışan Kullanıcı kodu gibi ek CA izinleri içermeyen Kullanıcı tarafından yazılmış uygulamalar için geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="68e0f-130">This security model applies to user-written applications that cannot assert additional CAS permissions, such as user code running in a Medium Trust ASP.NET application.</span></span> <span data-ttu-id="68e0f-131">Ancak, tam güvenilir platform kodu (örneğin, genel derleme önbelleğinde yüklü olan ve kısmen güvenilen koddan yapılan çağrıları kabul eden bir üçüncü taraf derleme), uygulama düzeyinde güvenlik açıklarına giriş yapmaktan kaçınmak için kısmen güvenilen bir uygulama adına WCF 'ye çağrı yaparken açık bir işlem olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="68e0f-131">However, fully-trusted platform code (for example, a third-party assembly that is installed in the global assembly cache and accepts calls from partially-trusted code) must take explicit care when calling into WCF on behalf of a partially-trusted application to avoid introducing application-level security vulnerabilities.</span></span>

<span data-ttu-id="68e0f-132">Tam güven kodu, <xref:System.Security.PermissionSet.Assert%2A> <xref:System.Security.PermissionSet.PermitOnly%2A> <xref:System.Security.PermissionSet.Deny%2A> WCF API 'lerini kısmen güvenilen kod adına çağrılmadan önce GEÇERLI iş parçacığının CAS izin kümesini (, veya çağırarak) değiştirmekten kaçınmalıdır.</span><span class="sxs-lookup"><span data-stu-id="68e0f-132">Full-trust code should avoid altering the CAS permission set of the current thread (by calling <xref:System.Security.PermissionSet.Assert%2A>, <xref:System.Security.PermissionSet.PermitOnly%2A>, or <xref:System.Security.PermissionSet.Deny%2A>) prior to calling WCF APIs on behalf of partially-trusted code.</span></span> <span data-ttu-id="68e0f-133">Uygulama düzeyi güvenlik içeriğinden bağımsız olan iş parçacığına özgü izin bağlamını ele almak, reddetmek veya başka bir şekilde oluşturmak beklenmedik davranışa neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="68e0f-133">Asserting, denying, or otherwise creating a thread-specific permission context that is independent of the application-level security context can result in unexpected behavior.</span></span> <span data-ttu-id="68e0f-134">Uygulamaya bağlı olarak bu davranış, uygulama düzeyinde güvenlik açıklarına neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="68e0f-134">Depending on the application, this behavior may result in application-level security vulnerabilities.</span></span>

<span data-ttu-id="68e0f-135">İş parçacığına özgü bir izin bağlamı kullanarak WCF 'ye çağıran kod, ortaya çıkabilecek aşağıdaki durumları işleyecek şekilde hazırlanmalıdır:</span><span class="sxs-lookup"><span data-stu-id="68e0f-135">Code that calls into WCF using a thread-specific permission context must be prepared to handle the following situations that may arise:</span></span>

- <span data-ttu-id="68e0f-136">İş parçacığına özgü güvenlik bağlamı işlemin süresi boyunca tutulmayabilir, bu da olası güvenlik özel durumlarına neden olur.</span><span class="sxs-lookup"><span data-stu-id="68e0f-136">The thread-specific security context may not be maintained for the duration of the operation, which results in potential security exceptions.</span></span>

- <span data-ttu-id="68e0f-137">İç WCF kodu ve Kullanıcı tarafından sağlanmış geri çağrılar, çağrının ilk olarak başlatıldığı sunucudan farklı bir güvenlik bağlamında çalıştırılabilir.</span><span class="sxs-lookup"><span data-stu-id="68e0f-137">Internal WCF code as well as any user-provided callbacks may run in a different security context than the one under which the call was originally initiated.</span></span> <span data-ttu-id="68e0f-138">Bu bağlamlar şunlardır:</span><span class="sxs-lookup"><span data-stu-id="68e0f-138">These contexts include:</span></span>

  - <span data-ttu-id="68e0f-139">Uygulama izin bağlamı.</span><span class="sxs-lookup"><span data-stu-id="68e0f-139">The application permission context.</span></span>

  - <span data-ttu-id="68e0f-140">O sırada çalışmakta olan diğer Kullanıcı iş parçacıkları tarafından daha önce oluşturulan ve o anda çalışan kullanım ömrü boyunca WCF 'ye çağrı yapmak için kullanılan iş parçacığına özgü izin bağlamı <xref:System.AppDomain></span><span class="sxs-lookup"><span data-stu-id="68e0f-140">Any thread-specific permission context previously created by other user threads used to call into WCF during the lifetime of the currently running <xref:System.AppDomain>.</span></span>

<span data-ttu-id="68e0f-141">WCF genel API 'Lerine çağrılmadan önce, bu izinler tam güvenilir bir bileşen tarafından belirtilmemişse, kısmen güvenilen kodun tam güven izinleri edinemediğini garanti eder.</span><span class="sxs-lookup"><span data-stu-id="68e0f-141">WCF guarantees that partially-trusted code cannot obtain full-trust permissions unless such permissions are asserted by a fully-trusted component prior to calling into WCF public APIs.</span></span> <span data-ttu-id="68e0f-142">Ancak, tam güveni ele almak için etkileri belirli bir iş parçacığı, işlem veya kullanıcı eylemine yalıtılmış olduğunu garanti etmez.</span><span class="sxs-lookup"><span data-stu-id="68e0f-142">However, it does not guarantee that the effects of asserting full trust is isolated to a particular thread, operation, or user action.</span></span>

<span data-ttu-id="68e0f-143">En iyi uygulama olarak,, veya çağırarak iş parçacığına özgü izin bağlamı oluşturmaktan <xref:System.Security.PermissionSet.Assert%2A> kaçının <xref:System.Security.PermissionSet.PermitOnly%2A> <xref:System.Security.PermissionSet.Deny%2A> .</span><span class="sxs-lookup"><span data-stu-id="68e0f-143">As a best practice, avoid creating thread-specific permission context by calling <xref:System.Security.PermissionSet.Assert%2A>, <xref:System.Security.PermissionSet.PermitOnly%2A>, or <xref:System.Security.PermissionSet.Deny%2A>.</span></span> <span data-ttu-id="68e0f-144">Bunun yerine,, veya gerekli olmaması için, uygulamanın kendisi için ayrıcalık verin veya <xref:System.Security.PermissionSet.Assert%2A> reddedin <xref:System.Security.PermissionSet.Deny%2A> <xref:System.Security.PermissionSet.PermitOnly%2A> .</span><span class="sxs-lookup"><span data-stu-id="68e0f-144">Instead, grant or deny the privilege to the application itself, so that no <xref:System.Security.PermissionSet.Assert%2A>, <xref:System.Security.PermissionSet.Deny%2A>, or <xref:System.Security.PermissionSet.PermitOnly%2A> is required.</span></span>

## <a name="see-also"></a><span data-ttu-id="68e0f-145">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="68e0f-145">See also</span></span>

- <xref:System.Runtime.Serialization.DataContractSerializer>
- <xref:System.Xml.Serialization.IXmlSerializable>
