---
title: 'CA3007: açık yeniden yönlendirme güvenlik açıkları için kodu gözden geçirme (kod analizi)'
description: 'Kod Analizi kuralı CA3007 hakkında bilgi edinin: açık yeniden yönlendirme güvenlik açıkları için kodu gözden geçirin'
ms.date: 04/03/2019
ms.topic: reference
author: dotpaul
ms.author: paulming
dev_langs:
- CSharp
- VB
ms.openlocfilehash: 8c1accb745a9341da8221cb275ec8b861ca183b8
ms.sourcegitcommit: 2e4adc490c1d2a705a0592b295d606b10b9f51f1
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 09/25/2020
ms.locfileid: "96589161"
---
# <a name="ca3007-review-code-for-open-redirect-vulnerabilities"></a>CA3007: Açık yeniden yönlendirme güvenlik açıkları için inceleme kodu

| | Değer |
|-|-|
| **Kural Kimliği** |CA3007|
| **Kategori** |Microsoft.Security|
| **Düzeltilme veya kırılmamış** |Kırılmamış|

## <a name="cause"></a>Nedeni

Güvenilir olmayan HTTP isteği girişi bir HTTP yanıtı yönlendirmeye ulaşır.

Varsayılan olarak, bu kural codebase 'in tamamını analiz eder, ancak bu [yapılandırılabilir](#configurability).

## <a name="rule-description"></a>Kural açıklaması

Güvenilmeyen girişle çalışırken, açık yeniden yönlendirme güvenlik açıklarına karşı bir sorun yaşının. Saldırgan, meşru bir URL 'nin görünümüne izin vermek için Web sitesini kullanmak üzere açık bir yeniden yönlendirme güvenlik açığıyla yararlanabilir, ancak şüphelenmeyecek bir ziyaretçi kimlik avına veya başka bir kötü amaçlı Web sayfasına yönlendirebilir.

Bu kural http isteklerinden gelen ve HTTP yeniden yönlendirme URL 'sine ulaşan giriş bulmaya çalışır.

> [!NOTE]
> Bu kural derlemeler genelinde verileri izleyemez. Örneğin, bir derleme HTTP istek girişini okuduğunda ve bunu bir HTTP yeniden yönlendirme ile yanıt veren başka bir derlemeye geçirirse, bu kural bir uyarı oluşturmaz.

> [!NOTE]
> Bu kuralın, yöntem çağrılarında veri akışını ne kadar analiz edip bu kurala ilişkin yapılandırılabilir bir sınır vardır. Bir EditorConfig dosyasında sınırı yapılandırma hakkında bilgi için bkz. [çözümleyici yapılandırması](https://github.com/dotnet/roslyn-analyzers/blob/master/docs/Analyzer%20Configuration.md#dataflow-analysis) .

## <a name="how-to-fix-violations"></a>İhlalleri çözme

Açık yeniden yönlendirme güvenlik açıklarını gidermeye yönelik bazı yaklaşımlar şunlardır:

- Kullanıcıların yeniden yönlendirmeleri başlatmasına izin verme.
- Kullanıcıların bir yeniden yönlendirme senaryosunda URL 'nin herhangi bir kısmını belirtmenize izin vermez.
- Yeniden yönlendirmeleri, URL 'Lerin önceden tanımlanmış bir "izin verilenler listesi" olarak kısıtlar.
- Yeniden yönlendirme URL 'Lerini doğrulayın.
- Uygulanabiliyorsa, kullanıcılar sitenizden yeniden yönlendirildiğinde bir vazgeçme sayfası kullanın.

## <a name="when-to-suppress-warnings"></a>Uyarıların ne zaman bastırılamıyor

Girişin amaçlanan URL 'Lerle sınırlı olduğunu bildiğinizi biliyorsanız, bu uyarıyı bastırmak de normaldir.

## <a name="configurability"></a>Yapılandırılabilirlik

Bu kural, aşağıdaki yapılandırılabilir seçeneklere sahiptir.

### <a name="excluded-symbol-names"></a>Dışlanan sembol adları

Kod tabanınızın hangi bölümlerinin analizden dışlanacağını yapılandırabilirsiniz. Örneğin, kuralın adlı tür içindeki herhangi bir kodda çalıştırılmamalıdır `MyType` , aşağıdaki anahtar-değer çiftini projenizdeki bir *. editorconfig* dosyasına ekleyin:

```ini
dotnet_code_quality.CA3007.excluded_symbol_names = MyType
```

Seçenek değerindeki izin verilen sembol adı biçimleri (ile ayrılmış `|` ):

- Yalnızca sembol adı (kapsayan tür veya ad alanından bağımsız olarak ada sahip tüm semboller dahil)
- Simgenin [belge kimliği biçimindeki](https://github.com/dotnet/csharplang/blob/master/spec/documentation-comments.md#id-string-format)tam adlar. Her sembol adı, "d:" metotları için önek, `T:` türler için önek, "N:" ad alanları için önek vb. gibi bir sembol türü öneki gerektirir.
- `.ctor` oluşturucular ve `.cctor` statik oluşturucular için

Örnekler:

| Seçenek değeri | Özet |
| --- | --- |
|`dotnet_code_quality.CA3007.excluded_symbol_names = MyType` | Derlemede ' MyType ' adlı tüm simgeleri eşleştirir
|`dotnet_code_quality.CA3007.excluded_symbol_names = MyType1|MyType2` | Derlemede ' MyType1 ' ya da ' MyType2 ' adlı tüm simgeleri eşleştirir
|`dotnet_code_quality.CA3007.excluded_symbol_names = M:NS.MyType.MyMethod(ParamType)` | Verilen tam imzaya sahip ' MyMethod ' özel yöntemiyle eşleşir
|`dotnet_code_quality.CA3007.excluded_symbol_names = M:NS1.MyType1.MyMethod1(ParamType)|M:NS2.MyType2.MyMethod2(ParamType)` | ' MyMethod1 ' ve ' MyMethod2 ' belirli yöntemleriyle ilgili tam imzayla eşleşir

Bu seçeneklerin tümünü yalnızca bu kural için, tüm kurallar için veya bu kategorideki tüm kurallar (güvenlik) için yapılandırabilirsiniz. Daha fazla bilgi için bkz. [kod kalitesi kural yapılandırma seçenekleri](../code-quality-rule-options.md).

## <a name="pseudo-code-examples"></a>Sözde kod örnekleri

### <a name="violation"></a>Edildiği

```csharp
using System;

public partial class WebForm : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        string input = Request.Form["url"];
        this.Response.Redirect(input);
    }
}
```

```vb
Imports System

Partial Public Class WebForm
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(sender As Object, eventArgs As EventArgs)
        Dim input As String = Me.Request.Form("url")
        Me.Response.Redirect(input)
    End Sub
End Class
```

### <a name="solution"></a>Çözüm

```csharp
using System;

public partial class WebForm : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        string input = Request.Form["in"];
        if (String.IsNullOrWhiteSpace(input))
        {
            this.Response.Redirect("https://example.org/login.html");
        }
    }
}
```

```vb
Imports System

Partial Public Class WebForm
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(sender As Object, eventArgs As EventArgs)
        Dim input As String = Me.Request.Form("in")
        If String.IsNullOrWhiteSpace(input) Then
            Me.Response.Redirect("https://example.org/login.html")
        End If
    End Sub
End Class
```
