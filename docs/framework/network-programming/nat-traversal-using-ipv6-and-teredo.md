---
description: 'Hakkında daha fazla bilgi edinin: IPv6 ve Teredo kullanarak NAT geçişi'
title: IPv6 ve Teredo kullanarak NAT Geçişi
ms.date: 03/30/2017
ms.assetid: 568cd245-3300-49ef-a995-d81bf845d961
ms.openlocfilehash: 4ff7f273c01ef52f4d307cbd3e0698c5cc2ead4d
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 02/06/2021
ms.locfileid: "99785750"
---
# <a name="nat-traversal-using-ipv6-and-teredo"></a><span data-ttu-id="9381f-103">IPv6 ve Teredo kullanarak NAT Geçişi</span><span class="sxs-lookup"><span data-stu-id="9381f-103">NAT Traversal using IPv6 and Teredo</span></span>

<span data-ttu-id="9381f-104">Ağ adresi çevirisi (NAT) geçişi için destek sağlayan geliştirmeler yapılmıştır.</span><span class="sxs-lookup"><span data-stu-id="9381f-104">Enhancements were made that provide support for Network Address Translation (NAT) traversal.</span></span> <span data-ttu-id="9381f-105">Bu değişiklikler IPv6 ve Teredo ile kullanılmak üzere tasarlanmıştır, ancak diğer IP tünelleme teknolojileri için de geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="9381f-105">These changes are designed for use with IPv6 and Teredo, but they are also applicable to other IP tunneling technologies.</span></span> <span data-ttu-id="9381f-106">Bu geliştirmeler <xref:System.Net> ve ilgili ad alanlarındaki sınıfları etkiler.</span><span class="sxs-lookup"><span data-stu-id="9381f-106">These enhancements affect classes in the <xref:System.Net> and related namespaces.</span></span>  
  
 <span data-ttu-id="9381f-107">Bu değişiklikler, IP tünel teknolojilerini kullanmayı planlayasağlayan istemci ve sunucu uygulamalarını etkileyebilir.</span><span class="sxs-lookup"><span data-stu-id="9381f-107">These changes can affect client and server applications that plan to use IP tunneling technologies.</span></span>  
  
 <span data-ttu-id="9381f-108">NAT geçişini desteklemeye yönelik değişiklikler yalnızca .NET Framework sürüm 4 kullanan uygulamalar için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="9381f-108">The changes to support NAT traversal are available only for applications using .NET Framework version 4.</span></span> <span data-ttu-id="9381f-109">Bu özellikler .NET Framework önceki sürümlerinde kullanılamaz.</span><span class="sxs-lookup"><span data-stu-id="9381f-109">These features are not available on earlier versions of the .NET Framework.</span></span>  
  
## <a name="overview"></a><span data-ttu-id="9381f-110">Genel Bakış</span><span class="sxs-lookup"><span data-stu-id="9381f-110">Overview</span></span>  

 <span data-ttu-id="9381f-111">Internet Protokolü sürüm 4 (IPv4), bir IPv4 adresini 32 bit uzunluğunda olarak tanımladı.</span><span class="sxs-lookup"><span data-stu-id="9381f-111">The Internet Protocol version 4 (IPv4) defined an IPv4 address as 32 bits long.</span></span> <span data-ttu-id="9381f-112">Sonuç olarak, IPv4 yaklaşık 4.000.000.000 benzersiz IP adresini (2 ^ 32) destekler.</span><span class="sxs-lookup"><span data-stu-id="9381f-112">As a result, IPv4 supports approximately 4 billion unique IP addresses (2^32).</span></span> <span data-ttu-id="9381f-113">Internet üzerindeki bilgisayar ve ağ cihazlarının sayısı 1990s içinde genişletilir, IPv4 adres alanının sınırları görünür hale geldi.</span><span class="sxs-lookup"><span data-stu-id="9381f-113">As the number of computers and network devices on the Internet expanded in the 1990s, the limits of the IPv4 address space became apparent.</span></span>  
  
 <span data-ttu-id="9381f-114">IPv4 ömrünü uzatmak için kullanılan birkaç teknikten biri, tek bir benzersiz genel IP adresinin çok sayıda özel IP adresini (özel Intranet) göstermesini sağlamak için NAT dağıtmaktır.</span><span class="sxs-lookup"><span data-stu-id="9381f-114">One of several techniques used to extend the lifetime of IPv4 has been to deploy NAT to allow a single unique public IP address to represent a large number of private IP addresses (private Intranet).</span></span> <span data-ttu-id="9381f-115">NAT cihazının arkasındaki özel IP adresleri tek genel IPv4 adresini paylaşır.</span><span class="sxs-lookup"><span data-stu-id="9381f-115">The private IP addresses behind the NAT device share the single public IPv4 address.</span></span> <span data-ttu-id="9381f-116">NAT cihazı ayrılmış bir donanım cihazı (örneğin, pahalı bir kablosuz erişim noktası ve yönlendirici) veya NAT sağlamak üzere bir hizmet çalıştıran bir bilgisayar olabilir.</span><span class="sxs-lookup"><span data-stu-id="9381f-116">The NAT device may be a dedicated hardware device (an inexpensive Wireless Access Point and router, for example) or a computer running a service to provide NAT.</span></span> <span data-ttu-id="9381f-117">Bu genel IP adresi için bir cihaz veya hizmet, IP ağ paketlerini genel Internet ile özel Intranet arasında çevirir.</span><span class="sxs-lookup"><span data-stu-id="9381f-117">A device or service for this public IP address translates IP network packets between the public Internet and the private Intranet.</span></span>  
  
 <span data-ttu-id="9381f-118">Bu düzen, Internet üzerindeki diğer IP adreslerine (genellikle sunucular) istek gönderen özel Intranette çalışan istemci uygulamaları için iyi çalışır.</span><span class="sxs-lookup"><span data-stu-id="9381f-118">This scheme works well for client applications running on the private Intranet that send requests to other IP addresses (usually servers) on the Internet.</span></span> <span data-ttu-id="9381f-119">NAT cihazı veya sunucusu, bir yanıt döndürüldüğünde yanıtı nereden göndereceğini öğrendiğinde, istemci istekleri eşlemesini tutabilir.</span><span class="sxs-lookup"><span data-stu-id="9381f-119">The NAT device or server can keep a mapping of client requests so when a response is returned it knows where to send the response.</span></span> <span data-ttu-id="9381f-120">Ancak bu şema, hizmet sağlamak, paketleri dinlemek ve yanıt vermek istediğiniz NAT cihazının arkasında özel Intranette çalışan uygulamalar için sorunlar doğurur.</span><span class="sxs-lookup"><span data-stu-id="9381f-120">But this scheme poses problems for applications running in the private Intranet behind the NAT device that want to provide services, listen for packets, and respond.</span></span> <span data-ttu-id="9381f-121">Bu durum özellikle eşler arası uygulamalar için de kullanılır.</span><span class="sxs-lookup"><span data-stu-id="9381f-121">This is particularly the case for peer-to-peer applications.</span></span>  
  
 <span data-ttu-id="9381f-122">IPv6 protokolü, 128 bit uzunluğunda bir IPv4 adresi tanımladı.</span><span class="sxs-lookup"><span data-stu-id="9381f-122">The IPv6 protocol defined an IPv4 address as 128 bits long.</span></span> <span data-ttu-id="9381f-123">Sonuç olarak, IPv6, 3,2 x 10 ^ 38 benzersiz adresi (2 ^ 128) olan büyük bir IP adresi alanını destekler.</span><span class="sxs-lookup"><span data-stu-id="9381f-123">As a result, IPv6 supports very a large IP address space of 3.2 x 10^38 unique addresses (2^128).</span></span> <span data-ttu-id="9381f-124">Bu boyuttaki bir adres alanı ile, Internet 'e bağlı her cihaza benzersiz bir adres verilme olasılığı vardır.</span><span class="sxs-lookup"><span data-stu-id="9381f-124">With an address space of this size, it is possible for every device connected to the Internet to be given a unique address.</span></span> <span data-ttu-id="9381f-125">Ancak sorunlar oluştu.</span><span class="sxs-lookup"><span data-stu-id="9381f-125">But there are problems.</span></span> <span data-ttu-id="9381f-126">Dünyanın çoğu hala yalnızca IPv4 kullanıyor.</span><span class="sxs-lookup"><span data-stu-id="9381f-126">Much of the world is still using only IPv4.</span></span> <span data-ttu-id="9381f-127">Özellikle, küçük şirketler, kuruluşlar ve birlikte tutma tarafından kullanılan mevcut yönlendiricilerin ve kablosuz erişim noktalarının çoğu IPv6 'Yı desteklemez.</span><span class="sxs-lookup"><span data-stu-id="9381f-127">In particular, many of the existing routers and wireless access points used by small companies, organizations, and households do not support IPv6.</span></span> <span data-ttu-id="9381f-128">Ayrıca, bu müşterilere hizmet veren bazı Internet hizmet sağlayıcıları IPv6 için destek yapılandırmamakta veya yapılandırılmamış olabilir.</span><span class="sxs-lookup"><span data-stu-id="9381f-128">Also some Internet service providers that serve these customers either do not support or have not configured support for IPv6.</span></span>  
  
 <span data-ttu-id="9381f-129">IPv4 paketindeki IPv6 adreslerini tünel için birkaç IPv6 geçiş teknolojisi geliştirilmiştir.</span><span class="sxs-lookup"><span data-stu-id="9381f-129">Several IPv6 transition technologies have been developed to tunnel IPv6 addresses in an IPv4 packet.</span></span> <span data-ttu-id="9381f-130">Bu teknolojiler, IPv6 ana bilgisayarlarının diğer IPv6 ağlarına ulaşmak için ıP4 ağlarını çapraz bir şekilde geçmesi gerektiğinde, tek noktaya yayın IPv6 trafiği için adres atamasını ve konak-konak otomatik tünelini sağlayan 6to4, ıSATAP ve Teredo tünellerini içerir.</span><span class="sxs-lookup"><span data-stu-id="9381f-130">These technologies include 6to4, ISATAP, and Teredo tunnels that provide address assignment and host-to-host automatic tunneling for unicast IPv6 traffic when IPv6 hosts must traverse IP4 networks to reach other IPv6 networks.</span></span> <span data-ttu-id="9381f-131">IPv6 paketleri IPv4 paketleri olarak tünel gönderilir.</span><span class="sxs-lookup"><span data-stu-id="9381f-131">IPv6 packets are sent tunneled as IPv4 packets.</span></span> <span data-ttu-id="9381f-132">Bir NAT cihazı aracılığıyla IPv6 adresleri için NAT çapraz geçişine izin veren çeşitli tünel oluşturma teknikleri kullanılmaktadır.</span><span class="sxs-lookup"><span data-stu-id="9381f-132">Several tunneling techniques are being used that allow NAT traversal for IPv6 addresses through a NAT device.</span></span>  
  
 <span data-ttu-id="9381f-133">Teredo, IPv4 ağlarına IPv6 bağlantısı getiren IPv6 geçiş teknolojilerinden biridir.</span><span class="sxs-lookup"><span data-stu-id="9381f-133">Teredo is one of the IPv6 transition technologies which brings IPv6 connectivity to IPv4 networks.</span></span> <span data-ttu-id="9381f-134">Teredo, Internet Mühendisliği görev gücü (IETF) tarafından yayımlanan RFC 4380 ' de belgelenmiştir.</span><span class="sxs-lookup"><span data-stu-id="9381f-134">Teredo is documented in RFC 4380 published by the Internet Engineering Task Force (IETF).</span></span> <span data-ttu-id="9381f-135">Windows XP SP2 ve üzeri, 2001:0::/32 aralığında ortak bir IPv6 adresi sağlayabilen bir sanal Teredo bağdaştırıcısı desteği sağlar.</span><span class="sxs-lookup"><span data-stu-id="9381f-135">Windows XP SP2 and later provide support for a virtual Teredo adapter which can provide a public IPv6 address in the range 2001:0::/32.</span></span> <span data-ttu-id="9381f-136">Bu IPv6 adresi Internet 'ten gelen bağlantıları dinlemek için kullanılabilir ve dinleme hizmetine bağlanmak isteyen IPv6 etkin istemcilerine temin edilebilir.</span><span class="sxs-lookup"><span data-stu-id="9381f-136">This IPv6 address can be used to listen for incoming connections from the Internet and can be provided to IPv6 enabled clients that wish to connect to the listening service.</span></span> <span data-ttu-id="9381f-137">Bu, uygulama bir NAT cihazının arkasında bir bilgisayarın nasıl ele alınacağını öğrenmeden bir uygulamayı serbest bırakır ve bu, uygulama yalnızca kendi IPv6 Teredo adresini kullanarak bağlanabilir.</span><span class="sxs-lookup"><span data-stu-id="9381f-137">This frees an application from worrying about how to address a computer behind a NAT device, since the application can just connect to it using its IPv6 Teredo address.</span></span>  
  
## <a name="enhancements-to-support-nat-traversal-and-teredo"></a><span data-ttu-id="9381f-138">NAT geçişi ve Teredo desteği için geliştirmeler</span><span class="sxs-lookup"><span data-stu-id="9381f-138">Enhancements to Support NAT Traversal and Teredo</span></span>  

 <span data-ttu-id="9381f-139"><xref:System.Net> <xref:System.Net.NetworkInformation> <xref:System.Net.Sockets> IPv6 ve Teredo kullanılarak NAT çapraz geçişini desteklemek için, ve ad alanlarına geliştirmeler eklenir.</span><span class="sxs-lookup"><span data-stu-id="9381f-139">Enhancements are added to the <xref:System.Net>, <xref:System.Net.NetworkInformation>, and <xref:System.Net.Sockets> namespaces for supporting NAT traversal using IPv6 and Teredo.</span></span>  
  
 <span data-ttu-id="9381f-140"><xref:System.Net.NetworkInformation.IPGlobalProperties?displayProperty=nameWithType>Konaktaki tek noktaya yayın IP adreslerinin listesini almak için sınıfa çeşitli yöntemler eklenmiştir.</span><span class="sxs-lookup"><span data-stu-id="9381f-140">Several methods are added to the <xref:System.Net.NetworkInformation.IPGlobalProperties?displayProperty=nameWithType> class to get the list of unicast IP addresses on the host.</span></span> <span data-ttu-id="9381f-141"><xref:System.Net.NetworkInformation.IPGlobalProperties.BeginGetUnicastAddresses%2A>Yöntemi, yerel bilgisayardaki kararlı tek noktaya yayın IP adresi tablosunu almak için zaman uyumsuz bir istek başlatır.</span><span class="sxs-lookup"><span data-stu-id="9381f-141">The <xref:System.Net.NetworkInformation.IPGlobalProperties.BeginGetUnicastAddresses%2A> method begins an asynchronous request to retrieve the stable unicast IP address table on the local computer.</span></span> <span data-ttu-id="9381f-142"><xref:System.Net.NetworkInformation.IPGlobalProperties.EndGetUnicastAddresses%2A>Yöntemi, yerel bilgisayardaki kararlı tek noktaya yayın IP adresi tablosunu almak için bekleyen bir zaman uyumsuz isteği sonlandırır.</span><span class="sxs-lookup"><span data-stu-id="9381f-142">The <xref:System.Net.NetworkInformation.IPGlobalProperties.EndGetUnicastAddresses%2A> method ends a pending asynchronous request to retrieve the stable unicast IP address table on the local computer.</span></span> <span data-ttu-id="9381f-143"><xref:System.Net.NetworkInformation.IPGlobalProperties.GetUnicastAddresses%2A>Yöntemi, yerel bilgisayardaki kararlı tek noktaya yayın IP adresi tablosunu almak için zaman uyumlu bir istek olup, gerekirse adres tablosu sabitlene kadar bekler.</span><span class="sxs-lookup"><span data-stu-id="9381f-143">The <xref:System.Net.NetworkInformation.IPGlobalProperties.GetUnicastAddresses%2A> method is a synchronous request to retrieve the stable unicast IP address table on the local computer, waiting until the address table stabilizes if necessary.</span></span>  
  
 <span data-ttu-id="9381f-144"><xref:System.Net.IPAddress.IsIPv6Teredo%2A?displayProperty=nameWithType>Özelliği, bir IPv6 Teredo adresi olup olmadığını anlamak için kullanılabilir <xref:System.Net.IPAddress> .</span><span class="sxs-lookup"><span data-stu-id="9381f-144">The <xref:System.Net.IPAddress.IsIPv6Teredo%2A?displayProperty=nameWithType> property can be used to determine if an <xref:System.Net.IPAddress> is an IPv6 Teredo address.</span></span>  
  
 <span data-ttu-id="9381f-145">Bu yeni <xref:System.Net.NetworkInformation.IPGlobalProperties> Sınıf yöntemlerinin özelliği ile birlikte kullanılması, <xref:System.Net.IPAddress.IsIPv6Teredo%2A> bir uygulamanın Teredo adresini kolayca bulmasına olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="9381f-145">Using these new <xref:System.Net.NetworkInformation.IPGlobalProperties> class methods in combination with the <xref:System.Net.IPAddress.IsIPv6Teredo%2A> property allows an application to easily find the Teredo address.</span></span> <span data-ttu-id="9381f-146">Genellikle bir uygulamanın bu bilgileri uzak uygulamalarla haberleşmiş olması durumunda yalnızca yerel Teredo adresini bilmeleri gerekir.</span><span class="sxs-lookup"><span data-stu-id="9381f-146">An application normally only needs to know the local Teredo address if it is communicating this information to remote applications.</span></span> <span data-ttu-id="9381f-147">Örneğin, eşler arası bir uygulama, tüm IPv6 adreslerini, daha sonra doğrudan iletişimi etkinleştirmek için bunları başka bir eşe iletebilen bir eşleşme sunucusuna gönderebilir.</span><span class="sxs-lookup"><span data-stu-id="9381f-147">For example, a peer-to-peer application might send all of its IPv6 addresses to a matchmaking server which can then forward them to others peers to enable direct communication.</span></span>  
  
 <span data-ttu-id="9381f-148">Bir uygulamanın normalde dinleme hizmetini <xref:System.Net.IPAddress.IPv6Any?displayProperty=nameWithType> Yerel Teredo adresi yerine dinlemesi için ayarlaması gerekir.</span><span class="sxs-lookup"><span data-stu-id="9381f-148">An application should normally set its listening service to listen on <xref:System.Net.IPAddress.IPv6Any?displayProperty=nameWithType> rather than on the local Teredo address.</span></span> <span data-ttu-id="9381f-149">Bu nedenle, uzak bir istemci veya eşin dinleme hizmetinin ana bilgisayarına doğrudan bir IPv6 yolu varsa, istemci veya eş IPv6 kullanarak doğrudan bağlanabilir ve paketleri tünel oluşturmak için Teredo kullanmak zorunda değildir.</span><span class="sxs-lookup"><span data-stu-id="9381f-149">So if a remote client or peer has a direct IPv6 route to the host of the listening service, the client or peer can connect directly using IPv6 and not have to use Teredo to tunnel packets.</span></span>  
  
 <span data-ttu-id="9381f-150">TCP uygulamalarında, <xref:System.Net.Sockets.TcpListener?displayProperty=nameWithType> SıNıFıNıN <xref:System.Net.Sockets.TcpListener.AllowNatTraversal%2A> NAT çapraz geçişini etkinleştirme yöntemi vardır.</span><span class="sxs-lookup"><span data-stu-id="9381f-150">For TCP applications, the <xref:System.Net.Sockets.TcpListener?displayProperty=nameWithType> class has an <xref:System.Net.Sockets.TcpListener.AllowNatTraversal%2A> method to enable NAT traversal.</span></span> <span data-ttu-id="9381f-151">UDP uygulamalarında, <xref:System.Net.Sockets.UdpClient?displayProperty=nameWithType> SıNıFıNıN <xref:System.Net.Sockets.UdpClient.AllowNatTraversal%2A> NAT çapraz geçişini etkinleştirme yöntemi vardır.</span><span class="sxs-lookup"><span data-stu-id="9381f-151">For UDP applications, the <xref:System.Net.Sockets.UdpClient?displayProperty=nameWithType> class has an <xref:System.Net.Sockets.UdpClient.AllowNatTraversal%2A> method to enable NAT traversal.</span></span>  
  
 <span data-ttu-id="9381f-152">Ve ilgili sınıfları kullanan uygulamalar için, <xref:System.Net.Sockets.Socket?displayProperty=nameWithType> <xref:System.Net.Sockets.Socket.GetSocketOption%2A> ve <xref:System.Net.Sockets.Socket.SetSocketOption%2A> yöntemleri, <xref:System.Net.Sockets.SocketOptionName.IPProtectionLevel?displayProperty=nameWithType> NAT geçişini sorgulamak, etkinleştirmek veya devre dışı bırakmak için yuva seçeneğiyle birlikte kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="9381f-152">For applications that use the <xref:System.Net.Sockets.Socket?displayProperty=nameWithType> and related classes, the <xref:System.Net.Sockets.Socket.GetSocketOption%2A> and <xref:System.Net.Sockets.Socket.SetSocketOption%2A> methods can be used with the <xref:System.Net.Sockets.SocketOptionName.IPProtectionLevel?displayProperty=nameWithType> socket option to query, enable, or disable NAT traversal.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="9381f-153">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="9381f-153">See also</span></span>

- <xref:System.Net.IPAddress.IsIPv6Teredo%2A?displayProperty=nameWithType>
- <xref:System.Net.NetworkInformation.IPGlobalProperties.BeginGetUnicastAddresses%2A?displayProperty=nameWithType>
- <xref:System.Net.NetworkInformation.IPGlobalProperties.EndGetUnicastAddresses%2A?displayProperty=nameWithType>
- <xref:System.Net.NetworkInformation.IPGlobalProperties.GetUnicastAddresses%2A?displayProperty=nameWithType>
- <xref:System.Net.Sockets.IPProtectionLevel?displayProperty=nameWithType>
- <xref:System.Net.Sockets.Socket.SetIPProtectionLevel%2A?displayProperty=nameWithType>
- <xref:System.Net.Sockets.TcpListener.AllowNatTraversal%2A?displayProperty=nameWithType>
- <xref:System.Net.Sockets.UdpClient.AllowNatTraversal%2A?displayProperty=nameWithType>
