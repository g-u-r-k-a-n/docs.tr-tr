---
title: Görsel Katmanda Tıklama Testi
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- hit testing functionality [WPF]
- visual layer [WPF], hit testing functionality
ms.assetid: b1a64b61-14be-4d75-b89a-5c67bebb2c7b
ms.openlocfilehash: 28ae983923c985050ac589166023e483721028d3
ms.sourcegitcommit: 700ea803fb06c5ce98de017c7f76463ba33ff4a9
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 02/19/2020
ms.locfileid: "77452623"
---
# <a name="hit-testing-in-the-visual-layer"></a><span data-ttu-id="c90f5-102">Görsel Katmanda Tıklama Testi</span><span class="sxs-lookup"><span data-stu-id="c90f5-102">Hit Testing in the Visual Layer</span></span>
<span data-ttu-id="c90f5-103">Bu konuda, görsel katman tarafından sağlanan isabet sınama işlevselliğine genel bir bakış sağlanır.</span><span class="sxs-lookup"><span data-stu-id="c90f5-103">This topic provides an overview of hit testing functionality provided by the visual layer.</span></span> <span data-ttu-id="c90f5-104">İsabet testi desteği, bir geometri veya nokta değerinin bir <xref:System.Windows.Media.Visual>işlenmiş içeriği dahilinde olup olmadığını belirlemenizi sağlar. bu sayede, birden çok nesne seçmek için seçim dikdörtgeni gibi kullanıcı arabirimi davranışlarını uygulamanıza olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="c90f5-104">Hit testing support allows you to determine whether a geometry or point value falls within the rendered content of a <xref:System.Windows.Media.Visual>, allowing you to implement user interface behavior such as a selection rectangle to select multiple objects.</span></span>  

<a name="hit_testing_scenarios"></a>   
## <a name="hit-testing-scenarios"></a><span data-ttu-id="c90f5-105">İsabet testi senaryoları</span><span class="sxs-lookup"><span data-stu-id="c90f5-105">Hit Testing Scenarios</span></span>  
 <span data-ttu-id="c90f5-106"><xref:System.Windows.UIElement> sınıfı, belirli bir koordinat değeri kullanarak bir öğeye karşı test 'e isabet etmenizi sağlayan <xref:System.Windows.UIElement.InputHitTest%2A> yöntemini sağlar.</span><span class="sxs-lookup"><span data-stu-id="c90f5-106">The <xref:System.Windows.UIElement> class provides the <xref:System.Windows.UIElement.InputHitTest%2A> method, which allows you to hit test against an element using a given coordinate value.</span></span> <span data-ttu-id="c90f5-107">Birçok durumda <xref:System.Windows.UIElement.InputHitTest%2A> yöntemi, öğelerin isabet sınamasını uygulamak için istenen işlevselliği sağlar.</span><span class="sxs-lookup"><span data-stu-id="c90f5-107">In many cases, the <xref:System.Windows.UIElement.InputHitTest%2A> method provides the desired functionality for implementing hit testing of elements.</span></span> <span data-ttu-id="c90f5-108">Ancak, görsel katmanda isabet sınamasını uygulamanız gerekebilecek birkaç senaryo vardır.</span><span class="sxs-lookup"><span data-stu-id="c90f5-108">However, there are several scenarios in which you may need to implement hit testing at the visual layer.</span></span>  
  
- <span data-ttu-id="c90f5-109"><xref:System.Windows.UIElement> olmayan nesnelere karşı isabet testi: Bu, <xref:System.Windows.Media.DrawingVisual> veya grafik nesneleri gibi<xref:System.Windows.UIElement> olmayan nesneleri isabet ediyorsanız geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="c90f5-109">Hit testing against non-<xref:System.Windows.UIElement> objects: This applies if you are hit testing non-<xref:System.Windows.UIElement> objects, such as <xref:System.Windows.Media.DrawingVisual> or graphics objects.</span></span>  
  
- <span data-ttu-id="c90f5-110">Geometri kullanarak isabet testi: Bu, bir noktanın koordinat değeri yerine bir geometri nesnesi kullanarak isabet etmeniz gerekiyorsa geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="c90f5-110">Hit testing using a geometry: This applies if you need to hit test using a geometry object rather than the coordinate value of a point.</span></span>  
  
- <span data-ttu-id="c90f5-111">Birden çok nesneye karşı isabet testi: Bu, örtüşen nesneler gibi birden çok nesneye karşı test için isabet etmeniz gerektiğinde geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="c90f5-111">Hit testing against multiple objects: This applies when you need to hit test against multiple objects, such as overlapping objects.</span></span> <span data-ttu-id="c90f5-112">Yalnızca ilki değil, bir geometriyi veya noktası kesişen tüm görsellerin sonuçlarını elde edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c90f5-112">You can get results for all visuals intersecting a geometry or point, not just the first one.</span></span>  
  
- <span data-ttu-id="c90f5-113"><xref:System.Windows.UIElement> isabet testi ilkesi yoksayılıyor: Bu, bir öğenin devre dışı veya görünmez olması gibi etkenlere göz önünde bulundurarak, <xref:System.Windows.UIElement> hit test ilkesini gözardı etmeniz gerektiğinde geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="c90f5-113">Ignoring <xref:System.Windows.UIElement> hit testing policy: This applies when you need to ignore the <xref:System.Windows.UIElement> hit testing policy, which takes into consideration such factors as whether an element is disabled or invisible.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="c90f5-114">Görsel katmandaki isabet sınamasını gösteren bir kod örneği için, bkz. [Drawinggörseller örneği](https://github.com/Microsoft/WPF-Samples/tree/master/Visual%20Layer/DrawingVisual) ve [Win32 birlikte çalışabilirlik örneği ile isabet testi](https://github.com/microsoft/WPF-Samples/tree/master/Visual%20Layer/VisualsHitTesting).</span><span class="sxs-lookup"><span data-stu-id="c90f5-114">For a complete code sample illustrating hit testing at the visual layer, see [Hit Test Using DrawingVisuals Sample](https://github.com/Microsoft/WPF-Samples/tree/master/Visual%20Layer/DrawingVisual) and [Hit Test with Win32 Interoperation Sample](https://github.com/microsoft/WPF-Samples/tree/master/Visual%20Layer/VisualsHitTesting).</span></span>  
  
<a name="hit_testing_support"></a>   
## <a name="hit-testing-support"></a><span data-ttu-id="c90f5-115">İsabet testi desteği</span><span class="sxs-lookup"><span data-stu-id="c90f5-115">Hit Testing Support</span></span>  
 <span data-ttu-id="c90f5-116"><xref:System.Windows.Media.VisualTreeHelper> sınıfındaki <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> yöntemlerinin amacı, bir geometri veya nokta koordinat değerinin bir denetim veya grafik öğesi gibi belirli bir nesnenin işlenmiş içeriği içinde olup olmadığını belirlemektir.</span><span class="sxs-lookup"><span data-stu-id="c90f5-116">The purpose of the <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> methods in the <xref:System.Windows.Media.VisualTreeHelper> class is to determine whether a geometry or point coordinate value is within the rendered content of a given object, such as a control or graphic element.</span></span> <span data-ttu-id="c90f5-117">Örneğin, bir nesnenin sınırlayıcı dikdörtgeninin içindeki bir fare tıklaması bir dairenin geometrisi dahilinde olup olmadığını anlamak için isabet sınamasını kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c90f5-117">For example, you could use hit testing to determine whether a mouse click within the bounding rectangle of an object falls within the geometry of a circle.</span></span> <span data-ttu-id="c90f5-118">Ayrıca, kendi özel isabet testi hesaplamalarınızı gerçekleştirmek için isabet sınamasının varsayılan uygulamasını geçersiz kılmayı da tercih edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c90f5-118">You can also choose to override the default implementation of hit testing to perform your own custom hit test calculations.</span></span>  
  
 <span data-ttu-id="c90f5-119">Aşağıdaki çizimde, dikdörtgen olmayan bir nesnenin bölgesi ve onun sınırlayıcı dikdörtgeni arasındaki ilişki gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="c90f5-119">The following illustration shows the relationship between a non-rectangular object's region and its bounding rectangle.</span></span>  
  
 <span data-ttu-id="c90f5-120">![Geçerli isabet testi bölgesinin diyagramı](./media/wcpsdk-mmgraphics-visuals-hittest-1.png "wcpsdk_mmgraphics_visuals_hittest_1")</span><span class="sxs-lookup"><span data-stu-id="c90f5-120">![Diagram of valid hit test region](./media/wcpsdk-mmgraphics-visuals-hittest-1.png "wcpsdk_mmgraphics_visuals_hittest_1")</span></span>  
<span data-ttu-id="c90f5-121">Geçerli isabet testi bölgesinin diyagramı</span><span class="sxs-lookup"><span data-stu-id="c90f5-121">Diagram of valid hit test region</span></span>  
  
<a name="hit_testing_and_z-order"></a>   
## <a name="hit-testing-and-z-order"></a><span data-ttu-id="c90f5-122">İsabet testi ve Z düzeni</span><span class="sxs-lookup"><span data-stu-id="c90f5-122">Hit Testing and Z-Order</span></span>  
 <span data-ttu-id="c90f5-123">[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] görsel katmanı yalnızca en üstteki nesnenin değil, bir nokta veya geometri altındaki tüm nesneler için isabet sınamasını destekler.</span><span class="sxs-lookup"><span data-stu-id="c90f5-123">The [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] visual layer supports hit testing against all objects under a point or geometry, not just the top-most object.</span></span> <span data-ttu-id="c90f5-124">Sonuçlar z düzeninde döndürülür.</span><span class="sxs-lookup"><span data-stu-id="c90f5-124">Results are returned in z-order.</span></span> <span data-ttu-id="c90f5-125">Ancak, <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> yöntemine parametre olarak geçirdiğiniz görsel nesne, görsel ağacın hangi bölümünü isabet testi olacak şekilde belirler.</span><span class="sxs-lookup"><span data-stu-id="c90f5-125">However, the visual object that you pass as the parameter to the <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> method determines which portion of the visual tree that will be hit test.</span></span> <span data-ttu-id="c90f5-126">Test için görsel ağacın tamamına veya herhangi bir bölümüne kadar isabet edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c90f5-126">You can hit test against the entire visual tree, or any portion of it.</span></span>  
  
 <span data-ttu-id="c90f5-127">Aşağıdaki çizimde, Circle nesnesi hem Square hem de Triangle nesnelerinin üstünde yer alır.</span><span class="sxs-lookup"><span data-stu-id="c90f5-127">In the following illustration, the circle object is on top of both the square and triangle objects.</span></span> <span data-ttu-id="c90f5-128">Yalnızca z sırası değeri en fazla olan görsel nesne isabet testi ile ilgileniyorsanız, ilk öğeden sonra gelen isabet testi geçişini durdurmak için, görsel isabet testi numaralandırmayı <xref:System.Windows.Media.HitTestResultCallback> <xref:System.Windows.Media.HitTestResultBehavior.Stop> döndürecek şekilde ayarlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c90f5-128">If you are only interested in hit testing the visual object whose z-order value is top-most, you can set the visual hit test enumeration to return <xref:System.Windows.Media.HitTestResultBehavior.Stop> from the <xref:System.Windows.Media.HitTestResultCallback> to stop the hit test traversal after the first item.</span></span>  
  
 <span data-ttu-id="c90f5-129">![Görsel ağacın z&#45;sırasının diyagramı](./media/wcpsdk-mmgraphics-visuals-hittest-2.png "wcpsdk_mmgraphics_visuals_hittest_2")</span><span class="sxs-lookup"><span data-stu-id="c90f5-129">![Diagram of the z&#45;order of a visual tree](./media/wcpsdk-mmgraphics-visuals-hittest-2.png "wcpsdk_mmgraphics_visuals_hittest_2")</span></span>  
<span data-ttu-id="c90f5-130">Görsel ağacın z düzeni diyagramı</span><span class="sxs-lookup"><span data-stu-id="c90f5-130">Diagram of the z-order of a visual tree</span></span>  
  
 <span data-ttu-id="c90f5-131">Belirli bir nokta veya geometri altındaki tüm görsel nesneleri numaralandırmak istiyorsanız <xref:System.Windows.Media.HitTestResultCallback><xref:System.Windows.Media.HitTestResultBehavior.Continue> döndürün.</span><span class="sxs-lookup"><span data-stu-id="c90f5-131">If you want to enumerate all visual objects under a specific point or geometry, return <xref:System.Windows.Media.HitTestResultBehavior.Continue> from the <xref:System.Windows.Media.HitTestResultCallback>.</span></span> <span data-ttu-id="c90f5-132">Bu, tamamen görünmez olsalar bile diğer nesnelerin altında bulunan görsel nesneler için isabet testi yapabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c90f5-132">This means you can hit test for visual objects that are beneath other objects, even if they are wholly obscured.</span></span> <span data-ttu-id="c90f5-133">Daha fazla bilgi için "Isabet Test Sonuçları geri çağırma kullanma" bölümündeki örnek koda bakın.</span><span class="sxs-lookup"><span data-stu-id="c90f5-133">See the sample code in the section "Using a Hit Test Results Callback" for more information.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="c90f5-134">Saydam bir görsel nesne Ayrıca isabet testi de alabilir.</span><span class="sxs-lookup"><span data-stu-id="c90f5-134">A visual object that is transparent can also be hit test.</span></span>  
  
<a name="using_default_hit_testing"></a>   
## <a name="using-default-hit-testing"></a><span data-ttu-id="c90f5-135">Varsayılan Isabet sınamasını kullanma</span><span class="sxs-lookup"><span data-stu-id="c90f5-135">Using Default Hit Testing</span></span>  
 <span data-ttu-id="c90f5-136">Bir noktanın görsel nesne geometrisi dahilinde olup olmadığını, bir görsel nesne ve test edilecek bir nokta koordinat değeri belirtmek için <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> metodunu kullanarak tanımlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c90f5-136">You can identify whether a point is within the geometry of a visual object, by using the <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> method to specify a visual object and a point coordinate value to test against.</span></span> <span data-ttu-id="c90f5-137">Görsel nesne parametresi, isabet testi araması için görsel ağaçtaki başlangıç noktasını tanımlar.</span><span class="sxs-lookup"><span data-stu-id="c90f5-137">The visual object parameter identifies the starting point in the visual tree for the hit test search.</span></span> <span data-ttu-id="c90f5-138">Görsel ağaçta geometrisi koordinat içeren bir görsel nesne bulunursa, bir <xref:System.Windows.Media.HitTestResult> nesnesinin <xref:System.Windows.Media.HitTestResult.VisualHit%2A> özelliğine ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="c90f5-138">If a visual object is found in the visual tree whose geometry contains the coordinate, it is set to the <xref:System.Windows.Media.HitTestResult.VisualHit%2A> property of a <xref:System.Windows.Media.HitTestResult> object.</span></span> <span data-ttu-id="c90f5-139"><xref:System.Windows.Media.HitTestResult> sonra <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> yönteminden döndürülür.</span><span class="sxs-lookup"><span data-stu-id="c90f5-139">The <xref:System.Windows.Media.HitTestResult> is then returned from the <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> method.</span></span> <span data-ttu-id="c90f5-140">Nokta, isabet testi yaptığınız görsel alt ağaçta yer alıyorsa, <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> `null`döndürür.</span><span class="sxs-lookup"><span data-stu-id="c90f5-140">If the point is not contained with the visual sub-tree you are hit testing, <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> returns `null`.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="c90f5-141">Varsayılan isabet testi her zaman z düzeninde en üstteki nesneyi döndürür.</span><span class="sxs-lookup"><span data-stu-id="c90f5-141">Default hit testing always returns the top-most object in the z-order.</span></span> <span data-ttu-id="c90f5-142">Kısmen veya tamamen görünmez olsalar bile tüm görsel nesneleri tanımlamak için bir isabet testi sonucu geri çağırması kullanın.</span><span class="sxs-lookup"><span data-stu-id="c90f5-142">In order to identify all visual objects, even those that may be partly or wholly obscured, use a hit test result callback.</span></span>  
  
 <span data-ttu-id="c90f5-143"><xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> yöntemi için Point parametresi olarak geçirdiğiniz koordinat değeri, isabet testi yaptığınız görsel nesnenin koordinat alanına göre olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="c90f5-143">The coordinate value you pass as the point parameter for the <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> method has to be relative to the coordinate space of the visual object you are hit testing against.</span></span> <span data-ttu-id="c90f5-144">Örneğin, üst öğe koordinat alanında (100, 100) içinde tanımlanmış iç içe görsel nesneleriniz varsa, (0, 0) konumundaki bir alt görsel için isabet testi, üst öğenin koordinat alanında (100, 100) ile eşdeğerdir.</span><span class="sxs-lookup"><span data-stu-id="c90f5-144">For example, if you have nested visual objects defined at (100, 100) in the parent's coordinate space, then hit testing a child visual at (0, 0) is equivalent to hit testing at (100, 100) in the parent's coordinate space.</span></span>  
  
 <span data-ttu-id="c90f5-145">Aşağıdaki kod, isabet testi için kullanılan olayları yakalamak için kullanılan bir <xref:System.Windows.UIElement> nesnesi için fare olay işleyicilerini ayarlamayı gösterir.</span><span class="sxs-lookup"><span data-stu-id="c90f5-145">The following code shows how to set up mouse event handlers for a <xref:System.Windows.UIElement> object that is used to capture events used for hit testing.</span></span>  
  
 [!code-csharp[HitTestingOverview#100](~/samples/snippets/csharp/VS_Snippets_Wpf/HitTestingOverview/CSharp/Window1.xaml.cs#100)]
 [!code-vb[HitTestingOverview#100](~/samples/snippets/visualbasic/VS_Snippets_Wpf/HitTestingOverview/visualbasic/window1.xaml.vb#100)]  
  
### <a name="how-the-visual-tree-affects-hit-testing"></a><span data-ttu-id="c90f5-146">Görsel ağaç Isabet sınamasını nasıl etkiler</span><span class="sxs-lookup"><span data-stu-id="c90f5-146">How the Visual Tree Affects Hit Testing</span></span>  
 <span data-ttu-id="c90f5-147">Görsel ağaçtaki başlangıç noktası, nesnelerin isabet testi numaralandırması sırasında hangi nesnelerin döndürüleceğini belirler.</span><span class="sxs-lookup"><span data-stu-id="c90f5-147">The starting point in the visual tree determines which objects are returned during the hit test enumeration of objects.</span></span> <span data-ttu-id="c90f5-148">Test etmek istediğiniz birden çok nesneniz varsa, görsel ağaçtaki başlangıç noktası olarak kullanılan görsel nesne, tüm ilgilendiğiniz nesnelerin ortak üst öğesi olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="c90f5-148">If you have multiple objects you want to hit test, the visual object used as the starting point in the visual tree must be the common ancestor of all objects of interest.</span></span> <span data-ttu-id="c90f5-149">Örneğin, aşağıdaki diyagramda hem düğme öğesi hem de çizim görseli isabet testi ile ilgileniyorsanız, görsel ağaçtaki başlangıç noktasını her ikisinin de ortak üst öğesine ayarlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="c90f5-149">For example, if you were interested in hit testing both the button element and drawing visual in the following diagram, you would have to set the starting point in the visual tree to the common ancestor of both.</span></span> <span data-ttu-id="c90f5-150">Bu durumda, tuval öğesi hem düğme öğesinin hem de çizim görselin ortak üst öğesidir.</span><span class="sxs-lookup"><span data-stu-id="c90f5-150">In this case, the canvas element is the common ancestor of both the button element and the drawing visual.</span></span>  
  
 <span data-ttu-id="c90f5-151">![Görsel ağaç hiyerarşisinin diyagramı](./media/wcpsdk-mmgraphics-visuals-overview-01.gif "wcpsdk_mmgraphics_visuals_overview_01")</span><span class="sxs-lookup"><span data-stu-id="c90f5-151">![Diagram of a visual tree hierarchy](./media/wcpsdk-mmgraphics-visuals-overview-01.gif "wcpsdk_mmgraphics_visuals_overview_01")</span></span>  
<span data-ttu-id="c90f5-152">Görsel ağaç hiyerarşisinin diyagramı</span><span class="sxs-lookup"><span data-stu-id="c90f5-152">Diagram of a visual tree hierarchy</span></span>  
  
> [!NOTE]
> <span data-ttu-id="c90f5-153"><xref:System.Windows.UIElement.IsHitTestVisible%2A> özelliği, <xref:System.Windows.UIElement>türetilmiş bir nesnenin, işlenen içeriğinin bir bölümünden bir isabet testi sonucu olarak döndürülüp döndürülmeyeceğini bildiren bir değer alır veya ayarlar.</span><span class="sxs-lookup"><span data-stu-id="c90f5-153">The <xref:System.Windows.UIElement.IsHitTestVisible%2A> property gets or sets a value that declares whether a <xref:System.Windows.UIElement>-derived object can possibly be returned as a hit test result from some portion of its rendered content.</span></span> <span data-ttu-id="c90f5-154">Bu, bir isabet testinde hangi görsel nesnelerin dahil olduğunu belirleyebilmek için görsel ağacı seçmeli olarak değiştirmenize olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="c90f5-154">This allows you to selectively alter the visual tree to determine which visual objects are involved in a hit test.</span></span>  
  
<a name="using_a_hit_test_result_callback"></a>   
## <a name="using-a-hit-test-result-callback"></a><span data-ttu-id="c90f5-155">Isabet testi sonucu geri çağırma kullanma</span><span class="sxs-lookup"><span data-stu-id="c90f5-155">Using a Hit Test Result Callback</span></span>  
 <span data-ttu-id="c90f5-156">Geometrisi, belirtilen koordinat değeri içeren bir görsel ağaçtaki tüm görsel nesneleri numaralandırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c90f5-156">You can enumerate all visual objects in a visual tree whose geometry contains a specified coordinate value.</span></span> <span data-ttu-id="c90f5-157">Bu, diğer görsel nesneler tarafından kısmen veya tamamen görünmeyebilir bile tüm görsel nesneleri tanımlamanızı sağlar.</span><span class="sxs-lookup"><span data-stu-id="c90f5-157">This allows you to identify all visual objects, even those that may be partly or wholly obscured by other visual objects.</span></span> <span data-ttu-id="c90f5-158">Görsel ağaçtaki görsel nesneleri numaralandırmak için, bir isabet testi geri çağırma işleviyle birlikte <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> yöntemi kullanın.</span><span class="sxs-lookup"><span data-stu-id="c90f5-158">To enumerate visual objects in a visual tree use the <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> method with a hit test callback function.</span></span> <span data-ttu-id="c90f5-159">Belirttiğiniz koordinat değeri görsel bir nesne içine dahil edildiğinde, isabet testi geri çağırma işlevi sistem tarafından çağırılır.</span><span class="sxs-lookup"><span data-stu-id="c90f5-159">The hit test callback function is called by the system when the coordinate value you specify is contained in a visual object.</span></span>  
  
 <span data-ttu-id="c90f5-160">İsabet testi sonuçları numaralandırması sırasında, görsel ağacı değiştiren herhangi bir işlem gerçekleştirmemelisiniz.</span><span class="sxs-lookup"><span data-stu-id="c90f5-160">During the hit test results enumeration, you should not perform any operation that modifies the visual tree.</span></span> <span data-ttu-id="c90f5-161">Bir nesne, çapraz aktarılırken görsel ağaca eklendiğinde veya kaldırıldığında öngörülemeyen davranışlara neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="c90f5-161">Adding or removing an object from the visual tree while it is being traversed can result in unpredictable behavior.</span></span> <span data-ttu-id="c90f5-162"><xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> yöntemi döndüğünde görsel ağacı güvenle değiştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c90f5-162">You can safely modify the visual tree after the <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> method returns.</span></span> <span data-ttu-id="c90f5-163">İsabet test sonuçları numaralandırması sırasında değerleri depolamak için <xref:System.Collections.ArrayList>gibi bir veri yapısı sağlamak isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c90f5-163">You may want to provide a data structure, such as an <xref:System.Collections.ArrayList>, to store values during the hit test results enumeration.</span></span>  
  
 [!code-csharp[HitTestingOverview#101](~/samples/snippets/csharp/VS_Snippets_Wpf/HitTestingOverview/CSharp/Window1.xaml.cs#101)]
 [!code-vb[HitTestingOverview#101](~/samples/snippets/visualbasic/VS_Snippets_Wpf/HitTestingOverview/visualbasic/window1.xaml.vb#101)]  
  
 <span data-ttu-id="c90f5-164">İsabet testi geri çağırma yöntemi, görsel ağaçtaki belirli bir görsel nesne üzerinde bir isabet testi tanımlandığında gerçekleştirdiğiniz eylemleri tanımlar.</span><span class="sxs-lookup"><span data-stu-id="c90f5-164">The hit test callback method defines the actions you perform when a hit test is identified on a particular visual object in the visual tree.</span></span> <span data-ttu-id="c90f5-165">Eylemleri gerçekleştirdikten sonra, diğer görsel nesnelerin numaralandırılmasına devam edilip edilmeyeceğini belirleyen <xref:System.Windows.Media.HitTestResultBehavior> bir değer döndürür.</span><span class="sxs-lookup"><span data-stu-id="c90f5-165">After you perform the actions, you return a <xref:System.Windows.Media.HitTestResultBehavior> value that determines whether to continue the enumeration of any other visual objects or not.</span></span>  
  
 [!code-csharp[HitTestingOverview#102](~/samples/snippets/csharp/VS_Snippets_Wpf/HitTestingOverview/CSharp/Window1.xaml.cs#102)]
 [!code-vb[HitTestingOverview#102](~/samples/snippets/visualbasic/VS_Snippets_Wpf/HitTestingOverview/visualbasic/window1.xaml.vb#102)]  
  
> [!NOTE]
> <span data-ttu-id="c90f5-166">İsabet görsel nesnelerinin numaralandırılma sırası z düzeninde olur.</span><span class="sxs-lookup"><span data-stu-id="c90f5-166">The order of enumeration of hit visual objects is by z-order.</span></span> <span data-ttu-id="c90f5-167">En üstteki z sırası düzeyindeki görsel nesne, numaralandırılan ilk nesnedir.</span><span class="sxs-lookup"><span data-stu-id="c90f5-167">The visual object at the top-most z-order level is the first object enumerated.</span></span> <span data-ttu-id="c90f5-168">Numaralandırılmış diğer görsel nesneler, sırasıyla z sırası düzeyindedir.</span><span class="sxs-lookup"><span data-stu-id="c90f5-168">Any other visual objects enumerated are at decreasing z-order level.</span></span> <span data-ttu-id="c90f5-169">Bu numaralandırma sırası görsellerin işleme sırasına karşılık gelir.</span><span class="sxs-lookup"><span data-stu-id="c90f5-169">This order of enumeration corresponds to the rendering order of the visuals.</span></span>  
  
 <span data-ttu-id="c90f5-170"><xref:System.Windows.Media.HitTestResultBehavior.Stop>döndürerek, isabet testi geri arama işlevinde istediğiniz zaman görsel nesne numaralandırmayı durdurabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c90f5-170">You can stop the enumeration of visual objects at any time in the hit test callback function by returning <xref:System.Windows.Media.HitTestResultBehavior.Stop>.</span></span>  
  
 [!code-csharp[HitTestingOverview#103](~/samples/snippets/csharp/VS_Snippets_Wpf/HitTestingOverview/CSharp/Window1.xaml.cs#103)]
 [!code-vb[HitTestingOverview#103](~/samples/snippets/visualbasic/VS_Snippets_Wpf/HitTestingOverview/visualbasic/window1.xaml.vb#103)]  
  
<a name="using_a_hit_test_filter_callback"></a>   
## <a name="using-a-hit-test-filter-callback"></a><span data-ttu-id="c90f5-171">Isabet testi filtresi geri çağırma kullanma</span><span class="sxs-lookup"><span data-stu-id="c90f5-171">Using a Hit Test Filter Callback</span></span>  
 <span data-ttu-id="c90f5-172">İsabet testi sonuçlarına geçirilen nesneleri kısıtlamak için isteğe bağlı bir isabet testi filtresi kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c90f5-172">You can use an optional hit test filter to restrict the objects that are passed on to the hit test results.</span></span> <span data-ttu-id="c90f5-173">Bu, isabet testi sonuçlarınızda işleme ilgilenmediğiniz görsel ağacın parçalarını yoksaymasına olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="c90f5-173">This allows you to ignore parts of the visual tree that you are not interested in processing in your hit test results.</span></span> <span data-ttu-id="c90f5-174">Bir isabet testi filtresi uygulamak için, bir isabet testi filtresi geri çağırma işlevini tanımlar ve <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> yöntemini çağırdığınızda bir parametre değeri olarak geçitirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c90f5-174">To implement a hit test filter, you define a hit test filter callback function and pass it as a parameter value when you call the <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> method.</span></span>  
  
 [!code-csharp[HitTestingOverview#104](~/samples/snippets/csharp/VS_Snippets_Wpf/HitTestingOverview/CSharp/Window1.xaml.cs#104)]
 [!code-vb[HitTestingOverview#104](~/samples/snippets/visualbasic/VS_Snippets_Wpf/HitTestingOverview/visualbasic/window1.xaml.vb#104)]  
  
 <span data-ttu-id="c90f5-175">İsteğe bağlı isabet testi filtresi geri çağırma işlevini sağlamak istemiyorsanız, <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> yöntemi için parametresi olarak bir `null` değeri geçirin.</span><span class="sxs-lookup"><span data-stu-id="c90f5-175">If you do not want to supply the optional hit test filter callback function, pass a `null` value as its parameter for the <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> method.</span></span>  
  
 [!code-csharp[HitTestingOverview#105](~/samples/snippets/csharp/VS_Snippets_Wpf/HitTestingOverview/CSharp/Window1.xaml.cs#105)]
 [!code-vb[HitTestingOverview#105](~/samples/snippets/visualbasic/VS_Snippets_Wpf/HitTestingOverview/visualbasic/window1.xaml.vb#105)]  
  
 <span data-ttu-id="c90f5-176">![İsabet testi filtresi kullanarak görsel ağacı ayıklama](./media/filteredvisualtree-01.png "FilteredVisualTree_01")</span><span class="sxs-lookup"><span data-stu-id="c90f5-176">![Pruning a visual tree using a hit test filter](./media/filteredvisualtree-01.png "FilteredVisualTree_01")</span></span>  
<span data-ttu-id="c90f5-177">Görsel ağacı ayıklama</span><span class="sxs-lookup"><span data-stu-id="c90f5-177">Pruning a visual tree</span></span>  
  
 <span data-ttu-id="c90f5-178">İsabet testi filtresi geri çağırma işlevi, işlenmiş içeriği belirttiğiniz koordinatları içeren tüm görseller arasında listeleme yapmanıza olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="c90f5-178">The hit test filter callback function allows you to enumerate through all the visuals whose rendered content contains the coordinates you specify.</span></span> <span data-ttu-id="c90f5-179">Ancak, isabet test sonuçları geri arama işlevinizde işlemeyle ilgilenmediğiniz görsel ağacın belirli dallarını yok saymanız gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="c90f5-179">However, you may want to ignore certain branches of the visual tree that you are not interested in processing in your hit test results callback function.</span></span> <span data-ttu-id="c90f5-180">İsabet testi filtresi geri arama işlevinin dönüş değeri, görsel nesnelerin numaralandırılmasından ne tür bir eylemin yapılacağını belirler.</span><span class="sxs-lookup"><span data-stu-id="c90f5-180">The return value of the hit test filter callback function determines what type of action the enumeration of the visual objects should take.</span></span> <span data-ttu-id="c90f5-181">Örneğin, <xref:System.Windows.Media.HitTestFilterBehavior.ContinueSkipSelfAndChildren>değeri döndürürsanız, geçerli görsel nesneyi ve alt öğelerini isabet test sonuçları numaralandırmasından kaldırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c90f5-181">For example, if you return the value, <xref:System.Windows.Media.HitTestFilterBehavior.ContinueSkipSelfAndChildren>, you can remove the current visual object and its children from the hit test results enumeration.</span></span> <span data-ttu-id="c90f5-182">Bu, isabet testi sonuçları geri çağırma işlevinin Numaralandırmadaki bu nesneleri görmeyeceği anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="c90f5-182">This means that the hit test results callback function will not see these objects in its enumeration.</span></span> <span data-ttu-id="c90f5-183">Nesnelerin görsel ağacını ayıklama, isabet testi sonuçları numaralandırma geçişi sırasında işlem miktarını azaltır.</span><span class="sxs-lookup"><span data-stu-id="c90f5-183">Pruning the visual tree of objects decreases the amount of processing during the hit test results enumeration pass.</span></span> <span data-ttu-id="c90f5-184">Aşağıdaki kod örneğinde, filtre etiketleri ve bunların alt öğelerini atlar ve diğer her şey için isabet testi yapın.</span><span class="sxs-lookup"><span data-stu-id="c90f5-184">In the following code example, the filter skips labels and their descendants and hit tests everything else.</span></span>  
  
 [!code-csharp[HitTestingOverview#106](~/samples/snippets/csharp/VS_Snippets_Wpf/HitTestingOverview/CSharp/Window1.xaml.cs#106)]
 [!code-vb[HitTestingOverview#106](~/samples/snippets/visualbasic/VS_Snippets_Wpf/HitTestingOverview/visualbasic/window1.xaml.vb#106)]  
  
> [!NOTE]
> <span data-ttu-id="c90f5-185">İsabet testi filtresi geri çağırması bazen isabet test sonuçları geri çağrısının çağrılmaması durumunda çağrılabilir.</span><span class="sxs-lookup"><span data-stu-id="c90f5-185">The hit test filter callback will sometimes be called in cases where the hit test results callback is not called.</span></span>  
  
<a name="overriding_default_hit_testing"></a>   
## <a name="overriding-default-hit-testing"></a><span data-ttu-id="c90f5-186">Varsayılan Isabet sınamasını geçersiz kılma</span><span class="sxs-lookup"><span data-stu-id="c90f5-186">Overriding Default Hit Testing</span></span>  
 <span data-ttu-id="c90f5-187"><xref:System.Windows.Media.Visual.HitTestCore%2A> yöntemini geçersiz kılarak bir görsel nesnenin varsayılan isabet testi desteğini geçersiz kılabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c90f5-187">You can override a visual object’s default hit testing support by overriding the <xref:System.Windows.Media.Visual.HitTestCore%2A> method.</span></span> <span data-ttu-id="c90f5-188">Bu, <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> yöntemini çağırdığınızda geçersiz kılınan <xref:System.Windows.Media.Visual.HitTestCore%2A> uygulamanızın çağrıldığı anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="c90f5-188">This means that when you invoke the <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A> method, your overridden implementation of <xref:System.Windows.Media.Visual.HitTestCore%2A> is called.</span></span> <span data-ttu-id="c90f5-189">Geçersiz kılınan yönteminiz, koordinat görsel nesnenin işlenmiş içeriğinin dışında olsa bile, bir isabet testi görsel nesnenin sınırlayıcı dikdörtgeni içinde yer alıyorsa çağrılır.</span><span class="sxs-lookup"><span data-stu-id="c90f5-189">Your overridden method is called when a hit test falls within the bounding rectangle of the visual object, even if the coordinate falls outside the rendered content of the visual object.</span></span>  
  
 [!code-csharp[HitTestingOverview#107](~/samples/snippets/csharp/VS_Snippets_Wpf/HitTestingOverview/CSharp/Window1.xaml.cs#107)]
 [!code-vb[HitTestingOverview#107](~/samples/snippets/visualbasic/VS_Snippets_Wpf/HitTestingOverview/visualbasic/window1.xaml.vb#107)]  
  
 <span data-ttu-id="c90f5-190">Hem sınırlayıcı dikdörtgende hem de bir görsel nesnenin işlenmiş içeriğine karşı test etmek istediğiniz zamanlar olabilir.</span><span class="sxs-lookup"><span data-stu-id="c90f5-190">There may be times when you want to hit test against both the bounding rectangle and the rendered content of a visual object.</span></span> <span data-ttu-id="c90f5-191">Geçersiz kılınamayan <xref:System.Windows.Media.Visual.HitTestCore%2A> yöntemdeki `PointHitTestParameters` parametre değerini temel yöntem <xref:System.Windows.Media.Visual.HitTestCore%2A>parametre olarak kullanarak, bir görsel nesnenin sınırlayıcı dikdörtgeninin bir vurmasına dayalı olarak eylemler gerçekleştirebilir ve ardından görsel nesnenin işlenmiş içeriğine karşı ikinci bir isabet testi yapabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c90f5-191">By using the `PointHitTestParameters` parameter value in your overridden <xref:System.Windows.Media.Visual.HitTestCore%2A> method as the parameter to the base method <xref:System.Windows.Media.Visual.HitTestCore%2A>, you can perform actions based on a hit of the bounding rectangle of a visual object, and then perform a second hit test against the rendered content of the visual object.</span></span>  
  
 [!code-csharp[HitTestingOverview#108](~/samples/snippets/csharp/VS_Snippets_Wpf/HitTestingOverview/CSharp/Window1.xaml.cs#108)]
 [!code-vb[HitTestingOverview#108](~/samples/snippets/visualbasic/VS_Snippets_Wpf/HitTestingOverview/visualbasic/window1.xaml.vb#108)]  
  
## <a name="see-also"></a><span data-ttu-id="c90f5-192">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="c90f5-192">See also</span></span>

- <xref:System.Windows.Media.VisualTreeHelper.HitTest%2A>
- <xref:System.Windows.Media.HitTestResult>
- <xref:System.Windows.Media.HitTestResultCallback>
- <xref:System.Windows.Media.HitTestFilterCallback>
- <xref:System.Windows.UIElement.IsHitTestVisible%2A>
- [<span data-ttu-id="c90f5-193">Drawinggörselleri kullanarak isabet testi örneği</span><span class="sxs-lookup"><span data-stu-id="c90f5-193">Hit Test Using DrawingVisuals Sample</span></span>](https://github.com/Microsoft/WPF-Samples/tree/master/Visual%20Layer/DrawingVisual)
- [<span data-ttu-id="c90f5-194">Win32 birlikte çalışabilirlik örneğiyle isabet testi örneği</span><span class="sxs-lookup"><span data-stu-id="c90f5-194">Hit Test with Win32 Interoperation Sample</span></span>](https://github.com/microsoft/WPF-Samples/tree/master/Visual%20Layer/VisualsHitTesting)
- [<span data-ttu-id="c90f5-195">Görselde Tıklama Testi Geometrisi</span><span class="sxs-lookup"><span data-stu-id="c90f5-195">Hit Test Geometry in a Visual</span></span>](how-to-hit-test-geometry-in-a-visual.md)
- [<span data-ttu-id="c90f5-196">Win32 Konak Kapsayıcısı Kullanan Tıklama Testi</span><span class="sxs-lookup"><span data-stu-id="c90f5-196">Hit Test Using a Win32 Host Container</span></span>](how-to-hit-test-using-a-win32-host-container.md)
