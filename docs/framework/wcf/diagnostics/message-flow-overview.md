---
description: 'Daha fazla bilgi edinin: Ileti akışına genel bakış'
title: İleti Akışı Genel Bakış
ms.date: 03/30/2017
ms.assetid: fb0899e1-84cc-4d90-b45b-dc5a50063943
ms.openlocfilehash: ec26824db51e65eff75f4b705c0a2ed966a7aa3a
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 02/06/2021
ms.locfileid: "99759763"
---
# <a name="message-flow-overview"></a><span data-ttu-id="4b65d-103">İleti Akışı Genel Bakış</span><span class="sxs-lookup"><span data-stu-id="4b65d-103">Message Flow Overview</span></span>

<span data-ttu-id="4b65d-104">Birbirine bağlı hizmetler içeren dağıtılmış bir sistemde, hizmetler arasında causal ilişkilerinin belirlenmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="4b65d-104">In a distributed system containing interconnected services, it is necessary to determine causal relationships between the services.</span></span> <span data-ttu-id="4b65d-105">Durum izleme, sorun giderme ve kök neden analizi gibi kritik senaryoları desteklemek için bir istek akışının parçası olan çeşitli bileşenleri anlamak önemlidir.</span><span class="sxs-lookup"><span data-stu-id="4b65d-105">It is important to understand the various components that were part of a request flow to support critical scenarios such as health monitoring, troubleshooting, and root cause analysis.</span></span> <span data-ttu-id="4b65d-106">.NET Framework 4 ' te çeşitli hizmetler arasındaki izlemelerin bağıntısını etkinleştirmek için aşağıdaki özellikler aracılığıyla destek ekledik:</span><span class="sxs-lookup"><span data-stu-id="4b65d-106">To enable the correlation of traces between various services, in the .NET Framework 4 we added support through the following features:</span></span>

- <span data-ttu-id="4b65d-107">Analitik izleme: Windows için olay Izleme (ETW) kullanan yüksek performanslı ve düşük ayrıntı düzeyi izleme özelliği.</span><span class="sxs-lookup"><span data-stu-id="4b65d-107">Analytic tracing: A high performance and low verbosity tracing feature using Event Tracing for Windows (ETW).</span></span>

- <span data-ttu-id="4b65d-108">WCF/WF hizmetleri için uçtan uca etkinlik modeli: Bu özellik, <xref:System.ServiceModel> ve ad alanları tarafından oluşturulan izlemelerin bağıntısını destekler <xref:System.Workflow.ComponentModel> .</span><span class="sxs-lookup"><span data-stu-id="4b65d-108">End-to-end activity model for WCF/WF services: This feature supports correlation of traces generated by the <xref:System.ServiceModel> and <xref:System.Workflow.ComponentModel> namespaces.</span></span>

- <span data-ttu-id="4b65d-109">WF için ETW izleme: Bu özellik, iş akışının geçerli durumuna ve ilerlemesini görünürlük sağlamak için WF hizmetleri tarafından oluşturulan izleme kayıtlarını kullanır.</span><span class="sxs-lookup"><span data-stu-id="4b65d-109">ETW tracking for WF: This feature uses tracking records generated by WF services to provide visibility into the workflow’s current state and progress.</span></span>

 <span data-ttu-id="4b65d-110">İzleme veya izleme kaydında günlüğe kaydedilen hatalar, kod kusurlarını veya hatalı biçimlendirilmiş iletileri bulmak için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="4b65d-110">Errors logged in a tracking or tracing record can be used to find code defects or incorrectly formed messages.</span></span> <span data-ttu-id="4b65d-111">Olayın ileti üstbilgisindeki bağıntı düğümünün ActivityId özelliği, hatalı etkinliği belirlemede kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="4b65d-111">The ActivityId property of the Correlation node in the event’s message header can be used to determine the faulting activity.</span></span> <span data-ttu-id="4b65d-112">İleti akışı izlemeyi etkinlik KIMLIĞINE göre etkinleştirmek için bkz. [Ileti akışı Izlemeyi yapılandırma](./etw/configuring-message-flow-tracing.md).</span><span class="sxs-lookup"><span data-stu-id="4b65d-112">To enable message flow tracing by activity ID, see [Configuring Message Flow Tracing](./etw/configuring-message-flow-tracing.md).</span></span> <span data-ttu-id="4b65d-113">Bu konuda, başlangıç öğreticisinde oluşturulan projede ileti akışı izlemenin nasıl etkinleştirileceği gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="4b65d-113">This topic demonstrates how to enable message flow tracing in the project created in the Getting Started tutorial.</span></span>

### <a name="to-enable-message-flow-tracing-in-the-getting-started-tutorial"></a><span data-ttu-id="4b65d-114">Başlangıç öğreticisinde ileti akışı izlemeyi etkinleştirmek için</span><span class="sxs-lookup"><span data-stu-id="4b65d-114">To enable message flow tracing in the Getting Started tutorial</span></span>

1. <span data-ttu-id="4b65d-115">**Başlat**, **çalıştır** ve girerek Olay Görüntüleyicisi açın `eventvwr.exe` .</span><span class="sxs-lookup"><span data-stu-id="4b65d-115">Open Event Viewer by clicking **Start**, **Run**, and entering `eventvwr.exe`.</span></span>

2. <span data-ttu-id="4b65d-116">Analitik izlemeyi etkinleştirmediyseniz, **uygulamalar ve hizmetler günlükleri**, **Microsoft**, **Windows**, **uygulama sunucusu-uygulamalar**' ı genişletin.</span><span class="sxs-lookup"><span data-stu-id="4b65d-116">If you haven’t enabled analytic tracing, expand **Applications and Services Logs**, **Microsoft**, **Windows**, **Application Server-Applications**.</span></span> <span data-ttu-id="4b65d-117">**Görünüm**, **analitik ve hata ayıklama günlüklerini göster**' i seçin.</span><span class="sxs-lookup"><span data-stu-id="4b65d-117">Select **View**, **Show Analytic and Debug Logs**.</span></span> <span data-ttu-id="4b65d-118">**Analitik** öğesine sağ tıklayın ve **günlüğü etkinleştir**' i seçin.</span><span class="sxs-lookup"><span data-stu-id="4b65d-118">Right-click **Analytic** and select **Enable Log**.</span></span> <span data-ttu-id="4b65d-119">İzlemelerin görüntülenebilmesi için Olay Görüntüleyicisi açık bırakın.</span><span class="sxs-lookup"><span data-stu-id="4b65d-119">Leave Event Viewer open so that traces can be viewed.</span></span>

3. <span data-ttu-id="4b65d-120">Visual Studio 2012 ' de başlangıç [öğreticisinde](../getting-started-tutorial.md) oluşturulan örneği açın.</span><span class="sxs-lookup"><span data-stu-id="4b65d-120">Open the sample created in the [Getting Started Tutorial](../getting-started-tutorial.md) in Visual Studio 2012.</span></span> <span data-ttu-id="4b65d-121">Hizmetin oluşturulabilmesi için Visual Studio 2012 ' i yönetici olarak çalıştırmanız gerektiğini unutmayın.</span><span class="sxs-lookup"><span data-stu-id="4b65d-121">Note that you must run Visual Studio 2012 as an administrator so that the service can be created.</span></span> <span data-ttu-id="4b65d-122">WCF örnekleri yüklüyse, öğreticide oluşturulan tamamlanmış projeyi içeren [Başlarken](../samples/getting-started-sample.md)' i açabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="4b65d-122">If you have the WCF samples installed, you can open the [Getting Started](../samples/getting-started-sample.md), which contains the completed project created in the tutorial.</span></span>

4. <span data-ttu-id="4b65d-123">**Hizmet** projesine sağ tıklayın ve **Ekle**, **Yeni öğe**' yi seçin.</span><span class="sxs-lookup"><span data-stu-id="4b65d-123">Right-click the **Service** project and select **Add**, **New Item**.</span></span> <span data-ttu-id="4b65d-124">**Uygulama yapılandırma dosyası** ' nı seçin ve **Tamam**' ı tıklatın.</span><span class="sxs-lookup"><span data-stu-id="4b65d-124">Select **Application Configuration File** and click **OK**.</span></span>

5. <span data-ttu-id="4b65d-125">Aşağıdaki kodu, önceki adımda oluşturulan App.Config dosyasına ekleyin.</span><span class="sxs-lookup"><span data-stu-id="4b65d-125">Add the following code to the App.Config file created in the previous step.</span></span>

    ```xml
    <system.serviceModel>
      <diagnostics>
        <endToEndTracing propagateActivity="true" messageFlowTracing="true"/>
      </diagnostics>
    </system.serviceModel>
    ```

6. <span data-ttu-id="4b65d-126">CTRL + F5 tuşlarına basarak sunucu uygulamasını hata ayıklamadan yürütün.</span><span class="sxs-lookup"><span data-stu-id="4b65d-126">Execute the server application without debugging by pressing CTRL+F5.</span></span> <span data-ttu-id="4b65d-127">**İstemci projesine** sağ tıklayıp **Hata Ayıkla**, **Yeni örnek Başlat**' ı seçerek istemci projesini yürütün.</span><span class="sxs-lookup"><span data-stu-id="4b65d-127">Execute the client project by right-clicking the **Client** project and selecting **Debug**, **Start New Instance**.</span></span>

7. <span data-ttu-id="4b65d-128">İstemciden sunucuya olayları izlemek için, aşağıdakileri Istemci projesindeki uygulama yapılandırma dosyasına ekleyin.</span><span class="sxs-lookup"><span data-stu-id="4b65d-128">To trace the events from the client to the server, add the following to the application configuration file in the Client project.</span></span>

    ```xml
    <diagnostics>
      <endToEndTracing propagateActivity="true" messageFlowTracing="true"/>
    </diagnostics>
    ```

8. <span data-ttu-id="4b65d-129">İstemcide Program.cs ' de, aşağıdaki using ifadesini ekleyin.</span><span class="sxs-lookup"><span data-stu-id="4b65d-129">In Program.cs in the client, add the following Using statement.</span></span>

    ```csharp
    using System.Diagnostics;
    ```

9. <span data-ttu-id="4b65d-130">İstemci projesindeki program.cs dosyasındaki Main yönteminde, Izleme GUID 'sini olay günlüğüne yayılacağı şekilde ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="4b65d-130">In the Main method in the program.cs file in the client project, set the Trace GUID to be propagated in the event log.</span></span>

    ```csharp
    Guid guid = Guid.NewGuid();
    Trace.CorrelationManager.ActivityId = guid;
    ```

10. <span data-ttu-id="4b65d-131">**Analitik** günlüğü yenileyin ve inceleyin.</span><span class="sxs-lookup"><span data-stu-id="4b65d-131">Refresh and examine the **Analytic**  log.</span></span>  <span data-ttu-id="4b65d-132">Olay KIMLIĞI 220 olan bir olay arayın.</span><span class="sxs-lookup"><span data-stu-id="4b65d-132">Look for an event with Event ID 220.</span></span>  <span data-ttu-id="4b65d-133">Olayı seçin ve Önizleme bölmesindeki **Ayrıntılar** sekmesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="4b65d-133">Select the event, and click the **Details** tab in the preview pane.</span></span> <span data-ttu-id="4b65d-134">Bu olay çağıran etkinliğin bağıntı KIMLIĞINI içerir.</span><span class="sxs-lookup"><span data-stu-id="4b65d-134">This event will contain the correlation ID for the calling activity.</span></span>

    ```xml
    <Correlation ActivityID="{A066CCF1-8AB3-459B-B62F-F79F957A5036}" />
    ```

    > [!NOTE]
    > <span data-ttu-id="4b65d-135">ActivityID içindeki aynı GUID 'ye sahip tüm olaylar bir istekle ilgilidir.</span><span class="sxs-lookup"><span data-stu-id="4b65d-135">All events with the same GUID in the ActivityID are related to one request.</span></span> <span data-ttu-id="4b65d-136">Bu, belirli bir istemciden gelen iletileri belirli bir hizmete ilişkilendirmek için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="4b65d-136">This can be used to correlate messages from a specific client to a specific service.</span></span> <span data-ttu-id="4b65d-137">İstemci başka bir hizmet olarak adlandırılrsa, aynı istemci ActivityId ile tanımlanabilir.</span><span class="sxs-lookup"><span data-stu-id="4b65d-137">If the client called another service, then the same client could be identified by ActivityID.</span></span>

11. <span data-ttu-id="4b65d-138">Bazı durumlarda, ActivityId özgün GUID 'den yeni bir ActivityId 'ye değişebilir.</span><span class="sxs-lookup"><span data-stu-id="4b65d-138">In some cases, the ActivityID can change from the original GUID to a new ActivityID.</span></span> <span data-ttu-id="4b65d-139">Bu durumda, bir aktarım olayı yayınlanır.</span><span class="sxs-lookup"><span data-stu-id="4b65d-139">In that case, a transfer event is emitted.</span></span> <span data-ttu-id="4b65d-140">Bu olay KIMLIĞI 499 ' dir ve olay üst bilgide aşağıdaki verileri içerir.</span><span class="sxs-lookup"><span data-stu-id="4b65d-140">This event ID is 499, and the event will contain the following data in the header.</span></span>

    ```xml
    <Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
        <System>
            <Provider Name="Microsoft-Windows-Application Server-Applications" Guid="{c651f5f6-1c0d-492e-8ae1-b4efd7c9d503}" />
            <EventID>499</EventID>
            ...
            <Correlation ActivityID="{A066CCF1-8AB3-459B-B62F-F79F957A5036}" RelatedActivityID="{85FC0930-9C49-42DA-804B-A7368104BD1B}" />
            ...
       </System>
    </Event>
    ```

    > [!NOTE]
    > <span data-ttu-id="4b65d-141">Aktarım olayı, etkin ActivityId 'nin değişikliğini ActivityId olarak belirtilen GUID 'den relatedActivityId olarak belirtilen GUID 'ye kaydeder.</span><span class="sxs-lookup"><span data-stu-id="4b65d-141">The transfer event records the change of the active ActivityID from the GUID specified as the ActivityID to the GUID specified as RelatedActivityID.</span></span> <span data-ttu-id="4b65d-142">Aktarım olayı oluşturulduktan sonra, tüm olaylar ActivityId olarak yeni GUID 'YI içerir.</span><span class="sxs-lookup"><span data-stu-id="4b65d-142">After the transfer event is emitted, all events will contain the new GUID as the ActivityID.</span></span>
