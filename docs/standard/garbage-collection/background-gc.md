---
title: Arka plan atık toplama
description: .NET ' te arka plan atık toplama ve iş istasyonu ve sunucu çöp toplama bölümünde farklılık gösteren bilgi edinin.
ms.date: 04/21/2020
helpviewer_keywords:
- garbage collection, background
- background garbage collection
ms.openlocfilehash: 780503288d3474cd99a595bdbd52c3a5abba5308
ms.sourcegitcommit: 45c8eed045779b70a47b23169897459d0323dc89
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 06/18/2020
ms.locfileid: "84990229"
---
# <a name="background-garbage-collection"></a><span data-ttu-id="cc9b4-103">Arka plan atık toplama</span><span class="sxs-lookup"><span data-stu-id="cc9b4-103">Background garbage collection</span></span>

<span data-ttu-id="cc9b4-104">Arka plan atık toplama (GC) içinde, 2. nesil toplama işlemi devam ederken, kısa ömürlü nesiller (0 ve 1) gerektiği şekilde toplanır.</span><span class="sxs-lookup"><span data-stu-id="cc9b4-104">In background garbage collection (GC), ephemeral generations (0 and 1) are collected as needed while the collection of generation 2 is in progress.</span></span> <span data-ttu-id="cc9b4-105">Arka plan atık toplama, arka plan veya sunucu GC olmasına bağlı olarak bir veya daha fazla adanmış iş parçacığında gerçekleştirilir ve yalnızca 2. nesil koleksiyonlar için geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="cc9b4-105">Background garbage collection is performed on one or more dedicated threads, depending on whether it's background or server GC, and applies only to generation 2 collections.</span></span>

<span data-ttu-id="cc9b4-106">Arka plan atık toplama varsayılan olarak etkindir.</span><span class="sxs-lookup"><span data-stu-id="cc9b4-106">Background garbage collection is enabled by default.</span></span> <span data-ttu-id="cc9b4-107">.NET Framework uygulamalarında [gcConcurrent](../../framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) yapılandırma ayarıyla etkinleştirilebilir veya devre dışı bırakılabilir ve .NET Core uygulamalarında [System. GC. eşzamanlı](../../core/run-time-config/garbage-collector.md#systemgcconcurrentcomplus_gcconcurrent) ayarı.</span><span class="sxs-lookup"><span data-stu-id="cc9b4-107">It can be enabled or disabled with the [gcConcurrent](../../framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) configuration setting in .NET Framework apps or the [System.GC.Concurrent](../../core/run-time-config/garbage-collector.md#systemgcconcurrentcomplus_gcconcurrent) setting in .NET Core apps.</span></span>

> [!NOTE]
> <span data-ttu-id="cc9b4-108">Arka plan atık toplama, [eşzamanlı atık toplamayı](#concurrent-garbage-collection) değiştirir ve .NET Framework 4 ve sonraki sürümlerde kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="cc9b4-108">Background garbage collection replaces [concurrent garbage collection](#concurrent-garbage-collection) and is available in .NET Framework 4 and later versions.</span></span> <span data-ttu-id="cc9b4-109">.NET Framework 4 ' te yalnızca *iş istasyonu* çöp toplama için desteklenir.</span><span class="sxs-lookup"><span data-stu-id="cc9b4-109">In .NET Framework 4, it's supported only for *workstation* garbage collection.</span></span> <span data-ttu-id="cc9b4-110">.NET Framework 4,5 ' den başlayarak, arka plan atık toplama, hem *iş istasyonu* hem de *sunucu* çöp toplama için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="cc9b4-110">Starting with .NET Framework 4.5, background garbage collection is available for both *workstation* and *server* garbage collection.</span></span>

<span data-ttu-id="cc9b4-111">Arka plan atık toplama sırasında kısa ömürlü oluşumlara yönelik bir koleksiyon, *ön plan* atık toplama olarak bilinir.</span><span class="sxs-lookup"><span data-stu-id="cc9b4-111">A collection on ephemeral generations during background garbage collection is known as *foreground* garbage collection.</span></span> <span data-ttu-id="cc9b4-112">Ön plan atık koleksiyonları gerçekleştiğinde, tüm yönetilen iş parçacıkları askıya alınır.</span><span class="sxs-lookup"><span data-stu-id="cc9b4-112">When foreground garbage collections occur, all managed threads are suspended.</span></span>

<span data-ttu-id="cc9b4-113">Arka plan atık toplama işlemi devam ederken ve nesil 0 ' da yeterli nesne ayırdığınızda CLR, 1. nesil bir ön plan atık toplama işlemi gerçekleştirir.</span><span class="sxs-lookup"><span data-stu-id="cc9b4-113">When background garbage collection is in progress and you've allocated enough objects in generation 0, the CLR performs a generation 0 or generation 1 foreground garbage collection.</span></span> <span data-ttu-id="cc9b4-114">Adanmış arka plan atık toplama iş parçacığı, ön plan atık toplama için bir istek olup olmadığını anlamak için sık kullanılan güvenli noktaları denetler.</span><span class="sxs-lookup"><span data-stu-id="cc9b4-114">The dedicated background garbage collection thread checks at frequent safe points to determine whether there is a request for foreground garbage collection.</span></span> <span data-ttu-id="cc9b4-115">Varsa, ön plan atık toplama işleminin gerçekleşmesi için arka plan koleksiyonu kendisini askıya alır.</span><span class="sxs-lookup"><span data-stu-id="cc9b4-115">If there is, the background collection suspends itself so that foreground garbage collection can occur.</span></span> <span data-ttu-id="cc9b4-116">Ön plan atık toplama işlemi tamamlandıktan sonra, adanmış arka plan atık toplama iş parçacıkları ve Kullanıcı iş parçacıkları sürdürülür.</span><span class="sxs-lookup"><span data-stu-id="cc9b4-116">After the foreground garbage collection is completed, the dedicated background garbage collection threads and user threads resume.</span></span>

<span data-ttu-id="cc9b4-117">Arka plan atık toplama sırasında kısa ömürlü çöp koleksiyonları gerçekleşebildiğinden arka plan atık toplama, eşzamanlı atık toplama tarafından uygulanan ayırma kısıtlamalarını ortadan kaldırır.</span><span class="sxs-lookup"><span data-stu-id="cc9b4-117">Background garbage collection removes allocation restrictions imposed by concurrent garbage collection, because ephemeral garbage collections can occur during background garbage collection.</span></span> <span data-ttu-id="cc9b4-118">Arka plan atık toplama, kısa ömürlü neslerdeki ölü nesneleri kaldırabilir.</span><span class="sxs-lookup"><span data-stu-id="cc9b4-118">Background garbage collection can remove dead objects in ephemeral generations.</span></span> <span data-ttu-id="cc9b4-119">Ayrıca, 1. nesil atık toplama işlemi sırasında gerekirse yığını genişletebilir.</span><span class="sxs-lookup"><span data-stu-id="cc9b4-119">It can also expand the heap if needed during a generation 1 garbage collection.</span></span>

## <a name="background-workstation-vs-server-gc"></a><span data-ttu-id="cc9b4-120">Arka plan iş istasyonu ile sunucu GC</span><span class="sxs-lookup"><span data-stu-id="cc9b4-120">Background workstation vs. server GC</span></span>

<span data-ttu-id="cc9b4-121">.NET Framework 4,5 ' den başlayarak, arka plan atık toplama, Server GC için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="cc9b4-121">Starting with .NET Framework 4.5, background garbage collection is available for server GC.</span></span> <span data-ttu-id="cc9b4-122">Arka plan GC, sunucu çöp toplama için varsayılan moddur.</span><span class="sxs-lookup"><span data-stu-id="cc9b4-122">Background GC is the default mode for server garbage collection.</span></span>

<span data-ttu-id="cc9b4-123">Arka plan sunucusu çöp toplama, arka plan iş istasyonu çöp toplamaya benzer şekilde çalışır, ancak bazı farklılıklar vardır:</span><span class="sxs-lookup"><span data-stu-id="cc9b4-123">Background server garbage collection functions similarly to background workstation garbage collection, but there are a few differences:</span></span>

- <span data-ttu-id="cc9b4-124">Arka plan iş istasyonu çöp toplama, bir adanmış arka plan atık toplama iş parçacığı kullanır, ancak arka plan sunucusu çöp toplama birden çok iş</span><span class="sxs-lookup"><span data-stu-id="cc9b4-124">Background workstation garbage collection uses one dedicated background garbage collection thread, whereas background server garbage collection uses multiple threads.</span></span> <span data-ttu-id="cc9b4-125">Genellikle, her mantıksal işlemci için adanmış bir iş parçacığı vardır.</span><span class="sxs-lookup"><span data-stu-id="cc9b4-125">Typically, there's a dedicated thread for each logical processor.</span></span>

- <span data-ttu-id="cc9b4-126">İş istasyonu arka plan atık toplama iş parçacığından farklı olarak, arka plan sunucusu GC iş parçacıkları zaman aşımına uğrar.</span><span class="sxs-lookup"><span data-stu-id="cc9b4-126">Unlike the workstation background garbage collection thread, the background server GC threads do not time out.</span></span>

<span data-ttu-id="cc9b4-127">Aşağıdaki çizimde, ayrı ve adanmış bir iş parçacığında gerçekleştirilen arka plan *iş istasyonu* çöp toplama işlemi gösterilmektedir:</span><span class="sxs-lookup"><span data-stu-id="cc9b4-127">The following illustration shows background *workstation* garbage collection performed on a separate, dedicated thread:</span></span>

![Arka plan iş istasyonu çöp toplama](media/fundamentals/background-workstation-garbage-collection.png)

<span data-ttu-id="cc9b4-129">Aşağıdaki çizimde, ayrı ve adanmış iş parçacıklarında gerçekleştirilen arka plan *sunucusu* çöp toplama işlemi gösterilmektedir:</span><span class="sxs-lookup"><span data-stu-id="cc9b4-129">The following illustration shows background *server* garbage collection performed on separate, dedicated threads:</span></span>

![Arka plan sunucusu çöp toplama](media/fundamentals/background-server-garbage-collection.png)

## <a name="concurrent-garbage-collection"></a><span data-ttu-id="cc9b4-131">Eşzamanlı atık toplama</span><span class="sxs-lookup"><span data-stu-id="cc9b4-131">Concurrent garbage collection</span></span>

> [!TIP]
> <span data-ttu-id="cc9b4-132">Bu bölüm için geçerlidir:</span><span class="sxs-lookup"><span data-stu-id="cc9b4-132">This section applies to:</span></span>
>
> - <span data-ttu-id="cc9b4-133">İş istasyonu atık toplama için .NET Framework 3,5 ve öncesi</span><span class="sxs-lookup"><span data-stu-id="cc9b4-133">.NET Framework 3.5 and earlier for workstation garbage collection</span></span>
> - <span data-ttu-id="cc9b4-134">Sunucu atık toplama için .NET Framework 4 ve öncesi</span><span class="sxs-lookup"><span data-stu-id="cc9b4-134">.NET Framework 4 and earlier for server garbage collection</span></span>
>
> <span data-ttu-id="cc9b4-135">Eş zamanlı atık, sonraki sürümlerde arka plan atık toplama ile değiştirilmiştir.</span><span class="sxs-lookup"><span data-stu-id="cc9b4-135">Concurrent garbage is replaced by background garbage collection in later versions.</span></span>

<span data-ttu-id="cc9b4-136">İş istasyonu veya sunucu çöp toplama bölümünde, iş parçacıklarının, koleksiyon süresince büyük bir süre için çöp toplamayı gerçekleştiren adanmış bir iş parçacığıyla eşzamanlı olarak çalışmasını sağlayan [eşzamanlı atık toplamayı etkinleştirebilirsiniz](../../framework/configure-apps/file-schema/runtime/gcconcurrent-element.md).</span><span class="sxs-lookup"><span data-stu-id="cc9b4-136">In workstation or server garbage collection, you can [enable concurrent garbage collection](../../framework/configure-apps/file-schema/runtime/gcconcurrent-element.md), which enables threads to run concurrently with a dedicated thread that performs the garbage collection for most of the duration of the collection.</span></span> <span data-ttu-id="cc9b4-137">Bu seçenek, kuşak 2 ' de yalnızca çöp koleksiyonlarını etkiler; nesil 0 ve 1 her zaman eşzamanlı değildir çünkü hızlı bir şekilde tamamlanır.</span><span class="sxs-lookup"><span data-stu-id="cc9b4-137">This option affects only garbage collections in generation 2; generations 0 and 1 are always non-concurrent because they finish fast.</span></span>

<span data-ttu-id="cc9b4-138">Eşzamanlı atık toplama, bir koleksiyon için duraklamaları en aza indirerek etkileşimli uygulamaların daha fazla yanıt vermesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="cc9b4-138">Concurrent garbage collection enables interactive applications to be more responsive by minimizing pauses for a collection.</span></span> <span data-ttu-id="cc9b4-139">Yönetilen iş parçacıkları, eşzamanlı atık toplama iş parçacığı çalışırken çoğu zaman çalışmaya devam edebilir.</span><span class="sxs-lookup"><span data-stu-id="cc9b4-139">Managed threads can continue to run most of the time while the concurrent garbage collection thread is running.</span></span> <span data-ttu-id="cc9b4-140">Bu tasarım, bir çöp toplama işlemi sırasında daha kısa duraklamalar elde edilir.</span><span class="sxs-lookup"><span data-stu-id="cc9b4-140">This design results in shorter pauses while a garbage collection is occurring.</span></span>

<span data-ttu-id="cc9b4-141">Eş zamanlı çöp toplama, adanmış bir iş parçacığında gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="cc9b4-141">Concurrent garbage collection is performed on a dedicated thread.</span></span> <span data-ttu-id="cc9b4-142">Varsayılan olarak, CLR hem tek işlemci hem de çok işlemcili bilgisayarlarda eşzamanlı çöp toplama özellikli iş istasyonu çöp toplamayı çalıştırır.</span><span class="sxs-lookup"><span data-stu-id="cc9b4-142">By default, the CLR runs workstation garbage collection with concurrent garbage collection enabled on both single-processor and multi-processor computers.</span></span>

<span data-ttu-id="cc9b4-143">Aşağıdaki çizimde ayrı bir adanmış iş parçacığında gerçekleştirilen eşzamanlı çöp toplama gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="cc9b4-143">The following illustration shows concurrent garbage collection performed on a separate dedicated thread.</span></span>

![Eşzamanlı atık toplama Iş parçacıkları](media/gc-concurrent.png)

## <a name="see-also"></a><span data-ttu-id="cc9b4-145">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="cc9b4-145">See also</span></span>

- [<span data-ttu-id="cc9b4-146">İş istasyonu ve sunucu atık toplama</span><span class="sxs-lookup"><span data-stu-id="cc9b4-146">Workstation and server garbage collection</span></span>](workstation-server-gc.md)
- [<span data-ttu-id="cc9b4-147">Çöp toplama için çalışma zamanı yapılandırma seçenekleri</span><span class="sxs-lookup"><span data-stu-id="cc9b4-147">Run-time configuration options for garbage collection</span></span>](../../core/run-time-config/garbage-collector.md)
