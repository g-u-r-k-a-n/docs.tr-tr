---
title: Zaman Uyumsuz İş Akışları
description: 'Diğer çalışmanın yürütülmesi engellenmeden yürütülen hesaplamaları zaman uyumsuz olarak gerçekleştirmek için F # programlama dilinde destek hakkında bilgi edinin.'
ms.date: 08/15/2020
ms.openlocfilehash: 14146cc8a643f31831475075212cc06da5f8d6ff
ms.sourcegitcommit: fe8877e564deb68d77fa4b79f55584ac8d7e8997
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 09/17/2020
ms.locfileid: "90720276"
---
# <a name="asynchronous-workflows"></a><span data-ttu-id="aa2b2-103">Zaman uyumsuz iş akışları</span><span class="sxs-lookup"><span data-stu-id="aa2b2-103">Asynchronous workflows</span></span>

<span data-ttu-id="aa2b2-104">Bu makalede, hesaplamalar zaman uyumsuz olarak, diğer çalışmanın yürütülmesi engellenmeden hesaplamalar gerçekleştirmek için F # desteği açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="aa2b2-104">This article describes support in F# for performing computations asynchronously, that is, without blocking execution of other work.</span></span> <span data-ttu-id="aa2b2-105">Örneğin, zaman uyumsuz hesaplamalar, uygulama diğer işleri gerçekleştirirken kullanıcılara yanıt vermeye devam eden uo uygulamaları yazmak için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="aa2b2-105">For example, asynchronous computations can be used to write applications that have UIs that remain responsive to users as the application performs other work.</span></span>

## <a name="syntax"></a><span data-ttu-id="aa2b2-106">Syntax</span><span class="sxs-lookup"><span data-stu-id="aa2b2-106">Syntax</span></span>

```fsharp
async { expression }
```

## <a name="remarks"></a><span data-ttu-id="aa2b2-107">Açıklamalar</span><span class="sxs-lookup"><span data-stu-id="aa2b2-107">Remarks</span></span>

<span data-ttu-id="aa2b2-108">Önceki sözdiziminde tarafından temsil edilen hesaplama zaman uyumsuz `expression` olarak çalışacak şekilde ayarlanır, yani zaman uyumsuz uyku işlemleri, g/ç ve diğer zaman uyumsuz işlemler gerçekleştirildiğinde geçerli hesaplama iş parçacığını engellemeden yapılır.</span><span class="sxs-lookup"><span data-stu-id="aa2b2-108">In the previous syntax, the computation represented by `expression` is set up to run asynchronously, that is, without blocking the current computation thread when asynchronous sleep operations, I/O, and other asynchronous operations are performed.</span></span> <span data-ttu-id="aa2b2-109">Zaman uyumsuz hesaplamalar genellikle, yürütme geçerli iş parçacığında devam ederken arka plan iş parçacığında başlatılır.</span><span class="sxs-lookup"><span data-stu-id="aa2b2-109">Asynchronous computations are often started on a background thread while execution continues on the current thread.</span></span> <span data-ttu-id="aa2b2-110">İfadenin türü, `Async<'T>` , `'T` `return` anahtar sözcüğü kullanıldığında ifade tarafından döndürülen türdür.</span><span class="sxs-lookup"><span data-stu-id="aa2b2-110">The type of the expression is `Async<'T>`, where `'T` is the type returned by the expression when the `return` keyword is used.</span></span> <span data-ttu-id="aa2b2-111">Böyle bir ifadedeki kod, *zaman uyumsuz blok*veya *zaman uyumsuz blok*olarak adlandırılır.</span><span class="sxs-lookup"><span data-stu-id="aa2b2-111">The code in such an expression is referred to as an *asynchronous block*, or *async block*.</span></span>

<span data-ttu-id="aa2b2-112">Zaman uyumsuz olarak programlamanın çeşitli yolları vardır ve [`Async`](https://fsharp.github.io/fsharp-core-docs/reference/fsharp-control-fsharpasync.html) sınıfı çeşitli senaryoları destekleyen yöntemler sağlar.</span><span class="sxs-lookup"><span data-stu-id="aa2b2-112">There are a variety of ways of programming asynchronously, and the [`Async`](https://fsharp.github.io/fsharp-core-docs/reference/fsharp-control-fsharpasync.html) class provides methods that support several scenarios.</span></span> <span data-ttu-id="aa2b2-113">Genel yaklaşım, `Async` zaman uyumsuz olarak çalıştırmak istediğiniz hesaplamayı veya hesaplamaları temsil eden nesneler oluşturmak ve ardından tetikleme işlevlerinden birini kullanarak bu hesaplamaları başlatmalıdır.</span><span class="sxs-lookup"><span data-stu-id="aa2b2-113">The general approach is to create `Async` objects that represent the computation or computations that you want to run asynchronously, and then start these computations by using one of the triggering functions.</span></span> <span data-ttu-id="aa2b2-114">Çeşitli tetikleme işlevleri, zaman uyumsuz hesaplamalar çalıştırmanın farklı yollarını sağlar ve hangisini kullandığınıza bağlı olarak, geçerli iş parçacığını, bir arka plan iş parçacığını veya .NET Framework bir görev nesnesini kullanmak istediğinize ve hesaplama bittiğinde çalışması gereken devamlılık işlevleri olup olmamasına bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="aa2b2-114">The various triggering functions provide different ways of running asynchronous computations, and which one you use depends on whether you want to use the current thread, a background thread, or a .NET Framework task object, and whether there are continuation functions that should run when the computation finishes.</span></span> <span data-ttu-id="aa2b2-115">Örneğin, geçerli iş parçacığında zaman uyumsuz bir hesaplama başlatmak için kullanabilirsiniz [`Async.StartImmediate`](https://fsharp.github.io/fsharp-core-docs/reference/fsharp-control-fsharpasync.html#StartImmediate) .</span><span class="sxs-lookup"><span data-stu-id="aa2b2-115">For example, to start an asynchronous computation on the current thread, you can use [`Async.StartImmediate`](https://fsharp.github.io/fsharp-core-docs/reference/fsharp-control-fsharpasync.html#StartImmediate).</span></span> <span data-ttu-id="aa2b2-116">UI iş parçacığından zaman uyumsuz bir hesaplama başlattığınızda, uygulamanızın yanıt vermesi için, tuş vuruşları ve fare etkinlikleri gibi kullanıcı eylemlerini işleyen ana olay döngüsünü engellemez.</span><span class="sxs-lookup"><span data-stu-id="aa2b2-116">When you start an asynchronous computation from the UI thread, you do not block the main event loop that processes user actions such as keystrokes and mouse activity, so your application remains responsive.</span></span>

## <a name="asynchronous-binding-by-using-let"></a><span data-ttu-id="aa2b2-117">Let kullanarak zaman uyumsuz bağlama!</span><span class="sxs-lookup"><span data-stu-id="aa2b2-117">Asynchronous Binding by Using let!</span></span>

<span data-ttu-id="aa2b2-118">Zaman uyumsuz bir iş akışında bazı ifadeler ve işlemler zaman uyumludur ve bazıları zaman uyumsuz olarak bir sonuç döndürmek için tasarlanan hesaplamalar daha uzundur.</span><span class="sxs-lookup"><span data-stu-id="aa2b2-118">In an asynchronous workflow, some expressions and operations are synchronous, and some are longer computations that are designed to return a result asynchronously.</span></span> <span data-ttu-id="aa2b2-119">Sıradan bağlama yerine bir yöntemi zaman uyumsuz olarak çağırdığınızda `let` kullanırsınız `let!` .</span><span class="sxs-lookup"><span data-stu-id="aa2b2-119">When you call a method asynchronously, instead of an ordinary `let` binding, you use `let!`.</span></span> <span data-ttu-id="aa2b2-120">' Nin etkisi, `let!` hesaplamanın gerçekleştirildiği için yürütmenin diğer hesaplamalar veya iş parçacıklarında devam etmesine olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="aa2b2-120">The effect of `let!` is to enable execution to continue on other computations or threads as the computation is being performed.</span></span> <span data-ttu-id="aa2b2-121">Bağlamanın sağ tarafı `let!` döndüğünde, zaman uyumsuz iş akışının geri kalanı yürütmeyi sürdürür.</span><span class="sxs-lookup"><span data-stu-id="aa2b2-121">After the right side of the `let!` binding returns, the rest of the asynchronous workflow resumes execution.</span></span>

<span data-ttu-id="aa2b2-122">Aşağıdaki kod ve arasındaki farkı gösterir `let` `let!` .</span><span class="sxs-lookup"><span data-stu-id="aa2b2-122">The following code shows the difference between `let` and `let!`.</span></span> <span data-ttu-id="aa2b2-123">Tarafından kullanılan kod satırı, `let` daha sonra, örneğin veya kullanarak daha sonra çalıştırabileceğiniz bir nesne olarak zaman uyumsuz bir hesaplama oluşturur `Async.StartImmediate` [`Async.RunSynchronously`](https://fsharp.github.io/fsharp-core-docs/reference/fsharp-control-fsharpasync.html#RunSynchronously) .</span><span class="sxs-lookup"><span data-stu-id="aa2b2-123">The line of code that uses `let` just creates an asynchronous computation as an object that you can run later by using, for example, `Async.StartImmediate` or [`Async.RunSynchronously`](https://fsharp.github.io/fsharp-core-docs/reference/fsharp-control-fsharpasync.html#RunSynchronously).</span></span> <span data-ttu-id="aa2b2-124">Tarafından kullanılan kod satırı `let!` hesaplamayı başlatır ve ardından sonuç kullanılabilir olana kadar iş parçacığı askıya alınır.</span><span class="sxs-lookup"><span data-stu-id="aa2b2-124">The line of code that uses `let!` starts the computation, and then the thread is suspended until the result is available, at which point execution continues.</span></span>

```fsharp
// let just stores the result as an asynchronous operation.
let (result1 : Async<byte[]>) = stream.AsyncRead(bufferSize)
// let! completes the asynchronous operation and returns the data.
let! (result2 : byte[])  = stream.AsyncRead(bufferSize)
```

<span data-ttu-id="aa2b2-125">' A ek olarak `let!` , `use!` zaman uyumsuz bağlamalar gerçekleştirmek için kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aa2b2-125">In addition to `let!`, you can use `use!` to perform asynchronous bindings.</span></span> <span data-ttu-id="aa2b2-126">Ve arasındaki fark `let!` , `use!` ve arasındaki farklılığı ile aynıdır `let` `use` .</span><span class="sxs-lookup"><span data-stu-id="aa2b2-126">The difference between `let!` and `use!` is the same as the difference between `let` and `use`.</span></span> <span data-ttu-id="aa2b2-127">İçin `use!` , nesnesi geçerli kapsamın kapandığı sırada atıldı.</span><span class="sxs-lookup"><span data-stu-id="aa2b2-127">For `use!`, the object is disposed of at the close of the current scope.</span></span> <span data-ttu-id="aa2b2-128">F # dilinin geçerli sürümünde, `use!` bir değerin null olarak başlatılmasına, ancak olsa da izin vermediğini unutmayın `use` .</span><span class="sxs-lookup"><span data-stu-id="aa2b2-128">Note that in the current release of the F# language, `use!` does not allow a value to be initialized to null, even though `use` does.</span></span>

## <a name="asynchronous-primitives"></a><span data-ttu-id="aa2b2-129">Zaman uyumsuz temel öğeler</span><span class="sxs-lookup"><span data-stu-id="aa2b2-129">Asynchronous Primitives</span></span>

<span data-ttu-id="aa2b2-130">Tek bir zaman uyumsuz görev gerçekleştiren ve sonucu döndüren bir yöntem, *zaman uyumsuz temel*değer olarak adlandırılır ve bunlar özellikle ile kullanılmak üzere tasarlanmıştır `let!` .</span><span class="sxs-lookup"><span data-stu-id="aa2b2-130">A method that performs a single asynchronous task and returns the result is called an *asynchronous primitive*, and these are designed specifically for use with `let!`.</span></span> <span data-ttu-id="aa2b2-131">Çeşitli zaman uyumsuz temel türler, F # Çekirdek Kitaplığı 'nda tanımlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="aa2b2-131">Several asynchronous primitives are defined in the F# core library.</span></span> <span data-ttu-id="aa2b2-132">Web uygulamaları için iki tür yöntemi, modülünde tanımlanmıştır [`FSharp.Control.WebExtensions`](https://fsharp.github.io/fsharp-core-docs/reference/fsharp-control-webextensions.html) : [`WebRequest.AsyncGetResponse`](https://fsharp.github.io/fsharp-core-docs/reference/fsharp-control-webextensions.html#AsyncGetResponse) ve [`WebClient.AsyncDownloadString`](https://fsharp.github.io/fsharp-core-docs/reference/fsharp-control-webextensions.html#AsyncDownloadString) .</span><span class="sxs-lookup"><span data-stu-id="aa2b2-132">Two such methods for Web applications are defined in the module [`FSharp.Control.WebExtensions`](https://fsharp.github.io/fsharp-core-docs/reference/fsharp-control-webextensions.html): [`WebRequest.AsyncGetResponse`](https://fsharp.github.io/fsharp-core-docs/reference/fsharp-control-webextensions.html#AsyncGetResponse) and [`WebClient.AsyncDownloadString`](https://fsharp.github.io/fsharp-core-docs/reference/fsharp-control-webextensions.html#AsyncDownloadString).</span></span> <span data-ttu-id="aa2b2-133">Her iki temel bir Web sayfasından veri indirir.</span><span class="sxs-lookup"><span data-stu-id="aa2b2-133">Both primitives download data from a Web page, given a URL.</span></span> <span data-ttu-id="aa2b2-134">`AsyncGetResponse` bir `System.Net.WebResponse` nesnesi üretir ve bir `AsyncDownloadString` Web sayfası için HTML 'i temsil eden bir dize oluşturur.</span><span class="sxs-lookup"><span data-stu-id="aa2b2-134">`AsyncGetResponse` produces a `System.Net.WebResponse` object, and `AsyncDownloadString` produces a string that represents the HTML for a Web page.</span></span>

<span data-ttu-id="aa2b2-135">Zaman uyumsuz g/ç işlemlerine yönelik çeşitli temel türler modüle dahildir [`FSharp.Control.CommonExtensions`](https://fsharp.github.io/fsharp-core-docs/reference/fsharp-control-commonextensions.html) .</span><span class="sxs-lookup"><span data-stu-id="aa2b2-135">Several primitives for asynchronous I/O operations are included in the [`FSharp.Control.CommonExtensions`](https://fsharp.github.io/fsharp-core-docs/reference/fsharp-control-commonextensions.html) module.</span></span> <span data-ttu-id="aa2b2-136">Sınıfının bu genişletme yöntemleri `System.IO.Stream` [`Stream.AsyncRead`](https://fsharp.github.io/fsharp-core-docs/reference/fsharp-control-commonextensions.html#AsyncRead) ve ' dir [`Stream.AsyncWrite`](https://fsharp.github.io/fsharp-core-docs/reference/fsharp-control-commonextensions.html#AsyncWrite) .</span><span class="sxs-lookup"><span data-stu-id="aa2b2-136">These extension methods of the `System.IO.Stream` class are [`Stream.AsyncRead`](https://fsharp.github.io/fsharp-core-docs/reference/fsharp-control-commonextensions.html#AsyncRead) and [`Stream.AsyncWrite`](https://fsharp.github.io/fsharp-core-docs/reference/fsharp-control-commonextensions.html#AsyncWrite).</span></span>

<span data-ttu-id="aa2b2-137">Ayrıca, tamamlanmış gövdesi zaman uyumsuz bir blok içinde olan bir işlev tanımlayarak kendi zaman uyumsuz temel temellerinizi de yazabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aa2b2-137">You can also write your own asynchronous primitives by defining a function whose complete body is enclosed in an async block.</span></span>

<span data-ttu-id="aa2b2-138">F # zaman uyumsuz programlama modeliyle diğer zaman uyumsuz modeller için tasarlanan .NET Framework zaman uyumsuz yöntemler kullanmak için, F # nesnesi döndüren bir işlev oluşturursunuz `Async` .</span><span class="sxs-lookup"><span data-stu-id="aa2b2-138">To use asynchronous methods in the .NET Framework that are designed for other asynchronous models with the F# asynchronous programming model, you create a function that returns an F# `Async` object.</span></span> <span data-ttu-id="aa2b2-139">F # kitaplığı, bunu kolayca yapmayı sağlayan işlevlere sahiptir.</span><span class="sxs-lookup"><span data-stu-id="aa2b2-139">The F# library has functions that make this easy to do.</span></span>

<span data-ttu-id="aa2b2-140">Zaman uyumsuz iş akışları kullanmanın bir örneği buraya dahildir; [zaman uyumsuz sınıf](https://fsharp.github.io/fsharp-core-docs/reference/fsharp-control-fsharpasync.html)yöntemlerine ilişkin belgelerde birçok başka tane vardır.</span><span class="sxs-lookup"><span data-stu-id="aa2b2-140">One example of using asynchronous workflows is included here; there are many others in the documentation for the methods of the [Async class](https://fsharp.github.io/fsharp-core-docs/reference/fsharp-control-fsharpasync.html).</span></span>

<span data-ttu-id="aa2b2-141">Bu örnekte, hesaplamaları paralel olarak gerçekleştirmek için zaman uyumsuz iş akışlarının nasıl kullanılacağı gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="aa2b2-141">This example shows how to use asynchronous workflows to perform computations in parallel.</span></span>

<span data-ttu-id="aa2b2-142">Aşağıdaki kod örneğinde, bir işlev `fetchAsync` bir Web isteğinden döndürülen HTML metnini alır.</span><span class="sxs-lookup"><span data-stu-id="aa2b2-142">In the following code example, a function `fetchAsync` gets the HTML text returned from a Web request.</span></span> <span data-ttu-id="aa2b2-143">`fetchAsync`İşlev zaman uyumsuz bir kod bloğu içeriyor.</span><span class="sxs-lookup"><span data-stu-id="aa2b2-143">The `fetchAsync` function contains an asynchronous block of code.</span></span> <span data-ttu-id="aa2b2-144">Bu durumda, zaman uyumsuz temel öğenin sonucuna bir bağlama yapıldığında, [`AsyncDownloadString`](https://fsharp.github.io/fsharp-core-docs/reference/fsharp-control-webextensions.html#AsyncDownloadString) `let!` yerine kullanılır `let` .</span><span class="sxs-lookup"><span data-stu-id="aa2b2-144">When a binding is made to the result of an asynchronous primitive, in this case [`AsyncDownloadString`](https://fsharp.github.io/fsharp-core-docs/reference/fsharp-control-webextensions.html#AsyncDownloadString), `let!` is used instead of `let`.</span></span>

<span data-ttu-id="aa2b2-145">İşlevini, [`Async.RunSynchronously`](https://fsharp.github.io/fsharp-core-docs/reference/fsharp-control-fsharpasync.html#RunSynchronously) zaman uyumsuz bir işlem yürütmek ve bunun sonucunu beklemek için kullanırsınız.</span><span class="sxs-lookup"><span data-stu-id="aa2b2-145">You use the function [`Async.RunSynchronously`](https://fsharp.github.io/fsharp-core-docs/reference/fsharp-control-fsharpasync.html#RunSynchronously) to execute an asynchronous operation and wait for its result.</span></span> <span data-ttu-id="aa2b2-146">Örnek olarak, işlevini işleviyle birlikte kullanarak birden çok zaman uyumsuz işlemi paralel olarak çalıştırabilirsiniz [`Async.Parallel`](https://fsharp.github.io/fsharp-core-docs/reference/fsharp-control-fsharpasync.html#Parallel) `Async.RunSynchronously` .</span><span class="sxs-lookup"><span data-stu-id="aa2b2-146">As an example, you can execute multiple asynchronous operations in parallel by using the [`Async.Parallel`](https://fsharp.github.io/fsharp-core-docs/reference/fsharp-control-fsharpasync.html#Parallel) function together with the `Async.RunSynchronously` function.</span></span> <span data-ttu-id="aa2b2-147">`Async.Parallel`İşlevi nesnelerinin bir listesini alır `Async` , her `Async` görev nesnesi için paralel olarak çalışacak kodu ayarlar ve `Async` paralel hesaplamayı temsil eden bir nesne döndürür.</span><span class="sxs-lookup"><span data-stu-id="aa2b2-147">The `Async.Parallel` function takes a list of the `Async` objects, sets up the code for each `Async` task object to run in parallel, and returns an `Async` object that represents the parallel computation.</span></span> <span data-ttu-id="aa2b2-148">Tek bir işlemin olduğu gibi `Async.RunSynchronously` yürütme işlemini başlatmak için öğesini çağırın.</span><span class="sxs-lookup"><span data-stu-id="aa2b2-148">Just as for a single operation, you call `Async.RunSynchronously` to start the execution.</span></span>

<span data-ttu-id="aa2b2-149">`runAll`İşlevi paralel olarak üç zaman uyumsuz iş akışı başlatır ve hepsini tamamlanana kadar bekler.</span><span class="sxs-lookup"><span data-stu-id="aa2b2-149">The `runAll` function launches three asynchronous workflows in parallel and waits until they have all completed.</span></span>

[!code-fsharp[Main](~/samples/snippets/fsharp/lang-ref-2/snippet8003.fs)]

## <a name="see-also"></a><span data-ttu-id="aa2b2-150">Ayrıca bkz.</span><span class="sxs-lookup"><span data-stu-id="aa2b2-150">See also</span></span>

- [<span data-ttu-id="aa2b2-151">F # dil başvurusu</span><span class="sxs-lookup"><span data-stu-id="aa2b2-151">F# Language Reference</span></span>](index.md)
- [<span data-ttu-id="aa2b2-152">Hesaplama İfadeleri</span><span class="sxs-lookup"><span data-stu-id="aa2b2-152">Computation Expressions</span></span>](computation-expressions.md)
- [<span data-ttu-id="aa2b2-153">Control. Async sınıfı</span><span class="sxs-lookup"><span data-stu-id="aa2b2-153">Control.Async Class</span></span>](https://fsharp.github.io/fsharp-core-docs/reference/fsharp-control-fsharpasync.html)
