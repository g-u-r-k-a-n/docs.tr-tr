---
title: AssemblyLoadContext-.NET Core 'ı anlama
description: .NET Core 'da AssemblyLoadContext 'in amacını ve davranışını anlamak için temel kavramlar.
ms.date: 08/09/2019
author: sdmaclea
ms.author: stmaclea
ms.openlocfilehash: 4d3f0e50e7c336469bd9af4d1589427388684434
ms.sourcegitcommit: dfcbc096ad7908cd58a5f0aeabd2256f05266bac
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/21/2020
ms.locfileid: "92332828"
---
# <a name="understanding-systemruntimeloaderassemblyloadcontext"></a><span data-ttu-id="24fe1-103">System. Runtime. Loader. AssemblyLoadContext 'i anlama</span><span class="sxs-lookup"><span data-stu-id="24fe1-103">Understanding System.Runtime.Loader.AssemblyLoadContext</span></span>

<span data-ttu-id="24fe1-104"><xref:System.Runtime.Loader.AssemblyLoadContext>Sınıfı .NET Core için benzersizdir.</span><span class="sxs-lookup"><span data-stu-id="24fe1-104">The <xref:System.Runtime.Loader.AssemblyLoadContext> class is unique to .NET Core.</span></span> <span data-ttu-id="24fe1-105">Bu makale, <xref:System.Runtime.Loader.AssemblyLoadContext> kavramsal bilgilerle API belgelerini tamamlayacak şekilde çalışır.</span><span class="sxs-lookup"><span data-stu-id="24fe1-105">This article attempts to supplement the <xref:System.Runtime.Loader.AssemblyLoadContext> API documentation with conceptual information.</span></span>

<span data-ttu-id="24fe1-106">Bu makale, dinamik yükleme, özellikle dinamik yükleme çerçevesi geliştiricileri uygulayan geliştiricilerle ilgilidir.</span><span class="sxs-lookup"><span data-stu-id="24fe1-106">This article is relevant to developers implementing dynamic loading, especially dynamic loading framework developers.</span></span>

## <a name="what-is-the-assemblyloadcontext"></a><span data-ttu-id="24fe1-107">AssemblyLoadContext nedir?</span><span class="sxs-lookup"><span data-stu-id="24fe1-107">What is the AssemblyLoadContext?</span></span>

<span data-ttu-id="24fe1-108">Her .NET Core uygulaması, örtülü olarak öğesini kullanır <xref:System.Runtime.Loader.AssemblyLoadContext> .</span><span class="sxs-lookup"><span data-stu-id="24fe1-108">Every .NET Core application implicitly uses the <xref:System.Runtime.Loader.AssemblyLoadContext>.</span></span>
<span data-ttu-id="24fe1-109">Bağımlılıkları bulmak ve yüklemek için çalışma zamanının sağlayıcısıdır.</span><span class="sxs-lookup"><span data-stu-id="24fe1-109">It's the runtime's provider for locating and loading dependencies.</span></span> <span data-ttu-id="24fe1-110">Her bağımlılık yüklendiğinde, <xref:System.Runtime.Loader.AssemblyLoadContext> bunu bulmak için bir örnek çağırılır.</span><span class="sxs-lookup"><span data-stu-id="24fe1-110">Whenever a dependency is loaded, an <xref:System.Runtime.Loader.AssemblyLoadContext> instance is invoked to locate it.</span></span>

- <span data-ttu-id="24fe1-111">Yönetilen derlemeleri ve diğer bağımlılıkları bulma, yükleme ve önbelleğe alma hizmeti sağlar.</span><span class="sxs-lookup"><span data-stu-id="24fe1-111">It provides a service of locating, loading, and caching managed assemblies and other dependencies.</span></span>

- <span data-ttu-id="24fe1-112">Dinamik kod yüklemeyi ve kaldırmayı desteklemek için, kodu ve onun bağımlılıklarını kendi örneğinde yüklemek için yalıtılmış bir bağlam oluşturur <xref:System.Runtime.Loader.AssemblyLoadContext> .</span><span class="sxs-lookup"><span data-stu-id="24fe1-112">To support dynamic code loading and unloading, it creates an isolated context for loading code and its dependencies in their own <xref:System.Runtime.Loader.AssemblyLoadContext> instance.</span></span>

## <a name="when-do-you-need-multiple-assemblyloadcontext-instances"></a><span data-ttu-id="24fe1-113">Birden çok AssemblyLoadContext örneğine ne zaman ihtiyacınız var?</span><span class="sxs-lookup"><span data-stu-id="24fe1-113">When do you need multiple AssemblyLoadContext instances?</span></span>

<span data-ttu-id="24fe1-114">Tek bir <xref:System.Runtime.Loader.AssemblyLoadContext> örnek, basit bir derleme adının tam olarak bir sürümünü yüklemek için sınırlıdır <xref:System.Reflection.Assembly> <xref:System.Reflection.AssemblyName.Name?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="24fe1-114">A single <xref:System.Runtime.Loader.AssemblyLoadContext> instance is limited to loading exactly one version of an <xref:System.Reflection.Assembly> per simple assembly name, <xref:System.Reflection.AssemblyName.Name?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="24fe1-115">Bu kısıtlama, kod modüllerini dinamik olarak yüklerken bir sorun olabilir.</span><span class="sxs-lookup"><span data-stu-id="24fe1-115">This restriction can become a problem when loading code modules dynamically.</span></span> <span data-ttu-id="24fe1-116">Her modül bağımsız olarak derlenir ve farklı sürümlerine bağlı olabilir <xref:System.Reflection.Assembly> .</span><span class="sxs-lookup"><span data-stu-id="24fe1-116">Each module is independently compiled and may depend on different versions of an <xref:System.Reflection.Assembly>.</span></span> <span data-ttu-id="24fe1-117">Bu sorun genellikle farklı modüller yaygın olarak kullanılan bir kitaplığın farklı sürümlerine bağımlıysa oluşur.</span><span class="sxs-lookup"><span data-stu-id="24fe1-117">This problem commonly occurs when different modules depend on different versions of a commonly used library.</span></span>

<span data-ttu-id="24fe1-118">Kodu dinamik olarak yüklemeyi desteklemek için, <xref:System.Runtime.Loader.AssemblyLoadContext> API, aynı uygulamada çakışan sürümlerini yüklemeyi sağlar <xref:System.Reflection.Assembly> .</span><span class="sxs-lookup"><span data-stu-id="24fe1-118">To support dynamically loading code, the <xref:System.Runtime.Loader.AssemblyLoadContext> API provides for loading conflicting versions of an <xref:System.Reflection.Assembly> in the same application.</span></span> <span data-ttu-id="24fe1-119">Her <xref:System.Runtime.Loader.AssemblyLoadContext> örnek, her biri belirli bir örneğe benzersiz bir sözlük eşlemesi sağlar <xref:System.Reflection.AssemblyName.Name?displayProperty=nameWithType> <xref:System.Reflection.Assembly> .</span><span class="sxs-lookup"><span data-stu-id="24fe1-119">Each <xref:System.Runtime.Loader.AssemblyLoadContext> instance provides a unique dictionary mapping each <xref:System.Reflection.AssemblyName.Name?displayProperty=nameWithType> to a specific <xref:System.Reflection.Assembly> instance.</span></span>

<span data-ttu-id="24fe1-120">Ayrıca, daha sonra kaldırmak üzere bir kod modülüyle ilişkili bağımlılıkları gruplandırmak için kullanışlı bir mekanizma sağlar.</span><span class="sxs-lookup"><span data-stu-id="24fe1-120">It also provides a convenient mechanism for grouping dependencies related to a code module for later unload.</span></span>

## <a name="what-is-special-about-the-assemblyloadcontextdefault-instance"></a><span data-ttu-id="24fe1-121">AssemblyLoadContext. Default örneği hakkında özel nedir?</span><span class="sxs-lookup"><span data-stu-id="24fe1-121">What is special about the AssemblyLoadContext.Default instance?</span></span>

<span data-ttu-id="24fe1-122"><xref:System.Runtime.Loader.AssemblyLoadContext.Default?displayProperty=nameWithType>Örnek, başlangıçta çalışma zamanına göre otomatik olarak doldurulur.</span><span class="sxs-lookup"><span data-stu-id="24fe1-122">The <xref:System.Runtime.Loader.AssemblyLoadContext.Default?displayProperty=nameWithType> instance is automatically populated by the runtime at startup.</span></span>  <span data-ttu-id="24fe1-123">Tüm statik bağımlılıkları bulmak ve bulmak için [Varsayılan yoklama](default-probing.md) kullanır.</span><span class="sxs-lookup"><span data-stu-id="24fe1-123">It uses [default probing](default-probing.md) to locate and find all static dependencies.</span></span>

<span data-ttu-id="24fe1-124">En yaygın bağımlılık yükleme senaryolarını çözer.</span><span class="sxs-lookup"><span data-stu-id="24fe1-124">It solves the most common dependency loading scenarios.</span></span>

## <a name="how-does-assemblyloadcontext-support-dynamic-dependencies"></a><span data-ttu-id="24fe1-125">AssemblyLoadContext dinamik bağımlılıkları nasıl destekler?</span><span class="sxs-lookup"><span data-stu-id="24fe1-125">How does AssemblyLoadContext support dynamic dependencies?</span></span>

<span data-ttu-id="24fe1-126"><xref:System.Runtime.Loader.AssemblyLoadContext> geçersiz kılınabilen çeşitli olaylara ve sanal işlevlere sahiptir.</span><span class="sxs-lookup"><span data-stu-id="24fe1-126"><xref:System.Runtime.Loader.AssemblyLoadContext> has various events and virtual functions that can be overridden.</span></span>

<span data-ttu-id="24fe1-127"><xref:System.Runtime.Loader.AssemblyLoadContext.Default?displayProperty=nameWithType>Örnek yalnızca olayları geçersiz kılmayı destekler.</span><span class="sxs-lookup"><span data-stu-id="24fe1-127">The <xref:System.Runtime.Loader.AssemblyLoadContext.Default?displayProperty=nameWithType> instance only supports overriding the events.</span></span>

<span data-ttu-id="24fe1-128">Makale [yönetilen derleme yükleme algoritması](loading-managed.md), [uydu derleme yükleme algoritması](loading-resources.md)ve [yönetilmeyen (yerel) kitaplık yükleme algoritması](loading-unmanaged.md) , tüm kullanılabilir olaylara ve sanal işlevlere başvurur.</span><span class="sxs-lookup"><span data-stu-id="24fe1-128">The articles [Managed assembly loading algorithm](loading-managed.md), [Satellite assembly loading algorithm](loading-resources.md), and [Unmanaged (native) library loading algorithm](loading-unmanaged.md) refer to all the available events and virtual functions.</span></span>  <span data-ttu-id="24fe1-129">Makaleler, yükleme algoritmalarında her bir olay ve işlevin göreli konumunu gösterir.</span><span class="sxs-lookup"><span data-stu-id="24fe1-129">The articles show each event and function's relative position in the loading algorithms.</span></span> <span data-ttu-id="24fe1-130">Bu makale, bu bilgileri yeniden oluşturmaz.</span><span class="sxs-lookup"><span data-stu-id="24fe1-130">This article doesn't reproduce that information.</span></span>

<span data-ttu-id="24fe1-131">Bu bölüm, ilgili olaylar ve işlevler için genel ilkeleri ele alır.</span><span class="sxs-lookup"><span data-stu-id="24fe1-131">This section covers the general principles for the relevant events and functions.</span></span>

- <span data-ttu-id="24fe1-132">**Tekrarlanabilir**.</span><span class="sxs-lookup"><span data-stu-id="24fe1-132">**Be repeatable**.</span></span> <span data-ttu-id="24fe1-133">Belirli bir bağımlılık sorgusu her zaman aynı yanıta neden olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="24fe1-133">A query for a specific dependency must always result in the same response.</span></span> <span data-ttu-id="24fe1-134">Aynı yüklü bağımlılık örneğinin döndürülmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="24fe1-134">The same loaded dependency instance must be returned.</span></span> <span data-ttu-id="24fe1-135">Bu gereksinim, önbellek tutarlılığı için temel bir gereksinimdir.</span><span class="sxs-lookup"><span data-stu-id="24fe1-135">This requirement is fundamental  for cache consistency.</span></span> <span data-ttu-id="24fe1-136">Özel olarak yönetilen derlemeler için bir önbellek oluşturuyoruz <xref:System.Reflection.Assembly> .</span><span class="sxs-lookup"><span data-stu-id="24fe1-136">For managed assemblies in particular, we're creating an <xref:System.Reflection.Assembly> cache.</span></span> <span data-ttu-id="24fe1-137">Önbellek anahtarı basit bir derleme adıdır, <xref:System.Reflection.AssemblyName.Name?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="24fe1-137">The cache key is a simple assembly name, <xref:System.Reflection.AssemblyName.Name?displayProperty=nameWithType>.</span></span>
- <span data-ttu-id="24fe1-138">**Genellikle oluşturmayın**.</span><span class="sxs-lookup"><span data-stu-id="24fe1-138">**Typically don't throw**.</span></span>  <span data-ttu-id="24fe1-139">`null`İstenen bağımlılığı bulamadığınızda bu işlevlerin throw yerine dönmesi beklenmektedir.</span><span class="sxs-lookup"><span data-stu-id="24fe1-139">It's expected that these functions return `null` rather than throw when unable to find the requested dependency.</span></span> <span data-ttu-id="24fe1-140">Oluşturma, aramayı erken sona erdirmek ve çağırana bir özel durum yaymaya çalışır.</span><span class="sxs-lookup"><span data-stu-id="24fe1-140">Throwing will prematurely end the search and be propagate an exception to the caller.</span></span> <span data-ttu-id="24fe1-141">Oluşturma, bozuk bir derleme veya bellek yetersiz durumu gibi beklenmeyen hatalarla sınırlandırılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="24fe1-141">Throwing should be restricted to unexpected errors like a corrupted assembly or an out of memory condition.</span></span>
- <span data-ttu-id="24fe1-142">**Özyineleme kullanmaktan kaçının**.</span><span class="sxs-lookup"><span data-stu-id="24fe1-142">**Avoid recursion**.</span></span> <span data-ttu-id="24fe1-143">Bu işlevlerin ve işleyicilerin bağımlılıkları bulmak için yükleme kurallarını uyguladığının farkında olun.</span><span class="sxs-lookup"><span data-stu-id="24fe1-143">Be aware that these functions and handlers implement the loading rules for locating dependencies.</span></span> <span data-ttu-id="24fe1-144">Uygulamanız özyineleme tetikleyen API 'Leri çağırmalıdır.</span><span class="sxs-lookup"><span data-stu-id="24fe1-144">Your implementation shouldn't call APIs that trigger recursion.</span></span> <span data-ttu-id="24fe1-145">Kodunuz, genellikle belirli bir yol veya bellek başvuru bağımsız değişkeni gerektiren **Assemblyloadcontext** yükleme işlevlerini çağırmalıdır.</span><span class="sxs-lookup"><span data-stu-id="24fe1-145">Your code should typically call **AssemblyLoadContext** load functions that require a specific path or memory reference argument.</span></span>
- <span data-ttu-id="24fe1-146">**Doğru AssemblyLoadContext Içine yükleyin**.</span><span class="sxs-lookup"><span data-stu-id="24fe1-146">**Load into the correct AssemblyLoadContext**.</span></span> <span data-ttu-id="24fe1-147">Bağımlılıkların nereye yükleneceğini seçme seçeneği uygulamaya özgüdür.</span><span class="sxs-lookup"><span data-stu-id="24fe1-147">The choice of where to load dependencies is application-specific.</span></span>  <span data-ttu-id="24fe1-148">Bu seçenek, bu olaylar ve işlevler tarafından uygulanır.</span><span class="sxs-lookup"><span data-stu-id="24fe1-148">The choice is implemented by these events and functions.</span></span> <span data-ttu-id="24fe1-149">Kodunuz **Assemblyloadcontext** load-path işlevlerini çağırdığında, kodu kodun yüklenmesini istediğiniz örnekte çağırır.</span><span class="sxs-lookup"><span data-stu-id="24fe1-149">When your code calls **AssemblyLoadContext** load-by-path functions call them on the instance where you want the code loaded.</span></span> <span data-ttu-id="24fe1-150">Yükün döndürülmesinin ve tanıtıcının bir süre, `null` <xref:System.Runtime.Loader.AssemblyLoadContext.Default?displayProperty=nameWithType> en basit seçenek olabilir.</span><span class="sxs-lookup"><span data-stu-id="24fe1-150">Sometime returning `null` and letting the <xref:System.Runtime.Loader.AssemblyLoadContext.Default?displayProperty=nameWithType> handle the load may be the simplest option.</span></span>
- <span data-ttu-id="24fe1-151">**İş parçacığı rampalarından haberdar olun**.</span><span class="sxs-lookup"><span data-stu-id="24fe1-151">**Be aware of thread races**.</span></span> <span data-ttu-id="24fe1-152">Yükleme birden çok iş parçacığı tarafından tetiklenebilir.</span><span class="sxs-lookup"><span data-stu-id="24fe1-152">Loading can be triggered by multiple threads.</span></span> <span data-ttu-id="24fe1-153">AssemblyLoadContext, kendi önbelleğine derleme ekleyerek iş parçacığı parçacıklarını işler.</span><span class="sxs-lookup"><span data-stu-id="24fe1-153">The AssemblyLoadContext handles thread races by atomically adding assemblies to its cache.</span></span> <span data-ttu-id="24fe1-154">Yarış Loser 'ın örneği atılır.</span><span class="sxs-lookup"><span data-stu-id="24fe1-154">The race loser's instance is discarded.</span></span> <span data-ttu-id="24fe1-155">Uygulama mantığınızdaki birden çok iş parçacığını düzgün bir şekilde işlemeyen ek mantık eklemeyin.</span><span class="sxs-lookup"><span data-stu-id="24fe1-155">In your implementation logic, don't add extra logic that doesn't handle multiple threads properly.</span></span>

## <a name="how-are-dynamic-dependencies-isolated"></a><span data-ttu-id="24fe1-156">Dinamik bağımlılıklar nasıl yalıtılmalıdır?</span><span class="sxs-lookup"><span data-stu-id="24fe1-156">How are dynamic dependencies isolated?</span></span>

<span data-ttu-id="24fe1-157">Her <xref:System.Runtime.Loader.AssemblyLoadContext> örnek <xref:System.Reflection.Assembly> , örnekler ve tanımlar için benzersiz bir kapsamı temsil eder <xref:System.Type> .</span><span class="sxs-lookup"><span data-stu-id="24fe1-157">Each <xref:System.Runtime.Loader.AssemblyLoadContext> instance represents a unique scope for <xref:System.Reflection.Assembly> instances and <xref:System.Type> definitions.</span></span>

<span data-ttu-id="24fe1-158">Bu bağımlılıklar arasında ikili yalıtım yoktur.</span><span class="sxs-lookup"><span data-stu-id="24fe1-158">There's no binary isolation between these dependencies.</span></span> <span data-ttu-id="24fe1-159">Bunlar yalnızca adı tarafından birbirini bulmayan yalıtılırlar.</span><span class="sxs-lookup"><span data-stu-id="24fe1-159">They're only isolated by not finding each other by name.</span></span>

<span data-ttu-id="24fe1-160">Her birinde <xref:System.Runtime.Loader.AssemblyLoadContext> :</span><span class="sxs-lookup"><span data-stu-id="24fe1-160">In each <xref:System.Runtime.Loader.AssemblyLoadContext>:</span></span>

- <span data-ttu-id="24fe1-161"><xref:System.Reflection.AssemblyName.Name?displayProperty=nameWithType> , farklı bir örneğe başvurabilir <xref:System.Reflection.Assembly> .</span><span class="sxs-lookup"><span data-stu-id="24fe1-161"><xref:System.Reflection.AssemblyName.Name?displayProperty=nameWithType> may refer to a different <xref:System.Reflection.Assembly> instance.</span></span>
- <span data-ttu-id="24fe1-162"><xref:System.Type.GetType%2A?displayProperty=nameWithType> aynı tür için farklı bir tür örneği döndürebilir `name` .</span><span class="sxs-lookup"><span data-stu-id="24fe1-162"><xref:System.Type.GetType%2A?displayProperty=nameWithType> may return a different type instance for the same type `name`.</span></span>

## <a name="how-are-dependencies-shared"></a><span data-ttu-id="24fe1-163">Bağımlılıklar nasıl paylaşılır?</span><span class="sxs-lookup"><span data-stu-id="24fe1-163">How are dependencies shared?</span></span>

<span data-ttu-id="24fe1-164">Bağımlılıklar, örnekler arasında kolayca paylaşılabilir <xref:System.Runtime.Loader.AssemblyLoadContext> .</span><span class="sxs-lookup"><span data-stu-id="24fe1-164">Dependencies can easily be shared between <xref:System.Runtime.Loader.AssemblyLoadContext> instances.</span></span> <span data-ttu-id="24fe1-165">Genel model bir <xref:System.Runtime.Loader.AssemblyLoadContext> bağımlılık yüklemek içindir.</span><span class="sxs-lookup"><span data-stu-id="24fe1-165">The general model is for one <xref:System.Runtime.Loader.AssemblyLoadContext> to load a dependency.</span></span>  <span data-ttu-id="24fe1-166">Diğeri, yüklenen derlemeye bir başvuru kullanarak bağımlılığı paylaşır.</span><span class="sxs-lookup"><span data-stu-id="24fe1-166">The other shares the dependency by using a reference to the loaded assembly.</span></span>

<span data-ttu-id="24fe1-167">Bu paylaşım, çalışma zamanı derlemeleri için gereklidir.</span><span class="sxs-lookup"><span data-stu-id="24fe1-167">This sharing is required of the runtime assemblies.</span></span> <span data-ttu-id="24fe1-168">Bu derlemeler yalnızca öğesine yüklenebilir <xref:System.Runtime.Loader.AssemblyLoadContext.Default?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="24fe1-168">These assemblies can only be loaded into the <xref:System.Runtime.Loader.AssemblyLoadContext.Default?displayProperty=nameWithType>.</span></span> <span data-ttu-id="24fe1-169">,, Veya gibi çerçeveler için de `ASP.NET` gereklidir `WPF` `WinForms` .</span><span class="sxs-lookup"><span data-stu-id="24fe1-169">The same is required for frameworks like `ASP.NET`, `WPF`, or `WinForms`.</span></span>

<span data-ttu-id="24fe1-170">Paylaşılan bağımlılıkların ' de yüklü olması önerilir <xref:System.Runtime.Loader.AssemblyLoadContext.Default?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="24fe1-170">It's recommended that shared dependencies should be loaded into <xref:System.Runtime.Loader.AssemblyLoadContext.Default?displayProperty=nameWithType>.</span></span> <span data-ttu-id="24fe1-171">Bu paylaşım, ortak tasarım modelidir.</span><span class="sxs-lookup"><span data-stu-id="24fe1-171">This sharing is the common design pattern.</span></span>

<span data-ttu-id="24fe1-172">Paylaşma, özel örneğin kodlamasına uygulanır <xref:System.Runtime.Loader.AssemblyLoadContext> .</span><span class="sxs-lookup"><span data-stu-id="24fe1-172">Sharing is implemented in the coding of the custom <xref:System.Runtime.Loader.AssemblyLoadContext> instance.</span></span> <span data-ttu-id="24fe1-173"><xref:System.Runtime.Loader.AssemblyLoadContext> geçersiz kılınabilen çeşitli olaylara ve sanal işlevlere sahiptir.</span><span class="sxs-lookup"><span data-stu-id="24fe1-173"><xref:System.Runtime.Loader.AssemblyLoadContext> has various events and virtual functions that can be overridden.</span></span> <span data-ttu-id="24fe1-174">Bu işlevlerden herhangi biri başka bir örneğe yüklenmiş bir örneğe başvuru döndürzaman <xref:System.Reflection.Assembly> <xref:System.Runtime.Loader.AssemblyLoadContext> , <xref:System.Reflection.Assembly> örnek paylaşılır.</span><span class="sxs-lookup"><span data-stu-id="24fe1-174">When any of these functions return a reference to an <xref:System.Reflection.Assembly> instance that was loaded in another <xref:System.Runtime.Loader.AssemblyLoadContext> instance, the <xref:System.Reflection.Assembly> instance is shared.</span></span> <span data-ttu-id="24fe1-175">Standart yük algoritması, <xref:System.Runtime.Loader.AssemblyLoadContext.Default?displayProperty=nameWithType> ortak paylaşım deseninin basitleşmesini sağlamak için ' a erteler.</span><span class="sxs-lookup"><span data-stu-id="24fe1-175">The standard load algorithm defers to <xref:System.Runtime.Loader.AssemblyLoadContext.Default?displayProperty=nameWithType> for loading to simplify the common sharing pattern.</span></span>  <span data-ttu-id="24fe1-176">Bkz. [yönetilen derleme yükleme algoritması](loading-managed.md).</span><span class="sxs-lookup"><span data-stu-id="24fe1-176">See [Managed assembly loading algorithm](loading-managed.md).</span></span>

## <a name="complications"></a><span data-ttu-id="24fe1-177">Zorluk Grubu</span><span class="sxs-lookup"><span data-stu-id="24fe1-177">Complications</span></span>

### <a name="type-conversion-issues"></a><span data-ttu-id="24fe1-178">Tür dönüştürme sorunları</span><span class="sxs-lookup"><span data-stu-id="24fe1-178">Type conversion issues</span></span>

<span data-ttu-id="24fe1-179">İki <xref:System.Runtime.Loader.AssemblyLoadContext> örnek aynı ile tür tanımlarını içerdiğinde `name` , aynı türde değildir.</span><span class="sxs-lookup"><span data-stu-id="24fe1-179">When two <xref:System.Runtime.Loader.AssemblyLoadContext> instances contain type definitions with the same `name`, they're not the same type.</span></span> <span data-ttu-id="24fe1-180">Yalnızca aynı örnekten geliyorsa, bu tür aynıdır <xref:System.Reflection.Assembly> .</span><span class="sxs-lookup"><span data-stu-id="24fe1-180">They're the same type if and only if they come from the same <xref:System.Reflection.Assembly> instance.</span></span>

<span data-ttu-id="24fe1-181">Önemli bir karmaşıklaşmak için, bu eşleşmeyen türler hakkındaki özel durum iletileri kafa karıştırıcı olabilir.</span><span class="sxs-lookup"><span data-stu-id="24fe1-181">To complicate matters, exception messages about these mismatched types can be confusing.</span></span> <span data-ttu-id="24fe1-182">Türler, özel durum iletilerinde basit tür adlarına göre adlandırılır.</span><span class="sxs-lookup"><span data-stu-id="24fe1-182">The types are referred to in the exception messages by their simple type names.</span></span> <span data-ttu-id="24fe1-183">Bu durumda ortak özel durum iletisi şu biçimdedir:</span><span class="sxs-lookup"><span data-stu-id="24fe1-183">The common exception message in this case would be of the form:</span></span>

> <span data-ttu-id="24fe1-184">' IsolatedType ' türündeki nesne ' IsolatedType ' türüne dönüştürülemez.</span><span class="sxs-lookup"><span data-stu-id="24fe1-184">Object of type 'IsolatedType' cannot be converted to type 'IsolatedType'.</span></span>

### <a name="debugging-type-conversion-issues"></a><span data-ttu-id="24fe1-185">Tür dönüştürme sorunlarını ayıklama</span><span class="sxs-lookup"><span data-stu-id="24fe1-185">Debugging type conversion issues</span></span>

<span data-ttu-id="24fe1-186">Eşleşmeyen türlerin çifti verildiğinde şunları da bilmelidir:</span><span class="sxs-lookup"><span data-stu-id="24fe1-186">Given a pair of mismatched types it's important to also know:</span></span>

- <span data-ttu-id="24fe1-187">Her tür <xref:System.Type.Assembly?displayProperty=nameWithType></span><span class="sxs-lookup"><span data-stu-id="24fe1-187">Each type's <xref:System.Type.Assembly?displayProperty=nameWithType></span></span>
- <span data-ttu-id="24fe1-188">Her tür <xref:System.Runtime.Loader.AssemblyLoadContext> , işlev aracılığıyla elde edilebilir <xref:System.Runtime.Loader.AssemblyLoadContext.GetLoadContext(System.Reflection.Assembly)?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="24fe1-188">Each type's <xref:System.Runtime.Loader.AssemblyLoadContext>, which can be obtained via the <xref:System.Runtime.Loader.AssemblyLoadContext.GetLoadContext(System.Reflection.Assembly)?displayProperty=nameWithType> function.</span></span>

<span data-ttu-id="24fe1-189">İki nesne verildiğinde `a` ve `b` hata ayıklayıcıda aşağıdakilerin değerlendirmesi yararlı olacaktır:</span><span class="sxs-lookup"><span data-stu-id="24fe1-189">Given two objects `a` and `b`, evaluating the following in the debugger will be helpful:</span></span>

```csharp
// In debugger look at each assembly's instance, Location, and FullName
a.GetType().Assembly
b.GetType().Assembly
// In debugger look at each AssemblyLoadContext's instance and name
System.Runtime.Loader.AssemblyLoadContext.GetLoadContext(a.GetType().Assembly)
System.Runtime.Loader.AssemblyLoadContext.GetLoadContext(b.GetType().Assembly)
```

### <a name="resolving-type-conversion-issues"></a><span data-ttu-id="24fe1-190">Tür dönüştürme sorunlarını çözme</span><span class="sxs-lookup"><span data-stu-id="24fe1-190">Resolving type conversion issues</span></span>

<span data-ttu-id="24fe1-191">Bu tür dönüştürme sorunlarını çözmek için iki tasarım deseni vardır.</span><span class="sxs-lookup"><span data-stu-id="24fe1-191">There are two design patterns for solving these type conversion issues.</span></span>

1. <span data-ttu-id="24fe1-192">Ortak paylaşılan türleri kullanın.</span><span class="sxs-lookup"><span data-stu-id="24fe1-192">Use common shared types.</span></span> <span data-ttu-id="24fe1-193">Bu paylaşılan tür, temel bir çalışma zamanı türü olabilir veya paylaşılan bir derlemede yeni bir paylaşılan tür oluşturulmasını içerebilir.</span><span class="sxs-lookup"><span data-stu-id="24fe1-193">This shared type can either be a primitive runtime type, or it can involve creating a new shared type in a shared assembly.</span></span>  <span data-ttu-id="24fe1-194">Genellikle paylaşılan tür, uygulama derlemesinde tanımlanan bir [arabirimdir](../../csharp/language-reference/keywords/interface.md) .</span><span class="sxs-lookup"><span data-stu-id="24fe1-194">Often the shared type is an [interface](../../csharp/language-reference/keywords/interface.md) defined in an application assembly.</span></span> <span data-ttu-id="24fe1-195">Ayrıca bkz: [Bağımlılıklar nasıl paylaşılır?](#how-are-dependencies-shared).</span><span class="sxs-lookup"><span data-stu-id="24fe1-195">See also: [How are dependencies shared?](#how-are-dependencies-shared).</span></span>

2. <span data-ttu-id="24fe1-196">Bir türden diğerine dönüştürmek için sıralama tekniklerini kullanın.</span><span class="sxs-lookup"><span data-stu-id="24fe1-196">Use marshaling techniques to convert from one type to another.</span></span>
