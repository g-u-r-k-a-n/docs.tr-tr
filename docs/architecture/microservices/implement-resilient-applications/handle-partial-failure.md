---
title: Kısmi hata işleme
description: Kısmi hataların sorunsuz bir şekilde nasıl işleneceğini öğrenin. Mikro hizmet tamamen işlevsel olmayabilir, ancak yine de yararlı bir iş yapabiliyor olabilir.
ms.date: 10/16/2018
ms.openlocfilehash: f00e5349df74b543deb6ac941c751cb130b3837c
ms.sourcegitcommit: 22be09204266253d45ece46f51cc6f080f2b3fd6
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 11/07/2019
ms.locfileid: "73732973"
---
# <a name="handle-partial-failure"></a><span data-ttu-id="2637b-104">Tanıtıcı kısmen hatası</span><span class="sxs-lookup"><span data-stu-id="2637b-104">Handle partial failure</span></span>

<span data-ttu-id="2637b-105">Mikro hizmet tabanlı uygulamalar gibi dağıtılmış sistemlerde, kısmi hata riski vardır.</span><span class="sxs-lookup"><span data-stu-id="2637b-105">In distributed systems like microservices-based applications, there's an ever-present risk of partial failure.</span></span> <span data-ttu-id="2637b-106">Örneğin, tek bir mikro hizmet/kapsayıcı başarısız olabilir veya kısa bir süre için yanıt veremeyebilir ya da tek bir VM veya sunucu kilitlenebilir.</span><span class="sxs-lookup"><span data-stu-id="2637b-106">For instance, a single microservice/container can fail or might not be available to respond for a short time, or a single VM or server can crash.</span></span> <span data-ttu-id="2637b-107">İstemciler ve hizmetler ayrı süreçler olduğundan, bir hizmet istemcinin isteğine zamanında yanıt veremeyebilir.</span><span class="sxs-lookup"><span data-stu-id="2637b-107">Since clients and services are separate processes, a service might not be able to respond in a timely way to a client’s request.</span></span> <span data-ttu-id="2637b-108">Hizmet aşırı yüklenmiş ve isteklere çok yavaş yanıt veriyor olabilir veya ağ sorunları nedeniyle kısa bir süre boyunca yalnızca erişilebilir olmayabilir.</span><span class="sxs-lookup"><span data-stu-id="2637b-108">The service might be overloaded and responding very slowly to requests or might simply not be accessible for a short time because of network issues.</span></span>

<span data-ttu-id="2637b-109">Örneğin, eShopOnContainers örnek uygulamasından Order details sayfasını göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="2637b-109">For example, consider the Order details page from the eShopOnContainers sample application.</span></span> <span data-ttu-id="2637b-110">Kullanıcı bir siparişi göndermeyi denediğinde sıralama mikro hizmeti yanıt vermezse (örneğin, istemci kodu zaman aşımı olmadan zaman uyumlu RPC 'ler kullanıyorsa), iş parçacıklarını süresiz olarak engeller Yanıt bekleniyor.</span><span class="sxs-lookup"><span data-stu-id="2637b-110">If the ordering microservice is unresponsive when the user tries to submit an order, a bad implementation of the client process (the MVC web application)—for example, if the client code were to use synchronous RPCs with no timeout—would block threads indefinitely waiting for a response.</span></span> <span data-ttu-id="2637b-111">Kötü bir kullanıcı deneyimi oluşturmanın yanı sıra, yanıt vermeyen her bekleme, bir iş parçacığını kullanır veya engeller ve iş parçacıkları son derece ölçeklenebilir uygulamalarda oldukça değerlidir.</span><span class="sxs-lookup"><span data-stu-id="2637b-111">Besides creating a bad user experience, every unresponsive wait consumes or blocks a thread, and threads are extremely valuable in highly scalable applications.</span></span> <span data-ttu-id="2637b-112">Engellenen çok sayıda iş parçacığı varsa, sonuçta uygulamanın çalışma zamanının iş parçacığı tükenmesine devam edebilir.</span><span class="sxs-lookup"><span data-stu-id="2637b-112">If there are many blocked threads, eventually the application’s runtime can run out of threads.</span></span> <span data-ttu-id="2637b-113">Bu durumda, Şekil 8-1 ' de gösterildiği gibi uygulama yalnızca kısmen yanıt vermemeye karşı genel olarak yanıt vermeyebilir.</span><span class="sxs-lookup"><span data-stu-id="2637b-113">In that case, the application can become globally unresponsive instead of just partially unresponsive, as shown in Figure 8-1.</span></span>

![Kısmi hataların gösterildiği diyagram.](./media/handle-partial-failure/partial-failures-diagram.png)

<span data-ttu-id="2637b-115">**Şekil 8-1**.</span><span class="sxs-lookup"><span data-stu-id="2637b-115">**Figure 8-1**.</span></span> <span data-ttu-id="2637b-116">Hizmet iş parçacığı kullanılabilirliğini etkileyen bağımlılıklardan dolayı kısmi arızalar</span><span class="sxs-lookup"><span data-stu-id="2637b-116">Partial failures because of dependencies that impact service thread availability</span></span>

<span data-ttu-id="2637b-117">Büyük bir mikro hizmet tabanlı uygulamada, özellikle de iç mikro hizmet etkileşiminin büyük bir kısmı zaman uyumlu HTTP çağrılarını temel alıyorsa (bir anti-model olarak kabul edilir), kısmi bir hata oluşabilir.</span><span class="sxs-lookup"><span data-stu-id="2637b-117">In a large microservices-based application, any partial failure can be amplified, especially if most of the internal microservices interaction is based on synchronous HTTP calls (which is considered an anti-pattern).</span></span> <span data-ttu-id="2637b-118">Gün başına milyonlarca gelen çağrı alan bir sistem hakkında düşünün.</span><span class="sxs-lookup"><span data-stu-id="2637b-118">Think about a system that receives millions of incoming calls per day.</span></span> <span data-ttu-id="2637b-119">Sisteminizde zaman uyumlu HTTP çağrılarının uzun zincirlerini temel alan hatalı bir tasarım varsa, bu gelen çağrılar birçok milyonlarca giden çağrıya (1:4 oranını varsayalım) zaman uyumlu bağımlılıklar olarak onlarca iç mikro hizmet ile sonuçlanabilir.</span><span class="sxs-lookup"><span data-stu-id="2637b-119">If your system has a bad design that's based on long chains of synchronous HTTP calls, these incoming calls might result in many more millions of outgoing calls (let’s suppose a ratio of 1:4) to dozens of internal microservices as synchronous dependencies.</span></span> <span data-ttu-id="2637b-120">Bu durum Şekil 8-2, özellikle de bir zinciri Başlatan bağımlılık #4 çağıran \#3 ' te gösterilmiştir.</span><span class="sxs-lookup"><span data-stu-id="2637b-120">This situation is shown in Figure 8-2, especially dependency \#3, that starts a chain, calling dependency #4.</span></span> <span data-ttu-id="2637b-121">çağıran #5.</span><span class="sxs-lookup"><span data-stu-id="2637b-121">which the calls #5.</span></span>

![Birden çok dağıtılmış bağımlılığı gösteren diyagram.](./media/handle-partial-failure/multiple-distributed-dependencies.png)

<span data-ttu-id="2637b-123">**Şekil 8-2**.</span><span class="sxs-lookup"><span data-stu-id="2637b-123">**Figure 8-2**.</span></span> <span data-ttu-id="2637b-124">Yanlış bir tasarıma sahip olmanın etkisi, HTTP isteklerinin uzun zincirlerine sahiptir</span><span class="sxs-lookup"><span data-stu-id="2637b-124">The impact of having an incorrect design featuring long chains of HTTP requests</span></span>

<span data-ttu-id="2637b-125">Her bağımlılığın mükemmel bir kullanılabilirliği olsa bile, dağıtılmış ve bulut tabanlı bir sistemde aralıklı hata garanti edilir.</span><span class="sxs-lookup"><span data-stu-id="2637b-125">Intermittent failure is guaranteed in a distributed and cloud-based system, even if every dependency itself has excellent availability.</span></span> <span data-ttu-id="2637b-126">Göz önünde bulundurmanız gereken bir olgu vardır.</span><span class="sxs-lookup"><span data-stu-id="2637b-126">It's a fact you need to consider.</span></span>

<span data-ttu-id="2637b-127">Hata toleransını güvence altına almak için tasarlayamazsınız ve daha küçük bir küçüklükte olabilir.</span><span class="sxs-lookup"><span data-stu-id="2637b-127">If you do not design and implement techniques to ensure fault tolerance, even small downtimes can be amplified.</span></span> <span data-ttu-id="2637b-128">Örnek olarak, her biri kullanılabilirliği% 99,99 olan 50 bağımlılık, bu Ripple etkisi nedeniyle her ay birkaç saatlik kapalı kalma süresine neden olur.</span><span class="sxs-lookup"><span data-stu-id="2637b-128">As an example, 50 dependencies each with 99.99% of availability would result in several hours of downtime each month because of this ripple effect.</span></span> <span data-ttu-id="2637b-129">Yüksek bir istek hacmi işlenirken bir mikro hizmet bağımlılığı başarısız olduğunda, bu hata her bir hizmette bulunan tüm kullanılabilir istek iş parçacıklarını hızla doygunluğu ve tüm uygulamayı kilitlebilirler.</span><span class="sxs-lookup"><span data-stu-id="2637b-129">When a microservice dependency fails while handling a high volume of requests, that failure can quickly saturate all available request threads in each service and crash the whole application.</span></span>

![Mikro hizmetlerde oluşan kısmen hatalı hata gösteren diyagram.](./media/handle-partial-failure/partial-failure-amplified-microservices.png)

<span data-ttu-id="2637b-131">**Şekil 8-3**.</span><span class="sxs-lookup"><span data-stu-id="2637b-131">**Figure 8-3**.</span></span> <span data-ttu-id="2637b-132">Zaman uyumlu HTTP çağrılarının uzun zincirleriyle mikro hizmetlerden oluşan kısmi hata</span><span class="sxs-lookup"><span data-stu-id="2637b-132">Partial failure amplified by microservices with long chains of synchronous HTTP calls</span></span>

<span data-ttu-id="2637b-133">Bu sorunu en aza indirmek için, [zaman uyumsuz mikro hizmet tümleştirmesi mikro hizmetin bağımsız çalışma sınırı 'i zorlayacağı](../architect-microservice-container-applications/communication-in-microservice-architecture.md#asynchronous-microservice-integration-enforces-microservices-autonomy)için bu kılavuz, iç mikro hizmetlerde zaman uyumsuz iletişim kullanmanızı önerir.</span><span class="sxs-lookup"><span data-stu-id="2637b-133">To minimize this problem, in the section [Asynchronous microservice integration enforce microservice’s autonomy](../architect-microservice-container-applications/communication-in-microservice-architecture.md#asynchronous-microservice-integration-enforces-microservices-autonomy), this guide encourages you to use asynchronous communication across the internal microservices.</span></span>

<span data-ttu-id="2637b-134">Ayrıca, mikro hizmetlerinizi ve istemci uygulamalarınızı kısmi hataların (yani dayanıklı mikro hizmetler ve istemci uygulamaları oluşturmak için) tasarlamanızı da öneririz.</span><span class="sxs-lookup"><span data-stu-id="2637b-134">In addition, it's essential that you design your microservices and client applications to handle partial failures—that is, to build resilient microservices and client applications.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="2637b-135">[Önceki](index.md)
>[İleri](partial-failure-strategies.md)</span><span class="sxs-lookup"><span data-stu-id="2637b-135">[Previous](index.md)
[Next](partial-failure-strategies.md)</span></span>
