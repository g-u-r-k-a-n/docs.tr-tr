---
ms.openlocfilehash: 8b804d23247b95381f3ff83bc12c32215a420fb6
ms.sourcegitcommit: e02d17b2cf9c1258dadda4810a5e6072a0089aee
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 07/01/2020
ms.locfileid: "85614955"
---
### <a name="wpf-appdomain-shutdown-handling-may-now-call-dispatcherinvoke-in-cleanup-of-weak-events"></a><span data-ttu-id="c4d4f-101">WPF AppDomain kapatılmasını Işleme artık Dispatcher. zayıf olayların temizlenmesi sırasında Invoke çağrısı yapabilirsiniz</span><span class="sxs-lookup"><span data-stu-id="c4d4f-101">WPF AppDomain Shutdown Handling May Now Call Dispatcher.Invoke in Cleanup of Weak Events</span></span>

#### <a name="details"></a><span data-ttu-id="c4d4f-102">Ayrıntılar</span><span class="sxs-lookup"><span data-stu-id="c4d4f-102">Details</span></span>

<span data-ttu-id="c4d4f-103">.NET Framework 4.7.1 ve önceki sürümlerde WPF, <xref:System.Windows.Threading.Dispatcher?displayProperty=nameWithType> uygulama etki alanı kapatması sırasında .net Sonlandırıcı iş parçacığı üzerinde bir oluşturur.</span><span class="sxs-lookup"><span data-stu-id="c4d4f-103">In .NET Framework 4.7.1 and earlier versions, WPF potentially creates a <xref:System.Windows.Threading.Dispatcher?displayProperty=nameWithType> on the .NET finalizer thread during AppDomain shutdown.</span></span>  <span data-ttu-id="c4d4f-104">Bu, zayıf olayların iş parçacığı durumunu algılayan şekilde temizliği yaparak .NET Framework 4.7.2 ve sonraki sürümlerde düzeltildi.</span><span class="sxs-lookup"><span data-stu-id="c4d4f-104">This was fixed in .NET Framework 4.7.2 and later versions by making the cleanup of weak events thread-aware.</span></span>  <span data-ttu-id="c4d4f-105">Bu nedenle, WPF <xref:System.Windows.Threading.Dispatcher.Invoke%2A?displayProperty=nameWithType> temizlik işlemini tamamlamaya yönelik çağrı gösterebilir. Belirli uygulamalarda, sonlandırıcısı zamanlamadaki bu değişiklik, AppDomain veya işlem kapatması sırasında özel durumlara neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="c4d4f-105">Due to this, WPF may call <xref:System.Windows.Threading.Dispatcher.Invoke%2A?displayProperty=nameWithType> to complete the cleanup process.In certain applications, this change in finalizer timing can potentially cause exceptions during AppDomain or process shutdown.</span></span>  <span data-ttu-id="c4d4f-106">Bu genel olarak, işlem veya AppDomain kapanmadan önce çalışan iş parçacıklarında çalışan sevkiyatcıları doğru şekilde kapatmayan uygulamalarda görülür.</span><span class="sxs-lookup"><span data-stu-id="c4d4f-106">This is generally seen in applications that do not correctly shut down dispatchers running on worker threads prior to process or AppDomain shutdown.</span></span>  <span data-ttu-id="c4d4f-107">Bu tür uygulamalar, sevkiyatların kullanım ömrünü doğru bir şekilde yönetebilmeleri için dikkatli olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="c4d4f-107">Such applications should take care to properly manage the lifetime of dispatchers.</span></span>

#### <a name="suggestion"></a><span data-ttu-id="c4d4f-108">Öneri</span><span class="sxs-lookup"><span data-stu-id="c4d4f-108">Suggestion</span></span>

<span data-ttu-id="c4d4f-109">.NET Framework 4.7.2 ve sonraki sürümlerde geliştiriciler, temizleme değişikliği nedeniyle ortaya çıkabilecek zamanlama sorunlarını gidermek (ancak ortadan kaldırmak) için bu sorunu devre dışı bırakabilir. Temizlemede değişikliği devre dışı bırakmak için aşağıdaki AppContext bayrağını kullanın.</span><span class="sxs-lookup"><span data-stu-id="c4d4f-109">In .NET Framework 4.7.2 and later versions, developers can disable this fix in order to help alleviate (but not eliminate) timing issues that may occur due to the cleanup change.To disable the change in cleanup, use the following AppContext flag.</span></span><pre><code class="lang-xml">&lt;configuration&gt;&#13;&#10;&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.MS.Internal.DoNotInvokeInWeakEventTableShutdownListener=true&quot;/&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;&lt;/configuration&gt;&#13;&#10;</code></pre>

| <span data-ttu-id="c4d4f-110">Name</span><span class="sxs-lookup"><span data-stu-id="c4d4f-110">Name</span></span>    | <span data-ttu-id="c4d4f-111">Değer</span><span class="sxs-lookup"><span data-stu-id="c4d4f-111">Value</span></span>       |
|:--------|:------------|
| <span data-ttu-id="c4d4f-112">Kapsam</span><span class="sxs-lookup"><span data-stu-id="c4d4f-112">Scope</span></span>   | <span data-ttu-id="c4d4f-113">Edge</span><span class="sxs-lookup"><span data-stu-id="c4d4f-113">Edge</span></span>        |
| <span data-ttu-id="c4d4f-114">Sürüm</span><span class="sxs-lookup"><span data-stu-id="c4d4f-114">Version</span></span> | <span data-ttu-id="c4d4f-115">4.7.2</span><span class="sxs-lookup"><span data-stu-id="c4d4f-115">4.7.2</span></span>       |
| <span data-ttu-id="c4d4f-116">Tür</span><span class="sxs-lookup"><span data-stu-id="c4d4f-116">Type</span></span>    | <span data-ttu-id="c4d4f-117">Yeniden Hedefleme</span><span class="sxs-lookup"><span data-stu-id="c4d4f-117">Retargeting</span></span> |
