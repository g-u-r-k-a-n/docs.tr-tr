---
title: Üretimde çalışırken geçiş stratejileri
description: ASP.NET MVC 'den büyük bir uygulamayı tek seferde ASP.NET Core geçiremeyebilir. Bir uygulamayı çalışırken ve mevcut kullanıcılar için üretimde ASP.NET Core geçirmek için bazı stratejiler öğrenin.
author: ardalis
ms.date: 11/13/2020
ms.openlocfilehash: 9b5d031165773c4da536bdc5478836a1b00436a1
ms.sourcegitcommit: b5d2290673e1c91260c9205202dd8b95fbab1a0b
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/01/2021
ms.locfileid: "106122735"
---
# <a name="strategies-for-migrating-while-running-in-production"></a><span data-ttu-id="77695-104">Üretimde çalışırken geçiş stratejileri</span><span class="sxs-lookup"><span data-stu-id="77695-104">Strategies for migrating while running in production</span></span>

<span data-ttu-id="77695-105">Birçok ekibin .NET Core 'a geçirmeyi planlayabilecekleri .NET Framework uygulamaları vardır ancak uygulama, geçişin önemli miktarda tamamlanmasını gerektirdiğinden büyük bir süre gerektirir.</span><span class="sxs-lookup"><span data-stu-id="77695-105">Many teams have .NET Framework apps they plan to migrate to .NET Core, but the app is so large that the migration requires a significant amount of time to complete.</span></span> <span data-ttu-id="77695-106">Geçiş işlemi parça parça yaptığı sırada orijinal uygulamanın etkin olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="77695-106">The original app needs to live on while the migration is done piece by piece.</span></span> <span data-ttu-id="77695-107">Uygulamanın eski ve yeni sürümlerinin yan yana birlikte çalışması veya eski sürümün, en az bir şekilde, bu uygulamayı koparmadan yerinde geçirilmesi için bir yol olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="77695-107">There needs to be a way for the old and new versions of the app to work together side-by-side, or for the old version to be migrated in-place, at least some of the way, without breaking it.</span></span> <span data-ttu-id="77695-108">Takımlar bu hedefleri desteklemek için birçok farklı strateji kullanabilir.</span><span class="sxs-lookup"><span data-stu-id="77695-108">Teams can employ many different strategies to support these goals.</span></span>

## <a name="refactor-the-net-framework-solution"></a><span data-ttu-id="77695-109">.NET Framework çözümünü yeniden düzenleme</span><span class="sxs-lookup"><span data-stu-id="77695-109">Refactor the .NET Framework solution</span></span>

<span data-ttu-id="77695-110">.NET Core 'a bir .NET Framework uygulamasının bağlantı noktasını, .NET Core ile daha iyi çalışacak şekilde yeniden düzenleme konusunda planladığınız bir başlamak iyi bir yerdir.</span><span class="sxs-lookup"><span data-stu-id="77695-110">A good place to start if you plan to port a .NET Framework app to .NET Core is to refactor it to work better with .NET Core.</span></span> <span data-ttu-id="77695-111">Bu, tek tek sınıf .NET Standard kitaplıklarının, ASP.NET MVC projelerinizden ve bu sınıf kitaplıklarında çok sayıda mantığa göre güncelleştirilmesi ve bu nesnelerin çok sayıda mantığını güncellemek anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="77695-111">This means updating individual class libraries to target .NET Standard and moving as much logic out of your ASP.NET MVC projects and into these class libraries.</span></span> <span data-ttu-id="77695-112">.NET Standard kitaplıklarında bulunan herhangi bir kod, hem .NET Framework hem de .NET Core uygulamalarına (Bu adımın bir geçişin parçası olarak değerli olması) hemen kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="77695-112">Any code you have in .NET Standard libraries is immediately usable from both .NET Framework to .NET Core apps, which is why this step is so valuable as part of a migration.</span></span>

<span data-ttu-id="77695-113">Yeniden düzenleme yaparken, daha iyi yeniden düzenleme temellerini kullandığınızdan emin olun.</span><span class="sxs-lookup"><span data-stu-id="77695-113">When refactoring, make sure you're following good refactoring fundamentals.</span></span> <span data-ttu-id="77695-114">Örneğin, yeniden düzenlemeye başlamadan önce sistemin ne yaptığını doğrulayan testler oluşturun.</span><span class="sxs-lookup"><span data-stu-id="77695-114">For example, create tests that verify what the system does before you start refactoring.</span></span> <span data-ttu-id="77695-115">Sistemin davranışını değiştirmediğinizi onaylamak için işiniz bittiğinde bu testleri çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="77695-115">Run these tests when you're done to confirm you didn't change the system's behavior.</span></span> <span data-ttu-id="77695-116">Güvenebildiğiniz bir otomatik test paketiniz yoksa sisteme karakter seçme testleri eklemeniz gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="77695-116">You may need to add characterization tests to the system if you don't already have a good suite of automated tests you can rely on.</span></span>

## <a name="extract-front-end-assets-to-a-cdn"></a><span data-ttu-id="77695-117">Ön uç varlıkları CDN 'ye Ayıkla</span><span class="sxs-lookup"><span data-stu-id="77695-117">Extract front-end assets to a CDN</span></span>

<span data-ttu-id="77695-118">.NET Framework uygulamalarınız, betikler, CSS dosyaları veya görüntüler gibi çok sayıda statik varlık içeriyorsa, bunları ayrı bir CDN 'e geçirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="77695-118">If your .NET Framework apps include a lot of static assets, like scripts, CSS files, or images, you may be able to migrate these to a separate CDN.</span></span> <span data-ttu-id="77695-119">Ardından, mevcut uygulamayı bu varlıklar için CDN bağlantılarına başvuracak şekilde güncelleştirin.</span><span class="sxs-lookup"><span data-stu-id="77695-119">Then, update the existing app to reference the CDN links for these assets.</span></span> <span data-ttu-id="77695-120">Uygulamayı .NET Core 'a aktardığınızda, bu statik dosyalar geçişin bir parçası olmayacaktır ve yalnızca ASP.NET Core uygulamasındaki CDN 'den başvurmaya devam edersiniz.</span><span class="sxs-lookup"><span data-stu-id="77695-120">When you port the app to .NET Core, these static files won't be part of the migration, and you'll just continue referencing them from the CDN in the ASP.NET Core app.</span></span>

## <a name="extract-and-migrate-individual-microservices"></a><span data-ttu-id="77695-121">Tek tek mikro hizmetleri ayıklama ve geçirme</span><span class="sxs-lookup"><span data-stu-id="77695-121">Extract and migrate individual microservices</span></span>

<span data-ttu-id="77695-122">Büyük .NET Framework uygulamalar, tek tek geçirilebilecek ayrı ön uç sistemlerinden oluşmuş olabilir.</span><span class="sxs-lookup"><span data-stu-id="77695-122">Large .NET Framework apps may already be comprised of separate front-end systems that can be migrated individually.</span></span> <span data-ttu-id="77695-123">Ya da bir mikro hizmet mimarisine geçiş için aday olabilir. bu uygulamalar, bazı mevcut ASP.NET MVC uygulamalarının yeni ASP.NET Core mikro hizmet uygulamalarına kullanıma hazır olmasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="77695-123">Or they may be candidates for migration to a microservices architecture, with some pieces of existing ASP.NET MVC apps being pulled out into new ASP.NET Core microservice implementations.</span></span> <span data-ttu-id="77695-124">Mikro hizmetler hakkında daha fazla bilgi için bkz. ilişkili eKitap, [.net mikro hizmetleri: Kapsayıcılı .NET uygulamaları Için mimari](https://aka.ms/microservicesebook).</span><span class="sxs-lookup"><span data-stu-id="77695-124">You can learn more about microservices in the associated ebook, [.NET Microservices: Architecture for Containerized .NET Applications](https://aka.ms/microservicesebook).</span></span>

<span data-ttu-id="77695-125">Örneğin, mevcut uygulamanın kullanıcı oturumu açma ve kayıt ile ilgili olarak kullandığı bir özellikler kümesi olabilir.</span><span class="sxs-lookup"><span data-stu-id="77695-125">For example, the existing app might have a set of features it uses related to user sign-in and registration.</span></span> <span data-ttu-id="77695-126">Bunlar, ASP.NET Core kullanılarak oluşturulup dağıtılabilir ve sonra eski .NET Framework uygulamasıyla tümleştirilebilen ayrı bir mikro hizmete geçirilebilir.</span><span class="sxs-lookup"><span data-stu-id="77695-126">These could be migrated to a separate microservice, which could be built and deployed using ASP.NET Core and then integrated into the legacy .NET Framework app.</span></span> <span data-ttu-id="77695-127">Daha sonra, uygulamanın tek bir kullanıcının alışveriş sepetini izlemeye ayrılmış birkaç sayfası olabilir.</span><span class="sxs-lookup"><span data-stu-id="77695-127">Next, the app might have a few pages dedicated to tracking the individual user's shopping cart.</span></span> <span data-ttu-id="77695-128">Bu sayfalar ayrıca kendi ayrı mikro hizmetlerini kullanıma hazır hale gelebilir ve mevcut uygulamayla birlikte tümleştirilir.</span><span class="sxs-lookup"><span data-stu-id="77695-128">These pages could also be pulled out into their own separate microservice and again integrated into the existing app.</span></span> <span data-ttu-id="77695-129">Bu şekilde, özgün .NET Framework uygulaması üretimde çalışmaya devam eder, ancak modernlanmış .NET Core mikro hizmetlerinden daha fazla ve daha fazlasını sunar.</span><span class="sxs-lookup"><span data-stu-id="77695-129">In this way, the original .NET Framework app continues running in production, but with more and more of its features coming from modernized .NET Core microservices.</span></span>

## <a name="deploy-multiple-versions-of-the-app-side-by-side-in-iis"></a><span data-ttu-id="77695-130">IIS 'de uygulamanın birden çok sürümünü yan yana dağıtma</span><span class="sxs-lookup"><span data-stu-id="77695-130">Deploy multiple versions of the app side-by-side in IIS</span></span>

<span data-ttu-id="77695-131">Ana bilgisayar üstbilgileri ve yeniden yönlendirmeleri bileşimini kullanarak, var olan bir ASP.NET MVC uygulaması aynı IIS sunucusunda ASP.NET Core bir uygulamayla yan yana çalışacak şekilde yapılandırılabilir.</span><span class="sxs-lookup"><span data-stu-id="77695-131">Using a combination of host headers and redirects, an existing ASP.NET MVC app can be configured to run side by side with an ASP.NET Core app on the same IIS server.</span></span> <span data-ttu-id="77695-132">Tek tek denetleyiciler gibi işlevsellik parçalarının ASP.NET Core, yolları ve URL 'Leri, ASP.NET Core Web sitesini veya alt uygulamayı hedefleyecek şekilde IIS 'de eşlenir (IIS sanal dizinleri ASP.NET Core uygulamalarıyla desteklenmez).</span><span class="sxs-lookup"><span data-stu-id="77695-132">As pieces of functionality, such as individual controllers, are ported to ASP.NET Core, their routes and URLs are mapped within IIS to target the ASP.NET Core web site or sub-application (IIS virtual directories aren't supported with ASP.NET Core apps).</span></span> <span data-ttu-id="77695-133">ASP.NET Core bir uygulama, bir IIS alt uygulaması (alt uygulama) olarak barındırılabilir.</span><span class="sxs-lookup"><span data-stu-id="77695-133">An ASP.NET Core app can be hosted as an IIS sub-application (sub-app).</span></span> <span data-ttu-id="77695-134">Alt uygulamanın yolu, kök uygulamanın URL 'sinin bir parçası haline gelir.</span><span class="sxs-lookup"><span data-stu-id="77695-134">The sub-app's path becomes part of the root app's URL.</span></span>

## <a name="apply-the-strangler-pattern"></a><span data-ttu-id="77695-135">Strangler modelini uygulama</span><span class="sxs-lookup"><span data-stu-id="77695-135">Apply the Strangler pattern</span></span>

<span data-ttu-id="77695-136">Büyük ASP.NET MVC uygulamaları, işlevselliğin parçalarını artımlı olarak geçirerek yeni bir ASP.NET Core uygulamayla aşamalı olarak değiştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="77695-136">Large ASP.NET MVC apps can be gradually replaced with a new ASP.NET Core app by incrementally migrating pieces of functionality.</span></span> <span data-ttu-id="77695-137">Buna bir yaklaşımda, Strangler Vines 'nin adı ve sonunda ağaçları koparmış olan [Strangler deseninin](/azure/architecture/patterns/strangler)adı verilir.</span><span class="sxs-lookup"><span data-stu-id="77695-137">One approach to this is called the [strangler pattern](/azure/architecture/patterns/strangler), named for strangler vines that strangle and eventually tear down trees.</span></span> <span data-ttu-id="77695-138">Bu yaklaşım, ilk olarak mevcut çözümün en üstünde bir façlade katmanını uygulamaya dayanır.</span><span class="sxs-lookup"><span data-stu-id="77695-138">This approach relies on first implementing a facade layer over top of the existing solution.</span></span> <span data-ttu-id="77695-139">Bu façlade, soruna yönelik yeni yaklaşım veya bir API ağ geçidi gibi raf dışı bir çözüm kullanılarak oluşturulmalıdır.</span><span class="sxs-lookup"><span data-stu-id="77695-139">This facade should be built using the new approach to the problem, or an off-the-shelf solution such as an API gateway.</span></span>

<span data-ttu-id="77695-140">Façlade olduktan sonra, bunun bir kısmını yeni bir ASP.NET Core uygulamasına yönlendirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="77695-140">Once the facade is in place, you can route part of it to a new ASP.NET Core app.</span></span> <span data-ttu-id="77695-141">.NET Core 'a özgün .NET Framework uygulamasının daha fazlasını yaptığınızda, façlade katmanını uygun şekilde güncelleştirmeye devam edersiniz ve bu da daha fazla façladem işlevinin yeni sisteme gönderilmesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="77695-141">As you port more of the original .NET Framework app to .NET Core, you continue to update the facade layer accordingly, sending more of the facade's total functionality to the new system.</span></span> <span data-ttu-id="77695-142">Şekil 3-5, zaman içinde yabangler deseninin ilerlemesini gösterir.</span><span class="sxs-lookup"><span data-stu-id="77695-142">Figure 3-5 shows the strangler pattern progression over time.</span></span>

![Şekil 3-5](media/Figure3-5.png)

<span data-ttu-id="77695-144">**Şekil 3-5.**</span><span class="sxs-lookup"><span data-stu-id="77695-144">**Figure 3-5.**</span></span> <span data-ttu-id="77695-145">Zaman içinde Yabangler deseninin.</span><span class="sxs-lookup"><span data-stu-id="77695-145">The Strangler pattern over time.</span></span>

<span data-ttu-id="77695-146">Sonuç olarak, façlade katmanının tamamı yeni, modern uygulamaya karşılık gelir.</span><span class="sxs-lookup"><span data-stu-id="77695-146">Eventually, the entire facade layer corresponds to the new, modern implementation.</span></span> <span data-ttu-id="77695-147">Bu noktada, hem eski sistem hem de yüz katman devre dışı bırakılabilir.</span><span class="sxs-lookup"><span data-stu-id="77695-147">At this point, both the legacy system and the face layer can be retired.</span></span>

## <a name="multi-targeting-approaches"></a><span data-ttu-id="77695-148">Çoklu hedefleme yaklaşımları</span><span class="sxs-lookup"><span data-stu-id="77695-148">Multi-targeting approaches</span></span>

<span data-ttu-id="77695-149">.NET Framework hedef olan büyük uygulamalar, her bir çerçeve için Çoklu hedefleme ve ayrı kod yolları kullanılarak zaman içinde ASP.NET Core geçirilebilir.</span><span class="sxs-lookup"><span data-stu-id="77695-149">Large apps that target .NET Framework may be migrated to ASP.NET Core over time by using multi-targeting and separate code paths for each framework.</span></span> <span data-ttu-id="77695-150">Örneğin, her iki ortamda da çalışması gereken kod, farklı işlevler uygulamak veya .NET Framework .NET Core 'da çalıştırıldığında farklı bağımlılıklar kullanmak için [Önişlemci `#if` ](../../csharp/language-reference/preprocessor-directives.md#conditional-compilation) yönergeleri ile değiştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="77695-150">For example, code that must run in both environments could be modified with [preprocessor `#if`](../../csharp/language-reference/preprocessor-directives.md#conditional-compilation) directives to implement different functionality or use different dependencies when run in .NET Framework versus .NET Core.</span></span> <span data-ttu-id="77695-151">Başka bir seçenek de proje dosyalarını, hedeflenen Framework 'ü temel alan farklı dosya kümelerini içerecek şekilde değiştirmektir.</span><span class="sxs-lookup"><span data-stu-id="77695-151">Another option is to modify project files to include different sets of files based on which framework is being targeted.</span></span> <span data-ttu-id="77695-152">Proje dosyaları, `*.core.cs` hedeflenen çerçeveye göre farklı kaynak dosya kümelerini dahil etmek için gibi farklı glob desenleri kullanabilir.</span><span class="sxs-lookup"><span data-stu-id="77695-152">Project files can use different globbing patterns, such as `*.core.cs`, to include different sets of source files depending on the framework being targeted.</span></span> <span data-ttu-id="77695-153">Genellikle yalnızca birden çok Web uygulaması tarafından kullanılacak kitaplıklar için bu yaklaşımı takip edersiniz.</span><span class="sxs-lookup"><span data-stu-id="77695-153">Typically you only follow this approach for libraries that will be consumed by multiple web apps.</span></span> <span data-ttu-id="77695-154">Web uygulamalarının kendisi için, iki ayrı projenin olması genellikle daha iyidir.</span><span class="sxs-lookup"><span data-stu-id="77695-154">For the web apps themselves, it's generally better to have two separate projects.</span></span>

<span data-ttu-id="77695-155">Bu teknikler, tek bir ortak kod temelinin, yeni işlevsellik eklendiğinde ve (bazı parçalar) .NET Core kullanımı dışında tutulmasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="77695-155">These techniques allow a single common codebase to be maintained while new functionality is added and (parts of) the app are ported to use .NET Core.</span></span>

## <a name="summary"></a><span data-ttu-id="77695-156">Özet</span><span class="sxs-lookup"><span data-stu-id="77695-156">Summary</span></span>

<span data-ttu-id="77695-157">Genellikle, büyük ASP.NET MVC ve Web API uygulamaları her seferinde ASP.NET Core değil, ancak zaman içinde artımlı olarak geçirilir.</span><span class="sxs-lookup"><span data-stu-id="77695-157">Frequently, large ASP.NET MVC and Web API apps won't be ported to ASP.NET Core all at once, but will migrate incrementally over time.</span></span> <span data-ttu-id="77695-158">Bu bölümde, bu artımlı geçişi gerçekleştirmek için çeşitli stratejiler sunulmaktadır.</span><span class="sxs-lookup"><span data-stu-id="77695-158">This section offers several strategies for performing this incremental migration.</span></span> <span data-ttu-id="77695-159">Kuruluşunuz ve uygulamanız için en iyi şekilde çalışacak olan birini seçin.</span><span class="sxs-lookup"><span data-stu-id="77695-159">Choose the one(s) that will work best for your organization and app.</span></span>

## <a name="references"></a><span data-ttu-id="77695-160">Başvurular</span><span class="sxs-lookup"><span data-stu-id="77695-160">References</span></span>

- [<span data-ttu-id="77695-161">.NET mikro hizmetleri: Kapsayıcılı .NET uygulamaları için mimari</span><span class="sxs-lookup"><span data-stu-id="77695-161">.NET Microservices: Architecture for Containerized .NET Applications</span></span>](https://aka.ms/microservicesebook)
- [<span data-ttu-id="77695-162">eShopOnContainers başvuru mikro hizmetleri uygulaması</span><span class="sxs-lookup"><span data-stu-id="77695-162">eShopOnContainers Reference Microservices Application</span></span>](https://github.com/dotnet-architecture/eShopOnContainers)
- [<span data-ttu-id="77695-163">IIS ile Windows üzerinde ASP.NET Core barındırma</span><span class="sxs-lookup"><span data-stu-id="77695-163">Host ASP.NET Core on Windows with IIS</span></span>](/aspnet/core/host-and-deploy/iis/)
- [<span data-ttu-id="77695-164">Strangler düzeni</span><span class="sxs-lookup"><span data-stu-id="77695-164">Strangler pattern</span></span>](/azure/architecture/patterns/strangler)

>[!div class="step-by-step"]
><span data-ttu-id="77695-165">[Önceki](understand-update-dependencies.md) 
> [Sonraki](example-migration-eshop.md)</span><span class="sxs-lookup"><span data-stu-id="77695-165">[Previous](understand-update-dependencies.md)
[Next](example-migration-eshop.md)</span></span>
